<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å…«æœˆå­¦ä¹ è®¡åˆ’</title>
      <link href="/2022/08/01/StudyPlan2208/"/>
      <url>/2022/08/01/StudyPlan2208/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>å­¦ä¹ çŸ¥è¯†ç‚¹</th><th>è®¡åˆ’å®Œæˆæ—¶é—´</th><th>å®Œæˆç¨‹åº¦</th></tr></thead><tbody><tr><td>Redis</td><td>8-7</td><td></td></tr><tr><td>Spring</td><td>8-14</td><td></td></tr><tr><td>SpringMVC</td><td>8-20</td><td></td></tr><tr><td>Dubbo</td><td>8-23</td><td></td></tr><tr><td>ZooKeeper</td><td>8-25</td><td></td></tr><tr><td>SpringBoot</td><td>8-28</td><td></td></tr><tr><td>SpringCloud</td><td>8-31</td><td></td></tr><tr><td>RocketMQ</td><td>çœ‹æƒ…å†µ</td><td></td></tr><tr><td>é¢„è®¡ä¹æœˆæ•´ç†é¡¹ç›®</td><td></td><td></td></tr></tbody></table><span id="more"></span>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ è®¡åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœˆåº¦å­¦ä¹ è®¡åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ƒæœˆå­¦ä¹ è®¡åˆ’</title>
      <link href="/2022/07/01/StudyPlan2207/"/>
      <url>/2022/07/01/StudyPlan2207/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>å­¦ä¹ çŸ¥è¯†ç‚¹</th><th>è®¡åˆ’å®Œæˆæ—¶é—´</th><th>å®Œæˆç¨‹åº¦</th></tr></thead><tbody><tr><td>é“¾è¡¨ç®—æ³•</td><td>7-5</td><td>ğŸš©</td></tr><tr><td>æ•°ç»„ç®—æ³•</td><td>7-10</td><td></td></tr><tr><td>äºŒå‰æ ‘ç®—æ³•</td><td>7-17</td><td></td></tr><tr><td>å›¾ç®—æ³•ä»¥åŠæ•°æ®ç»“æ„</td><td>7-24</td><td></td></tr><tr><td>åŠ¨æ€è§„åˆ’ä»¥åŠæš´åŠ›æœç´¢ç­‰å¸¸ç”¨ç®—æ³•æŠ€å·§</td><td>7-31</td><td></td></tr></tbody></table><span id="more"></span><table><thead><tr><th>å›é¡¾çŸ¥è¯†ç‚¹</th><th>è®¡åˆ’å‘¨æœŸ</th><th>å®Œæˆç¨‹åº¦</th></tr></thead><tbody><tr><td>Redis</td><td>2å¤©</td><td></td></tr><tr><td>Spring</td><td>2å¤©</td><td></td></tr><tr><td>SpringMVC</td><td>2å¤©</td><td></td></tr><tr><td>Dubbo</td><td>2å¤©</td><td></td></tr><tr><td>ZooKeeper</td><td>1å¤©</td><td></td></tr><tr><td>SpringBoot</td><td>1å¤©</td><td></td></tr><tr><td>RocketMQ</td><td>2å¤©</td><td></td></tr><tr><td>SpringCloud</td><td>3å¤©</td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ è®¡åˆ’ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœˆåº¦å­¦ä¹ è®¡åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„ç›´å¾„</title>
      <link href="/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(2)/"/>
      <url>/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(2)/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡ä¹Ÿå¯èƒ½ä¸ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®šäºŒå‰æ ‘</p><pre><code>      1     / \    2   3   / \       4   5    </code></pre><p>è¿”å› 3, å®ƒçš„é•¿åº¦æ˜¯è·¯å¾„ [4,2,1,3] æˆ–è€… [5,2,1,3]ã€‚</p><span id="more"></span><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. äºŒå‰æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><p>è¿™é“é¢˜å’Œæ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å¾ˆç±»ä¼¼ï¼Œåªæ˜¯å¤šä¸€ä¸ªåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹å·¦å³å­æ ‘é•¿åº¦ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">diameter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        maxDepth(root);</span><br><span class="line">        <span class="keyword">return</span> diameter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMaxDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightMaxDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line"></span><br><span class="line">        diameter = Math.max(diameter, leftMaxDepth + rightMaxDepth);</span><br><span class="line">        <span class="keyword">return</span> Math.max(leftMaxDepth, rightMaxDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„ç›´å¾„</title>
      <link href="/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(3)/"/>
      <url>/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(3)/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡ä¹Ÿå¯èƒ½ä¸ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®šäºŒå‰æ ‘</p><pre><code>      1     / \    2   3   / \       4   5    </code></pre><p>è¿”å› 3, å®ƒçš„é•¿åº¦æ˜¯è·¯å¾„ [4,2,1,3] æˆ–è€… [5,2,1,3]ã€‚</p><span id="more"></span><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. äºŒå‰æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><p>è¿™é“é¢˜å’Œæ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å¾ˆç±»ä¼¼ï¼Œåªæ˜¯å¤šä¸€ä¸ªåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹å·¦å³å­æ ‘é•¿åº¦ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">diameter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        maxDepth(root);</span><br><span class="line">        <span class="keyword">return</span> diameter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMaxDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightMaxDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line"></span><br><span class="line">        diameter = Math.max(diameter, leftMaxDepth + rightMaxDepth);</span><br><span class="line">        <span class="keyword">return</span> Math.max(leftMaxDepth, rightMaxDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„ç›´å¾„</title>
      <link href="/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(4)/"/>
      <url>/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(4)/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡ä¹Ÿå¯èƒ½ä¸ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®šäºŒå‰æ ‘</p><pre><code>      1     / \    2   3   / \       4   5    </code></pre><p>è¿”å› 3, å®ƒçš„é•¿åº¦æ˜¯è·¯å¾„ [4,2,1,3] æˆ–è€… [5,2,1,3]ã€‚</p><span id="more"></span><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. äºŒå‰æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><p>è¿™é“é¢˜å’Œæ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å¾ˆç±»ä¼¼ï¼Œåªæ˜¯å¤šä¸€ä¸ªåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹å·¦å³å­æ ‘é•¿åº¦ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">diameter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        maxDepth(root);</span><br><span class="line">        <span class="keyword">return</span> diameter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMaxDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightMaxDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line"></span><br><span class="line">        diameter = Math.max(diameter, leftMaxDepth + rightMaxDepth);</span><br><span class="line">        <span class="keyword">return</span> Math.max(leftMaxDepth, rightMaxDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„ç›´å¾„</title>
      <link href="/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(5)/"/>
      <url>/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC%20(5)/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡ä¹Ÿå¯èƒ½ä¸ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®šäºŒå‰æ ‘</p><pre><code>      1     / \    2   3   / \       4   5    </code></pre><p>è¿”å› 3, å®ƒçš„é•¿åº¦æ˜¯è·¯å¾„ [4,2,1,3] æˆ–è€… [5,2,1,3]ã€‚</p><span id="more"></span><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. äºŒå‰æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><p>è¿™é“é¢˜å’Œæ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å¾ˆç±»ä¼¼ï¼Œåªæ˜¯å¤šä¸€ä¸ªåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹å·¦å³å­æ ‘é•¿åº¦ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">diameter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        maxDepth(root);</span><br><span class="line">        <span class="keyword">return</span> diameter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMaxDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightMaxDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line"></span><br><span class="line">        diameter = Math.max(diameter, leftMaxDepth + rightMaxDepth);</span><br><span class="line">        <span class="keyword">return</span> Math.max(leftMaxDepth, rightMaxDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„ç›´å¾„</title>
      <link href="/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC/"/>
      <url>/2022/06/29/DailyPracticing_3_diameterofbinarytree%20-%20%E5%89%AF%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡ä¹Ÿå¯èƒ½ä¸ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®šäºŒå‰æ ‘</p><pre><code>      1     / \    2   3   / \       4   5    </code></pre><p>è¿”å› 3, å®ƒçš„é•¿åº¦æ˜¯è·¯å¾„ [4,2,1,3] æˆ–è€… [5,2,1,3]ã€‚</p><span id="more"></span><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. äºŒå‰æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><p>è¿™é“é¢˜å’Œæ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å¾ˆç±»ä¼¼ï¼Œåªæ˜¯å¤šä¸€ä¸ªåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹å·¦å³å­æ ‘é•¿åº¦ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">diameter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        maxDepth(root);</span><br><span class="line">        <span class="keyword">return</span> diameter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMaxDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightMaxDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line"></span><br><span class="line">        diameter = Math.max(diameter, leftMaxDepth + rightMaxDepth);</span><br><span class="line">        <span class="keyword">return</span> Math.max(leftMaxDepth, rightMaxDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„ç›´å¾„</title>
      <link href="/2022/06/29/DailyPracticing_3_diameterofbinarytree/"/>
      <url>/2022/06/29/DailyPracticing_3_diameterofbinarytree/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€æ£µäºŒå‰æ ‘ï¼Œä½ éœ€è¦è®¡ç®—å®ƒçš„ç›´å¾„é•¿åº¦ã€‚ä¸€æ£µäºŒå‰æ ‘çš„ç›´å¾„é•¿åº¦æ˜¯ä»»æ„ä¸¤ä¸ªç»“ç‚¹è·¯å¾„é•¿åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è¿™æ¡è·¯å¾„å¯èƒ½ç©¿è¿‡ä¹Ÿå¯èƒ½ä¸ç©¿è¿‡æ ¹ç»“ç‚¹ã€‚</p><p>ç¤ºä¾‹ :<br>ç»™å®šäºŒå‰æ ‘</p><pre><code>      1     / \    2   3   / \       4   5    </code></pre><p>è¿”å› 3, å®ƒçš„é•¿åº¦æ˜¯è·¯å¾„ [4,2,1,3] æˆ–è€… [5,2,1,3]ã€‚</p><span id="more"></span><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. äºŒå‰æ ‘çš„ç›´å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><p>è¿™é“é¢˜å’Œæ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å¾ˆç±»ä¼¼ï¼Œåªæ˜¯å¤šä¸€ä¸ªåˆ¤æ–­æ¯ä¸ªèŠ‚ç‚¹å·¦å³å­æ ‘é•¿åº¦ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">diameter</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">diameterOfBinaryTree</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        maxDepth(root);</span><br><span class="line">        <span class="keyword">return</span> diameter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMaxDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rightMaxDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line"></span><br><span class="line">        diameter = Math.max(diameter, leftMaxDepth + rightMaxDepth);</span><br><span class="line">        <span class="keyword">return</span> Math.max(leftMaxDepth, rightMaxDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„å‰åºéå†</title>
      <link href="/2022/06/28/DailyPracticing_2_binarytreepreordertraversal/"/>
      <url>/2022/06/28/DailyPracticing_2_binarytreepreordertraversal/</url>
      
        <content type="html"><![CDATA[<p>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code> ï¼Œè¿”å›å®ƒèŠ‚ç‚¹å€¼çš„ <strong>å‰åº</strong> éå†ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/binarytreepreordertraversal1.jpg" style="zoom:67%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [1,null,2,3]</span><br><span class="line">è¾“å‡ºï¼š[1,2,3]</span><br></pre></td></tr></table></figure><span id="more"></span><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = []</span><br><span class="line">è¾“å‡ºï¼š[]</span><br></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼šroot = [1]</span><br><span class="line">è¾“å‡ºï¼š[1]</span><br></pre></td></tr></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ [0, 100] å†…</li><li>-100 &lt;&#x3D; Node.val &lt;&#x3D; 100</li></ul><p><strong>è¿›é˜¶ï¼š</strong>é€’å½’ç®—æ³•å¾ˆç®€å•ï¼Œä½ å¯ä»¥é€šè¿‡è¿­ä»£ç®—æ³•å®Œæˆå—ï¼Ÿ</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/binary-tree-preorder-traversal/">144. äºŒå‰æ ‘çš„å‰åºéå† - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">preorderTraversal</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        traverse(root, list);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(TreeNode root, List&lt;Integer&gt; list)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        list.add(root.val);</span><br><span class="line">        <span class="comment">// å‰åºéå†</span></span><br><span class="line">        traverse(root.left, list);</span><br><span class="line">        <span class="comment">// ä¸­åºéå†</span></span><br><span class="line">        traverse(root.right, list);</span><br><span class="line">        <span class="comment">// ååºéå†</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦</title>
      <link href="/2022/06/27/DailyPracticing_1_maximumdepthofbinarytree/"/>
      <url>/2022/06/27/DailyPracticing_1_maximumdepthofbinarytree/</url>
      
        <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚</p><p>äºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚</p><p>è¯´æ˜: å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><span id="more"></span><p>ç¤ºä¾‹ï¼š<br>ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ</p><pre><code>    3   / \  9  20    /  \   15   7</code></pre><p>è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚</p><p>æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/">104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p><p><strong>é¢˜è§£ä¸€ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxDepth</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å‰åºéå†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">leftMaxDepth</span> <span class="operator">=</span> maxDepth(root.left);</span><br><span class="line">        <span class="comment">// ä¸­åºéå†</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rightMaxDepth</span> <span class="operator">=</span> maxDepth(root.right);</span><br><span class="line">        <span class="comment">// ååºéå†</span></span><br><span class="line">        <span class="keyword">return</span> Math.max(leftMaxDepth, rightMaxDepth) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> é€’å½’ </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½œå›¾å·¥å…·Graphviz</title>
      <link href="/2022/06/27/application_1_Graphviz/"/>
      <url>/2022/06/27/application_1_Graphviz/</url>
      
        <content type="html"><![CDATA[<p>Graphvizç”±ä¸€ç§è¢«ç§°ä¸ºDOTè¯­è¨€çš„å›¾å½¢æè¿°è¯­è¨€ ï¼Œä¸ä¸€ç»„å¯ä»¥ç”Ÿæˆå’Œ&#x2F;æˆ–å¤„ç†DOTæ–‡ä»¶çš„å·¥å…·ç»„æˆï¼š</p><ul><li><p><strong>dot</strong>ï¼šä¸€ä¸ªç”¨æ¥å°†ç”Ÿæˆçš„å›¾å½¢è½¬æ¢æˆå¤šç§è¾“å‡ºæ ¼å¼çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å…¶è¾“å‡ºæ ¼å¼åŒ…æ‹¬PostScriptï¼ŒPDFï¼ŒSVGï¼ŒPNGï¼Œå«æ³¨è§£çš„æ–‡æœ¬ç­‰ç­‰ã€‚</p></li><li><p><strong>neato</strong>ï¼šç”¨äºsprint modelçš„ç”Ÿæˆï¼ˆåœ¨Mac OSç‰ˆæœ¬ä¸­ç§°ä¸ºenergy minimizedï¼‰ã€‚</p></li><li><p><strong>twopi</strong>ï¼šç”¨äºæ”¾å°„çŠ¶å›¾å½¢çš„ç”Ÿæˆ  ã€‚</p></li><li><p><strong>circo</strong>ï¼šç”¨äºåœ†å½¢å›¾å½¢çš„ç”Ÿæˆ  ã€‚</p></li><li><p><strong>fdp</strong>ï¼šå¦ä¸€ä¸ªç”¨äºç”Ÿæˆæ— å‘å›¾çš„å·¥å…· ã€‚</p></li><li><p><strong>dotty</strong>ï¼šä¸€ä¸ªç”¨äºå¯è§†åŒ–ä¸ä¿®æ”¹å›¾å½¢çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ç¨‹åº  ã€‚</p></li><li><p><strong>lefty</strong>ï¼šä¸€ä¸ªå¯ç¼–ç¨‹çš„ï¼ˆä½¿ç”¨ä¸€ç§è¢«EZå½±å“çš„è¯­è¨€ï¼‰æ§ä»¶ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºDOTå›¾å½¢ï¼Œå¹¶å…è®¸ç”¨æˆ·ç”¨é¼ æ ‡åœ¨å›¾ä¸Šæ‰§è¡Œæ“ä½œã€‚Leftyå¯ä»¥ä½œä¸ºMVCæ¨¡å‹çš„ä½¿ç”¨å›¾å½¢çš„GUIç¨‹åºä¸­çš„è§†å›¾éƒ¨åˆ†  ã€‚</p></li></ul><span id="more"></span><h4 id="ä¸‹è½½åœ°å€ï¼š"><a href="#ä¸‹è½½åœ°å€ï¼š" class="headerlink" title="ä¸‹è½½åœ°å€ï¼š"></a>ä¸‹è½½åœ°å€ï¼š</h4><p><a href="http://www.graphviz.org/download/">Download | Graphviz</a></p><h4 id="å®‰è£…ï¼š"><a href="#å®‰è£…ï¼š" class="headerlink" title="å®‰è£…ï¼š"></a>å®‰è£…ï¼š</h4><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Graphviz1.png" alt="image-20220627145349108" style="zoom: 67%;" /><h4 id="ç»˜å›¾ï¼š"><a href="#ç»˜å›¾ï¼š" class="headerlink" title="ç»˜å›¾ï¼š"></a>ç»˜å›¾ï¼š</h4><p>åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œåˆ›å»ºdotæ–‡ä»¶ï¼Œå¹¶åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­æ‰“å¼€å‘½ä»¤è¡Œï¼Œç¼–è¯‘dotæ–‡ä»¶ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dot -Tpng -o tree.png tree.dot</span><br></pre></td></tr></table></figure><p>ç„¶åç”Ÿæˆtree.pngï¼š</p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Graphviz2.png" alt="image-20220627150409195" style="zoom:80%;" /><p>å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨VS Codeè¿›è¡Œç¼–è¯‘ç”Ÿæˆå›¾ç‰‡ã€‚</p><h4 id="ä½¿ç”¨ï¼š"><a href="#ä½¿ç”¨ï¼š" class="headerlink" title="ä½¿ç”¨ï¼š"></a>ä½¿ç”¨ï¼š</h4><p>å®˜æ–¹æ–‡æ¡£<a href="https://graphviz.org/documentation/">Documentation | Graphviz</a>ï¼Œ</p><p>åœ¨çº¿ä½¿ç”¨<a href="http://dreampuf.github.io/GraphvizOnline/">Graphviz Online (dreampuf.github.io)</a>ï¼Œ</p><p>ä¸ªäººæ„Ÿè§‰ä¸éœ€è¦è¿‡å¤šå­¦ä¹ æ€ä¹ˆä½¿ç”¨Graphvizï¼Œæˆ‘ç›®å‰ä»…ç”¨å…¶æ¥ç”»ç”»äºŒå‰æ ‘ç­‰ä¸€äº›æ•°æ®ç»“æ„ã€‚</p><h4 id="äºŒå‰æ ‘ï¼š"><a href="#äºŒå‰æ ‘ï¼š" class="headerlink" title="äºŒå‰æ ‘ï¼š"></a>äºŒå‰æ ‘ï¼š</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">graph btree <span class="punctuation">&#123;</span></span><br><span class="line">    graph <span class="punctuation">[</span>nodesep=<span class="number">0.1</span><span class="punctuation">,</span> pad=<span class="number">0.02</span><span class="punctuation">,</span> ranksep=<span class="number">0.5</span><span class="punctuation">]</span>;</span><br><span class="line">    node <span class="punctuation">[</span>shape=circle<span class="punctuation">,</span> style=bold<span class="punctuation">,</span> fontsize=<span class="number">22</span><span class="punctuation">,</span> fontname=Consolas<span class="punctuation">,</span> width=<span class="number">0.8</span><span class="punctuation">,</span> height=<span class="number">0.8</span><span class="punctuation">]</span>;</span><br><span class="line">    edge <span class="punctuation">[</span>style=bold<span class="punctuation">]</span>;</span><br><span class="line">    <span class="number">3</span> -- <span class="number">9</span>;</span><br><span class="line">    <span class="number">3</span> -- <span class="number">20</span>;</span><br><span class="line">    <span class="number">9</span> -- <span class="number">6</span>;</span><br><span class="line">    n1<span class="punctuation">[</span>width=<span class="number">0.1</span><span class="punctuation">,</span> height=<span class="number">0.1</span><span class="punctuation">,</span> shape=point<span class="punctuation">,</span> style=invis<span class="punctuation">]</span>;</span><br><span class="line">    <span class="number">9</span> -- n1<span class="punctuation">[</span>weight=<span class="number">10</span><span class="punctuation">,</span> style=invis<span class="punctuation">]</span>;</span><br><span class="line">    <span class="number">9</span> -- <span class="number">18</span>;</span><br><span class="line">    <span class="number">20</span> -- <span class="number">15</span>;</span><br><span class="line">    n2<span class="punctuation">[</span>width=<span class="number">0.1</span><span class="punctuation">,</span> height=<span class="number">0.1</span><span class="punctuation">,</span> shape=point<span class="punctuation">,</span> style=invis<span class="punctuation">]</span>;</span><br><span class="line">    <span class="number">20</span> -- n2<span class="punctuation">[</span>weight=<span class="number">10</span><span class="punctuation">,</span> style=invis<span class="punctuation">]</span>;</span><br><span class="line">    <span class="number">20</span> -- <span class="number">7</span>;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Graphviz3.svg"></p><p>Bæ ‘ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">digraph BTree <span class="punctuation">&#123;</span></span><br><span class="line">    graph <span class="punctuation">[</span>nodesep=<span class="number">0.1</span><span class="punctuation">,</span> pad=<span class="number">0.02</span><span class="punctuation">,</span> ranksep=<span class="number">0.5</span><span class="punctuation">,</span> splines=<span class="keyword">false</span><span class="punctuation">]</span></span><br><span class="line">    node <span class="punctuation">[</span>shape=record<span class="punctuation">,</span> style=bold<span class="punctuation">,</span> fontsize=<span class="number">22</span><span class="punctuation">,</span> fontname=Consolas<span class="punctuation">,</span> width=<span class="number">0.8</span><span class="punctuation">,</span> height=<span class="number">0.8</span><span class="punctuation">]</span></span><br><span class="line">    edge <span class="punctuation">[</span>style=bold<span class="punctuation">]</span></span><br><span class="line"></span><br><span class="line">    Root<span class="punctuation">[</span>label=<span class="string">&quot;&#123;M | &#123; &lt;f0&gt; | &lt;f1&gt; &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node1<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;D | G&#125; | &#123;&lt;f0&gt; | &lt;f1&gt; | &lt;f2&gt;&#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node2<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;Q | T&#125; | &#123; &lt;f0&gt; | &lt;f1&gt; | &lt;f2&gt; &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node3<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;A | C&#125; | &#123; &lt;f0&gt; | &lt;f1&gt; | &lt;f2&gt; &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node4<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;E | F&#125; | &#123; &lt;f0&gt; | &lt;f1&gt; | &lt;f2&gt; &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node5<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;H | K | L&#125; | &#123; &lt;f0&gt; | &lt;f1&gt; | &lt;f2&gt; | &lt;f3&gt; &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node6<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;N | P&#125; | &#123; | | &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node7<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;R | S&#125; | &#123; | | &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line">    Node8<span class="punctuation">[</span>label=<span class="string">&quot;&#123;&#123;W | X | Y | Z&#125; | &#123; | | | | &#125;&#125;&quot;</span><span class="punctuation">]</span>;</span><br><span class="line"></span><br><span class="line">    Root <span class="punctuation">:</span> f0 <span class="punctuation">:</span> s -&gt; Node1 <span class="punctuation">:</span> n;</span><br><span class="line">    Root <span class="punctuation">:</span> f1 <span class="punctuation">:</span> s -&gt; Node2 <span class="punctuation">:</span> n;</span><br><span class="line">    Node1 <span class="punctuation">:</span> f0 <span class="punctuation">:</span> s -&gt; Node3 <span class="punctuation">:</span> n;</span><br><span class="line">    Node1 <span class="punctuation">:</span> f1 -&gt; Node4 <span class="punctuation">:</span> n<span class="punctuation">[</span>weight=<span class="number">10</span><span class="punctuation">]</span>;</span><br><span class="line">    Node1 <span class="punctuation">:</span> f2 -&gt; Node5 <span class="punctuation">:</span> n;</span><br><span class="line">    Node2 <span class="punctuation">:</span> f0 -&gt; Node6 <span class="punctuation">:</span> n;</span><br><span class="line">    Node2 <span class="punctuation">:</span> f1 -&gt; Node7 <span class="punctuation">:</span> n<span class="punctuation">[</span>weight=<span class="number">10</span><span class="punctuation">]</span>;</span><br><span class="line">    Node2 <span class="punctuation">:</span> f2 <span class="punctuation">:</span> s -&gt; Node8 <span class="punctuation">:</span> n;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Graphviz5.svg"></p>]]></content>
      
      
      <categories>
          
          <category> åº”ç”¨ä½¿ç”¨æ•™ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graphviz </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£å‰ä¸­ååº</title>
      <link href="/2022/06/26/labuladong_1_binary-tree1/"/>
      <url>/2022/06/26/labuladong_1_binary-tree1/</url>
      
        <content type="html"><![CDATA[<p>1ã€äºŒå‰æ ‘çš„å‰ä¸­ååºéå†æ˜¯ä»€ä¹ˆï¼Œä»…ä»…æ˜¯ä¸‰ä¸ªé¡ºåºä¸åŒçš„ List å—ï¼Ÿ</p><p>2ã€ä¸ºä»€ä¹ˆå¤šå‰æ ‘æ²¡æœ‰ä¸­åºéå†ï¼Ÿ</p><p>3ã€ååºéå†æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ</p><span id="more"></span><p>äºŒå‰æ ‘éå†æ¡†æ¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‰åºä½ç½®</span></span><br><span class="line">    traverse(root.left);</span><br><span class="line">    <span class="comment">// ä¸­åºä½ç½®</span></span><br><span class="line">    traverse(root.right);</span><br><span class="line">    <span class="comment">// ååºä½ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>traverse</code> å‡½æ•°ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªèƒ½å¤Ÿéå†äºŒå‰æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„ä¸€ä¸ªå‡½æ•°ï¼Œå’Œä½ éå†æ•°ç»„æˆ–è€…é“¾è¡¨æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼š</p><p>æ•°ç»„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Traverse_Array</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">        <span class="comment">//traverseIteration(arr);</span></span><br><span class="line">        traverseRecursion(arr, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿­ä»£éå†æ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">traverseIteration</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å½’éå†æ•°ç»„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> arr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> i</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">traverseRecursion</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == arr.length) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å‰åºä½ç½®</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å‰åºä½ç½®ï¼š&quot;</span> + arr[i]);</span><br><span class="line">        traverseRecursion(arr, i + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">// ååºä½ç½®</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ååºä½ç½®ï¼š&quot;</span> + arr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">å‰åºä½ç½®ï¼š1</span><br><span class="line">å‰åºä½ç½®ï¼š2</span><br><span class="line">å‰åºä½ç½®ï¼š3</span><br><span class="line">å‰åºä½ç½®ï¼š4</span><br><span class="line">å‰åºä½ç½®ï¼š5</span><br><span class="line">ååºä½ç½®ï¼š5</span><br><span class="line">ååºä½ç½®ï¼š4</span><br><span class="line">ååºä½ç½®ï¼š3</span><br><span class="line">ååºä½ç½®ï¼š2</span><br><span class="line">ååºä½ç½®ï¼š1</span><br></pre></td></tr></table></figure><p>é“¾è¡¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* è¿­ä»£éå†å•é“¾è¡¨ */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head; p != <span class="literal">null</span>; p = p.next) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é€’å½’éå†å•é“¾è¡¨ */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‰åºä½ç½®</span></span><br><span class="line">    traverse(head.next);</span><br><span class="line">    <span class="comment">// ååºä½ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å•é“¾è¡¨å’Œæ•°ç»„çš„éå†å¯ä»¥æ˜¯è¿­ä»£çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯é€’å½’çš„ï¼Œ<strong>äºŒå‰æ ‘è¿™ç§ç»“æ„æ— éå°±æ˜¯äºŒå‰é“¾è¡¨</strong>ï¼Œç”±äºæ²¡åŠæ³•ç®€å•æ”¹å†™æˆè¿­ä»£å½¢å¼ï¼Œæ‰€ä»¥ä¸€èˆ¬è¯´äºŒå‰æ ‘çš„éå†æ¡†æ¶éƒ½æ˜¯æŒ‡é€’å½’çš„å½¢å¼ã€‚</p><p>ä½ ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œåªè¦æ˜¯é€’å½’å½¢å¼çš„éå†ï¼Œéƒ½å¯ä»¥æœ‰å‰åºä½ç½®å’Œååºä½ç½®ï¼Œåˆ†åˆ«åœ¨é€’å½’ä¹‹å‰å’Œé€’å½’ä¹‹åã€‚</p><p><strong>æ‰€è°“å‰åºä½ç½®ï¼Œå°±æ˜¯åˆšè¿›å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå…ƒç´ ï¼‰çš„æ—¶å€™ï¼Œååºä½ç½®å°±æ˜¯å³å°†ç¦»å¼€ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå…ƒç´ ï¼‰çš„æ—¶å€™</strong>ï¼Œé‚£ä¹ˆè¿›ä¸€æ­¥ï¼Œä½ æŠŠä»£ç å†™åœ¨ä¸åŒä½ç½®ï¼Œä»£ç æ‰§è¡Œçš„æ—¶æœºä¹Ÿä¸åŒï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/binarytree1_1.png"></p><p><strong>å€’åºæ‰“å°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* é€’å½’éå†å•é“¾è¡¨ï¼Œå€’åºæ‰“å°é“¾è¡¨å…ƒç´  */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    traverse(head.next);</span><br><span class="line">    <span class="comment">// ååºä½ç½®</span></span><br><span class="line">    print(head.val);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1ã€äºŒå‰æ ‘çš„å‰ä¸­ååºéå†æ˜¯ä»€ä¹ˆï¼Œä»…ä»…æ˜¯ä¸‰ä¸ªé¡ºåºä¸åŒçš„-List-å—ï¼Ÿ"><a href="#1ã€äºŒå‰æ ‘çš„å‰ä¸­ååºéå†æ˜¯ä»€ä¹ˆï¼Œä»…ä»…æ˜¯ä¸‰ä¸ªé¡ºåºä¸åŒçš„-List-å—ï¼Ÿ" class="headerlink" title="1ã€äºŒå‰æ ‘çš„å‰ä¸­ååºéå†æ˜¯ä»€ä¹ˆï¼Œä»…ä»…æ˜¯ä¸‰ä¸ªé¡ºåºä¸åŒçš„ List å—ï¼Ÿ"></a>1ã€äºŒå‰æ ‘çš„å‰ä¸­ååºéå†æ˜¯ä»€ä¹ˆï¼Œä»…ä»…æ˜¯ä¸‰ä¸ªé¡ºåºä¸åŒçš„ List å—ï¼Ÿ</h4><p><strong>å‰ä¸­ååºæ˜¯éå†äºŒå‰æ ‘è¿‡ç¨‹ä¸­å¤„ç†æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‰ä¸ªç‰¹æ®Šæ—¶é—´ç‚¹</strong>ï¼Œç»ä¸ä»…ä»…æ˜¯ä¸‰ä¸ªé¡ºåºä¸åŒçš„ Listï¼š</p><p>å‰åºä½ç½®çš„ä»£ç åœ¨åˆšåˆšè¿›å…¥ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹çš„æ—¶å€™æ‰§è¡Œï¼›</p><p>ååºä½ç½®çš„ä»£ç åœ¨å°†è¦ç¦»å¼€ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹çš„æ—¶å€™æ‰§è¡Œï¼›</p><p>ä¸­åºä½ç½®çš„ä»£ç åœ¨ä¸€ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹å·¦å­æ ‘éƒ½éå†å®Œï¼Œå³å°†å¼€å§‹éå†å³å­æ ‘çš„æ—¶å€™æ‰§è¡Œã€‚</p><p>ç”»æˆå›¾ï¼Œå‰ä¸­ååºä¸‰ä¸ªä½ç½®åœ¨äºŒå‰æ ‘ä¸Šæ˜¯è¿™æ ·ï¼š</p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/binarytree1_2.jpeg" style="zoom:30%;" /><h4 id="2ã€ä¸ºä»€ä¹ˆå¤šå‰æ ‘æ²¡æœ‰ä¸­åºéå†ï¼Ÿ"><a href="#2ã€ä¸ºä»€ä¹ˆå¤šå‰æ ‘æ²¡æœ‰ä¸­åºéå†ï¼Ÿ" class="headerlink" title="2ã€ä¸ºä»€ä¹ˆå¤šå‰æ ‘æ²¡æœ‰ä¸­åºéå†ï¼Ÿ"></a>2ã€ä¸ºä»€ä¹ˆå¤šå‰æ ‘æ²¡æœ‰ä¸­åºéå†ï¼Ÿ</h4><p><strong>ä½ å¯ä»¥å‘ç°æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ã€Œå”¯ä¸€ã€å±äºè‡ªå·±çš„å‰ä¸­ååºä½ç½®</strong>ï¼Œæ‰€ä»¥æˆ‘è¯´å‰ä¸­ååºéå†æ˜¯éå†äºŒå‰æ ‘è¿‡ç¨‹ä¸­å¤„ç†æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‰ä¸ªç‰¹æ®Šæ—¶é—´ç‚¹ã€‚</p><p>è¿™é‡Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºä»€ä¹ˆå¤šå‰æ ‘æ²¡æœ‰ä¸­åºä½ç½®ï¼Œå› ä¸ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹åªä¼šè¿›è¡Œå”¯ä¸€ä¸€æ¬¡å·¦å­æ ‘åˆ‡æ¢å³å­æ ‘ï¼Œè€Œå¤šå‰æ ‘èŠ‚ç‚¹å¯èƒ½æœ‰å¾ˆå¤šå­èŠ‚ç‚¹ï¼Œä¼šå¤šæ¬¡åˆ‡æ¢å­æ ‘å»éå†ï¼Œæ‰€ä»¥å¤šå‰æ ‘èŠ‚ç‚¹æ²¡æœ‰ã€Œå”¯ä¸€ã€çš„ä¸­åºéå†ä½ç½®ã€‚</p><h4 id="3ã€ååºéå†æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ"><a href="#3ã€ååºéå†æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ" class="headerlink" title="3ã€ååºéå†æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ"></a>3ã€ååºéå†æœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„ï¼Ÿ</h4><p>è¯´ååºä½ç½®ä¹‹å‰ï¼Œå…ˆç®€å•è¯´ä¸‹ä¸­åºå’Œå‰åºã€‚</p><p>ä¸­åºä½ç½®ä¸»è¦ç”¨åœ¨ BST åœºæ™¯ä¸­ï¼Œä½ å®Œå…¨å¯ä»¥æŠŠ BST çš„ä¸­åºéå†è®¤ä¸ºæ˜¯éå†æœ‰åºæ•°ç»„ã€‚</p><p>å‰åºä½ç½®æœ¬èº«å…¶å®æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„æ€§è´¨ï¼Œä¹‹æ‰€ä»¥ä½ å‘ç°å¥½åƒå¾ˆå¤šé¢˜éƒ½æ˜¯åœ¨å‰åºä½ç½®å†™ä»£ç ï¼Œå®é™…ä¸Šæ˜¯å› ä¸ºæˆ‘ä»¬ä¹ æƒ¯æŠŠé‚£äº›å¯¹å‰ä¸­ååºä½ç½®ä¸æ•æ„Ÿçš„ä»£ç å†™åœ¨å‰åºä½ç½®ç½¢äº†ã€‚</p><p>ä½ å¯ä»¥å‘ç°ï¼Œå‰åºä½ç½®çš„ä»£ç æ‰§è¡Œæ˜¯è‡ªé¡¶å‘ä¸‹çš„ï¼Œè€Œååºä½ç½®çš„ä»£ç æ‰§è¡Œæ˜¯è‡ªåº•å‘ä¸Šçš„ï¼š</p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/binarytree1_2.jpeg" style="zoom:30%;" /><p>è¿™ä¸å¥‡æ€ªï¼Œå› ä¸ºæœ¬æ–‡å¼€å¤´å°±è¯´äº†å‰åºä½ç½®æ˜¯åˆšåˆšè¿›å…¥èŠ‚ç‚¹çš„æ—¶åˆ»ï¼Œååºä½ç½®æ˜¯å³å°†ç¦»å¼€èŠ‚ç‚¹çš„æ—¶åˆ»ã€‚</p><p><strong>ä½†è¿™é‡Œé¢å¤§æœ‰ç„å¦™ï¼Œæ„å‘³ç€å‰åºä½ç½®çš„ä»£ç åªèƒ½ä»å‡½æ•°å‚æ•°ä¸­è·å–çˆ¶èŠ‚ç‚¹ä¼ é€’æ¥çš„æ•°æ®ï¼Œè€Œååºä½ç½®çš„ä»£ç ä¸ä»…å¯ä»¥è·å–å‚æ•°æ•°æ®ï¼Œè¿˜å¯ä»¥è·å–åˆ°å­æ ‘é€šè¿‡å‡½æ•°è¿”å›å€¼ä¼ é€’å›æ¥çš„æ•°æ®</strong>ã€‚</p><p>ä¸¾å…·ä½“çš„ä¾‹å­ï¼Œç°åœ¨ç»™ä½ ä¸€æ£µäºŒå‰æ ‘ï¼Œæˆ‘é—®ä½ ä¸¤ä¸ªç®€å•çš„é—®é¢˜ï¼š</p><p>1ã€å¦‚æœæŠŠæ ¹èŠ‚ç‚¹çœ‹åšç¬¬ 1 å±‚ï¼Œå¦‚ä½•æ‰“å°å‡ºæ¯ä¸€ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„å±‚æ•°ï¼Ÿ</p><p>2ã€å¦‚ä½•æ‰“å°å‡ºæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘å„æœ‰å¤šå°‘èŠ‚ç‚¹ï¼Ÿ</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜å¯ä»¥è¿™æ ·å†™ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äºŒå‰æ ‘éå†å‡½æ•°</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">traverse</span><span class="params">(TreeNode root, <span class="type">int</span> level)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‰åºä½ç½®</span></span><br><span class="line">    printf(<span class="string">&quot;èŠ‚ç‚¹ %s åœ¨ç¬¬ %d å±‚&quot;</span>, root, level);</span><br><span class="line">    traverse(root.left, level + <span class="number">1</span>);</span><br><span class="line">    traverse(root.right, level + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ ·è°ƒç”¨</span></span><br><span class="line">traverse(root, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªé—®é¢˜å¯ä»¥è¿™æ ·å†™ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ï¼šè¾“å…¥ä¸€æ£µäºŒå‰æ ‘ï¼Œè¿”å›è¿™æ£µäºŒå‰æ ‘çš„èŠ‚ç‚¹æ€»æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">count</span><span class="params">(TreeNode root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">leftCount</span> <span class="operator">=</span> count(root.left);</span><br><span class="line">    <span class="type">int</span> <span class="variable">rightCount</span> <span class="operator">=</span> count(root.right);</span><br><span class="line">    <span class="comment">// ååºä½ç½®</span></span><br><span class="line">    printf(<span class="string">&quot;èŠ‚ç‚¹ %s çš„å·¦å­æ ‘æœ‰ %d ä¸ªèŠ‚ç‚¹ï¼Œå³å­æ ‘æœ‰ %d ä¸ªèŠ‚ç‚¹&quot;</span>,</span><br><span class="line">            root, leftCount, rightCount);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> leftCount + rightCount + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªé—®é¢˜çš„æ ¹æœ¬åŒºåˆ«åœ¨äºï¼šä¸€ä¸ªèŠ‚ç‚¹åœ¨ç¬¬å‡ å±‚ï¼Œä½ ä»æ ¹èŠ‚ç‚¹éå†è¿‡æ¥çš„è¿‡ç¨‹å°±èƒ½é¡ºå¸¦è®°å½•ï¼›è€Œä»¥ä¸€ä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„æ•´æ£µå­æ ‘æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œä½ éœ€è¦éå†å®Œå­æ ‘ä¹‹åæ‰èƒ½æ•°æ¸…æ¥šã€‚</p><p>ç»“åˆè¿™ä¸¤ä¸ªç®€å•çš„é—®é¢˜ï¼Œä½ å“å‘³ä¸€ä¸‹ååºä½ç½®çš„ç‰¹ç‚¹ï¼Œåªæœ‰ååºä½ç½®æ‰èƒ½é€šè¿‡è¿”å›å€¼è·å–å­æ ‘çš„ä¿¡æ¯ã€‚</p><p><strong>é‚£ä¹ˆæ¢å¥è¯è¯´ï¼Œä¸€æ—¦ä½ å‘ç°é¢˜ç›®å’Œå­æ ‘æœ‰å…³ï¼Œé‚£å¤§æ¦‚ç‡è¦ç»™å‡½æ•°è®¾ç½®åˆç†çš„å®šä¹‰å’Œè¿”å›å€¼ï¼Œåœ¨ååºä½ç½®å†™ä»£ç äº†ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> labuladong </tag>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨VBè„šæœ¬å°†Excelæ–‡ä»¶ä¸­çš„è¡¨ç»“æ„å¯¼å…¥PowerDesigner</title>
      <link href="/2022/06/17/PowerDesigner_1/"/>
      <url>/2022/06/17/PowerDesigner_1/</url>
      
        <content type="html"><![CDATA[<p>Excelæ–‡ä»¶ä¸­çš„è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç”¨æˆ·ä¿¡æ¯è¡¨</th><th>USER</th><th>ç”¨æˆ·ä¿¡æ¯è¡¨</th><th></th><th></th></tr></thead><tbody><tr><td>ä¸»é”®</td><td>PK_ID</td><td>varchar(36)</td><td>N</td><td>ä¸»é”®</td></tr><tr><td>å§“å</td><td>NAME</td><td>varchar(36)</td><td></td><td>å§“å</td></tr><tr><td>èº«ä»½è¯å·</td><td>IDCARD</td><td>varchar(18)</td><td></td><td>èº«ä»½è¯å·</td></tr><tr><td>å¹´é¾„</td><td>AGE</td><td>decimal(8)</td><td></td><td>å¹´é¾„</td></tr></tbody></table><ul><li>ç¬¬ä¸€è¡Œæ˜¯è¡¨ä¿¡æ¯çš„æè¿°ï¼Œä¾æ¬¡æ˜¯ï¼šè¡¨åã€è¡¨Codeã€è¡¨æ³¨é‡Š</li><li>ç¬¬äºŒè¡Œå¼€å§‹æ˜¯åˆ—çš„æè¿°ï¼Œåˆ†åˆ«æ˜¯ï¼šå­—æ®µåã€æ ‡è¯†ç¬¦ã€åˆ—æ•°æ®ç±»å‹ã€æ˜¯å¦ä¸ºç©ºã€åˆ—æ³¨é‡Š</li></ul><span id="more"></span><p> PDMæ¨¡å‹å»ºç«‹å®Œæˆåï¼Œç›´æ¥æŒ‰ crtl+shift+x æ‰“å¼€æ‰§è¡Œè„šæœ¬çª—å£ã€‚æŠŠä¸‹é¢è„šæœ¬å†…å®¹å¤åˆ¶è¿›å»ï¼Œé…ç½®ç›¸åº”å‚æ•°ï¼Œç‚¹å‡»æ‰§è¡Œå¼€å§‹è¿›è¡Œè¡¨ç»“æ„çš„è½¬æ¢ã€‚</p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&#x27; ç¬¬ä¸€è¡Œæ˜¯è¡¨ä¿¡æ¯çš„æè¿°ï¼Œä¾æ¬¡æ˜¯ï¼šè¡¨åã€è¡¨Codeã€è¡¨æ³¨é‡Š</span></span><br><span class="line"><span class="comment">&#x27; ç¬¬äºŒè¡Œå¼€å§‹æ˜¯åˆ—çš„æè¿°ï¼Œåˆ†åˆ«æ˜¯ï¼šåˆ—åã€åˆ—Codeã€åˆ—æ•°æ®ç±»å‹ã€åˆ—æ³¨é‡Š</span></span><br><span class="line"><span class="comment">&#x27; Excelçš„sheetåç§°ç»Ÿä¸€ä¸ºsheet1</span></span><br><span class="line"><span class="comment">&#x27;å¼€å§‹</span></span><br><span class="line"><span class="keyword">Option</span> <span class="keyword">Explicit</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">Dim</span> mdl <span class="comment">&#x27; the current model</span></span><br><span class="line"><span class="keyword">Set</span> mdl = ActiveModel</span><br><span class="line"><span class="keyword">If</span> (mdl <span class="built_in">Is</span> <span class="literal">Nothing</span>) <span class="keyword">Then</span></span><br><span class="line">    MsgBox <span class="string">&quot;There is no Active Model&quot;</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">Dim</span> HaveExcel</span><br><span class="line"><span class="keyword">Dim</span> RQ</span><br><span class="line">RQ = vbYes <span class="comment">&#x27;MsgBox(&quot;Is  Excel Installed on your machine ?&quot;, vbYesNo + vbInformation, &quot;Confirmation&quot;)</span></span><br><span class="line"><span class="keyword">If</span> RQ = vbYes <span class="keyword">Then</span></span><br><span class="line">    HaveExcel = <span class="literal">True</span></span><br><span class="line">    <span class="comment">&#x27; Open &amp; Create  Excel Document</span></span><br><span class="line">    <span class="keyword">Dim</span> x1 <span class="comment">&#x27;</span></span><br><span class="line">    <span class="keyword">Set</span> x1 = CreateObject(<span class="string">&quot;Excel.Application&quot;</span>)</span><br><span class="line">    x1.Workbooks.Open <span class="string">&quot;E:pdm1.xlsx&quot;</span> <span class="comment">&#x27;æŒ‡å®š excelæ–‡æ¡£è·¯å¾„</span></span><br><span class="line">    x1.Workbooks(<span class="number">1</span>).Worksheets(<span class="string">&quot;Sheet1&quot;</span>).Activate <span class="comment">&#x27;æŒ‡å®šè¦æ‰“å¼€çš„sheetåç§°</span></span><br><span class="line"><span class="keyword">Else</span></span><br><span class="line">    HaveExcel = <span class="literal">False</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"> </span><br><span class="line">a x1, mdl</span><br><span class="line"> </span><br><span class="line"><span class="keyword">sub</span> a(x1, mdl)</span><br><span class="line"><span class="keyword">dim</span> rwIndex </span><br><span class="line"><span class="keyword">dim</span> tableName</span><br><span class="line"><span class="keyword">dim</span> colname</span><br><span class="line"><span class="keyword">dim</span> table</span><br><span class="line"><span class="keyword">dim</span> col</span><br><span class="line"> </span><br><span class="line"><span class="keyword">on</span> <span class="keyword">error</span> <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">set</span> table = mdl.Tables.CreateNew <span class="comment">&#x27;åˆ›å»ºä¸€ä¸ª è¡¨å®ä½“</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">For</span> rwIndex = <span class="number">1</span> <span class="keyword">To</span> <span class="number">329</span> <span class="comment">&#x27;æŒ‡å®šè¡Œæ•°</span></span><br><span class="line">    <span class="keyword">With</span> x1.Workbooks(<span class="number">1</span>).Worksheets(<span class="string">&quot;Sheet1&quot;</span>)</span><br><span class="line">        </span><br><span class="line">                </span><br><span class="line">        <span class="keyword">If</span> rwIndex = <span class="number">1</span> <span class="keyword">Then</span></span><br><span class="line">            <span class="comment">&#x27; è¡¨èµ‹å€¼</span></span><br><span class="line">            table.Name=.Cells(rwIndex, <span class="number">1</span>).Value <span class="comment">&#x27;è¡¨å</span></span><br><span class="line">            table.Code=.Cells(rwIndex, <span class="number">2</span>).Value <span class="comment">&#x27;è¡¨æ ‡è¯†</span></span><br><span class="line">            table.Comment=.Cells(rwIndex, <span class="number">3</span>).Value <span class="comment">&#x27;è¡¨è¯´æ˜</span></span><br><span class="line">        <span class="keyword">Else</span>        </span><br><span class="line">            <span class="keyword">set</span> col = table.Columns.CreateNew <span class="comment">&#x27;åˆ›å»ºä¸€åˆ—/å­—æ®µ            </span></span><br><span class="line">            </span><br><span class="line">            col.Name = .Cells(rwIndex, <span class="number">1</span>).Value <span class="comment">&#x27;æŒ‡å®šåˆ—å</span></span><br><span class="line">            col.Code = .Cells(rwIndex, <span class="number">2</span>).Value</span><br><span class="line">            col.DataType = .Cells(rwIndex, <span class="number">3</span>).Value <span class="comment">&#x27;æŒ‡å®šåˆ—æ•°æ®ç±»å‹</span></span><br><span class="line">            col.Comment = .Cells(rwIndex, <span class="number">1</span>).Value <span class="comment">&#x27;æŒ‡å®šåˆ—è¯´æ˜</span></span><br><span class="line">         <span class="keyword">If</span> .Cells(rwIndex, <span class="number">1</span>).Value = <span class="string">&quot;&quot;</span> <span class="keyword">Then</span></span><br><span class="line">                col.Name = .Cells(rwIndex, <span class="number">2</span>).Value <span class="comment">&#x27;æŒ‡å®šåˆ—å </span></span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span>  </span><br><span class="line">            </span><br><span class="line"><span class="keyword">If</span> .Cells(rwIndex, <span class="number">4</span>).Value = <span class="string">&quot;N&quot;</span> <span class="keyword">Then</span></span><br><span class="line">                col.Mandatory = <span class="literal">true</span> <span class="comment">&#x27;æŒ‡å®šåˆ—æ˜¯å¦å¯ç©º true ä¸ºä¸å¯ç©º </span></span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">           </span><br><span class="line">            </span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line"><span class="keyword">Next</span></span><br><span class="line">MsgBox <span class="string">&quot;ç”ŸæˆæˆåŠŸ&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">sub</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PowerDesigner </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jacksonï¼ˆå…­ï¼‰â€”â€”Jacksonæ³¨è§£</title>
      <link href="/2022/06/16/Jackson_6/"/>
      <url>/2022/06/16/Jackson_6/</url>
      
        <content type="html"><![CDATA[<p><strong>Jackson JSONå·¥å…·åŒ…åŒ…å«ä¸€ç»„Javaæ³¨è§£ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›æ³¨è§£æ¥è®¾ç½®å°†JSONè¯»å…¥å¯¹è±¡çš„æ–¹å¼æˆ–ä»å¯¹è±¡ç”Ÿæˆä»€ä¹ˆJSONçš„æ–¹å¼ã€‚ æ­¤Jacksonæ³¨è§£æ•™ç¨‹ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Jacksonçš„æ³¨è§£</strong>ã€‚</p><span id="more"></span><blockquote><p><strong>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„æ³¨è§£</strong>ï¼š</p></blockquote><table><thead><tr><th>æ³¨è§£</th><th>ç”¨æ³•</th></tr></thead><tbody><tr><td>@JsonProperty</td><td>ç”¨äºå±æ€§ï¼ŒæŠŠå±æ€§çš„åç§°åºåˆ—åŒ–æ—¶è½¬æ¢ä¸ºå¦å¤–ä¸€ä¸ªåç§°ã€‚ç¤ºä¾‹ï¼š@JsonProperty(â€œbirth_ d ateâ€)private Date birthDate;</td></tr><tr><td>@JsonFormat</td><td>ç”¨äºå±æ€§æˆ–è€…æ–¹æ³•ï¼ŒæŠŠå±æ€§çš„æ ¼å¼åºåˆ—åŒ–æ—¶è½¬æ¢æˆæŒ‡å®šçš„æ ¼å¼ã€‚ç¤ºä¾‹ï¼š @JsonFormat(timezone &#x3D; â€œGMT+8â€, pattern &#x3D; â€œyyyyMM-dd HH:mmâ€) public DategetBirthDate()</td></tr><tr><td>@JsonPropertyOrder</td><td>ç”¨äºç±»ï¼Œ æŒ‡å®šå±æ€§åœ¨åºåˆ—åŒ–æ—¶ json ä¸­çš„é¡ºåº ï¼Œ ç¤ºä¾‹ï¼š@JsonPropertyOrder({ â€œbirth_Dateâ€, â€œnameâ€ })public class Person</td></tr><tr><td>@JsonCreator</td><td>ç”¨äºæ„é€ æ–¹æ³•ï¼Œå’Œ @JsonProperty é…åˆä½¿ç”¨ï¼Œé€‚ç”¨æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ã€‚ ç¤ºä¾‹ï¼š @JsonCreator public Person(@JsonProperty(â€œnameâ€)String name) {â€¦}</td></tr><tr><td>@JsonAnySetter</td><td>ç”¨äºå±æ€§æˆ–è€…æ–¹æ³•ï¼Œè®¾ç½®æœªååºåˆ—åŒ–çš„å±æ€§åå’Œå€¼ä½œä¸ºé”®å€¼å­˜å‚¨åˆ° map ä¸­ @JsonAnySetter public void set(String key, Object value) { map.put(key, value); }</td></tr><tr><td>@JsonAnyGetter</td><td>ç”¨äºæ–¹æ³• ï¼Œè·å–æ‰€æœ‰æœªåºåˆ—åŒ–çš„å±æ€§public Map&lt;String, Object&gt; any() { return map; } ;</td></tr></tbody></table><hr>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jackson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jacksonï¼ˆäº”ï¼‰â€”â€”JsonGenerator</title>
      <link href="/2022/06/15/Jackson_5/"/>
      <url>/2022/06/15/Jackson_5/</url>
      
        <content type="html"><![CDATA[<p>Jackson JsonGeneratorç”¨äºä»Javaå¯¹è±¡ï¼ˆæˆ–ä»£ç ä»ä¸­ç”ŸæˆJSONçš„ä»»ä½•æ•°æ®ç»“æ„ï¼‰ç”ŸæˆJSONã€‚</p><span id="more"></span><h2 id="åˆ›å»ºä¸€ä¸ªJsonGenerator"><a href="#åˆ›å»ºä¸€ä¸ªJsonGenerator" class="headerlink" title="åˆ›å»ºä¸€ä¸ªJsonGenerator"></a>åˆ›å»ºä¸€ä¸ªJsonGenerator</h2><p>ä¸ºäº†åˆ›å»ºJackson JsonGeneratorï¼Œå¿…é¡»é¦–å…ˆåˆ›å»ºJsonFactoryå®ä¾‹ã€‚ è¿™æ˜¯åˆ›å»ºJsonFactoryçš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JsonFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonFactory</span>();</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦åˆ›å»ºäº†JsonFactoryï¼Œå°±å¯ä»¥ä½¿ç”¨JsonFactoryçš„createGenerator()æ–¹æ³•åˆ›å»ºJsonGeneratorã€‚ è¿™æ˜¯åˆ›å»ºJsonGeneratorçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JsonFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonFactory</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">JsonGenerator</span> <span class="variable">generator</span> <span class="operator">=</span> factory.createGenerator(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;data/output.json&quot;</span>), JsonEncoding.UTF8);</span><br></pre></td></tr></table></figure><p>createGenerator()æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”Ÿæˆçš„JSONçš„ç›®æ ‡ã€‚ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå‚æ•°æ˜¯Fileå¯¹è±¡ã€‚ è¿™æ„å‘³ç€ç”Ÿæˆçš„JSONå°†è¢«å†™å…¥ç»™å®šæ–‡ä»¶ã€‚ createGenerator()æ–¹æ³•å·²é‡è½½ï¼Œå› æ­¤è¿˜æœ‰å…¶ä»–ç‰ˆæœ¬çš„createGenerator()æ–¹æ³•é‡‡ç”¨ä¾‹å¦‚OutputStreamç­‰ï¼Œæä¾›äº†æœ‰å…³å°†ç”Ÿæˆçš„JSONå†™å…¥ä½•å¤„çš„ä¸åŒé€‰é¡¹ã€‚</p><p>createGenerator()æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”ŸæˆJSONæ—¶ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ã€‚ ä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨UTF-8ã€‚</p><hr><h2 id="ä½¿ç”¨JsonGeneratorç”ŸæˆJSON"><a href="#ä½¿ç”¨JsonGeneratorç”ŸæˆJSON" class="headerlink" title="ä½¿ç”¨JsonGeneratorç”ŸæˆJSON"></a>ä½¿ç”¨JsonGeneratorç”ŸæˆJSON</h2><p>ä¸€æ—¦åˆ›å»ºäº†JsonGeneratorï¼Œå°±å¯ä»¥å¼€å§‹ç”ŸæˆJSONã€‚ JsonGeneratoråŒ…å«ä¸€ç»„write â€¦()æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥ç¼–å†™JSONå¯¹è±¡çš„å„ä¸ªéƒ¨åˆ†ã€‚ è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Jackson JsonGeneratorç”ŸæˆJSONçš„ç®€å•ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JsonFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonFactory</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">JsonGenerator</span> <span class="variable">generator</span> <span class="operator">=</span> factory.createGenerator(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;data/output.json&quot;</span>), JsonEncoding.UTF8);</span><br><span class="line"></span><br><span class="line">generator.writeStartObject();</span><br><span class="line">generator.writeStringField(<span class="string">&quot;brand&quot;</span>, <span class="string">&quot;Mercedes&quot;</span>);</span><br><span class="line">generator.writeNumberField(<span class="string">&quot;doors&quot;</span>, <span class="number">5</span>);</span><br><span class="line">generator.writeEndObject();</span><br><span class="line"></span><br><span class="line">generator.close();</span><br></pre></td></tr></table></figure><p>æ­¤ç¤ºä¾‹é¦–å…ˆè°ƒç”¨writeStartObject()ï¼Œå°†{å†™å…¥è¾“å‡ºã€‚ ç„¶åï¼Œè¯¥ç¤ºä¾‹è°ƒç”¨writeStringField()ï¼Œå°†å“ç‰Œå­—æ®µåç§°+å€¼å†™å…¥è¾“å‡ºã€‚ ä¹‹åï¼Œå°†è°ƒç”¨writeNumberField()æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šå°†Doorså­—æ®µåç§°+å€¼å†™å…¥è¾“å‡ºã€‚ æœ€åï¼Œè°ƒç”¨writeEndObject()ï¼Œå°†}å†™å…¥è¾“å‡ºã€‚</p><p>JsonGeneratorè¿˜å¯ä»¥ä½¿ç”¨è®¸å¤šå…¶ä»–å†™å…¥æ–¹æ³•ã€‚ è¿™ä¸ªä¾‹å­åªæ˜¾ç¤ºäº†å…¶ä¸­ä¸€äº›ã€‚</p><hr><h2 id="å…³é—­JsonGenerator"><a href="#å…³é—­JsonGenerator" class="headerlink" title="å…³é—­JsonGenerator"></a>å…³é—­JsonGenerator</h2><p>å®Œæˆç”ŸæˆJSONåï¼Œåº”å…³é—­JsonGeneratorã€‚ æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨å…¶close()æ–¹æ³•æ¥å®ç°ã€‚ è¿™æ˜¯å…³é—­JsonGeneratorçš„æ ·å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">generator.close();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jackson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jacksonï¼ˆå››ï¼‰â€”â€”JsonParser</title>
      <link href="/2022/06/13/Jackson_4/"/>
      <url>/2022/06/13/Jackson_4/</url>
      
        <content type="html"><![CDATA[<p>Jackson JsonParserç±»æ˜¯ä¸€ä¸ªåº•å±‚ä¸€äº›çš„JSONè§£æå™¨ã€‚ å®ƒç±»ä¼¼äºXMLçš„Java StAXè§£æå™¨ï¼Œå·®åˆ«æ˜¯JsonParserè§£æJSONè€Œä¸è§£æXMLã€‚</p><p>Jackson JsonParserçš„è¿è¡Œå±‚çº§ä½äºJackson ObjectMapperã€‚ è¿™ä½¿å¾—JsonParseræ¯”ObjectMapperæ›´å¿«ï¼Œä½†ä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚</p><span id="more"></span><hr><h2 id="åˆ›å»ºä¸€ä¸ªJsonParser"><a href="#åˆ›å»ºä¸€ä¸ªJsonParser" class="headerlink" title="åˆ›å»ºä¸€ä¸ªJsonParser"></a>åˆ›å»ºä¸€ä¸ªJsonParser</h2><p>ä¸ºäº†åˆ›å»ºJackson JsonParserï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªJsonFactoryã€‚ JsonFactoryç”¨äºåˆ›å»ºJsonParserå®ä¾‹ã€‚ JsonFactoryç±»åŒ…å«å‡ ä¸ªcreateParser()æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½ä½¿ç”¨ä¸åŒçš„JSONæºä½œä¸ºå‚æ•°ã€‚</p><p><strong>è¿™æ˜¯åˆ›å»ºä¸€ä¸ªJsonParseræ¥ä»å­—ç¬¦ä¸²ä¸­è§£æJSONçš„ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span></span><br><span class="line">        <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">JsonFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonFactory</span>();</span><br><span class="line"><span class="type">JsonParser</span>  <span class="variable">parser</span>  <span class="operator">=</span> factory.createParser(carJson);</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="ç”¨JsonParserè½¬åŒ–JSON"><a href="#ç”¨JsonParserè½¬åŒ–JSON" class="headerlink" title="ç”¨JsonParserè½¬åŒ–JSON"></a>ç”¨JsonParserè½¬åŒ–JSON</h2><p>ä¸€æ—¦åˆ›å»ºäº†Jackson JsonParserï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒæ¥è§£æJSONã€‚ JsonParserçš„å·¥ä½œæ–¹å¼æ˜¯å°†JSONåˆ†è§£ä¸ºä¸€ç³»åˆ—ä»¤ç‰Œï¼Œå¯ä»¥ä¸€ä¸ªä¸€ä¸ªåœ°è¿­ä»£ä»¤ç‰Œã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªJsonParserç¤ºä¾‹ï¼Œå®ƒç®€å•åœ°å¾ªç¯éå†æ‰€æœ‰æ ‡è®°å¹¶å°†å®ƒä»¬è¾“å‡ºåˆ°System.outã€‚ è¿™æ˜¯ä¸€ä¸ªå®é™…ä¸Šå¾ˆå°‘ç”¨ç¤ºä¾‹ï¼Œåªæ˜¯å±•ç¤ºäº†å°†JSONåˆ†è§£æˆçš„ä»¤ç‰Œï¼Œä»¥åŠå¦‚ä½•éå†ä»¤ç‰Œçš„åŸºç¡€çŸ¥è¯†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">JsonFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonFactory</span>();</span><br><span class="line"><span class="type">JsonParser</span>  <span class="variable">parser</span>  <span class="operator">=</span> factory.createParser(carJson);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(!parser.isClosed())&#123;</span><br><span class="line">    <span class="type">JsonToken</span> <span class="variable">jsonToken</span> <span class="operator">=</span> parser.nextToken();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;jsonToken = &quot;</span> + jsonToken);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¦JsonParserçš„isClosed()æ–¹æ³•è¿”å›falseï¼Œé‚£ä¹ˆJSONæºä¸­ä»ç„¶ä¼šæœ‰æ›´å¤šçš„ä»¤ç‰Œã€‚</p><p>å¯ä»¥ä½¿ç”¨JsonParserçš„nextToken()è·å¾—ä¸€ä¸ªJsonTokenã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æ­¤JsonTokenå®ä¾‹æ£€æŸ¥ç»™å®šçš„ä»¤ç‰Œã€‚ ä»¤ç‰Œç±»å‹ç”±JsonTokenç±»ä¸­çš„ä¸€ç»„å¸¸é‡è¡¨ç¤ºã€‚ è¿™äº›å¸¸é‡æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">START_OBJECT</span><br><span class="line">END_OBJECT</span><br><span class="line">START_ARRAY</span><br><span class="line">END_ARRAY</span><br><span class="line">FIELD_NAME</span><br><span class="line">VALUE_EMBEDDED_OBJECT</span><br><span class="line">VALUE_FALSE</span><br><span class="line">VALUE_TRUE</span><br><span class="line">VALUE_NULL</span><br><span class="line">VALUE_STRING</span><br><span class="line">VALUE_NUMBER_INT</span><br><span class="line">VALUE_NUMBER_FLOAT</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨è¿™äº›å¸¸é‡æ¥æ‰¾å‡ºå½“å‰JsonTokenæ˜¯ä»€ä¹ˆç±»å‹çš„ä»¤ç‰Œã€‚ å¯ä»¥é€šè¿‡è¿™äº›å¸¸é‡çš„equals()æ–¹æ³•è¿›è¡Œæ“ä½œã€‚ è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span></span><br><span class="line">        <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">JsonFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JsonFactory</span>();</span><br><span class="line"><span class="type">JsonParser</span>  <span class="variable">parser</span>  <span class="operator">=</span> factory.createParser(carJson);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line"><span class="keyword">while</span>(!parser.isClosed())&#123;</span><br><span class="line">    <span class="type">JsonToken</span> <span class="variable">jsonToken</span> <span class="operator">=</span> parser.nextToken();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(JsonToken.FIELD_NAME.equals(jsonToken))&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fieldName</span> <span class="operator">=</span> parser.getCurrentName();</span><br><span class="line">        System.out.println(fieldName);</span><br><span class="line"></span><br><span class="line">        jsonToken = parser.nextToken();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;brand&quot;</span>.equals(fieldName))&#123;</span><br><span class="line">            car.brand = parser.getValueAsString();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;doors&quot;</span>.equals(fieldName))&#123;</span><br><span class="line">            car.doors = parser.getValueAsInt();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;car.brand = &quot;</span> + car.brand);</span><br><span class="line">System.out.println(<span class="string">&quot;car.doors = &quot;</span> + car.doors);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœæŒ‡å‘çš„æ ‡è®°æ˜¯å­—æ®µåç§°ï¼Œåˆ™JsonParserçš„getCurrentName()æ–¹æ³•å°†è¿”å›å½“å‰å­—æ®µåç§°ã€‚</p><p>å¦‚æœæŒ‡å‘çš„ä»¤ç‰Œæ˜¯å­—ç¬¦ä¸²å­—æ®µå€¼ï¼Œåˆ™getValueAsString()è¿”å›å½“å‰ä»¤ç‰Œå€¼ä½œä¸ºå­—ç¬¦ä¸²ã€‚ å¦‚æœæŒ‡å‘çš„ä»¤ç‰Œæ˜¯æ•´æ•°å­—æ®µå€¼ï¼Œåˆ™getValueAsInt()è¿”å›å½“å‰ä»¤ç‰Œå€¼ä½œä¸ºintå€¼ã€‚ JsonParserå…·æœ‰æ›´å¤šç±»ä¼¼çš„æ–¹æ³•æ¥è·å–ä¸åŒç±»å‹çš„currenä»¤ç‰Œå€¼ï¼ˆä¾‹å¦‚booleanï¼Œshortï¼Œlongï¼Œfloatï¼Œdoubleç­‰ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jackson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jacksonï¼ˆä¸‰ï¼‰â€”â€”JsonNode</title>
      <link href="/2022/06/12/Jackson_3/"/>
      <url>/2022/06/12/Jackson_3/</url>
      
        <content type="html"><![CDATA[<p>Jackson JsonNodeç±»com.fasterxml.jackson.databind.JsonNodeæ˜¯Jacksonçš„JSONæ ‘å½¢æ¨¡å‹ï¼ˆå¯¹è±¡å›¾æ¨¡å‹ï¼‰ã€‚ Jacksonå¯ä»¥å°†JSONè¯»å–åˆ°JsonNodeå®ä¾‹ä¸­ï¼Œç„¶åå°†JsonNodeå†™å…¥JSONã€‚ å› æ­¤ï¼Œè¿™ä¸€èŠ‚å°†è¯´æ˜å¦‚ä½•å°†JSONååºåˆ—åŒ–ä¸ºJsonNodeä»¥åŠå°†JsonNodeåºåˆ—åŒ–ä¸ºJSONã€‚ æ­¤Jackson JsonNodeæ•™ç¨‹è¿˜å°†è¯´æ˜å¦‚ä½•ä»å¤´å¼€å§‹æ„å»ºJsonNodeå¯¹è±¡å›¾ï¼Œå› æ­¤ä»¥åå¯ä»¥å°†å®ƒä»¬åºåˆ—åŒ–ä¸ºJSONã€‚</p><hr><span id="more"></span><h2 id="JsonNode-vs-ObjectNode"><a href="#JsonNode-vs-ObjectNode" class="headerlink" title="JsonNode vs ObjectNode"></a>JsonNode vs ObjectNode</h2><p>Jackson JsonNodeç±»æ˜¯ä¸å¯å˜çš„ã€‚ è¿™æ„å‘³ç€ï¼Œå®é™…ä¸Šä¸èƒ½ç›´æ¥æ„å»ºJsonNodeå®ä¾‹çš„å¯¹è±¡å›¾ã€‚ è€Œæ˜¯åˆ›å»ºJsonNodeå­ç±»ObjectNodeçš„å¯¹è±¡å›¾ã€‚ ä½œä¸ºJsonNodeçš„å­ç±»ï¼Œå¯ä»¥åœ¨å¯ä»¥ä½¿ç”¨JsonNodeçš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ObjectNodeã€‚</p><hr><h2 id="JSONâ€“-gt-JsonNode"><a href="#JSONâ€“-gt-JsonNode" class="headerlink" title="JSONâ€“&gt;JsonNode"></a>JSONâ€“&gt;JsonNode</h2><p>è¦ä½¿ç”¨Jacksonå°†JSONè¯»å–åˆ°JsonNodeä¸­ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªJackson ObjectMapperå®ä¾‹ã€‚ åœ¨ObjectMapperå®ä¾‹ä¸Šï¼Œè°ƒç”¨readTree()å¹¶å°†JSONæºä½œä¸ºå‚æ•°ä¼ é€’ã€‚ è¿™æ˜¯å°†JSONååºåˆ—åŒ–ä¸ºJsonNodeçš„ç¤ºä¾‹ï¼š</p><blockquote><p>æµ‹è¯•ç¨‹åº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.JsonNode;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> lombok.SneakyThrows;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JSONToNode</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SneakyThrows</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;f1\&quot; : \&quot;v1\&quot; &#125; &quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> objectMapper.readTree(json);</span><br><span class="line"></span><br><span class="line">        System.out.println(jsonNode.get(<span class="string">&quot;f1&quot;</span>).asText());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v1</span><br></pre></td></tr></table></figure><hr><h2 id="JsonNodeâ€“-gt-JSON"><a href="#JsonNodeâ€“-gt-JSON" class="headerlink" title="JsonNodeâ€“&gt;JSON"></a>JsonNodeâ€“&gt;JSON</h2><p>è¦å°†Jacksonçš„JsonNodeå†™å…¥JSONï¼Œè¿˜éœ€è¦ä¸€ä¸ªJackson ObjectMapperå®ä¾‹ã€‚ åœ¨ObjectMapperä¸Šï¼Œè°ƒç”¨writeValueAsString()æ–¹æ³•æˆ–ä»»ä½•é€‚åˆéœ€è¦çš„å†™å…¥æ–¹æ³•ã€‚ è¿™æ˜¯å°†JsonNodeå†™å…¥JSONçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// readJsonIntoJsonNode()ä¸ºè‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> readJsonIntoJsonNode();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> objectMapper.writeValueAsString(jsonNode);</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="è·å–JsonNodeå­—æ®µ"><a href="#è·å–JsonNodeå­—æ®µ" class="headerlink" title="è·å–JsonNodeå­—æ®µ"></a>è·å–JsonNodeå­—æ®µ</h2><p>JsonNodeå¯ä»¥åƒJSONå¯¹è±¡ä¸€æ ·å…·æœ‰å­—æ®µã€‚ å‡è®¾å·²å°†ä»¥ä¸‹JSONè§£æä¸ºJsonNodeï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;field1&quot;</span> : <span class="string">&quot;value1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;field2&quot;</span> : <span class="number">999</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤JSONå¯¹è±¡å…·æœ‰ä¸¤ä¸ªåä¸ºfield1å’Œfield2çš„å­—æ®µã€‚ å¦‚æœæœ‰ä¸€ä¸ªè¡¨ç¤ºä¸Šè¿°JSONå¯¹è±¡çš„Jackson JsonNodeï¼Œåˆ™å¯ä»¥è¿™æ ·è·å¾—ä¸¤ä¸ªå­—æ®µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> ... <span class="comment">//parse above JSON into a JsonNode</span></span><br><span class="line"></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">field1</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;field1&quot;</span>);</span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">field2</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;field2&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œå³ä½¿ä¸¤ä¸ªå­—æ®µéƒ½æ˜¯Stringå­—æ®µï¼Œget()æ–¹æ³•ä¹Ÿå§‹ç»ˆè¿”å›JsonNodeæ¥è¡¨ç¤ºè¯¥å­—æ®µã€‚</p><hr><h2 id="åœ¨è·¯å¾„ä¸­è·å–JsonNodeå­—æ®µ"><a href="#åœ¨è·¯å¾„ä¸­è·å–JsonNodeå­—æ®µ" class="headerlink" title="åœ¨è·¯å¾„ä¸­è·å–JsonNodeå­—æ®µ"></a>åœ¨è·¯å¾„ä¸­è·å–JsonNodeå­—æ®µ</h2><p>Jackson JsonNodeæœ‰ä¸€ä¸ªç§°ä¸ºat()çš„ç‰¹æ®Šæ–¹æ³•ã€‚ at()æ–¹æ³•å¯ä»¥ä»JSONå›¾ä¸­ä»¥ç»™å®šJsonNodeä¸ºæ ¹çš„ä»»ä½•ä½ç½®è®¿é—®JSONå­—æ®µã€‚ å‡è®¾JSONç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;identification&quot;</span> :  &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span> : <span class="string">&quot;James&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ssn: &quot;</span>ABC123552<span class="string">&quot;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå°†æ­¤JSONè§£æä¸ºJsonNodeï¼Œåˆ™å¯ä»¥ä½¿ç”¨at()æ–¹æ³•è®¿é—®åç§°å­—æ®µï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JsonNode</span> <span class="variable">nameNode</span> <span class="operator">=</span> jsonNode.at(<span class="string">&quot;/identification/name&quot;</span>);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¼ é€’ç»™at()æ–¹æ³•çš„å‚æ•°ï¼šå­—ç¬¦ä¸²&#x2F; identification &#x2F; nameã€‚ è¿™æ˜¯ä¸€ä¸ªJSONè·¯å¾„è¡¨è¾¾å¼ã€‚ æ­¤è·¯å¾„è¡¨è¾¾å¼æŒ‡å®šä»æ ¹JsonNodeåˆ°æ‚¨è¦è®¿é—®å…¶å€¼çš„å­—æ®µçš„å®Œæ•´è·¯å¾„ã€‚ è¿™ç±»ä¼¼äºä»æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•åˆ°Unixæ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶çš„è·¯å¾„ã€‚</p><p><strong>è¯·æ³¨æ„ï¼ŒJSONè·¯å¾„è¡¨è¾¾å¼å¿…é¡»ä»¥æ–œæ å­—ç¬¦ï¼ˆ&#x2F;å­—ç¬¦ï¼‰å¼€å¤´</strong>ã€‚</p><p>at()æ–¹æ³•è¿”å›ä¸€ä¸ªJsonNodeï¼Œå®ƒè¡¨ç¤ºè¯·æ±‚çš„JSONå­—æ®µã€‚ è¦è·å–è¯¥å­—æ®µçš„å®é™…å€¼ï¼Œéœ€è¦è°ƒç”¨ä¸‹ä¸€éƒ¨åˆ†ä»‹ç»çš„æ–¹æ³•ä¹‹ä¸€ã€‚ å¦‚æœæ²¡æœ‰èŠ‚ç‚¹ä¸ç»™å®šçš„è·¯å¾„è¡¨è¾¾å¼åŒ¹é…ï¼Œåˆ™å°†è¿”å›nullã€‚</p><hr><h2 id="è½¬æ¢JsonNodeå­—æ®µ"><a href="#è½¬æ¢JsonNodeå­—æ®µ" class="headerlink" title="è½¬æ¢JsonNodeå­—æ®µ"></a>è½¬æ¢JsonNodeå­—æ®µ</h2><p>Jackson JsonNodeç±»åŒ…å«ä¸€ç»„å¯ä»¥å°†å­—æ®µå€¼è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹çš„æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œå°†Stringå­—æ®µå€¼è½¬æ¢ä¸ºlongæˆ–ç›¸åã€‚ è¿™æ˜¯å°†JsonNodeå­—æ®µè½¬æ¢ä¸ºä¸€äº›æ›´å¸¸è§çš„æ•°æ®ç±»å‹çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">f2Str</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;f2&quot;</span>).asText();</span><br><span class="line"><span class="type">double</span> <span class="variable">f2Dbl</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;f2&quot;</span>).asDouble();</span><br><span class="line"><span class="type">int</span>    <span class="variable">f2Int</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;f2&quot;</span>).asInt();</span><br><span class="line"><span class="type">long</span>   <span class="variable">f2Lng</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;f2&quot;</span>).asLong();</span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨é»˜è®¤å€¼è½¬æ¢</strong>: å¦‚æœJsonNodeä¸­çš„å­—æ®µå¯ä»¥ä¸ºnullï¼Œåˆ™åœ¨å°è¯•è½¬æ¢å®ƒæ—¶å¯ä»¥æä¾›é»˜è®¤å€¼ã€‚ è¿™æ˜¯ä½¿ç”¨é»˜è®¤å€¼è°ƒç”¨è½¬æ¢æ–¹æ³•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;f1\&quot;:\&quot;Hello\&quot;, \&quot;f2\&quot;:null &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> objectMapper.readTree(json);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">f2Value</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;f2&quot;</span>).asText(<span class="string">&quot;Default&quot;</span>);</span><br></pre></td></tr></table></figure><p>åœ¨ç¤ºä¾‹çš„JSONå­—ç¬¦ä¸²ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå£°æ˜äº†f2å­—æ®µï¼Œä½†å°†å…¶è®¾ç½®ä¸ºnullã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè°ƒç”¨jsonNode.getï¼ˆâ€œ f2â€ï¼‰ã€‚asTextï¼ˆâ€œ Defaultâ€ï¼‰å°†è¿”å›é»˜è®¤å€¼ï¼Œåœ¨æ­¤ç¤ºä¾‹ä¸­ä¸ºå­—ç¬¦ä¸²Defaultã€‚</p><p>asDouble()ï¼ŒasInt()å’ŒasLong()æ–¹æ³•è¿˜å¯ä»¥é‡‡ç”¨é»˜è®¤å‚æ•°å€¼ï¼Œå¦‚æœå°è¯•ä»ä¸­è·å–å€¼çš„å­—æ®µä¸ºnullï¼Œåˆ™å°†è¿”å›é»˜è®¤å‚æ•°å€¼ã€‚</p><p>è¯·æ³¨æ„ï¼Œå¦‚æœè¯¥å­—æ®µåœ¨JSONä¸­æœªæ˜¾å¼è®¾ç½®ä¸ºnullï¼Œä½†åœ¨JSONä¸­ä¸¢å¤±ï¼Œåˆ™è°ƒç”¨jsonNode.getï¼ˆâ€œ fieldNameâ€ï¼‰å°†è¿”å›Java nullå€¼ï¼Œæ‚¨æ— æ³•åœ¨è¯¥Javaå€¼ä¸Šè°ƒç”¨asInt() ï¼ŒasDouble()ï¼ŒasLong()æˆ–asText()ã€‚ å¦‚æœå°è¯•è¿™æ ·åšï¼Œå°†ä¼šå¯¼è‡´NullPointerExceptionã€‚ è¿™æ˜¯è¯´æ˜è¿™ç§æƒ…å†µçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;f1\&quot;:\&quot;Hello\&quot; &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> objectMapper.readTree(json);</span><br><span class="line"></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">f2FieldNode</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;f2&quot;</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="åˆ›å»ºä¸€ä¸ªObjectNode"><a href="#åˆ›å»ºä¸€ä¸ªObjectNode" class="headerlink" title="åˆ›å»ºä¸€ä¸ªObjectNode"></a>åˆ›å»ºä¸€ä¸ªObjectNode</h2><p>å¦‚å‰æ‰€è¿°ï¼ŒJsonNodeç±»æ˜¯ä¸å¯å˜çš„ã€‚ è¦åˆ›å»ºJsonNodeå¯¹è±¡å›¾ï¼Œå¿…é¡»èƒ½å¤Ÿæ›´æ”¹å›¾ä¸­çš„JsonNodeå®ä¾‹ï¼Œä¾‹å¦‚ è®¾ç½®å±æ€§å€¼å’Œå­JsonNodeå®ä¾‹ç­‰ã€‚ç”±äºæ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤æ— æ³•ç›´æ¥ä½¿ç”¨JsonNodeæ¥å®ç°ã€‚</p><p>è€Œæ˜¯åˆ›å»ºä¸€ä¸ªObjectNodeå®ä¾‹ï¼Œè¯¥å®ä¾‹æ˜¯JsonNodeçš„å­ç±»ã€‚ è¿™æ˜¯ä¸€ä¸ªé€šè¿‡Jackson ObjectMapper createObjectNode()æ–¹æ³•åˆ›å»ºObjectNodeçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectNode</span> <span class="variable">objectNode</span> <span class="operator">=</span> objectMapper.createObjectNode();</span><br></pre></td></tr></table></figure><hr><h2 id="Set-ObjectNodeå­—æ®µ"><a href="#Set-ObjectNodeå­—æ®µ" class="headerlink" title="Set ObjectNodeå­—æ®µ"></a>Set ObjectNodeå­—æ®µ</h2><p>è¦åœ¨Jackson ObjectNodeä¸Šè®¾ç½®å­—æ®µï¼Œå¯ä»¥è°ƒç”¨å…¶set()æ–¹æ³•ï¼Œå¹¶å°†å­—æ®µåç§°Stringå’ŒJsonNodeä½œä¸ºå‚æ•°ä¼ é€’ã€‚ è¿™æ˜¯åœ¨Jacksonçš„ObjectNodeä¸Šè®¾ç½®å­—æ®µçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"><span class="type">ObjectNode</span> <span class="variable">parentNode</span> <span class="operator">=</span> objectMapper.createObjectNode();</span><br><span class="line"></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">childNode</span> <span class="operator">=</span> readJsonIntoJsonNode();</span><br><span class="line"></span><br><span class="line">parentNode.set(<span class="string">&quot;child1&quot;</span>, childNode);</span><br></pre></td></tr></table></figure><hr><h2 id="Put-ObjectNodeå­—æ®µ"><a href="#Put-ObjectNodeå­—æ®µ" class="headerlink" title="Put ObjectNodeå­—æ®µ"></a>Put ObjectNodeå­—æ®µ</h2><p>ObjectNodeç±»è¿˜å…·æœ‰ä¸€ç»„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ä¸ºå­—æ®µput(è®¾ç½®)å€¼ã€‚ è¿™æ¯”å°è¯•å°†åŸå§‹å€¼è½¬æ¢ä¸ºJsonNodeå¹¶ä½¿ç”¨set()è¿›è¡Œè®¾ç½®è¦å®¹æ˜“å¾—å¤šã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨put()æ–¹æ³•ä¸ºObjectNodeä¸Šçš„å­—æ®µè®¾ç½®å­—ç¬¦ä¸²å€¼çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">objectNode.put(<span class="string">&quot;field1&quot;</span>, <span class="string">&quot;value1&quot;</span>);</span><br><span class="line">objectNode.put(<span class="string">&quot;field2&quot;</span>, <span class="number">123</span>);</span><br><span class="line">objectNode.put(<span class="string">&quot;field3&quot;</span>, <span class="number">999.999</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="åˆ é™¤å­—æ®µ"><a href="#åˆ é™¤å­—æ®µ" class="headerlink" title="åˆ é™¤å­—æ®µ"></a>åˆ é™¤å­—æ®µ</h2><p>ObjectNodeç±»å…·æœ‰ä¸€ä¸ªç§°ä¸ºremove()çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ç”¨äºä»ObjectNodeä¸­åˆ é™¤å­—æ®µã€‚ è¿™æ˜¯ä¸€ä¸ªé€šè¿‡å…¶remove()æ–¹æ³•ä»Jackson ObjectNodeåˆ é™¤å­—æ®µçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objectNode.remove(<span class="string">&quot;fieldName&quot;</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="å¾ªç¯JsonNodeå­—æ®µ"><a href="#å¾ªç¯JsonNodeå­—æ®µ" class="headerlink" title="å¾ªç¯JsonNodeå­—æ®µ"></a>å¾ªç¯JsonNodeå­—æ®µ</h2><p>JsonNodeç±»å…·æœ‰ä¸€ä¸ªåä¸ºfieldNames()çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªIteratorï¼Œå¯ä»¥è¿­ä»£JsonNodeçš„æ‰€æœ‰å­—æ®µåç§°ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—æ®µåç§°æ¥è·å–å­—æ®µå€¼ã€‚ è¿™æ˜¯ä¸€ä¸ªè¿­ä»£Jackson JsonNodeçš„æ‰€æœ‰å­—æ®µåç§°å’Œå€¼çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;String&gt; fieldNames = jsonNode.fieldNames();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(fieldNames.hasNext()) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">fieldName</span> <span class="operator">=</span> fieldNames.next();</span><br><span class="line"></span><br><span class="line">    <span class="type">JsonNode</span> <span class="variable">field</span> <span class="operator">=</span> jsonNode.get(fieldName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jackson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jacksonï¼ˆäºŒï¼‰â€”â€”ObjectMapper</title>
      <link href="/2022/06/11/Jackson_2/"/>
      <url>/2022/06/11/Jackson_2/</url>
      
        <content type="html"><![CDATA[<p>Jackson æœ€å¸¸ç”¨çš„ API å°±æ˜¯åŸºäºâ€å¯¹è±¡ç»‘å®šâ€ çš„ <strong>ObjectMapper</strong>ï¼š</p><ul><li>ObjectMapperå¯ä»¥ä»å­—ç¬¦ä¸²ï¼Œæµæˆ–æ–‡ä»¶ä¸­è§£æJSONï¼Œå¹¶åˆ›å»ºè¡¨ç¤ºå·²è§£æçš„JSONçš„Javaå¯¹è±¡ã€‚ å°†JSONè§£æä¸ºJavaå¯¹è±¡ä¹Ÿç§°ä¸ºä»JSONååºåˆ—åŒ–Javaå¯¹è±¡ã€‚</li><li>ObjectMapperä¹Ÿå¯ä»¥ä»Javaå¯¹è±¡åˆ›å»ºJSONã€‚ ä»Javaå¯¹è±¡ç”ŸæˆJSONä¹Ÿç§°ä¸ºå°†Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºJSONã€‚</li><li>Objectæ˜ å°„å™¨å¯ä»¥å°†JSONè§£æä¸ºè‡ªå®šä¹‰çš„ç±»çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è§£æç½®JSONæ ‘æ¨¡å‹çš„å¯¹è±¡ã€‚</li></ul><p><strong>ä¹‹æ‰€ä»¥ç§°ä¸ºObjectMapperæ˜¯å› ä¸ºå®ƒå°†JSONæ˜ å°„åˆ°Javaå¯¹è±¡ï¼ˆååºåˆ—åŒ–ï¼‰ï¼Œæˆ–è€…å°†Javaå¯¹è±¡æ˜ å°„åˆ°JSONï¼ˆåºåˆ—åŒ–ï¼‰</strong>ã€‚</p><span id="more"></span><hr><h2 id="ä»JSONä¸­è·å–Javaå¯¹è±¡"><a href="#ä»JSONä¸­è·å–Javaå¯¹è±¡" class="headerlink" title="ä»JSONä¸­è·å–Javaå¯¹è±¡"></a>ä»JSONä¸­è·å–Javaå¯¹è±¡</h2><h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><p><strong>ä¸€ä¸ªç®€å•çš„ä¾‹å­</strong>ï¼š</p><blockquote><p>Carç±»ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">brand</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">doors</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å°†Jsonè½¬æ¢ä¸ºCarç±»å¯¹è±¡ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> jackson.domain.Car;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JacksonToCar</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span><span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(carJson, Car.class);</span><br><span class="line">            System.out.println(<span class="string">&quot;car brand = &quot;</span> + car.getBrand());</span><br><span class="line">            System.out.println(<span class="string">&quot;car doors = &quot;</span> + car.getDoors());</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">car brand = Mercedes</span><br><span class="line">car doors = 5</span><br></pre></td></tr></table></figure><hr><h3 id="å¦‚ä½•åŒ¹é…JSONå¯¹è±¡çš„å­—æ®µå’ŒJavaå¯¹è±¡çš„å±æ€§"><a href="#å¦‚ä½•åŒ¹é…JSONå¯¹è±¡çš„å­—æ®µå’ŒJavaå¯¹è±¡çš„å±æ€§" class="headerlink" title="å¦‚ä½•åŒ¹é…JSONå¯¹è±¡çš„å­—æ®µå’ŒJavaå¯¹è±¡çš„å±æ€§"></a>å¦‚ä½•åŒ¹é…JSONå¯¹è±¡çš„å­—æ®µå’ŒJavaå¯¹è±¡çš„å±æ€§</h3><p><strong>é»˜è®¤æƒ…å†µä¸‹ï¼ŒJacksoné€šè¿‡å°†JSONå­—æ®µçš„åç§°ä¸Javaå¯¹è±¡ä¸­çš„getterå’Œsetteræ–¹æ³•è¿›è¡ŒåŒ¹é…ï¼Œå°†JSONå¯¹è±¡çš„å­—æ®µæ˜ å°„åˆ°Javaå¯¹è±¡ä¸­çš„å±æ€§ã€‚ Jacksonåˆ é™¤äº†getterå’Œsetteræ–¹æ³•åç§°çš„â€œ getâ€å’Œâ€œ setâ€éƒ¨åˆ†ï¼Œå¹¶å°†å…¶ä½™åç§°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå°å†™</strong>ã€‚</p><p>ä¾‹å¦‚ï¼Œåä¸ºbrandçš„JSONå­—æ®µä¸åä¸ºgetBrand()å’ŒsetBrand()çš„Java getterå’Œsetteræ–¹æ³•åŒ¹é…ã€‚ åä¸ºengineNumberçš„JSONå­—æ®µå°†ä¸åä¸ºgetEngineNumber()å’ŒsetEngineNumber()çš„getterå’ŒsetteråŒ¹é…ã€‚</p><p>å¦‚æœéœ€è¦ä»¥å…¶ä»–æ–¹å¼å°†JSONå¯¹è±¡å­—æ®µä¸Javaå¯¹è±¡å­—æ®µåŒ¹é…ï¼Œåˆ™éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨ï¼Œæˆ–è€…ä½¿ç”¨ä¸€äº›Jacksonæ³¨è§£ã€‚</p><hr><h3 id="JSONå­—ç¬¦ä¸²â€“-gt-Javaå¯¹è±¡"><a href="#JSONå­—ç¬¦ä¸²â€“-gt-Javaå¯¹è±¡" class="headerlink" title="JSONå­—ç¬¦ä¸²â€“&gt;Javaå¯¹è±¡"></a>JSONå­—ç¬¦ä¸²â€“&gt;Javaå¯¹è±¡</h3><p>ä»JSONå­—ç¬¦ä¸²è¯»å–Javaå¯¹è±¡éå¸¸å®¹æ˜“ã€‚ ä¸Šé¢å·²ç»æœ‰äº†ä¸€ä¸ªç¤ºä¾‹â€”â€”JSONå­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ObjectMapperçš„readValue()æ–¹æ³•ã€‚</p><blockquote><p><strong>è¿™æ˜¯å¦ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹</strong>ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> jackson.domain.Car;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonToObject</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 6 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(carJson, Car.class);</span><br><span class="line">            System.out.println(car);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Car(brand=Mercedes, doors=6)</span><br></pre></td></tr></table></figure><hr><h3 id="JSONå­—ç¬¦è¾“å…¥æµâ€“-gt-Javaå¯¹è±¡"><a href="#JSONå­—ç¬¦è¾“å…¥æµâ€“-gt-Javaå¯¹è±¡" class="headerlink" title="JSONå­—ç¬¦è¾“å…¥æµâ€“&gt;Javaå¯¹è±¡"></a>JSONå­—ç¬¦è¾“å…¥æµâ€“&gt;Javaå¯¹è±¡</h3><p><strong>è¿˜å¯ä»¥ä»é€šè¿‡Readerå®ä¾‹åŠ è½½çš„JSONä¸­è¯»å–å¯¹è±¡ã€‚ç¤ºä¾‹å¦‚ä¸‹</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span></span><br><span class="line">        <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 4 &#125;&quot;</span>;</span><br><span class="line"><span class="type">Reader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringReader</span>(carJson);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(reader, Car.class);</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="JSONæ–‡ä»¶â€“-gt-Javaå¯¹è±¡"><a href="#JSONæ–‡ä»¶â€“-gt-Javaå¯¹è±¡" class="headerlink" title="JSONæ–‡ä»¶â€“&gt;Javaå¯¹è±¡"></a>JSONæ–‡ä»¶â€“&gt;Javaå¯¹è±¡</h3><p>ä»æ–‡ä»¶è¯»å–JSONå½“ç„¶å¯ä»¥é€šè¿‡FileReaderï¼ˆè€Œä¸æ˜¯StringReaderï¼‰æ¥å®Œæˆï¼Œä¹Ÿå¯ä»¥é€šè¿‡Fileå¯¹è±¡æ¥å®Œæˆã€‚ è¿™æ˜¯ä»æ–‡ä»¶è¯»å–JSONçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;data/car.json&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(file, Car.class);</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="JSON-via-URLâ€”-gt-Javaå¯¹è±¡"><a href="#JSON-via-URLâ€”-gt-Javaå¯¹è±¡" class="headerlink" title="JSON via URLâ€”&gt;Javaå¯¹è±¡"></a>JSON via URLâ€”&gt;Javaå¯¹è±¡</h3><p><strong>å¯ä»¥é€šè¿‡URLï¼ˆjava.net.URLï¼‰ä»JSONè¯»å–å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤º</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;file:data/car.json&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(url, Car.class);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ä½¿ç”¨æ–‡ä»¶URLï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HTTP URLï¼ˆç±»ä¼¼äº<a href="http://jenkov.com/some-data.json%EF%BC%89%E3%80%82">http://jenkov.com/some-data.jsonï¼‰ã€‚</a></p><hr><h3 id="JSONå­—èŠ‚è¾“å…¥æµâ€“-gt-Javaå¯¹è±¡"><a href="#JSONå­—èŠ‚è¾“å…¥æµâ€“-gt-Javaå¯¹è±¡" class="headerlink" title="JSONå­—èŠ‚è¾“å…¥æµâ€“&gt;Javaå¯¹è±¡"></a>JSONå­—èŠ‚è¾“å…¥æµâ€“&gt;Javaå¯¹è±¡</h3><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ObjectMapperé€šè¿‡InputStreamä»JSONè¯»å–å¯¹è±¡ã€‚ è¿™æ˜¯ä¸€ä¸ªä»InputStreamè¯»å–JSONçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;data/car.json&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(input, Car.class);</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="JSONäºŒè¿›åˆ¶æ•°ç»„â€“-gt-Javaå¯¹è±¡"><a href="#JSONäºŒè¿›åˆ¶æ•°ç»„â€“-gt-Javaå¯¹è±¡" class="headerlink" title="JSONäºŒè¿›åˆ¶æ•°ç»„â€“&gt;Javaå¯¹è±¡"></a>JSONäºŒè¿›åˆ¶æ•°ç»„â€“&gt;Javaå¯¹è±¡</h3><p>Jacksonè¿˜æ”¯æŒä»JSONå­—èŠ‚æ•°ç»„è¯»å–å¯¹è±¡ã€‚ è¿™æ˜¯ä»JSONå­—èŠ‚æ•°ç»„è¯»å–å¯¹è±¡çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span></span><br><span class="line">        <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">byte</span>[] bytes = carJson.getBytes(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(bytes, Car.class);</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="JSONæ•°ç»„å­—ç¬¦ä¸²â€“-gt-Javaå¯¹è±¡æ•°ç»„"><a href="#JSONæ•°ç»„å­—ç¬¦ä¸²â€“-gt-Javaå¯¹è±¡æ•°ç»„" class="headerlink" title="JSONæ•°ç»„å­—ç¬¦ä¸²â€“&gt;Javaå¯¹è±¡æ•°ç»„"></a>JSONæ•°ç»„å­—ç¬¦ä¸²â€“&gt;Javaå¯¹è±¡æ•°ç»„</h3><p>Jackson ObjectMapperä¹Ÿå¯ä»¥ä»JSONæ•°ç»„å­—ç¬¦ä¸²è¯»å–å¯¹è±¡æ•°ç»„ã€‚ è¿™æ˜¯ä»JSONæ•°ç»„å­—ç¬¦ä¸²è¯»å–å¯¹è±¡æ•°ç»„çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="string">&quot;[&#123;\&quot;brand\&quot;:\&quot;ford\&quot;&#125;, &#123;\&quot;brand\&quot;:\&quot;Fiat\&quot;&#125;]&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">Car[] cars2 = objectMapper.readValue(jsonArray, Car[].class);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>éœ€è¦å°†Caræ•°ç»„ç±»ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™readValue()æ–¹æ³•ã€‚</p><p>è¯»å–å¯¹è±¡æ•°ç»„è¿˜å¯ä»¥ä¸å­—ç¬¦ä¸²ä»¥å¤–çš„å…¶ä»–JSONæºä¸€èµ·ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼Œæ–‡ä»¶ï¼ŒURLï¼ŒInputStreamï¼ŒReaderç­‰ã€‚</p><hr><h3 id="JSONæ•°ç»„å­—ç¬¦ä¸²â€“-gt-List"><a href="#JSONæ•°ç»„å­—ç¬¦ä¸²â€“-gt-List" class="headerlink" title="JSONæ•°ç»„å­—ç¬¦ä¸²â€“&gt;List"></a>JSONæ•°ç»„å­—ç¬¦ä¸²â€“&gt;List</h3><p><strong>Jackson ObjectMapperè¿˜å¯ä»¥ä»JSONæ•°ç»„å­—ç¬¦ä¸²è¯»å–å¯¹è±¡çš„Java Listã€‚ è¿™æ˜¯ä»JSONæ•°ç»„å­—ç¬¦ä¸²è¯»å–å¯¹è±¡åˆ—è¡¨çš„ç¤ºä¾‹</strong>ï¼š</p><blockquote><p>æµ‹è¯•ç¨‹åº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.type.TypeReference;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * JSONæ•°ç»„å­—ç¬¦</span></span><br><span class="line"><span class="comment"> * ä¸²--&gt;List</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonToList</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="string">&quot;[&#123;\&quot;brand\&quot;:\&quot;ford\&quot;&#125;, &#123;\&quot;brand\&quot;:\&quot;Fiat\&quot;&#125;]&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;Car&gt; cars = objectMapper.readValue(jsonArray, <span class="keyword">new</span> <span class="title class_">TypeReference</span>&lt;List&lt;Car&gt;&gt;()&#123;&#125;);</span><br><span class="line">            System.out.println(cars);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•ç»“æœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Car(brand=ford, doors=0), Car(brand=Fiat, doors=0)]</span><br></pre></td></tr></table></figure><hr><h3 id="JSONå­—ç¬¦ä¸²â€“-gt-Map"><a href="#JSONå­—ç¬¦ä¸²â€“-gt-Map" class="headerlink" title="JSONå­—ç¬¦ä¸²â€“&gt;Map"></a>JSONå­—ç¬¦ä¸²â€“&gt;Map</h3><p>Jackson ObjectMapperè¿˜å¯ä»¥ä»JSONå­—ç¬¦ä¸²è¯»å–Java Mapã€‚ å¦‚æœäº‹å…ˆä¸çŸ¥é“å°†è¦è§£æçš„ç¡®åˆ‡JSONç»“æ„ï¼Œè¿™ç§æ–¹æ³•æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ é€šå¸¸ï¼Œä¼šå°†JSONå¯¹è±¡è¯»å…¥Java Mapã€‚ JSONå¯¹è±¡ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½å°†æˆä¸ºJava Mapä¸­çš„é”®å€¼å¯¹ã€‚</p><p><strong>è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Jackson ObjectMapperä»JSONå­—ç¬¦ä¸²è¯»å–Java Mapçš„ç¤ºä¾‹</strong>ï¼š</p><blockquote><p>æµ‹è¯•ç¨‹åº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.type.TypeReference;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonToMap</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="string">&quot;&#123;\&quot;brand\&quot;:\&quot;ford\&quot;, \&quot;doors\&quot;:5&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Map&lt;String, Object&gt; jsonMap = objectMapper.readValue(jsonObject,</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">TypeReference</span>&lt;Map&lt;String,Object&gt;&gt;()&#123;&#125;);</span><br><span class="line">            System.out.println(jsonMap);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;brand=ford, doors=5&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å¿½ç•¥æœªçŸ¥çš„JSONå­—æ®µ"><a href="#å¿½ç•¥æœªçŸ¥çš„JSONå­—æ®µ" class="headerlink" title="å¿½ç•¥æœªçŸ¥çš„JSONå­—æ®µ"></a>å¿½ç•¥æœªçŸ¥çš„JSONå­—æ®µ</h3><p>æœ‰æ—¶å€™ï¼Œä¸è¦ä»JSONè¯»å–çš„Javaå¯¹è±¡ç›¸æ¯”ï¼ŒJSONä¸­çš„å­—æ®µæ›´å¤šã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒJacksonåœ¨è¿™ç§æƒ…å†µä¸‹ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ŒæŠ¥ä¸çŸ¥é“XYZå­—æ®µå¼‚å¸¸ï¼Œå› ä¸ºåœ¨Javaå¯¹è±¡ä¸­æ‰¾ä¸åˆ°è¯¥å­—æ®µã€‚</p><p>ä½†æ˜¯ï¼Œæœ‰æ—¶åº”è¯¥å…è®¸JSONä¸­çš„å­—æ®µå¤šäºç›¸åº”çš„Javaå¯¹è±¡ä¸­çš„å­—æ®µã€‚ ä¾‹å¦‚ï¼Œè¦ä»RESTæœåŠ¡è§£æJSONï¼Œè€Œè¯¥RESTæœåŠ¡åŒ…å«çš„æ•°æ®è¿œè¿œè¶…å‡ºæ‰€éœ€çš„ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨Jacksoné…ç½®å¿½ç•¥è¿™äº›é¢å¤–çš„å­—æ®µã€‚ ä»¥ä¸‹æ˜¯é…ç½®Jackson ObjectMapperå¿½ç•¥æœªçŸ¥å­—æ®µçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><hr><h3 id="ä¸å…è®¸åŸºæœ¬ç±»å‹ä¸ºnull"><a href="#ä¸å…è®¸åŸºæœ¬ç±»å‹ä¸ºnull" class="headerlink" title="ä¸å…è®¸åŸºæœ¬ç±»å‹ä¸ºnull"></a>ä¸å…è®¸åŸºæœ¬ç±»å‹ä¸ºnull</h3><p>å¦‚æœJSONå­—ç¬¦ä¸²åŒ…å«å…¶å€¼è®¾ç½®ä¸ºnullçš„å­—æ®µï¼ˆå¯¹äºåœ¨ç›¸åº”çš„Javaå¯¹è±¡ä¸­æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆintï¼Œlongï¼Œfloatï¼Œdoubleç­‰ï¼‰çš„å­—æ®µï¼‰ï¼ŒJackson ObjectMapperé»˜è®¤ä¼šå¤„ç†åŸºæœ¬æ•°æ®ç±»å‹ä¸ºnullçš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å¯ä»¥å°†Jackson ObjectMapperé»˜è®¤é…ç½®ä¸ºå¤±æ•ˆï¼Œè¿™æ ·åŸºæœ¬æ•°æ®ä¸ºnullå°±ä¼šè½¬æ¢å¤±è´¥ã€‚ ä¾‹å¦‚ä»¥ä¸‹Carç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">brand</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">doors</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å­—æ®µdoorsæ˜¯ Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹intã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªå¯¹åº”äºå¯¹è±¡carçš„ JSON å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> <span class="attr">&quot;brand&quot;</span><span class="punctuation">:</span><span class="string">&quot;Toyota&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;doors&quot;</span><span class="punctuation">:</span><span class="keyword">null</span> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½å…·æœ‰nullå€¼ ã€‚å› æ­¤<strong>é»˜è®¤æƒ…å†µä¸‹ï¼ŒJackson ä¼šå¿½ç•¥åŸºæœ¬æ•°æ®ç±»å‹å­—æ®µçš„nullå€¼</strong>ã€‚ä½†æ˜¯ä¹Ÿå¯ä»¥å°†Jackson  ObjectMapperé…ç½®ä¸ºå¤±è´¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">objectMapper.configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure><p>å°†<code>FAIL_ON_NULL_FOR_PRIMITIVES</code>é…ç½®å€¼è®¾ç½®ä¸º true æ—¶ï¼Œå°è¯•å°†ç©º JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–æ—¶ï¼Œå°†å‡ºç°å¼‚å¸¸ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª Java Jackson ObjectMapper ç¤ºä¾‹ï¼Œå®ƒå°†å¤±è´¥ï¼Œå› ä¸º JSON å­—ç¬¦ä¸²ä¸­ Java åŸºæœ¬æ•°æ®ç±»å‹å­—æ®µdoorså€¼ä¸ºnullï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">objectMapper.configure(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;brand\&quot;:\&quot;Toyota\&quot;, \&quot;doors\&quot;:null &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.readValue(carJson, Car.class);</span><br></pre></td></tr></table></figure><blockquote><p>è¿è¡Œå¼‚å¸¸ï¼š</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot map `null` into type `int` (set DeserializationConfig.DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES to &#x27;false&#x27; to allow)</span><br><span class="line"> at [Source: (String)&quot;&#123; &quot;brand&quot; : &quot;Mercedes&quot;, &quot;doors&quot; : null &#125;&quot;; line: 1, column: 35] </span><br></pre></td></tr></table></figure><hr><p>###è‡ªå®šä¹‰ååºåˆ—åŒ–</p><p>æœ‰æ—¶ï¼Œå¯èƒ½å¸Œæœ›ä»¥ä¸åŒäºJackson ObjectMapperç¼ºçœæ–¹å¼çš„æ–¹å¼å°†JSONå­—ç¬¦ä¸²è¯»å…¥Javaå¯¹è±¡ã€‚ å¯ä»¥å°†è‡ªå®šä¹‰ååºåˆ—åŒ–å™¨æ·»åŠ åˆ°ObjectMapperï¼Œå¯ä»¥æŒ‰éœ€è¦æ‰§è¡Œååºåˆ—åŒ–ã€‚</p><p>è¿™æ˜¯åœ¨Jacksonçš„ObjectMapperä¸­æ³¨å†Œå’Œä½¿ç”¨è‡ªå®šä¹‰ååºåˆ—åŒ–å™¨çš„æ–¹å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Ford\&quot;, \&quot;doors\&quot; : 6 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">SimpleModule</span> <span class="variable">module</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleModule</span>(<span class="string">&quot;CarDeserializer&quot;</span>, <span class="keyword">new</span> <span class="title class_">Version</span>(<span class="number">3</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>));</span><br><span class="line"><span class="keyword">module</span>.addDeserializer(Car.class, <span class="keyword">new</span> <span class="title class_">CarDeserializer</span>(Car.class));</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">mapper.registerModule(<span class="keyword">module</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> mapper.readValue(json, Car.class);</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰ååºåˆ—åŒ–å™¨CarDeserializerç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarDeserializer</span> <span class="keyword">extends</span> <span class="title class_">StdDeserializer</span>&lt;Car&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CarDeserializer</span><span class="params">(Class&lt;?&gt; vc)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(vc);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Car <span class="title function_">deserialize</span><span class="params">(JsonParser parser, DeserializationContext deserializer)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">        <span class="keyword">while</span>(!parser.isClosed())&#123;</span><br><span class="line">            <span class="type">JsonToken</span> <span class="variable">jsonToken</span> <span class="operator">=</span> parser.nextToken();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(JsonToken.FIELD_NAME.equals(jsonToken))&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">fieldName</span> <span class="operator">=</span> parser.getCurrentName();</span><br><span class="line">                System.out.println(fieldName);</span><br><span class="line"></span><br><span class="line">                jsonToken = parser.nextToken();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;brand&quot;</span>.equals(fieldName))&#123;</span><br><span class="line">                    car.setBrand(parser.getValueAsString());</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;doors&quot;</span>.equals(fieldName))&#123;</span><br><span class="line">                    car.setDoors(parser.getValueAsInt());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> car;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="å°†å¯¹è±¡å†™å…¥JSON"><a href="#å°†å¯¹è±¡å†™å…¥JSON" class="headerlink" title="å°†å¯¹è±¡å†™å…¥JSON"></a>å°†å¯¹è±¡å†™å…¥JSON</h2><h3 id="Javaå¯¹è±¡â€“-gt-JSON"><a href="#Javaå¯¹è±¡â€“-gt-JSON" class="headerlink" title="Javaå¯¹è±¡â€“&gt;JSON"></a>Javaå¯¹è±¡â€“&gt;JSON</h3><p><strong>Jackson ObjectMapperä¹Ÿå¯ä»¥ç”¨äºä»å¯¹è±¡ç”ŸæˆJSONã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€è¿›è¡Œæ“ä½œ</strong>ï¼š</p><ul><li>writeValue()</li><li>writeValueAsString()</li><li>writeValueAsBytes()</li></ul><p>è¿™æ˜¯ä¸€ä¸ªä»Carå¯¹è±¡ç”ŸæˆJSONçš„ç¤ºä¾‹ï¼Œå’Œä¸Šé¢çš„å®ä¾‹ç›¸åï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">  <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">  car.setBrand(<span class="string">&quot;BMW&quot;</span>);</span><br><span class="line">  car.setDoors(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">  objectMapper.writeValue(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;data/output-2.json&quot;</span>), car);</span><br></pre></td></tr></table></figure><p>æ­¤ç¤ºä¾‹é¦–å…ˆåˆ›å»ºä¸€ä¸ªObjectMapperï¼Œç„¶ååˆ›å»ºä¸€ä¸ªCarå®ä¾‹ï¼Œæœ€åè°ƒç”¨ObjectMapperçš„writeValue()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†Carå¯¹è±¡è½¬æ¢ä¸ºJSONå¹¶å°†å…¶å†™å…¥ç»™å®šçš„FileOutputStreamã€‚</p><p>ObjectMapperçš„writeValueAsString()å’ŒwriteValueAsBytes()éƒ½ä»ä¸€ä¸ªå¯¹è±¡ç”ŸæˆJSONï¼Œå¹¶å°†ç”Ÿæˆçš„JSONä½œä¸ºStringæˆ–å­—èŠ‚æ•°ç»„è¿”å›ã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> jackson.domain.Car;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ObjectToStringJson</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">        car.setBrand(<span class="string">&quot;Mercedes&quot;</span>);</span><br><span class="line">        car.setDoors(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span> objectMapper.writeValueAsString(car);</span><br><span class="line">        System.out.println(carJson);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;brand&quot;</span><span class="punctuation">:</span><span class="string">&quot;Mercedes&quot;</span><span class="punctuation">,</span><span class="attr">&quot;doors&quot;</span><span class="punctuation">:</span><span class="number">5</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h3 id="è‡ªå®šä¹‰åºåˆ—åŒ–"><a href="#è‡ªå®šä¹‰åºåˆ—åŒ–" class="headerlink" title="è‡ªå®šä¹‰åºåˆ—åŒ–"></a>è‡ªå®šä¹‰åºåˆ—åŒ–</h3><p>æœ‰æ—¶ï¼Œæƒ³è¦å°†Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºJSONçš„æ–¹å¼ä¸ä½¿ç”¨Jacksonçš„é»˜è®¤æ–¹å¼ä¸åŒã€‚ ä¾‹å¦‚ï¼Œå¯èƒ½æƒ³è¦åœ¨JSONä¸­ä½¿ç”¨ä¸Javaå¯¹è±¡ä¸­ä¸åŒçš„å­—æ®µåç§°ï¼Œæˆ–è€…å¸Œæœ›å®Œå…¨çœç•¥æŸäº›å­—æ®µã€‚</p><p>Jacksonå¯ä»¥åœ¨ObjectMapperä¸Šè®¾ç½®è‡ªå®šä¹‰åºåˆ—åŒ–å™¨ã€‚ è¯¥åºåˆ—åŒ–å™¨å·²ä¸ºæŸä¸ªç±»æ³¨å†Œï¼Œç„¶ååœ¨æ¯æ¬¡è¦æ±‚ObjectMapperåºåˆ—åŒ–Carå¯¹è±¡æ—¶å°†è°ƒç”¨è¯¥åºåˆ—åŒ–å™¨ã€‚</p><p>è¿™æ˜¯ä¸ºCarç±»æ³¨å†Œè‡ªå®šä¹‰åºåˆ—åŒ–å™¨çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">CarSerializer</span> <span class="variable">carSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CarSerializer</span>(Car.class);</span><br><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">SimpleModule</span> <span class="variable">module</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleModule</span>(<span class="string">&quot;CarSerializer&quot;</span>, <span class="keyword">new</span> <span class="title class_">Version</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>));</span><br><span class="line"><span class="keyword">module</span>.addSerializer(Car.class, carSerializer);</span><br><span class="line"></span><br><span class="line">objectMapper.registerModule(<span class="keyword">module</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.setBrand(<span class="string">&quot;Mercedes&quot;</span>);</span><br><span class="line">car.setDoors(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span> objectMapper.writeValueAsString(car);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰åºåˆ—åŒ–å™¨CarSerializerç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarSerializer</span> <span class="keyword">extends</span> <span class="title class_">StdSerializer</span>&lt;Car&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">CarSerializer</span><span class="params">(Class&lt;Car&gt; t)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(t);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Car car, JsonGenerator jsonGenerator,SerializerProvider serializerProvider)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        jsonGenerator.writeStartObject();</span><br><span class="line">        jsonGenerator.writeStringField(<span class="string">&quot;producer&quot;</span>, car.getBrand());</span><br><span class="line">        jsonGenerator.writeNumberField(<span class="string">&quot;doorCount&quot;</span>, car.getDoors());</span><br><span class="line">        jsonGenerator.writeEndObject();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="Jacksonæ—¥æœŸè½¬åŒ–"><a href="#Jacksonæ—¥æœŸè½¬åŒ–" class="headerlink" title="Jacksonæ—¥æœŸè½¬åŒ–"></a>Jacksonæ—¥æœŸè½¬åŒ–</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒJacksonä¼šå°†java.util.Dateå¯¹è±¡åºåˆ—åŒ–ä¸ºå…¶longå‹çš„å€¼ï¼Œè¯¥å€¼æ˜¯è‡ª1970å¹´1æœˆ1æ—¥ä»¥æ¥çš„æ¯«ç§’æ•°ã€‚ä½†æ˜¯ï¼ŒJacksonè¿˜æ”¯æŒå°†æ—¥æœŸæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚</p><h3 id="Dateâ€“-gt-long"><a href="#Dateâ€“-gt-long" class="headerlink" title="Dateâ€“&gt;long"></a>Dateâ€“&gt;long</h3><p>é»˜è®¤çš„Jacksonæ—¥æœŸæ ¼å¼ï¼Œè¯¥æ ¼å¼å°†Dateåºåˆ—åŒ–ä¸ºè‡ª1970å¹´1æœˆ1æ—¥ä»¥æ¥çš„æ¯«ç§’æ•°ï¼ˆlongç±»å‹ï¼‰ã€‚</p><p><strong>è¿™æ˜¯ä¸€ä¸ªåŒ…å«Dateå­—æ®µçš„Javaç±»ç¤ºä¾‹</strong>ï¼š</p><blockquote><p>å®ä½“ç±»</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Transaction</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æµ‹è¯•ç¨‹åº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> jackson.domain.Transaction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTransaction</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Transaction</span> <span class="variable">transaction</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Transaction</span>(<span class="string">&quot;transfer&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">output</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            output = objectMapper.writeValueAsString(transaction);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(output);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;type&quot;</span><span class="punctuation">:</span><span class="string">&quot;transfer&quot;</span><span class="punctuation">,</span><span class="attr">&quot;date&quot;</span><span class="punctuation">:</span><span class="number">1654957418444</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><h3 id="Dateâ€“-gt-String"><a href="#Dateâ€“-gt-String" class="headerlink" title="Dateâ€“&gt;String"></a>Dateâ€“&gt;String</h3><p>æ—¥æœŸçš„longåºåˆ—åŒ–æ ¼å¼ä¸ç¬¦åˆäººç±»çš„æ—¶é—´æŸ¥çœ‹æ ¼å¼ã€‚ å› æ­¤ï¼ŒJacksonä¹Ÿæ”¯æŒæ–‡æœ¬æ—¥æœŸæ ¼å¼ã€‚ å¯ä»¥é€šè¿‡åœ¨ObjectMapperä¸Šè®¾ç½®SimpleDateFormatæ¥æŒ‡å®šè¦ä½¿ç”¨çš„ç¡®åˆ‡Jacksonæ—¥æœŸæ ¼å¼ã€‚ è¿™æ˜¯åœ¨Jacksonçš„ObjectMapperä¸Šè®¾ç½®SimpleDateFormatçš„ç¤ºä¾‹ï¼š</p><blockquote><p>æµ‹è¯•ç¨‹åº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> jackson.domain.Transaction;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTransactionFormat</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Transaction</span> <span class="variable">transaction</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Transaction</span>(<span class="string">&quot;transfer&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">        objectMapper.setDateFormat(dateFormat);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">output2</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            output2 = objectMapper.writeValueAsString(transaction);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(output2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;type&quot;</span>:<span class="string">&quot;transfer&quot;</span>,<span class="string">&quot;date&quot;</span>:<span class="string">&quot;2022-06-11&quot;</span>&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="Jackson-JSONæ ‘æ¨¡å‹"><a href="#Jackson-JSONæ ‘æ¨¡å‹" class="headerlink" title="Jackson JSONæ ‘æ¨¡å‹"></a>Jackson JSONæ ‘æ¨¡å‹</h2><blockquote><p>Jackson JSONæ ‘æ¨¡å‹å°±æ˜¯æŠŠJSONæ•°æ®è§£ææˆkeyå’Œvalueçš„å½¢å¼ï¼Œå³mapçš„å½¢å¼æ¥ä¿å­˜æ•°æ®ä¿¡æ¯ã€‚</p></blockquote><p>Jacksonå…·æœ‰å†…ç½®çš„æ ‘æ¨¡å‹ï¼Œå¯ç”¨äºè¡¨ç¤ºJSONå¯¹è±¡ã€‚ å¦‚æœä¸çŸ¥é“æ¥æ”¶åˆ°çš„JSONçš„æ ¼å¼ï¼Œæˆ–è€…ç”±äºæŸç§åŸå› è€Œä¸èƒ½ï¼ˆæˆ–è€…åªæ˜¯ä¸æƒ³ï¼‰åˆ›å»ºä¸€ä¸ªç±»æ¥è¡¨ç¤ºå®ƒï¼Œé‚£ä¹ˆå°±è¦ç”¨åˆ°Jacksonçš„æ ‘æ¨¡å‹ã€‚ å¦‚æœéœ€è¦åœ¨ä½¿ç”¨æˆ–è½¬åŒ–JSONä¹‹å‰å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œä¹Ÿéœ€è¦è¢«ç”¨åˆ°Jacksonæ ‘æ¨¡å‹ã€‚ æ‰€æœ‰è¿™äº›æƒ…å†µåœ¨æ•°æ®æµåœºæ™¯ä¸­éƒ½å¾ˆå¸¸è§ã€‚</p><p>Jacksonæ ‘æ¨¡å‹ç”±JsonNodeç±»è¡¨ç¤ºã€‚ æ‚¨å¯ä»¥ä½¿ç”¨Jackson ObjectMapperå°†JSONè§£æä¸ºJsonNodeæ ‘æ¨¡å‹ï¼Œå°±åƒä½¿ç”¨æ‚¨è‡ªå·±çš„ç±»ä¸€æ ·ã€‚</p><p>ä»¥ä¸‹å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨Jackson ObjectMapperè¯»å†™JsonNodeå®ä¾‹ã€‚</p><h3 id="Jackson-Tree-Modelç®€å•ä¾‹å­"><a href="#Jackson-Tree-Modelç®€å•ä¾‹å­" class="headerlink" title="Jackson Tree Modelç®€å•ä¾‹å­"></a>Jackson Tree Modelç®€å•ä¾‹å­</h3><blockquote><p><strong>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­</strong>ï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.JsonNode;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JacksonTreeModel</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> objectMapper.readValue(carJson, JsonNode.class);</span><br><span class="line">            System.out.println(jsonNode);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;brand&quot;:&quot;Mercedes&quot;,&quot;doors&quot;:5&#125;</span><br></pre></td></tr></table></figure><p>åªéœ€å°†JsonNode.classä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™readValue()æ–¹æ³•ï¼Œè€Œä¸æ˜¯æœ¬æ•™ç¨‹å‰é¢çš„ç¤ºä¾‹ä¸­ä½¿ç”¨çš„Car.classï¼Œå°±å¯ä»¥å°†JSONå­—ç¬¦ä¸²è§£æä¸ºJsonNodeå¯¹è±¡è€Œä¸æ˜¯Carå¯¹è±¡ã€‚</p><p>ObjectMapperç±»è¿˜å…·æœ‰ä¸€ä¸ªç‰¹æ®Šçš„**readTree()**æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›JsonNodeã€‚ è¿™æ˜¯ä½¿ç”¨ObjectMapper readTree()æ–¹æ³•å°†JSONè§£æä¸ºJsonNodeçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span>  <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> objectMapper.readTree(carJson);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="Jackson-JsonNodeç±»"><a href="#Jackson-JsonNodeç±»" class="headerlink" title="Jackson JsonNodeç±»"></a>Jackson JsonNodeç±»</h3><p>é€šè¿‡JsonNodeç±»ï¼Œå¯ä»¥ä»¥éå¸¸çµæ´»å’ŒåŠ¨æ€çš„æ–¹å¼å°†JSONä½œä¸ºJavaå¯¹è±¡å¯¼èˆªã€‚è¿™é‡Œäº†è§£ä¸€äº›å¦‚ä½•ä½¿ç”¨å®ƒçš„åŸºç¡€çŸ¥è¯†ã€‚</p><p>å°†JSONè§£æä¸ºJsonNodeï¼ˆæˆ–JsonNodeå®ä¾‹æ ‘ï¼‰åï¼Œå°±å¯ä»¥æµè§ˆJsonNodeæ ‘æ¨¡å‹ã€‚ è¿™æ˜¯ä¸€ä¸ªJsonNodeç¤ºä¾‹ï¼Œæ˜¾ç¤ºäº†å¦‚ä½•è®¿é—®JSONå­—æ®µï¼Œæ•°ç»„å’ŒåµŒå¥—å¯¹è±¡ï¼š</p><blockquote><p>æµ‹è¯•ç¨‹åº</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.JsonNode;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJsonNode</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span></span><br><span class="line">                <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5,&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;owners\&quot; : [\&quot;John\&quot;, \&quot;Jack\&quot;, \&quot;Jill\&quot;],&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;nestedObject\&quot; : &#123; \&quot;field\&quot; : \&quot;value\&quot; &#125; &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> objectMapper.readValue(carJson, JsonNode.class);</span><br><span class="line"></span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">brandNode</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;brand&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">brand</span> <span class="operator">=</span> brandNode.asText();</span><br><span class="line">            System.out.println(<span class="string">&quot;brand = &quot;</span> + brand);</span><br><span class="line"></span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">doorsNode</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;doors&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">doors</span> <span class="operator">=</span> doorsNode.asInt();</span><br><span class="line">            System.out.println(<span class="string">&quot;doors = &quot;</span> + doors);</span><br><span class="line"></span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">array</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;owners&quot;</span>);</span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">myJsonNode</span> <span class="operator">=</span> array.get(<span class="number">0</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">john</span> <span class="operator">=</span> myJsonNode.asText();</span><br><span class="line">            System.out.println(<span class="string">&quot;john  = &quot;</span> + john);</span><br><span class="line"></span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">child</span> <span class="operator">=</span> jsonNode.get(<span class="string">&quot;nestedObject&quot;</span>);</span><br><span class="line">            <span class="type">JsonNode</span> <span class="variable">childField</span> <span class="operator">=</span> child.get(<span class="string">&quot;field&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> childField.asText();</span><br><span class="line">            System.out.println(<span class="string">&quot;field = &quot;</span> + field);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¨‹åºç»“æœ</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brand = Mercedes</span><br><span class="line">doors = 5</span><br><span class="line">john  = John</span><br><span class="line">field = value</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼ŒJSONå­—ç¬¦ä¸²ç°åœ¨åŒ…å«ä¸€ä¸ªç§°ä¸ºownersçš„æ•°ç»„å­—æ®µå’Œä¸€ä¸ªç§°ä¸ºnestedObjectçš„åµŒå¥—å¯¹è±¡å­—æ®µã€‚</p><p>æ— è®ºè®¿é—®çš„æ˜¯å­—æ®µï¼Œæ•°ç»„è¿˜æ˜¯åµŒå¥—å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨JsonNodeç±»çš„get()æ–¹æ³•ã€‚ é€šè¿‡å°†å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°æä¾›ç»™get()æ–¹æ³•ï¼Œå¯ä»¥è®¿é—®JsonNodeçš„å­—æ®µã€‚ å¦‚æœJsonNodeè¡¨ç¤ºæ•°ç»„ï¼Œåˆ™éœ€è¦å°†ç´¢å¼•ä¼ é€’ç»™get()æ–¹æ³•ã€‚ ç´¢å¼•æŒ‡å®šè¦è·å–çš„æ•°ç»„å…ƒç´ ã€‚</p><hr><h3 id="Javaå¯¹è±¡â€“-gt-JsonNode"><a href="#Javaå¯¹è±¡â€“-gt-JsonNode" class="headerlink" title="Javaå¯¹è±¡â€“&gt;JsonNode"></a>Javaå¯¹è±¡â€“&gt;JsonNode</h3><p>å¯ä»¥ä½¿ç”¨Jackson ObjectMapperå°†Javaå¯¹è±¡è½¬æ¢ä¸ºJsonNodeï¼Œè€ŒJsonNodeæ˜¯è½¬æ¢åçš„Javaå¯¹è±¡çš„JSONè¡¨ç¤ºå½¢å¼ã€‚ å¯ä»¥é€šè¿‡Jackson ObjectMapper valueToTree()æ–¹æ³•å°†Javaå¯¹è±¡è½¬æ¢ä¸ºJsonNodeã€‚ è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ObjectMapper valueToTree()æ–¹æ³•å°†Javaå¯¹è±¡è½¬æ¢ä¸ºJsonNodeçš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>();</span><br><span class="line">car.brand = <span class="string">&quot;Cadillac&quot;</span>;</span><br><span class="line">car.doors = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">carJsonNode</span> <span class="operator">=</span> objectMapper.valueToTree(car);</span><br></pre></td></tr></table></figure><hr><h3 id="JsonNodeâ€“-gt-Javaå¯¹è±¡"><a href="#JsonNodeâ€“-gt-Javaå¯¹è±¡" class="headerlink" title="JsonNodeâ€“&gt;Javaå¯¹è±¡"></a>JsonNodeâ€“&gt;Javaå¯¹è±¡</h3><p>å¯ä»¥ä½¿ç”¨Jackson ObjectMapper treeToValue()æ–¹æ³•å°†JsonNodeè½¬æ¢ä¸ºJavaå¯¹è±¡ã€‚ è¿™ç±»ä¼¼äºä½¿ç”¨Jackson Jacksonçš„ObjectMapperå°†JSONå­—ç¬¦ä¸²ï¼ˆæˆ–å…¶ä»–æ¥æºï¼‰è§£æä¸ºJavaå¯¹è±¡ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼ŒJSONæºæ˜¯JsonNodeã€‚ è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨Jackson ObjectMapper treeToValue()æ–¹æ³•å°†JsonNodeè½¬æ¢ä¸ºJavaå¯¹è±¡çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">carJson</span> <span class="operator">=</span> <span class="string">&quot;&#123; \&quot;brand\&quot; : \&quot;Mercedes\&quot;, \&quot;doors\&quot; : 5 &#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">carJsonNode</span> <span class="operator">=</span> objectMapper.readTree(carJson);</span><br><span class="line"></span><br><span class="line"><span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> objectMapper.treeToValue(carJsonNode);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç¤ºä¾‹æœ‰ç‚¹â€œäººä¸ºâ€ï¼Œå› ä¸ºæˆ‘ä»¬é¦–å…ˆå°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJsonNodeï¼Œç„¶åå°†JsonNodeè½¬æ¢ä¸ºCarå¯¹è±¡ã€‚ æ˜¾ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å¯¹åŸå§‹JSONå­—ç¬¦ä¸²çš„å¼•ç”¨ï¼Œåˆ™æœ€å¥½å°†å…¶ç›´æ¥è½¬æ¢ä¸ºCarå¯¹è±¡ï¼Œè€Œæ— éœ€å…ˆå°†å…¶è½¬æ¢ä¸ºJsonNodeã€‚</p><hr>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jackson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jacksonï¼ˆä¸€ï¼‰â€”â€”æ¦‚è¿°åŠMavenä¾èµ–</title>
      <link href="/2022/06/05/Jackson_1/"/>
      <url>/2022/06/05/Jackson_1/</url>
      
        <content type="html"><![CDATA[<p>Jackson æ˜¯å½“å‰ç”¨çš„æ¯”è¾ƒå¹¿æ³›çš„ï¼Œç”¨æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ– json çš„ Java çš„å¼€æºæ¡†æ¶ã€‚Jackson ç¤¾åŒºç›¸å¯¹æ¯”è¾ƒæ´»è·ƒï¼Œæ›´æ–°é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«ï¼Œ ä» Github ä¸­çš„ç»Ÿè®¡æ¥çœ‹ï¼ŒJackson æ˜¯æœ€æµè¡Œçš„ json è§£æå™¨ä¹‹ä¸€ ã€‚ <strong>Spring MVC çš„é»˜è®¤ json è§£æå™¨ä¾¿æ˜¯ Jackson</strong>ã€‚ Jackson ä¼˜ç‚¹å¾ˆå¤šã€‚ Jackson æ‰€ä¾èµ–çš„ jar åŒ…è¾ƒå°‘ ï¼Œç®€å•æ˜“ç”¨ã€‚ä¸å…¶ä»– Java çš„ json çš„æ¡†æ¶ Gson ç­‰ç›¸æ¯”ï¼Œ Jackson è§£æå¤§çš„ json æ–‡ä»¶é€Ÿåº¦æ¯”è¾ƒå¿«ï¼›Jackson è¿è¡Œæ—¶å ç”¨å†…å­˜æ¯”è¾ƒä½ï¼Œæ€§èƒ½æ¯”è¾ƒå¥½ï¼›Jackson æœ‰çµæ´»çš„ APIï¼Œå¯ä»¥å¾ˆå®¹æ˜“è¿›è¡Œæ‰©å±•å’Œå®šåˆ¶ã€‚</p><span id="more"></span><p>Jackson çš„ 1.x ç‰ˆæœ¬çš„åŒ…åæ˜¯ org.codehaus.jackson ï¼Œå½“å‡çº§åˆ° 2.x ç‰ˆæœ¬æ—¶ï¼ŒåŒ…åå˜ä¸º com.fasterxml.jacksonã€‚</p><p><strong>Jackson çš„æ ¸å¿ƒæ¨¡å—ç”±ä¸‰éƒ¨åˆ†ç»„æˆ</strong>ã€‚</p><ul><li><strong>jackson-core</strong>ï¼Œ<strong>æ ¸å¿ƒåŒ…</strong>ï¼Œæä¾›åŸºäºâ€æµæ¨¡å¼â€è§£æçš„ç›¸å…³ APIï¼Œå®ƒåŒ…æ‹¬ JsonPaser å’Œ JsonGeneratorã€‚ Jackson å†…éƒ¨å®ç°æ­£æ˜¯é€šè¿‡é«˜æ€§èƒ½çš„æµæ¨¡å¼ API çš„ JsonGenerator å’Œ JsonParser æ¥ç”Ÿæˆå’Œè§£æ jsonã€‚</li><li><strong>jackson-annotations</strong>ï¼Œ<strong>æ³¨è§£åŒ…</strong>ï¼Œæä¾›æ ‡å‡†æ³¨è§£åŠŸèƒ½ï¼›</li><li><strong>jackson-databind</strong> ï¼Œ<strong>æ•°æ®ç»‘å®šåŒ…</strong>ï¼Œ æä¾›åŸºäºâ€å¯¹è±¡ç»‘å®šâ€ è§£æçš„ç›¸å…³ API ï¼ˆ ObjectMapper ï¼‰ å’Œâ€æ ‘æ¨¡å‹â€ è§£æçš„ç›¸å…³ API ï¼ˆJsonNodeï¼‰ï¼›åŸºäºâ€å¯¹è±¡ç»‘å®šâ€ è§£æçš„ API å’Œâ€æ ‘æ¨¡å‹â€è§£æçš„ API ä¾èµ–åŸºäºâ€æµæ¨¡å¼â€è§£æçš„ APIã€‚</li></ul><blockquote><p>æºç åœ°å€ï¼š<a href="https://github.com/FasterXML/jackson">https://github.com/FasterXML/jackson</a></p></blockquote><p><strong>ä½¿ç”¨Mavenæ„å»ºé¡¹ç›®ï¼Œéœ€è¦æ·»åŠ ä¾èµ–</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“ç„¶äº†ï¼Œjackson-databind ä¾èµ– jackson-core å’Œ jackson-annotationsï¼Œæ‰€ä»¥å¯ä»¥åªæ˜¾ç¤ºåœ°æ·»åŠ jackson-databindä¾èµ–ï¼Œjackson-core å’Œ jackson-annotations ä¹Ÿéšä¹‹æ·»åŠ åˆ° Java é¡¹ç›®å·¥ç¨‹ä¸­ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jackson </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BigDecimalçš„setScaleæ–¹æ³•</title>
      <link href="/2022/05/31/Java_26_BigDecimal%E7%9A%84setScale%E6%96%B9%E6%B3%95/"/>
      <url>/2022/05/31/Java_26_BigDecimal%E7%9A%84setScale%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<ul><li>BigDecimal.setScale()æ–¹æ³•æ˜¯ç”¨äºæ ¼å¼åŒ–å°æ•°ç‚¹<ul><li>setScale(0)è¡¨ç¤ºä¿ç•™æ•´æ•°</li><li>setScale(1)è¡¨ç¤ºä¿ç•™ä¸€ä½å°æ•°ï¼Œé»˜è®¤ç”¨å››èˆäº”å…¥æ–¹å¼</li></ul></li></ul><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®å°æ•°ç‚¹åç¬¬ä¸‰ä½æ•°å­—ä¸€å¤§ä¸€å°è§‚å¯Ÿæ•ˆæœ</span></span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">num</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;3.3235667&quot;</span>);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">numOne</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;3.3275667&quot;</span>);</span><br></pre></td></tr></table></figure><p>1ã€ROUND_UPï¼šè¿›ä½åˆ¶ï¼šä¸ç®¡ä¿ç•™æ•°å­—åé¢æ˜¯å¤§æ˜¯å°(0é™¤å¤–)éƒ½ä¼šè¿›1</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">num1</span> <span class="operator">=</span> num.setScale(<span class="number">2</span>,BigDecimal.ROUND_UP);</span><br><span class="line">System.out.println(<span class="string">&quot;SmallROUND_UP:&quot;</span>+num1);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">numTwo</span> <span class="operator">=</span> numOne.setScale(<span class="number">2</span>,BigDecimal.ROUND_UP);</span><br><span class="line">System.out.println(<span class="string">&quot;BigROUND_UP:&quot;</span>+numTwo);</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SmallROUND_UP:3.33  </span><br><span class="line">BigROUND_UP:3.33</span><br></pre></td></tr></table></figure><p>2ã€ROUND_DOWNï¼šä¿ç•™è®¾ç½®æ•°å­—ï¼Œåé¢æ‰€æœ‰ç›´æ¥å»é™¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">num2</span> <span class="operator">=</span> num.setScale(<span class="number">2</span>,BigDecimal.ROUND_DOWN);</span><br><span class="line">System.out.println(<span class="string">&quot;SmallROUND_DOWN:&quot;</span>+num2);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">numThree</span> <span class="operator">=</span> numOne.setScale(<span class="number">2</span>,BigDecimal.ROUND_DOWN);</span><br><span class="line">System.out.println(<span class="string">&quot;BigROUND_DOWN:&quot;</span>+numThree);</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SmallROUND_DOWN:3.32</span><br><span class="line">BigROUND_DOWN:3.32</span><br></pre></td></tr></table></figure><p>3ã€ROUND_HALF_UPï¼šæ ¹æ®ä¿ç•™æ•°å­—åä¸€ä½&gt;&#x3D;5è¿›è¡Œå››èˆäº”å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">num3</span> <span class="operator">=</span> num.setScale(<span class="number">2</span>,BigDecimal.ROUND_HALF_UP);</span><br><span class="line">System.out.println(<span class="string">&quot;SmallROUND_HALF_UP:&quot;</span>+num3);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">numFour</span> <span class="operator">=</span> numOne.setScale(<span class="number">2</span>,BigDecimal.ROUND_HALF_UP);</span><br><span class="line">System.out.println(<span class="string">&quot;BigROUND_HALF_UP:&quot;</span>+numFour);</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SmallROUND_HALF_UP:3.32</span><br><span class="line">BigROUND_HALF_UP:3.33</span><br></pre></td></tr></table></figure><p>4ã€ROUND_HALF_DOWNï¼šæ ¹æ®ä¿ç•™æ•°å­—åä¸€ä½&gt;5è¿›è¡Œå››èˆäº”å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BigDecimal</span> <span class="variable">num4</span> <span class="operator">=</span> num.setScale(<span class="number">2</span>,BigDecimal.ROUND_HALF_DOWN);</span><br><span class="line">System.out.println(<span class="string">&quot;SmallROUND_HALF_DOWN:&quot;</span>+num4);</span><br><span class="line"><span class="type">BigDecimal</span> <span class="variable">numFive</span> <span class="operator">=</span> numOne.setScale(<span class="number">2</span>,BigDecimal.ROUND_HALF_DOWN);</span><br><span class="line">System.out.println(<span class="string">&quot;BigROUND_HALF_DOWN:&quot;</span>+numFive);</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SmallROUND_HALF_DOWN:3.32</span><br><span class="line">BigROUND_HALF_DOWN:3.33</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> BigDecimal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæŸ¥è¯¢å­—ç¬¦é•¿åº¦</title>
      <link href="/2022/05/30/MySQL_17_MySQL%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E9%95%BF%E5%BA%A6/"/>
      <url>/2022/05/30/MySQL_17_MySQL%E6%9F%A5%E8%AF%A2%E5%AD%97%E7%AC%A6%E9%95%BF%E5%BA%A6/</url>
      
        <content type="html"><![CDATA[<ul><li><p>åˆ©ç”¨length()å‡½æ•°æŸ¥è¯¢ï¼Œå•ä½æ˜¯å­—èŠ‚ï¼Œä¸€ä¸ªæ±‰å­—æ˜¯ä¸‰ä¸ªå­—èŠ‚ï¼Œæ•°ç»„å’Œå­—æ¯æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œè¯­æ³•ä¸ºâ€œlength(å­—ç¬¦)â€ï¼›</p></li><li><p>åˆ©ç”¨â€œchar_length()â€å‡½æ•°æŸ¥è¯¢ï¼Œå•ä½ä¸ºå­—ç¬¦ï¼Œæ±‰å­—ã€æ•°å­—å’Œå­—æ¯éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦å•ä½ã€‚</p></li></ul><span id="more"></span><h3 id="Mysqlä¸­length-ã€char-length-çš„åŒºåˆ«ï¼š"><a href="#Mysqlä¸­length-ã€char-length-çš„åŒºåˆ«ï¼š" class="headerlink" title="Mysqlä¸­length()ã€char_length()çš„åŒºåˆ«ï¼š"></a>Mysqlä¸­length()ã€char_length()çš„åŒºåˆ«ï¼š</h3><ol><li>length()ï¼š å•ä½æ˜¯å­—èŠ‚ï¼Œutf8ç¼–ç ä¸‹,ä¸€ä¸ªæ±‰å­—ä¸‰ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªæ•°å­—æˆ–å­—æ¯ä¸€ä¸ªå­—èŠ‚ã€‚gbkç¼–ç ä¸‹,ä¸€ä¸ªæ±‰å­—ä¸¤ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªæ•°å­—æˆ–å­—æ¯ä¸€ä¸ªå­—èŠ‚ã€‚</li><li>char_length()ï¼šå•ä½ä¸ºå­—ç¬¦ï¼Œä¸ç®¡æ±‰å­—è¿˜æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—æ¯éƒ½ç®—æ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚</li></ol><h3 id="MySQL5-0-3ç‰ˆæœ¬ä¹‹åvarcharç±»å‹çš„å˜åŒ–ï¼š"><a href="#MySQL5-0-3ç‰ˆæœ¬ä¹‹åvarcharç±»å‹çš„å˜åŒ–ï¼š" class="headerlink" title="MySQL5.0.3ç‰ˆæœ¬ä¹‹åvarcharç±»å‹çš„å˜åŒ–ï¼š"></a>MySQL5.0.3ç‰ˆæœ¬ä¹‹åvarcharç±»å‹çš„å˜åŒ–ï¼š</h3><ol><li>MySQL 5.0.3 ä¹‹å‰ï¼š0â€“255å­—èŠ‚ï¼Œå¦‚ï¼švarchar(20)ä¸­çš„20è¡¨ç¤ºå­—èŠ‚æ•°ï¼Œå¦‚æœå­˜æ”¾utf-8ç¼–ç çš„è¯åªèƒ½æ”¾6ä¸ªæ±‰å­—ã€‚varchar(n)ï¼Œè¿™é‡Œçš„nè¡¨ç¤ºå­—èŠ‚æ•°ã€‚</li><li>MySQL 5.0.3 ä¹‹åï¼š0â€“65535å­—èŠ‚ï¼Œvarchar(20)è¡¨ç¤ºå­—ç¬¦æ•°ï¼Œä¸ç®¡ä»€ä¹ˆç¼–ç ï¼Œæ—¢æ±‰å­—ä¹Ÿèƒ½æ”¾20ä¸ªã€‚ä½†æœ€å¤šå 65532å­—èŠ‚ï¼ˆä¸¤ä¸ªå­—èŠ‚å­˜æ”¾é•¿åº¦ï¼Œå°äº255å­—èŠ‚ç”¨1ä¸ªå­—èŠ‚å­˜æ”¾é•¿åº¦ï¼‰ï¼Œvarchar(n)è¿™é‡Œçš„nè¡¨ç¤ºå­—ç¬¦æ•°ï¼Œæ¯”å¦‚varcharï¼ˆ200ï¼‰ï¼Œä¸ç®¡æ˜¯è‹±æ–‡è¿˜æ˜¯ä¸­æ–‡éƒ½å¯ä»¥å­˜æ”¾200ä¸ªã€‚å…¶ä»–å…·ä½“åŒºåˆ«ï¼Œå¯è‡ªè¡Œç½‘ä¸ŠæŸ¥è¯¢ã€‚</li><li>length()&lt;&gt;char_length()ï¼Œå¯ä»¥ç”¨æ¥æ£€éªŒæ˜¯å¦å«æœ‰ä¸­æ–‡å­—ç¬¦ã€‚utf-8ç¼–ç ä¸­åˆ¤å®šæŸä¸ªå­—æ®µä¸ºå…¨è‹±æ–‡ï¼Œlength(å­—æ®µ) &#x3D; char_length(å­—æ®µ)å³å¯ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>X-Frame-Optionsé…ç½®</title>
      <link href="/2022/05/21/basic_2_X-Frame-Options%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/05/21/basic_2_X-Frame-Options%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>ç›´æ¥ç‚¹å‡»è¿™ä¸ªé“¾æ¥å¯ä»¥æ‰“å¼€è®¿é—®ï¼Œå†…åµŒåˆ°iframeæ‹’ç»è¯·æ±‚ã€‚</p><p>æ§åˆ¶å°æŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Refused to display &#x27;http://10.***.***.155:8001/&#x27; in a frame because it set &#x27;X-Frame-Options&#x27; to &#x27;deny&#x27;.</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="X-Frame-Options-å€¼æœ‰ä¸‰ä¸ªï¼š"><a href="#X-Frame-Options-å€¼æœ‰ä¸‰ä¸ªï¼š" class="headerlink" title="X-Frame-Options å€¼æœ‰ä¸‰ä¸ªï¼š"></a>X-Frame-Options å€¼æœ‰ä¸‰ä¸ªï¼š</h3><ol><li>DENYï¼šè¡¨ç¤ºè¯¥é¡µé¢ä¸å…è®¸åœ¨ frame ä¸­å±•ç¤ºï¼Œå³ä¾¿æ˜¯åœ¨ç›¸åŒåŸŸåçš„é¡µé¢ä¸­åµŒå¥—ä¹Ÿä¸å…è®¸ã€‚</li><li>SAMEORIGIN ï¼šè¡¨ç¤ºè¯¥é¡µé¢å¯ä»¥åœ¨ç›¸åŒåŸŸåé¡µé¢çš„ frame ä¸­å±•ç¤ºã€‚</li><li>ALLOW-FROM <a href="https://daijing.online/">https://daijing.online/</a> ï¼šè¡¨ç¤ºè¯¥é¡µé¢å¯ä»¥åœ¨æŒ‡å®šæ¥æºçš„ frame ä¸­å±•ç¤ºã€‚</li></ol><h3 id="é…ç½®Apacheï¼š"><a href="#é…ç½®Apacheï¼š" class="headerlink" title="é…ç½®Apacheï¼š"></a>é…ç½®Apacheï¼š</h3><p>å¦‚æœæ˜¯åœ¨æœ¬åœ°çš„è¯ï¼Œå°±æ˜¯åœ¨httpd.confé‡Œé¢é…ç½®ï¼›å¦‚æœæ˜¯linuxï¼ˆubuntuçš„è¯ï¼‰å°±æ˜¯åœ¨apache2.confé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span>Header always append X-Frame-Options SAMEORIGIN<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®Nginxï¼š"><a href="#é…ç½®Nginxï¼š" class="headerlink" title="é…ç½®Nginxï¼š"></a>é…ç½®Nginxï¼š</h3><p>é…ç½® nginx å‘é€ X-Frame-Options å“åº”å¤´ï¼ŒæŠŠä¸‹é¢è¿™è¡Œæ·»åŠ åˆ° â€˜httpâ€™, â€˜serverâ€™ æˆ–è€… â€˜locationâ€™ çš„é…ç½®ä¸­:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span>add_header X-Frame-Options SAMEORIGIN;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®IISï¼š"><a href="#é…ç½®IISï¼š" class="headerlink" title="é…ç½®IISï¼š"></a>é…ç½®IISï¼š</h3><p>é…ç½® IIS å‘é€ X-Frame-Options å“åº”å¤´ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®åˆ° Web.config æ–‡ä»¶ä¸­:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-Frame-Options&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SAMEORIGIN&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¦å¤–è¿æ¥ã€å³å¤–è¿æ¥ã€å…¨è¿æ¥ä»¥åŠå†…è¿æ¥</title>
      <link href="/2022/04/30/MySQL_15_%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5%E3%80%81%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5%E3%80%81%E5%85%A8%E8%BF%9E%E6%8E%A5%E4%BB%A5%E5%8F%8A%E5%86%85%E8%BF%9E%E6%8E%A5/"/>
      <url>/2022/04/30/MySQL_15_%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5%E3%80%81%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5%E3%80%81%E5%85%A8%E8%BF%9E%E6%8E%A5%E4%BB%A5%E5%8F%8A%E5%86%85%E8%BF%9E%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<ul><li><p>LEFT JOIN ï¼šå·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå³è¡¨æ²¡æœ‰ä¸å·¦è¡¨åŒ¹é…çš„è¡Œç»“æœä¸º<code>Null</code>ã€‚</p></li><li><p>RIGHT JOINï¼šå³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå·¦è¡¨æ²¡æœ‰ä¸å³è¡¨åŒ¹é…çš„è¡Œç»“æœä¸º<code>Null</code>ã€‚</p></li><li><p>FULL OUTER JOIN ï¼šå°†åŒ…å«æ¥è‡ªä¸¤ä¸ªè¡¨çš„æ‰€æœ‰è®°å½•ï¼Œå¹¶ä½¿ç”¨NULLå€¼ä½œä¸ºä¸¤ä¾§ç¼ºå¤±åŒ¹é…ç»“æœã€‚MySQLä¸æ”¯æŒ<code>FULL JOIN</code>ï¼Œå¯ä»¥ä½¿ç”¨<strong>UNION</strong>å­å¥ï¼Œå°†<code>LEFT JOIN</code>å’Œ<code>RIGHT JOIN</code>çš„ç»“æœé›†å»é™¤é‡å¤ååˆå¹¶ã€‚</p></li><li><p>INNER JOINï¼š å†…è¿æ¥ä¹Ÿç§°ä¸ºç­‰åŒè¿æ¥ï¼Œè¿”å›çš„ç»“æœé›†æ˜¯ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰ç›¸åŒ¹é…çš„æ•°æ®ï¼Œè€Œèˆå¼ƒä¸åŒ¹é…çš„æ•°æ®ã€‚</p></li></ul><span id="more"></span><p>personè¡¨ï¼š</p><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>å¼ </td></tr><tr><td>2</td><td>æ</td></tr><tr><td>3</td><td>ç‹</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `db_study`.`person`(`id`, `name`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å¼ &#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `db_study`.`person`(`id`, `name`) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;æ&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `db_study`.`person`(`id`, `name`) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;ç‹&#x27;</span>);</span><br></pre></td></tr></table></figure><p>addressè¡¨ï¼š</p><table><thead><tr><th>id</th><th>city</th><th>person_id</th></tr></thead><tbody><tr><td>1</td><td>åŒ—äº¬</td><td>1</td></tr><tr><td>2</td><td>ä¸Šæµ·</td><td>3</td></tr><tr><td>3</td><td>æ­å·</td><td>10</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `db_study`.`address`(`id`, `city`, `person_id`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `db_study`.`address`(`id`, `city`, `person_id`) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="number">3</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `db_study`.`address`(`id`, `city`, `person_id`) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;æ­å·&#x27;</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure><h3 id="LEFT-JOIN"><a href="#LEFT-JOIN" class="headerlink" title="LEFT JOIN"></a>LEFT JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.name,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> address <span class="keyword">ON</span> person.id <span class="operator">=</span> address.person_id</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š<img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/mysql15_1.png" alt="image-20220411090541637"></p><p>å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå³è¡¨æ²¡æœ‰ä¸å·¦è¡¨åŒ¹é…çš„è¡Œç»“æœä¸º<code>Null</code></p><h3 id="RIGHT-JOIN"><a href="#RIGHT-JOIN" class="headerlink" title="RIGHT JOIN"></a>RIGHT JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.NAME,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> address <span class="keyword">ON</span> person.id <span class="operator">=</span> address.person_id</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š<img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/mysql15_2.png" alt="image-20220411091057358"></p><p>å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œï¼Œå·¦è¡¨æ²¡æœ‰ä¸å³è¡¨åŒ¹é…çš„è¡Œç»“æœä¸º<code>Null</code></p><h3 id="FULL-JOIN"><a href="#FULL-JOIN" class="headerlink" title="FULL  JOIN"></a>FULL  JOIN</h3><p>â—â—â—MySQLä¸æ”¯æŒ<code>FULL JOIN</code>ï¼Œå¯ä»¥ä½¿ç”¨<strong>UNION</strong>å­å¥ï¼Œå°†<code>LEFT JOIN</code>å’Œ<code>RIGHT JOIN</code>çš„ç»“æœé›†å»é™¤é‡å¤ååˆå¹¶</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">sql</span>:</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.NAME,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">JOIN</span> address <span class="keyword">ON</span> person.id <span class="operator">=</span> address.person_id</span><br><span class="line"></span><br><span class="line">#MySQL:</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.NAME,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> address <span class="keyword">ON</span> person.id <span class="operator">=</span> address.person_id </span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.NAME,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> address <span class="keyword">ON</span> person.id <span class="operator">=</span> address.person_id</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š<img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/mysql15_3.png" alt="image-20220411092809542"></p><p>å°†åŒ…å«æ¥è‡ªä¸¤ä¸ªè¡¨çš„æ‰€æœ‰è®°å½•ï¼Œå¹¶ä½¿ç”¨NULLå€¼ä½œä¸ºä¸¤ä¾§ç¼ºå¤±åŒ¹é…ç»“æœã€‚</p><h3 id="CROSS-JOIN"><a href="#CROSS-JOIN" class="headerlink" title="CROSS JOIN"></a>CROSS JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.NAME,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person</span><br><span class="line"><span class="keyword">CROSS</span> <span class="keyword">JOIN</span> address</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š<img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/mysql15_4.png" alt="image-20220411095144361"></p><p>ä¸å¸¦WHEREæ¡ä»¶å­å¥ï¼Œå®ƒå°†ä¼šè¿”å›è¢«è¿æ¥çš„ä¸¤ä¸ªè¡¨çš„ç¬›å¡å°”ç§¯ï¼Œè¿”å›ç»“æœçš„è¡Œæ•°ç­‰äºä¸¤ä¸ªè¡¨è¡Œæ•°çš„ä¹˜ç§¯ï¼Œå³3*3&#x3D;9è¡Œã€‚</p><h3 id="INNER-JOIN"><a href="#INNER-JOIN" class="headerlink" title="INNER JOIN"></a>INNER JOIN</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.NAME,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> address <span class="keyword">ON</span> person.id <span class="operator">=</span> address.person_id</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>INNER</code>å¯ä»¥çœç•¥ï¼Œç­‰ä»·äºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">person.NAME,</span><br><span class="line">address.city </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">person,</span><br><span class="line">address </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">person.id <span class="operator">=</span> address.person_id</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š<img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/mysql15_5.png" alt="image-20220411100256356"></p><p>å†…è¿æ¥ä¹Ÿç§°ä¸ºç­‰åŒè¿æ¥ï¼Œè¿”å›çš„ç»“æœé›†æ˜¯ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰ç›¸åŒ¹é…çš„æ•°æ®ï¼Œè€Œèˆå¼ƒä¸åŒ¹é…çš„æ•°æ®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·å–urlå‚æ•°å€¼</title>
      <link href="/2022/04/26/JavaScript_2_getUrlParam/"/>
      <url>/2022/04/26/JavaScript_2_getUrlParam/</url>
      
        <content type="html"><![CDATA[<p> jsè·å–å–urlå‚æ•°å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="keyword">function</span> <span class="title function_">getUrlParam</span>(<span class="params">name</span>) &#123;</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;(^|&amp;)&quot;</span> + name + <span class="string">&quot;=([^&amp;]*)(&amp;|$)&quot;</span>); <span class="comment">//æ„é€ ä¸€ä¸ªå«æœ‰ç›®æ ‡å‚æ•°çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">var</span> r = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">search</span>.<span class="title function_">substr</span>(<span class="number">1</span>).<span class="title function_">match</span>(reg); <span class="comment">//åŒ¹é…ç›®æ ‡å‚æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (r != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">decodeURI</span>(r[<span class="number">2</span>]); </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>; <span class="comment">//è¿”å›å‚æ•°å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p><a href="https://daijing.online/2022/04/26/JavaScript_1_decodeURIComponent/">jsç¼–ç å’Œè§£ç URI | ä¸æˆ–éâ€™s Blog (daijing.online)</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsç¼–ç å’Œè§£ç URI</title>
      <link href="/2022/04/26/JavaScript_1_decodeURIComponent/"/>
      <url>/2022/04/26/JavaScript_1_decodeURIComponent/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th align="left">å‡½æ•°</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">decodeURI()</td><td align="left">è§£ç æŸä¸ªç¼–ç çš„ URIã€‚</td></tr><tr><td align="left">decodeURIComponent()</td><td align="left">è§£ç ä¸€ä¸ªç¼–ç çš„ URI ç»„ä»¶ã€‚</td></tr><tr><td align="left">encodeURI()</td><td align="left">æŠŠå­—ç¬¦ä¸²ç¼–ç ä¸º URIã€‚</td></tr><tr><td align="left">encodeURIComponent()</td><td align="left">æŠŠå­—ç¬¦ä¸²ç¼–ç ä¸º URI ç»„ä»¶ã€‚</td></tr></tbody></table><p>åœ¨jsä¸­encodeURI()ä¸ä¼šå¯¹â€:â€,â€&#x2F;â€œç­‰ç‰¹æ®Šå«ä¹‰çš„ASCIIè¿›è¡Œç¼–ç ï¼ŒåŒæ ·ä¹Ÿä¸ä¼šè§£ç ã€‚</p><p>æ‰€ä»¥å¯ä»¥è®¤ä¸ºjsä¸­çš„è§£ç decodeComponent()æ‰æ˜¯å’Œjavaä»£ç ä¸­çš„URLEncoder.encode()å¯¹åº”;</p><span id="more"></span><ul><li>ä½¿ç”¨ decodeURI() å¯¹ä¸€ä¸ªç¼–ç åçš„ URI è¿›è¡Œè§£ç ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> uri=<span class="string">&quot;my test.php?name=stÃ¥le&amp;car=saab&quot;</span>; </span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="built_in">encodeURI</span>(uri)+ <span class="string">&quot;&lt;br&gt;&quot;</span>); </span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="built_in">decodeURI</span>(uri));</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">my%20test.php?name=st%C3%A5le&amp;car=saab</span><br><span class="line">my test.php?name=stÃ¥le&amp;car=saab</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ decodeURIComponent() å¯¹ç¼–ç åçš„ URI è¿›è¡Œè§£ç ï¼š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> uri=<span class="string">&quot;https://www.runoob.com/my test.php?name=stÃ¥le&amp;car=saab&quot;</span>; </span><br><span class="line"><span class="keyword">var</span> uri_encode=<span class="built_in">encodeURIComponent</span>(uri); </span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(uri_encode); </span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="built_in">decodeURIComponent</span>(uri_encode));</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https%3A%2F%2Fwww.runoob.com%2Fmy%20test.php%3Fname%3Dst%C3%A5le%26car%3Dsaab</span><br><span class="line">https://www.runoob.com/my test.php?name=stÃ¥le&amp;car=saab</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ¹æ®èº«ä»½è¯å·æå–çœä»½ã€å‡ºç”Ÿæ—¥æœŸã€å¹´é¾„ã€æ€§åˆ«</title>
      <link href="/2022/04/25/MySQL_16_%E6%A0%B9%E6%8D%AE%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7%E6%8F%90%E5%8F%96%E7%9C%81%E4%BB%BD%E3%80%81%E5%87%BA%E7%94%9F%E6%97%A5%E6%9C%9F%E3%80%81%E5%B9%B4%E9%BE%84%E3%80%81%E6%80%A7%E5%88%AB/"/>
      <url>/2022/04/25/MySQL_16_%E6%A0%B9%E6%8D%AE%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7%E6%8F%90%E5%8F%96%E7%9C%81%E4%BB%BD%E3%80%81%E5%87%BA%E7%94%9F%E6%97%A5%E6%9C%9F%E3%80%81%E5%B9%B4%E9%BE%84%E3%80%81%E6%80%A7%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p>sqlè¯­å¥â€”â€”æ ¹æ®èº«ä»½è¯å·æå–çœä»½ã€å‡ºç”Ÿæ—¥æœŸã€å¹´é¾„ã€æ€§åˆ«ã€‚</p><p>åŸè¡¨ï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/mysql16_1.png" alt="img"></p><span id="more"></span><p>sqlè¯­å¥ï¼š</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="keyword">case</span> <span class="keyword">left</span>(cardid,<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;11&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;12&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å¤©æ´¥å¸‚&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;13&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ²³åŒ—çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;14&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å±±è¥¿çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;15&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å†…è’™å¤è‡ªæ²»åŒº&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;21&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;è¾½å®çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;22&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å‰æ—çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;23&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;é»‘é¾™æ±Ÿçœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;31&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;ä¸Šæµ·å¸‚&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;32&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ±Ÿè‹çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;33&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æµ™æ±Ÿçœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;34&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å®‰å¾½çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;35&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;ç¦å»ºçœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;36&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ±Ÿè¥¿çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;37&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å±±ä¸œçœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;41&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ²³å—çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;42&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ¹–åŒ—çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;43&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ¹–å—çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;44&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å¹¿ä¸œçœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;45&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å¹¿è¥¿å£®æ—è‡ªæ²»åŒº&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;46&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æµ·å—çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;50&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;é‡åº†å¸‚&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;51&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å››å·çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;52&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;è´µå·çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;53&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;äº‘å—çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;54&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;è¥¿è—è‡ªæ²»åŒº&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;61&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;é™•è¥¿çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;62&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;ç”˜è‚ƒçœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;63&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;é’æµ·çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;64&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å®å¤å›æ—è‡ªæ²»åŒº&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;65&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;71&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;å°æ¹¾çœ&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;81&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="string">&#x27;82&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº&#x27;</span></span><br><span class="line">  <span class="keyword">else</span> <span class="string">&#x27;æœªçŸ¥&#x27;</span></span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">AS</span> åœ°åŸŸ ,  </span><br><span class="line">  <span class="built_in">cast</span>(<span class="built_in">substring</span>(cardid,<span class="number">7</span>,<span class="number">8</span>) <span class="keyword">as</span> <span class="type">date</span>) <span class="keyword">as</span> å‡ºç”Ÿæ—¥æœŸ,</span><br><span class="line">  <span class="keyword">year</span>(curdate())<span class="operator">-</span>if(length(cardid)<span class="operator">=</span><span class="number">18</span>,<span class="built_in">substring</span>(cardid,<span class="number">7</span>,<span class="number">4</span>),</span><br><span class="line">                     if(length(cardid)<span class="operator">=</span><span class="number">15</span>,concat(<span class="string">&#x27;19&#x27;</span>,<span class="built_in">substring</span>(cardid,<span class="number">7</span>,<span class="number">2</span>)),<span class="keyword">null</span>)) <span class="keyword">as</span> å¹´é¾„,</span><br><span class="line">  <span class="keyword">case</span> if(length(cardid)<span class="operator">=</span><span class="number">18</span>, <span class="built_in">cast</span>(<span class="built_in">substring</span>(cardid,<span class="number">17</span>,<span class="number">1</span>) <span class="keyword">as</span> UNSIGNED)<span class="operator">%</span><span class="number">2</span>, if(length(cardid)<span class="operator">=</span><span class="number">15</span>,<span class="built_in">cast</span>(<span class="built_in">substring</span>(cardid,<span class="number">15</span>,<span class="number">1</span>) <span class="keyword">as</span> UNSIGNED)<span class="operator">%</span><span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">  <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">  <span class="keyword">when</span> <span class="number">0</span> <span class="keyword">then</span> <span class="string">&#x27;å¥³&#x27;</span></span><br><span class="line">  <span class="keyword">else</span> <span class="string">&#x27;æœªçŸ¥&#x27;</span></span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">AS</span> æ€§åˆ«</span><br><span class="line">  <span class="keyword">FROM</span> id;</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/mysql16_2.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisPlusä¸­ä½¿ç”¨ @TableFieldå®Œæˆå­—æ®µè‡ªåŠ¨å¡«å……</title>
      <link href="/2022/04/23/MyBatisPlus_1_MyBatisPlus%E4%B8%AD%E4%BD%BF%E7%94%A8%20@TableField%E5%AE%8C%E6%88%90%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/"/>
      <url>/2022/04/23/MyBatisPlus_1_MyBatisPlus%E4%B8%AD%E4%BD%BF%E7%94%A8%20@TableField%E5%AE%8C%E6%88%90%E5%AD%97%E6%AE%B5%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85/</url>
      
        <content type="html"><![CDATA[<p>éœ€æ±‚ï¼šå¹³æ—¶åœ¨åšå¢åˆ æ”¹æŸ¥æ—¶ï¼Œåˆ›å»ºäººï¼Œåˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°äººï¼Œæ›´æ–°æ—¶é—´ï¼Œç‰ˆæœ¬å·è¿™äº›å­—æ®µæ˜¯éƒ½æœ‰çš„ï¼Œæ¯æ¬¡éƒ½å†™å¾ˆéº»çƒ¦ï¼Œç°åœ¨å¯ä»¥é€šè¿‡é…ç½®å°±å¯ä»¥ä¸ç”¨ç®¡è¿™äº›å­—æ®µï¼Œå†™å…¥è¡¨æ—¶è¿™äº›å­—æ®µè‡ªåŠ¨å¡«å……ã€‚</p><p>jarä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure> <span id="more"></span><p><strong>åŸºç¡€ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseEntity</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(value = &quot;id&quot;,type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">public</span> Long id;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> String createBy;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@JsonFormat(pattern=&quot;yyyy-MM-dd HH:mm:ss&quot;,timezone = &quot;GMT+8&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> String updateBy;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@JsonFormat(pattern=&quot;yyyy-MM-dd HH:mm:ss&quot;,timezone = &quot;GMT+8&quot;)</span></span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT, update=&quot;%s+1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long version;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è‡ªåŠ¨å¡«å……ç±»</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªåŠ¨è¡¥å……æ’å…¥æˆ–æ›´æ–°æ—¶çš„å€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> andornot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022-04-3 18:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createBy&quot;</span>, CookieUtil.getLoginUser(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateBy&quot;</span>, CookieUtil.getLoginUser(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;version&quot;</span>, Long.valueOf(<span class="number">1</span>),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;appSecret&quot;</span>,UUID.randomUUID().toString().replaceAll(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateBy&quot;</span>, CookieUtil.getLoginUser(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;version&quot;</span>, <span class="built_in">this</span>.getFieldValByName(<span class="string">&quot;version&quot;</span>,metaObject),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> MyBatisPlus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åä¸ƒï¼‰â€”â€”åŠ¨æ€è§„åˆ’çŒœæ³•ä¸­å’Œå¤–éƒ¨ä¿¡æ¯ç®€åŒ–çš„ç›¸å…³é—®é¢˜ï¼ˆä¸‹ï¼‰ã€æœ€å¤§ç½‘ç»œæµç®—æ³•ä¹‹Dinicç®—æ³•</title>
      <link href="/2022/04/16/zuo_system_study47/"/>
      <url>/2022/04/16/zuo_system_study47/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>è¿›ä¸€æ­¥è§£å†³å¸¦æœ‰â€å¤–éƒ¨ä¿¡æ¯ç®€åŒ–â€ç‰¹å¾çš„åŠ¨æ€è§„åˆ’</p><p>Dinicç®—æ³•</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>æœ‰å°å¥‡æ€ªçš„æ‰“å°æœºæœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹æ®Šè¦æ±‚ï¼š<br>æ‰“å°æœºæ¯æ¬¡åªèƒ½æ‰“å°ç”±åŒä¸€ä¸ªå­—ç¬¦ç»„æˆçš„åºåˆ—ã€‚<br>æ¯æ¬¡å¯ä»¥åœ¨ä»»æ„èµ·å§‹å’Œç»“æŸä½ç½®æ‰“å°æ–°å­—ç¬¦ï¼Œå¹¶ä¸”ä¼šè¦†ç›–æ‰åŸæ¥å·²æœ‰çš„å­—ç¬¦ã€‚<br>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¿™ä¸ªæ‰“å°æœºæ‰“å°å®ƒéœ€è¦çš„æœ€å°‘æ‰“å°æ¬¡æ•°ã€‚<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/strange-printer/">https://leetcode.com/problems/strange-printer/</a></p><p>æ•´å‹æ•°ç»„arré•¿åº¦ä¸ºn(3 &lt;&#x3D; n &lt;&#x3D; 10^4)ï¼Œæœ€åˆæ¯ä¸ªæ•°å­—æ˜¯&lt;&#x3D;200çš„æ­£æ•°ä¸”æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š</p><ol><li>0ä½ç½®çš„è¦æ±‚ï¼šarr[0]&lt;&#x3D;arr[1] </li><li>n-1ä½ç½®çš„è¦æ±‚ï¼šarr[n-1]&lt;&#x3D;arr[n-2]</li><li>ä¸­é—´iä½ç½®çš„è¦æ±‚ï¼šarr[i]&lt;&#x3D;max(arr[i-1],arr[i+1])<br>ä½†æ˜¯åœ¨arræœ‰äº›æ•°å­—ä¸¢å¤±äº†ï¼Œæ¯”å¦‚kä½ç½®çš„æ•°å­—ä¹‹å‰æ˜¯æ­£æ•°ï¼Œä¸¢å¤±ä¹‹åkä½ç½®çš„æ•°å­—ä¸º0<br>è¯·ä½ æ ¹æ®ä¸Šè¿°æ¡ä»¶ï¼Œè®¡ç®—å¯èƒ½æœ‰å¤šå°‘ç§ä¸åŒçš„arrå¯ä»¥æ»¡è¶³ä»¥ä¸Šæ¡ä»¶<br>æ¯”å¦‚ [6,0,9] åªæœ‰è¿˜åŸæˆ [6,9,9]æ»¡è¶³å…¨éƒ¨ä¸‰ä¸ªæ¡ä»¶ï¼Œæ‰€ä»¥è¿”å›1ï¼Œå³[6,9,9]è¾¾æ ‡</li></ol><p>Dinicç®—æ³•è¯¦è§£<br>æµ‹è¯•é“¾æ¥ï¼š<a href="https://lightoj.com/problem/internet-bandwidth">https://lightoj.com/problem/internet-bandwidth</a></p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åå…­ï¼‰â€”â€”åŠ¨æ€è§„åˆ’çŒœæ³•ä¸­å’Œå¤–éƒ¨ä¿¡æ¯ç®€åŒ–çš„ç›¸å…³é—®é¢˜ï¼ˆä¸Šï¼‰ã€å“ˆå¤«æ›¼æ ‘</title>
      <link href="/2022/04/15/zuo_system_study46/"/>
      <url>/2022/04/15/zuo_system_study46/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ä»¥18èŠ‚åšæ€»çº²</p><p>æœ‰äº›åŠ¨æ€è§„åˆ’é¢è¯•é¢˜ï¼Œéœ€è¦å¾ˆå¥½çš„è®¾è®¡å‚æ•°ï¼Œè¿™ç§è®¾è®¡æ–¹å¼éƒ½æœ‰â€å¤–éƒ¨ä¿¡æ¯ç®€åŒ–â€çš„ç‰¹å¾</p><p>å“ˆå¤«æ›¼æ ‘</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>æœ‰nä¸ªæ°”çƒï¼Œç¼–å·ä¸º0åˆ°n-1ï¼Œæ¯ä¸ªæ°”çƒä¸Šéƒ½æ ‡æœ‰ä¸€ä¸ªæ•°å­—ï¼Œè¿™äº›æ•°å­—å­˜åœ¨æ•°ç»„numsä¸­<br>ç°åœ¨è¦æ±‚ä½ æˆ³ç ´æ‰€æœ‰çš„æ°”çƒã€‚æˆ³ç ´ç¬¬iä¸ªæ°”çƒï¼Œä½ å¯ä»¥è·å¾—nums[i - 1] * nums[i] * nums[i + 1] æšç¡¬å¸<br>è¿™é‡Œçš„i-1å’Œi+1ä»£è¡¨å’Œiç›¸é‚»çš„ã€æ²¡æœ‰è¢«æˆ³çˆ†çš„ï¼ä¸¤ä¸ªæ°”çƒçš„åºå·<br>å¦‚æœi-1æˆ–i+1è¶…å‡ºäº†æ•°ç»„çš„è¾¹ç•Œï¼Œé‚£ä¹ˆå°±å½“å®ƒæ˜¯ä¸€ä¸ªæ•°å­—ä¸º1çš„æ°”çƒ<br>æ±‚æ‰€èƒ½è·å¾—ç¡¬å¸çš„æœ€å¤§æ•°é‡<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/burst-balloons/">https://leetcode.com/problems/burst-balloons/</a></p><p>ç»™å‡ºä¸€äº›ä¸åŒé¢œè‰²çš„ç›’å­ï¼Œç›’å­çš„é¢œè‰²ç”±æ•°å­—è¡¨ç¤ºï¼Œå³ä¸åŒçš„æ•°å­—è¡¨ç¤ºä¸åŒçš„é¢œè‰²ï¼Œä½ å°†ç»è¿‡è‹¥å¹²è½®æ“ä½œå»å»æ‰ç›’å­<br>ç›´åˆ°æ‰€æœ‰çš„ç›’å­éƒ½å»æ‰ä¸ºæ­¢ï¼Œæ¯ä¸€è½®ä½ å¯ä»¥ç§»é™¤å…·æœ‰ç›¸åŒé¢œè‰²çš„è¿ç»­kä¸ªç›’å­ï¼ˆk &gt;&#x3D; 1ï¼‰<br>è¿™æ ·ä¸€è½®ä¹‹åä½ å°†å¾—åˆ° k * k ä¸ªç§¯åˆ†ï¼Œå½“ä½ å°†æ‰€æœ‰ç›’å­éƒ½å»æ‰ä¹‹åï¼Œæ±‚ä½ èƒ½è·å¾—çš„æœ€å¤§ç§¯åˆ†å’Œ<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/remove-boxes/">https://leetcode.com/problems/remove-boxes/</a></p><p>å¦‚æœä¸€ä¸ªå­—ç¬¦ç›¸é‚»çš„ä½ç½®æ²¡æœ‰ç›¸åŒå­—ç¬¦ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®çš„å­—ç¬¦å‡ºç°ä¸èƒ½è¢«æ¶ˆæ‰<br>æ¯”å¦‚:â€abâ€ï¼Œå…¶ä¸­aå’Œbéƒ½ä¸èƒ½è¢«æ¶ˆæ‰<br>å¦‚æœä¸€ä¸ªå­—ç¬¦ç›¸é‚»çš„ä½ç½®æœ‰ç›¸åŒå­—ç¬¦ï¼Œå°±å¯ä»¥ä¸€èµ·æ¶ˆæ‰<br>æ¯”å¦‚:â€abbbcâ€ï¼Œä¸­é—´ä¸€ä¸²çš„bæ˜¯å¯ä»¥è¢«æ¶ˆæ‰çš„ï¼Œæ¶ˆé™¤ä¹‹åå‰©ä¸‹â€acâ€<br>æŸäº›å­—ç¬¦å¦‚æœæ¶ˆæ‰äº†ï¼Œå‰©ä¸‹çš„å­—ç¬¦è®¤ä¸ºé‡æ–°é åœ¨ä¸€èµ·<br>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ å¯ä»¥å†³å®šæ¯ä¸€æ­¥æ¶ˆé™¤çš„é¡ºåºï¼Œç›®æ ‡æ˜¯è¯·å°½å¯èƒ½å¤šçš„æ¶ˆæ‰å­—ç¬¦ï¼Œè¿”å›æœ€å°‘çš„å‰©ä½™å­—ç¬¦æ•°é‡<br>æ¯”å¦‚ï¼šâ€aaccaâ€, å¦‚æœå…ˆæ¶ˆæ‰æœ€å·¦ä¾§çš„â€aaâ€ï¼Œé‚£ä¹ˆå°†å‰©ä¸‹â€ccaâ€ï¼Œç„¶åæŠŠâ€ccâ€æ¶ˆæ‰ï¼Œå‰©ä¸‹çš„â€aâ€å°†æ— æ³•å†æ¶ˆé™¤ï¼Œè¿”å›1<br>ä½†æ˜¯å¦‚æœå…ˆæ¶ˆæ‰ä¸­é—´çš„â€ccâ€ï¼Œé‚£ä¹ˆå°†å‰©ä¸‹â€aaaâ€ï¼Œæœ€åéƒ½æ¶ˆæ‰å°±ä¸€ä¸ªå­—ç¬¦ä¹Ÿä¸å‰©äº†ï¼Œè¿”å›0ï¼Œè¿™æ‰æ˜¯æœ€ä¼˜è§£ã€‚<br>å†æ¯”å¦‚ï¼šâ€baaccabbâ€ï¼Œ<br>å¦‚æœå…ˆæ¶ˆé™¤æœ€å·¦ä¾§çš„ä¸¤ä¸ªaï¼Œå‰©ä¸‹â€bccabbâ€ï¼Œå¦‚æœå†æ¶ˆé™¤æœ€å·¦ä¾§çš„ä¸¤ä¸ªcï¼Œå‰©ä¸‹â€babbâ€ï¼Œæœ€åæ¶ˆé™¤æœ€å³ä¾§çš„ä¸¤ä¸ªbï¼Œå‰©ä¸‹â€baâ€æ— æ³•å†æ¶ˆé™¤ï¼Œè¿”å›2<br>è€Œæœ€ä¼˜ç­–ç•¥æ˜¯ï¼š<br>å¦‚æœå…ˆæ¶ˆé™¤ä¸­é—´çš„ä¸¤ä¸ªcï¼Œå‰©ä¸‹â€baaabbâ€ï¼Œå¦‚æœå†æ¶ˆé™¤ä¸­é—´çš„ä¸‰ä¸ªaï¼Œå‰©ä¸‹â€bbbâ€ï¼Œæœ€åæ¶ˆé™¤ä¸‰ä¸ªbï¼Œä¸ç•™ä¸‹ä»»ä½•å­—ç¬¦ï¼Œè¿”å›0ï¼Œè¿™æ‰æ˜¯æœ€ä¼˜è§£</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œå’Œä¸€ä¸ªæ­£æ•°Mï¼Œè¿”å›åœ¨arrçš„å­æ•°ç»„åœ¨é•¿åº¦ä¸è¶…è¿‡Mçš„æƒ…å†µä¸‹ï¼Œæœ€å¤§çš„ç´¯åŠ å’Œ</p><p>å“ˆå¤«æ›¼æ ‘çš„å®ç°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åäº”ï¼‰â€”â€”åç¼€æ•°ç»„è§£å†³çš„é¢è¯•é¢˜</title>
      <link href="/2022/04/14/zuo_system_study45/"/>
      <url>/2022/04/14/zuo_system_study45/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>é€šè¿‡é¢˜ç›®è¿›ä¸€æ­¥ç†Ÿæ‚‰DC3ç®—æ³•</p><p>é€šè¿‡DC3ç®—æ³•å¾—åˆ°heightæ•°ç»„</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²str1å’Œstr2ï¼Œæƒ³æŠŠstr2æ•´ä½“æ’å…¥åˆ°str1ä¸­çš„æŸä¸ªä½ç½®ï¼Œå½¢æˆæœ€å¤§çš„å­—å…¸åºï¼Œè¿”å›å­—å…¸åºæœ€å¤§çš„ç»“æœ</p><p>ç»™ä¸¤ä¸ªé•¿åº¦åˆ†åˆ«ä¸ºMå’ŒNçš„æ•´å‹æ•°ç»„nums1å’Œnums2ï¼Œå…¶ä¸­æ¯ä¸ªå€¼éƒ½ä¸å¤§äº9ï¼Œå†ç»™å®šä¸€ä¸ªæ­£æ•°Kã€‚ ä½ å¯ä»¥åœ¨nums1å’Œnums2ä¸­æŒ‘é€‰æ•°å­—ï¼Œè¦æ±‚ä¸€å…±æŒ‘é€‰Kä¸ªï¼Œå¹¶ä¸”è¦ä»å·¦åˆ°å³æŒ‘ã€‚è¿”å›æ‰€æœ‰å¯èƒ½çš„ç»“æœä¸­ï¼Œä»£è¡¨æœ€å¤§æ•°å­—çš„ç»“æœ</p><p>æœ€é•¿å…¬å…±å­ä¸²é—®é¢˜æ˜¯é¢è¯•å¸¸è§é¢˜ç›®ä¹‹ä¸€ï¼Œå‡è®¾str1é•¿åº¦Nï¼Œstr2é•¿åº¦M<br>ä¸€èˆ¬åœ¨é¢è¯•åœºä¸Šå›ç­”å‡ºO(N<em>M)çš„è§£æ³•å·²ç»æ˜¯æ¯”è¾ƒä¼˜ç§€äº†<br>å› ä¸ºå¾—åˆ°O(N</em>M)çš„è§£æ³•ï¼Œå°±å·²ç»éœ€è¦ç”¨åˆ°åŠ¨æ€è§„åˆ’äº†<br>ä½†å…¶å®è¿™ä¸ªé—®é¢˜çš„æœ€ä¼˜è§£æ˜¯O(N+M)ï¼Œéœ€è¦ç”¨åˆ°åç¼€æ•°ç»„+heightæ•°ç»„<br>è¯¾ä¸Šå°†å¯¹æœ¬é¢˜è§£æ³•ä»£ç è¿›è¡Œè¯¦è§£</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åå››ï¼‰â€”â€”DC3ç”Ÿæˆåç¼€æ•°ç»„è¯¦è§£</title>
      <link href="/2022/04/13/zuo_system_study44/"/>
      <url>/2022/04/13/zuo_system_study44/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>åç¼€æ•°ç»„</p><p>ä»‹ç»ç”¨DC3ç®—æ³•ç”Ÿæˆåç¼€æ•°ç»„çš„æµç¨‹</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾å‡ºå®ƒçš„æ‰€æœ‰å­ä¸²å¹¶æŒ‰å­—å…¸åºæ’åˆ—ï¼Œè¿”å›æ’åœ¨æœ€åçš„é‚£ä¸ªå­ä¸²<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/last-substring-in-lexicographical-order/">https://leetcode.com/problems/last-substring-in-lexicographical-order/</a></p><p>DC3ç®—æ³•çš„å®ç°ï¼ˆå®Œå…¨æ ¹æ®è®ºæ–‡æè¿°ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åä¸‰ï¼‰â€”â€”çŠ¶æ€å‹ç¼©çš„åŠ¨æ€è§„åˆ’</title>
      <link href="/2022/04/12/zuo_system_study43/"/>
      <url>/2022/04/12/zuo_system_study43/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>åŠ¨æ€è§„åˆ’çš„çŠ¶æ€å‹ç¼©æŠ€å·§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>åœ¨â€100 gameâ€è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä¸¤åç©å®¶è½®æµé€‰æ‹©ä»1åˆ°10çš„ä»»æ„æ•´æ•°ï¼Œç´¯è®¡æ•´æ•°å’Œ<br>å…ˆä½¿å¾—ç´¯è®¡æ•´æ•°å’Œè¾¾åˆ°æˆ–è¶…è¿‡100çš„ç©å®¶ï¼Œå³ä¸ºèƒœè€…ï¼Œå¦‚æœæˆ‘ä»¬å°†æ¸¸æˆè§„åˆ™æ”¹ä¸º â€œç©å®¶ä¸èƒ½é‡å¤ä½¿ç”¨æ•´æ•°â€ å‘¢ï¼Ÿ<br>ä¾‹å¦‚ï¼Œä¸¤ä¸ªç©å®¶å¯ä»¥è½®æµä»å…¬å…±æ•´æ•°æ± ä¸­æŠ½å–ä»1åˆ°15çš„æ•´æ•°ï¼ˆä¸æ”¾å›ï¼‰ï¼Œç›´åˆ°ç´¯è®¡æ•´æ•°å’Œ &gt;&#x3D; 100<br>ç»™å®šä¸€ä¸ªæ•´æ•° maxChoosableInteger ï¼ˆæ•´æ•°æ± ä¸­å¯é€‰æ‹©çš„æœ€å¤§æ•°ï¼‰å’Œå¦ä¸€ä¸ªæ•´æ•° desiredTotalï¼ˆç´¯è®¡å’Œï¼‰<br>åˆ¤æ–­å…ˆå‡ºæ‰‹çš„ç©å®¶æ˜¯å¦èƒ½ç¨³èµ¢ï¼ˆå‡è®¾ä¸¤ä½ç©å®¶æ¸¸æˆæ—¶éƒ½è¡¨ç°æœ€ä½³ï¼‰<br>ä½ å¯ä»¥å‡è®¾ maxChoosableInteger ä¸ä¼šå¤§äº 20ï¼Œ desiredTotal ä¸ä¼šå¤§äº 300ã€‚<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/can-i-win/">https://leetcode.com/problems/can-i-win/</a></p><p>TSPé—®é¢˜<br>æœ‰Nä¸ªåŸå¸‚ï¼Œä»»ä½•ä¸¤ä¸ªåŸå¸‚ä¹‹é—´çš„éƒ½æœ‰è·ç¦»ï¼Œä»»ä½•ä¸€åº§åŸå¸‚åˆ°è‡ªå·±çš„è·ç¦»éƒ½ä¸º0<br>æ‰€æœ‰ç‚¹åˆ°ç‚¹çš„è·ç¦»éƒ½å­˜åœ¨ä¸€ä¸ªN*Nçš„äºŒç»´æ•°ç»„matrixé‡Œï¼Œä¹Ÿå°±æ˜¯æ•´å¼ å›¾ç”±é‚»æ¥çŸ©é˜µè¡¨ç¤º<br>ç°è¦æ±‚ä¸€æ—…è¡Œå•†ä»kåŸå¸‚å‡ºå‘å¿…é¡»ç»è¿‡æ¯ä¸€ä¸ªåŸå¸‚ä¸”åªåœ¨ä¸€ä¸ªåŸå¸‚é€—ç•™ä¸€æ¬¡ï¼Œæœ€åå›åˆ°å‡ºå‘çš„kåŸ<br>å‚æ•°ç»™å®šä¸€ä¸ªmatrixï¼Œç»™å®škã€‚è¿”å›æ€»è·ç¦»æœ€çŸ­çš„è·¯çš„è·ç¦»</p><p>é“ºç –é—®é¢˜ï¼ˆæœ€ä¼˜è§£å…¶å®æ˜¯è½®å»“çº¿dpï¼Œä½†æ˜¯è¿™ä¸ªè§£æ³•å¯¹å¤§å‚åˆ·é¢˜æ¥è¯´æ¯”è¾ƒéš¾ï¼ŒæŒæ¡è¯¾ä¸Šçš„è§£æ³•å³å¯ï¼‰<br>ä½ æœ‰æ— é™çš„1<em>2çš„ç –å—ï¼Œè¦é“ºæ»¡M</em>Nçš„åŒºåŸŸï¼Œ<br>ä¸åŒçš„é“ºæ³•æœ‰å¤šå°‘ç§?</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åäºŒï¼‰â€”â€”å››è¾¹å½¢ä¸ç­‰å¼æŠ€å·§ï¼ˆä¸‹ï¼‰</title>
      <link href="/2022/04/11/zuo_system_study42/"/>
      <url>/2022/04/11/zuo_system_study42/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ç»§ç»­ç†Ÿæ‚‰å››è¾¹å½¢ä¸ç­‰å¼</p><p>å±•ç¤ºå¥½çš„å°è¯•æ˜¯æœ€å…³é”®çš„</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ä¸€æ¡ç›´çº¿ä¸Šæœ‰å±…æ°‘ç‚¹ï¼Œé‚®å±€åªèƒ½å»ºåœ¨å±…æ°‘ç‚¹ä¸Š<br>ç»™å®šä¸€ä¸ªæœ‰åºæ­£æ•°æ•°ç»„arrï¼Œæ¯ä¸ªå€¼è¡¨ç¤º å±…æ°‘ç‚¹çš„ä¸€ç»´åæ ‡ï¼Œå†ç»™å®šä¸€ä¸ªæ­£æ•° numï¼Œè¡¨ç¤ºé‚®å±€æ•°é‡<br>é€‰æ‹©numä¸ªå±…æ°‘ç‚¹å»ºç«‹numä¸ªé‚®å±€ï¼Œä½¿æ‰€æœ‰çš„å±…æ°‘ç‚¹åˆ°æœ€è¿‘é‚®å±€çš„æ€»è·ç¦»æœ€çŸ­ï¼Œè¿”å›æœ€çŸ­çš„æ€»è·ç¦»<br>arr&#x3D;[1,2,3,4,5,1000]ï¼Œnum&#x3D;2<br>ç¬¬ä¸€ä¸ªé‚®å±€å»ºç«‹åœ¨3ä½ç½®ï¼Œç¬¬äºŒä¸ªé‚®å±€å»ºç«‹åœ¨1000ä½ç½®<br>é‚£ä¹ˆ1ä½ç½®åˆ°é‚®å±€çš„è·ç¦»ä¸º2ï¼Œ2ä½ç½®åˆ°é‚®å±€è·ç¦»ä¸º1ï¼Œ3ä½ç½®åˆ°é‚®å±€çš„è·ç¦»ä¸º0ï¼Œ4ä½ç½®åˆ°é‚®å±€çš„è·ç¦»ä¸º1ï¼Œ5ä½ç½®åˆ°é‚®å±€çš„è·ç¦»ä¸º2<br>1000ä½ç½®åˆ°é‚®å±€çš„è·ç¦»ä¸º0<br>è¿™ç§æ–¹æ¡ˆä¸‹çš„æ€»è·ç¦»ä¸º6ï¼Œå…¶ä»–ä»»ä½•æ–¹æ¡ˆçš„æ€»è·ç¦»éƒ½ä¸ä¼šæ¯”è¯¥æ–¹æ¡ˆçš„æ€»è·ç¦»æ›´çŸ­ï¼Œæ‰€ä»¥è¿”å›6</p><p>ä¸€åº§å¤§æ¥¼æœ‰0<del>Nå±‚ï¼Œåœ°é¢ç®—ä½œç¬¬0å±‚ï¼Œæœ€é«˜çš„ä¸€å±‚ä¸ºç¬¬Nå±‚<br>å·²çŸ¥æ£‹å­ä»ç¬¬0å±‚æ‰è½è‚¯å®šä¸ä¼šæ‘”ç¢ï¼Œä»ç¬¬iå±‚æ‰è½å¯èƒ½ä¼šæ‘”ç¢ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šæ‘”ç¢(1â‰¤iâ‰¤N)<br>ç»™å®šæ•´æ•°Nä½œä¸ºæ¥¼å±‚æ•°ï¼Œå†ç»™å®šæ•´æ•°Kä½œä¸ºæ£‹å­æ•°<br>è¿”å›å¦‚æœæƒ³æ‰¾åˆ°æ£‹å­ä¸ä¼šæ‘”ç¢çš„æœ€é«˜å±‚æ•°ï¼Œå³ä½¿åœ¨æœ€å·®çš„æƒ…å†µä¸‹æ‰”çš„æœ€å°‘æ¬¡æ•°<br>ä¸€æ¬¡åªèƒ½æ‰”ä¸€ä¸ªæ£‹å­<br>N&#x3D;10ï¼ŒK&#x3D;1<br>è¿”å›10<br>å› ä¸ºåªæœ‰1æ£µæ£‹å­ï¼Œæ‰€ä»¥ä¸å¾—ä¸ä»ç¬¬1å±‚å¼€å§‹ä¸€ç›´è¯•åˆ°ç¬¬10å±‚<br>åœ¨æœ€å·®çš„æƒ…å†µä¸‹ï¼Œå³ç¬¬10å±‚æ˜¯ä¸ä¼šæ‘”åçš„æœ€é«˜å±‚ï¼Œæœ€å°‘ä¹Ÿè¦æ‰”10æ¬¡<br>N&#x3D;3ï¼ŒK&#x3D;2<br>è¿”å›2<br>å…ˆåœ¨2å±‚æ‰”1æ£µæ£‹å­ï¼Œå¦‚æœç¢äº†è¯•ç¬¬1å±‚ï¼Œå¦‚æœæ²¡ç¢è¯•ç¬¬3å±‚<br>N&#x3D;105ï¼ŒK&#x3D;2<br>è¿”å›14<br>ç¬¬ä¸€ä¸ªæ£‹å­å…ˆåœ¨14å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•1</del>13<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨27å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•15<del>26<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨39å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•28</del>38<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨50å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•40<del>49<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨60å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•51</del>59<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨69å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•61<del>68<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨77å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•70</del>76<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨84å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•78<del>83<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨90å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•85</del>89<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨95å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•91<del>94<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨99å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•96</del>98<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨102å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•100ã€101<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨104å±‚æ‰”ï¼Œç¢äº†åˆ™ç”¨ä»…å­˜çš„ä¸€ä¸ªæ£‹å­è¯•103<br>è‹¥æ²¡ç¢ï¼Œç¬¬ä¸€ä¸ªæ£‹å­ç»§ç»­åœ¨105å±‚æ‰”ï¼Œè‹¥åˆ°è¿™ä¸€æ­¥è¿˜æ²¡ç¢ï¼Œé‚£ä¹ˆ105ä¾¿æ˜¯ç»“æœ</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åä¸€ï¼‰â€”â€”å››è¾¹å½¢ä¸ç­‰å¼æŠ€å·§ï¼ˆä¸Šï¼‰</title>
      <link href="/2022/04/10/zuo_system_study41/"/>
      <url>/2022/04/10/zuo_system_study41/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>åŒºé—´åˆ’åˆ†é—®é¢˜ä¸­çš„åˆ’åˆ†ç‚¹ä¸å›é€€ç°è±¡</p><p>å››è¾¹å½¢ä¸ç­‰å¼æŠ€å·§ç‰¹å¾<br>1ï¼Œä¸¤ä¸ªå¯å˜å‚æ•°çš„åŒºé—´åˆ’åˆ†é—®é¢˜<br>2ï¼Œæ¯ä¸ªæ ¼å­æœ‰æšä¸¾è¡Œä¸º<br>3ï¼Œå½“ä¸¤ä¸ªå¯å˜å‚æ•°å›ºå®šä¸€ä¸ªï¼Œå¦ä¸€ä¸ªå‚æ•°å’Œç­”æ¡ˆä¹‹é—´å­˜åœ¨å•è°ƒæ€§å…³ç³»<br>4ï¼Œè€Œä¸”ä¸¤ç»„å•è°ƒå…³ç³»æ˜¯åå‘çš„ï¼š(å‡ å‡ï¼Œé™ é™)  (å‡ é™ï¼Œé™ å‡)<br>5ï¼Œèƒ½å¦è·å¾—æŒ‡å¯¼æšä¸¾ä¼˜åŒ–çš„ä½ç½®å¯¹ï¼šä¸Š+å³ï¼Œæˆ–è€…ï¼Œå·¦+ä¸‹</p><p>å››è¾¹å½¢ä¸ç­‰å¼æŠ€å·§æ³¨æ„ç‚¹<br>1ï¼Œä¸è¦è¯æ˜ï¼ç”¨å¯¹æ•°å™¨éªŒè¯ï¼<br>2ï¼Œæšä¸¾çš„æ—¶å€™é¢å¯¹æœ€ä¼˜ç­”æ¡ˆç›¸ç­‰çš„æ—¶å€™æ€ä¹ˆå¤„ç†ï¼Ÿç”¨å¯¹æ•°å™¨éƒ½è¯•è¯•ï¼<br>3ï¼Œå¯ä»¥æŠŠæ—¶é—´å¤æ‚åº¦é™ä½ä¸€é˜¶<br>O(N^3) -&gt; O(N^2)<br>O(N^2 * M) -&gt; O(N * M)<br>O(N * M^2) -&gt; O(N * M)<br>4ï¼Œå››è¾¹å½¢ä¸ç­‰å¼æœ‰äº›æ—¶å€™æ˜¯æœ€ä¼˜è§£ï¼Œæœ‰äº›æ—¶å€™ä¸æ˜¯<br>ä¸æ˜¯çš„åŸå› ï¼šå°è¯•æ€è·¯ï¼Œåœ¨æ ¹å„¿ä¸Šä¸å¤Ÿå¥½</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•°ç»„arrï¼Œé•¿åº¦ä¸ºNï¼Œ<br>é‚£ä¹ˆæœ‰N-1ç§æ–¹æ¡ˆå¯ä»¥æŠŠarråˆ‡æˆå·¦å³ä¸¤éƒ¨åˆ†<br>æ¯ä¸€ç§æ–¹æ¡ˆéƒ½æœ‰ï¼Œmin{å·¦éƒ¨åˆ†ç´¯åŠ å’Œï¼Œå³éƒ¨åˆ†ç´¯åŠ å’Œ}<br>æ±‚è¿™ä¹ˆå¤šæ–¹æ¡ˆä¸­ï¼Œmin{å·¦éƒ¨åˆ†ç´¯åŠ å’Œï¼Œå³éƒ¨åˆ†ç´¯åŠ å’Œ}çš„æœ€å¤§å€¼æ˜¯å¤šå°‘ï¼Ÿ<br>æ•´ä¸ªè¿‡ç¨‹è¦æ±‚æ—¶é—´å¤æ‚åº¦O(N)</p><p>æŠŠé¢˜ç›®ä¸€ä¸­æåˆ°çš„ï¼Œmin{å·¦éƒ¨åˆ†ç´¯åŠ å’Œï¼Œå³éƒ¨åˆ†ç´¯åŠ å’Œ}ï¼Œå®šä¹‰ä¸ºS(N-1)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š<br>S(N-1)ï¼šåœ¨arr[0â€¦N-1]èŒƒå›´ä¸Šï¼Œåšæœ€ä¼˜åˆ’åˆ†æ‰€å¾—åˆ°çš„min{å·¦éƒ¨åˆ†ç´¯åŠ å’Œï¼Œå³éƒ¨åˆ†ç´¯åŠ å’Œ}çš„æœ€å¤§å€¼<br>ç°åœ¨è¦æ±‚è¿”å›ä¸€ä¸ªé•¿åº¦ä¸ºNçš„sæ•°ç»„ï¼Œ<br>s[i] &#x3D;åœ¨arr[0â€¦i]èŒƒå›´ä¸Šï¼Œåšæœ€ä¼˜åˆ’åˆ†æ‰€å¾—åˆ°çš„min{å·¦éƒ¨åˆ†ç´¯åŠ å’Œï¼Œå³éƒ¨åˆ†ç´¯åŠ å’Œ}çš„æœ€å¤§å€¼<br>å¾—åˆ°æ•´ä¸ªsæ•°ç»„çš„è¿‡ç¨‹ï¼Œåšåˆ°æ—¶é—´å¤æ‚åº¦O(N)</p><p>æ‘†æ”¾ç€nå †çŸ³å­ã€‚ç°è¦å°†çŸ³å­æœ‰æ¬¡åºåœ°åˆå¹¶æˆä¸€å †ï¼Œè§„å®šæ¯æ¬¡åªèƒ½é€‰ç›¸é‚»çš„2å †çŸ³å­åˆå¹¶æˆæ–°çš„ä¸€å †<br>å¹¶å°†æ–°çš„ä¸€å †çŸ³å­æ•°è®°ä¸ºè¯¥æ¬¡åˆå¹¶çš„å¾—åˆ†ï¼Œæ±‚å‡ºå°†nå †çŸ³å­åˆå¹¶æˆä¸€å †çš„æœ€å°å¾—åˆ†ï¼ˆæˆ–æœ€å¤§å¾—åˆ†ï¼‰åˆå¹¶æ–¹æ¡ˆ</p><p>ç»™å®šä¸€ä¸ªæ•´å‹æ•°ç»„ arrï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼éƒ½ä¸ºæ­£æ•°ï¼Œè¡¨ç¤ºå®Œæˆä¸€å¹…ç”»ä½œéœ€è¦çš„æ—¶é—´ï¼Œå†ç»™å®šä¸€ä¸ªæ•´æ•°num<br>è¡¨ç¤ºç”»åŒ çš„æ•°é‡ï¼Œæ¯ä¸ªç”»åŒ åªèƒ½ç”»è¿åœ¨ä¸€èµ·çš„ç”»ä½œ<br>æ‰€æœ‰çš„ç”»å®¶å¹¶è¡Œå·¥ä½œï¼Œè¿”å›å®Œæˆæ‰€æœ‰çš„ç”»ä½œéœ€è¦çš„æœ€å°‘æ—¶é—´<br>arr&#x3D;[3,1,4]ï¼Œnum&#x3D;2ã€‚<br>æœ€å¥½çš„åˆ†é…æ–¹å¼ä¸ºç¬¬ä¸€ä¸ªç”»åŒ ç”»3å’Œ1ï¼Œæ‰€éœ€æ—¶é—´ä¸º4<br>ç¬¬äºŒä¸ªç”»åŒ ç”»4ï¼Œæ‰€éœ€æ—¶é—´ä¸º4<br>æ‰€ä»¥è¿”å›4<br>arr&#x3D;[1,1,1,4,3]ï¼Œnum&#x3D;3<br>æœ€å¥½çš„åˆ†é…æ–¹å¼ä¸ºç¬¬ä¸€ä¸ªç”»åŒ ç”»å‰ä¸‰ä¸ª1ï¼Œæ‰€éœ€æ—¶é—´ä¸º3<br>ç¬¬äºŒä¸ªç”»åŒ ç”»4ï¼Œæ‰€éœ€æ—¶é—´ä¸º4<br>ç¬¬ä¸‰ä¸ªç”»åŒ ç”»3ï¼Œæ‰€éœ€æ—¶é—´ä¸º3<br>è¿”å›4</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››åï¼‰â€”â€”å­æ•°ç»„è¾¾åˆ°è§„å®šç´¯åŠ å’Œçš„æœ€å¤§é•¿åº¦ç³»åˆ—é—®é¢˜ã€çŸ©é˜µå¤„ç†æŠ€å·§é¢˜</title>
      <link href="/2022/04/09/zuo_system_study40/"/>
      <url>/2022/04/09/zuo_system_study40/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ä¿®æ­£äº†39èŠ‚å¡ç‰¹å…°æ•°è®²è§£æ—¶çš„ä¸€ä¸ªå°é”™è¯¯</p><p>ç†Ÿæ‚‰å­æ•°ç»„è¾¾åˆ°è§„å®šç´¯åŠ å’Œçš„ä¸‰ä¸ªæ¨¡å‹ï¼ˆæ­£ã€æœ‰æ­£æœ‰è´Ÿæœ‰0ã€ç´¯åŠ å’Œ&lt;&#x3D;Kï¼‰</p><p>çŸ©é˜µå¤„ç†æŠ€å·§çš„å®è§‚è°ƒåº¦codingæŠ€å·§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°ç»„æˆçš„æ— åºæ•°ç»„arrï¼Œç»™å®šä¸€ä¸ªæ­£æ•´æ•°å€¼Kï¼Œæ‰¾åˆ°arrçš„æ‰€æœ‰å­æ•°ç»„é‡Œï¼Œå“ªä¸ªå­æ•°ç»„çš„ç´¯åŠ å’Œç­‰äºK<br>å¹¶ä¸”æ˜¯é•¿åº¦æœ€å¤§çš„ï¼Œè¿”å›å…¶é•¿åº¦</p><p>ç»™å®šä¸€ä¸ªæ•´æ•°ç»„æˆçš„æ— åºæ•°ç»„arrï¼Œå€¼å¯èƒ½æ­£ã€å¯èƒ½è´Ÿã€å¯èƒ½0ï¼Œç»™å®šä¸€ä¸ªæ•´æ•°å€¼K<br>æ‰¾åˆ°arrçš„æ‰€æœ‰å­æ•°ç»„é‡Œï¼Œå“ªä¸ªå­æ•°ç»„çš„ç´¯åŠ å’Œç­‰äºKï¼Œå¹¶ä¸”æ˜¯é•¿åº¦æœ€å¤§çš„ï¼Œè¿”å›å…¶é•¿åº¦</p><p>ç»™å®šä¸€ä¸ªæ•´æ•°ç»„æˆçš„æ— åºæ•°ç»„arrï¼Œå€¼å¯èƒ½æ­£ã€å¯èƒ½è´Ÿã€å¯èƒ½0ï¼Œç»™å®šä¸€ä¸ªæ•´æ•°å€¼K<br>æ‰¾åˆ°arrçš„æ‰€æœ‰å­æ•°ç»„é‡Œï¼Œå“ªä¸ªå­æ•°ç»„çš„ç´¯åŠ å’Œ&lt;&#x3D;Kï¼Œå¹¶ä¸”æ˜¯é•¿åº¦æœ€å¤§çš„ï¼Œè¿”å›å…¶é•¿åº¦</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œç»™å®šä¸€ä¸ªå€¼vï¼Œæ±‚å­æ•°ç»„å¹³å‡å€¼å°äºç­‰äºvçš„æœ€é•¿å­æ•°ç»„é•¿åº¦</p><p>ç»™å®šä¸€ä¸ªæ­£æ–¹å½¢çŸ©é˜µmatrixï¼ŒåŸåœ°è°ƒæ•´æˆé¡ºæ—¶é’ˆ90åº¦è½¬åŠ¨çš„æ ·å­</p><p>ç»™å®šä¸€ä¸ªæ­£æ–¹å½¢æˆ–è€…é•¿æ–¹å½¢çŸ©é˜µmatrixï¼Œå®ç°è½¬åœˆæ‰“å°</p><p>ç»™å®šä¸€ä¸ªæ­£æ–¹å½¢æˆ–è€…é•¿æ–¹å½¢çŸ©é˜µmatrixï¼Œå®ç°zigzagæ‰“å°</p><p>è½¬åœˆæ‰“å°æ˜Ÿå·*é—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åä¹ï¼‰â€”â€”æ ¹æ®æ•°æ®é‡çŒœè§£æ³•ï¼ˆç»­ï¼‰ã€åˆ†æ²»æŠ€å·§ã€å¡ç‰¹å…°æ•°</title>
      <link href="/2022/04/08/zuo_system_study39/"/>
      <url>/2022/04/08/zuo_system_study39/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ç»§ç»­ç†Ÿæ‚‰æ ¹æ®æ•°æ®é‡çŒœè§£æ³•</p><p>è®²è§£åˆ†æ²»æ³•</p><p>è®²è§£å¡ç‰¹å…°æ•°ï¼ˆè¯¾ä¸Šè¯æ˜çš„æ—¶å€™æœ‰å°é”™ï¼Œåœ¨40èŠ‚å¼€å§‹å¤„ä¿®æ­£äº†ï¼‰</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•°ç»„arrï¼Œå’Œä¸€ä¸ªæ­£æ•°mï¼Œè¿”å›arrçš„æ‰€æœ‰å­åºåˆ—ä¸­ç´¯åŠ å’Œ%mä¹‹åçš„æœ€å¤§å€¼</p><p>ç‰›ç‰›å®¶é‡Œä¸€å…±æœ‰nè¢‹é›¶é£Ÿ, ç¬¬iè¢‹é›¶é£Ÿä½“ç§¯ä¸ºv[i]ï¼ŒèƒŒåŒ…å®¹é‡ä¸ºwï¼Œç‰›ç‰›æƒ³çŸ¥é“åœ¨æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡çš„æƒ…å†µä¸‹,<br>ä¸€å…±æœ‰å¤šå°‘ç§é›¶é£Ÿæ”¾æ³•ï¼Œä½“ç§¯ä¸º0ä¹Ÿç®—ä¸€ç§æ”¾æ³•<br>1 &lt;&#x3D; n &lt;&#x3D; 30, 1 &lt;&#x3D; w &lt;&#x3D; 2 * 10^9ï¼Œv[I] (0 &lt;&#x3D; v[i] &lt;&#x3D; 10^9ï¼‰</p><p>å‡è®¾ç»™ä½ Nä¸ª0ï¼Œå’ŒNä¸ª1ï¼Œä½ å¿…é¡»ç”¨å…¨éƒ¨æ•°å­—æ‹¼åºåˆ—ï¼Œè¿”å›æœ‰å¤šå°‘ä¸ªåºåˆ—æ»¡è¶³ä»»ä½•å‰ç¼€ä¸²ï¼Œ1çš„æ•°é‡éƒ½ä¸å°‘äº0çš„æ•°é‡</p><p>æœ‰Nä¸ªäºŒå‰æ ‘èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å½¼æ­¤ä¹‹é—´æ— ä»»ä½•å·®åˆ«ï¼Œè¿”å›ç”±Nä¸ªäºŒå‰æ ‘èŠ‚ç‚¹ï¼Œç»„æˆçš„ä¸åŒç»“æ„æ•°é‡æ˜¯å¤šå°‘ï¼Ÿ</p><p>é¢˜ç›®è¡¥å……ï¼š    arrä¸­çš„å€¼å¯èƒ½ä¸ºæ­£ï¼Œå¯èƒ½ä¸ºè´Ÿï¼Œå¯èƒ½ä¸º0ï¼Œè‡ªç”±é€‰æ‹©arrä¸­çš„æ•°å­—ï¼Œèƒ½ä¸èƒ½ç´¯åŠ å¾—åˆ°sumï¼ˆå¤šç§åšæ³•ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åå…«ï¼‰â€”â€”æ ¹æ®å¯¹æ•°å™¨æ‰¾è§„å¾‹ã€æ ¹æ®æ•°æ®é‡çŒœè§£æ³•</title>
      <link href="/2022/04/07/zuo_system_study38/"/>
      <url>/2022/04/07/zuo_system_study38/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>è®²è§£å¯¹æ•°å™¨æ‰¾è§„å¾‹çš„è§£é¢˜æŠ€å·§</p><p>è®²è§£æ ¹æ®æ•°æ®é‡çŒœè§£æ³•çš„æŠ€å·§<br>1ï¼‰C&#x2F;C++ï¼Œ1ç§’å¤„ç†çš„æŒ‡ä»¤æ¡æ•°ä¸º10çš„8æ¬¡æ–¹<br>2ï¼‰Javaç­‰è¯­è¨€ï¼Œ1~4ç§’å¤„ç†çš„æŒ‡ä»¤æ¡æ•°ä¸º10çš„8æ¬¡æ–¹<br>3ï¼‰è¿™é‡Œå°±æœ‰å¤§é‡çš„åˆ†ææç¤ºäº†</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>å°è™å»ä¹°è‹¹æœï¼Œå•†åº—åªæä¾›ä¸¤ç§ç±»å‹çš„å¡‘æ–™è¢‹ï¼Œæ¯ç§ç±»å‹éƒ½æœ‰ä»»æ„æ•°é‡<br>1ï¼‰èƒ½è£…ä¸‹6ä¸ªè‹¹æœçš„è¢‹å­<br>2ï¼‰èƒ½è£…ä¸‹8ä¸ªè‹¹æœçš„è¢‹å­<br>å°è™å¯ä»¥è‡ªç”±ä½¿ç”¨ä¸¤ç§è¢‹å­æ¥è£…è‹¹æœï¼Œä½†æ˜¯å°è™æœ‰å¼ºè¿«ç—‡ï¼Œä»–è¦æ±‚è‡ªå·±ä½¿ç”¨çš„è¢‹å­æ•°é‡å¿…é¡»æœ€å°‘ï¼Œ<br>ä¸”ä½¿ç”¨çš„æ¯ä¸ªè¢‹å­å¿…é¡»è£…æ»¡ï¼Œç»™å®šä¸€ä¸ªæ­£æ•´æ•°Nï¼Œè¿”å›è‡³å°‘ä½¿ç”¨å¤šå°‘è¢‹å­ã€‚å¦‚æœNæ— æ³•è®©ä½¿ç”¨çš„æ¯ä¸ªè¢‹å­å¿…é¡»è£…æ»¡ï¼Œè¿”å›-1</p><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°Nï¼Œè¡¨ç¤ºæœ‰Nä»½é’è‰ç»Ÿä¸€å †æ”¾åœ¨ä»“åº“é‡Œï¼Œæœ‰ä¸€åªç‰›å’Œä¸€åªç¾Šï¼Œç‰›å…ˆåƒï¼Œç¾Šååƒï¼Œå®ƒä¿©è½®æµåƒè‰<br>ä¸ç®¡æ˜¯ç‰›è¿˜æ˜¯ç¾Šï¼Œæ¯ä¸€è½®èƒ½åƒçš„è‰é‡å¿…é¡»æ˜¯ï¼š1ï¼Œ4ï¼Œ16ï¼Œ64â€¦(4çš„æŸæ¬¡æ–¹)<br>è°æœ€å…ˆæŠŠè‰åƒå®Œï¼Œè°è·èƒœï¼Œå‡è®¾ç‰›å’Œç¾Šéƒ½ç»é¡¶èªæ˜ï¼Œéƒ½æƒ³èµ¢ï¼Œéƒ½ä¼šåšå‡ºç†æ€§çš„å†³å®šã€‚æ ¹æ®å”¯ä¸€çš„å‚æ•°Nï¼Œè¿”å›è°ä¼šèµ¢</p><p>å®šä¹‰ä¸€ç§æ•°ï¼šå¯ä»¥è¡¨ç¤ºæˆè‹¥å¹²ï¼ˆæ•°é‡&gt;1ï¼‰è¿ç»­æ­£æ•°å’Œçš„æ•°<br>æ¯”å¦‚ï¼Œ5&#x3D;2+3ï¼Œ5å°±æ˜¯è¿™æ ·çš„æ•°ï¼›12&#x3D;3+4+5ï¼Œ12å°±æ˜¯è¿™æ ·çš„æ•°<br>2&#x3D;1+1ï¼Œ2ä¸æ˜¯è¿™æ ·çš„æ•°ï¼Œå› ä¸ºç­‰å·å³è¾¹ä¸æ˜¯è¿ç»­æ­£æ•°<br>ç»™å®šä¸€ä¸ªå‚æ•°Nï¼Œè¿”å›æ˜¯ä¸æ˜¯å¯ä»¥è¡¨ç¤ºæˆè‹¥å¹²è¿ç»­æ­£æ•°å’Œçš„æ•°</p><p>int[] dï¼Œd[i]ï¼šiå·æ€ªå…½çš„èƒ½åŠ›<br>int[] pï¼Œp[i]ï¼šiå·æ€ªå…½è¦æ±‚çš„é’±<br>å¼€å§‹æ—¶ä½ çš„èƒ½åŠ›æ˜¯0ï¼Œä½ çš„ç›®æ ‡æ˜¯ä»0å·æ€ªå…½å¼€å§‹ï¼Œé€šè¿‡æ‰€æœ‰çš„æ€ªå…½ã€‚<br>å¦‚æœä½ å½“å‰çš„èƒ½åŠ›ï¼Œå°äºiå·æ€ªå…½çš„èƒ½åŠ›ï¼Œä½ å¿…é¡»ä»˜å‡ºp[i]çš„é’±ï¼Œè´¿èµ‚è¿™ä¸ªæ€ªå…½ï¼Œç„¶åæ€ªå…½å°±ä¼šåŠ å…¥ä½ <br>ä»–çš„èƒ½åŠ›ç›´æ¥ç´¯åŠ åˆ°ä½ çš„èƒ½åŠ›ä¸Šï¼›å¦‚æœä½ å½“å‰çš„èƒ½åŠ›ï¼Œå¤§äºç­‰äºiå·æ€ªå…½çš„èƒ½åŠ›<br>ä½ å¯ä»¥é€‰æ‹©ç›´æ¥é€šè¿‡ï¼Œä½ çš„èƒ½åŠ›å¹¶ä¸ä¼šä¸‹é™ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©è´¿èµ‚è¿™ä¸ªæ€ªå…½ï¼Œç„¶åæ€ªå…½å°±ä¼šåŠ å…¥ä½ <br>ä»–çš„èƒ½åŠ›ç›´æ¥ç´¯åŠ åˆ°ä½ çš„èƒ½åŠ›ä¸Š<br>è¿”å›é€šè¿‡æ‰€æœ‰çš„æ€ªå…½ï¼Œéœ€è¦èŠ±çš„æœ€å°é’±æ•°<br>ï¼ˆè¯¾ä¸Šä¼šç»™å‡ºä¸åŒçš„æ•°æ®é‡æè¿°ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åä¸ƒï¼‰â€”â€”æœ‰åºè¡¨ï¼ˆä¸‹ï¼‰</title>
      <link href="/2022/04/06/zuo_system_study37/"/>
      <url>/2022/04/06/zuo_system_study37/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>è®²è§£æœ‰åºè¡¨ç›¸å…³çš„é¢è¯•é¢˜</p><p>è®²è§£æ”¹å†™æœ‰åºè¡¨çš„é¢˜ç›®æ ¸å¿ƒç‚¹</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œå’Œä¸¤ä¸ªæ•´æ•°aå’Œbï¼ˆa&lt;&#x3D;bï¼‰ã€‚æ±‚arrä¸­æœ‰å¤šå°‘ä¸ªå­æ•°ç»„ï¼Œç´¯åŠ å’Œåœ¨[a,b]è¿™ä¸ªèŒƒå›´ä¸Šã€‚è¿”å›è¾¾æ ‡çš„å­æ•°ç»„æ•°é‡</p><p>æœ‰ä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼š<br>1ï¼‰Læ˜¯æ»‘åŠ¨çª—å£æœ€å·¦ä½ç½®ã€Ræ˜¯æ»‘åŠ¨çª—å£æœ€å³ä½ç½®ï¼Œä¸€å¼€å§‹LRéƒ½åœ¨æ•°ç»„å·¦ä¾§<br>2ï¼‰ä»»ä½•ä¸€æ­¥éƒ½å¯èƒ½Rå¾€å³åŠ¨ï¼Œè¡¨ç¤ºæŸä¸ªæ•°è¿›äº†çª—å£<br>3ï¼‰ä»»ä½•ä¸€æ­¥éƒ½å¯èƒ½Lå¾€å³åŠ¨ï¼Œè¡¨ç¤ºæŸä¸ªæ•°å‡ºäº†çª—å£<br>æƒ³çŸ¥é“æ¯ä¸€ä¸ªçª—å£çŠ¶æ€çš„ä¸­ä½æ•°</p><p>è®¾è®¡ä¸€ä¸ªç»“æ„åŒ…å«å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š<br>void add(int index, int num)ï¼šæŠŠnumåŠ å…¥åˆ°indexä½ç½®<br>int get(int index) ï¼šå–å‡ºindexä½ç½®çš„å€¼<br>void remove(int index) ï¼šæŠŠindexä½ç½®ä¸Šçš„å€¼åˆ é™¤<br>è¦æ±‚ä¸‰ä¸ªæ–¹æ³•æ—¶é—´å¤æ‚åº¦O(logN)</p><p>å‡è®¾æœ‰æ‰“ä¹±é¡ºåºçš„ä¸€ç¾¤äººç«™æˆä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ•°ç»„peopleè¡¨ç¤ºé˜Ÿåˆ—ä¸­ä¸€äº›äººçš„å±æ€§ï¼ˆä¸ä¸€å®šæŒ‰é¡ºåºï¼‰<br>æ¯ä¸ªpeople[i]&#x3D;[hi, ki]è¡¨ç¤ºç¬¬iä¸ªäººçš„èº«é«˜ä¸ºhiï¼Œå‰é¢æ­£å¥½æœ‰kiä¸ªèº«é«˜å¤§äºæˆ–ç­‰äºhiçš„äºº<br>è¯·ä½ é‡æ–°æ„é€ å¹¶è¿”å›è¾“å…¥æ•°ç»„peopleæ‰€è¡¨ç¤ºçš„é˜Ÿåˆ—ï¼Œè¿”å›çš„é˜Ÿåˆ—åº”è¯¥æ ¼å¼åŒ–ä¸ºæ•°ç»„queue<br>å…¶ä¸­queue[j]&#x3D;[hj, kj]æ˜¯é˜Ÿåˆ—ä¸­ç¬¬jä¸ªäººçš„å±æ€§ï¼ˆqueue[0] æ˜¯æ’åœ¨é˜Ÿåˆ—å‰é¢çš„äººï¼‰ã€‚<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/queue-reconstruction-by-height/">https://leetcode.com/problems/queue-reconstruction-by-height/</a></p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åå…­ï¼‰â€”â€”æœ‰åºè¡¨ï¼ˆä¸­ï¼‰</title>
      <link href="/2022/04/05/zuo_system_study36/"/>
      <url>/2022/04/05/zuo_system_study36/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>size-balanced-treeè¯¦è§£</p><p>skiplistè¯¦è§£</p><p>èŠèŠçº¢é»‘æ ‘</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>size-balanced-treeå®ç°</p><p>skiplistå®ç°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åäº”ï¼‰â€”â€”æœ‰åºè¡¨ï¼ˆä¸Šï¼‰</title>
      <link href="/2022/04/04/zuo_system_study35/"/>
      <url>/2022/04/04/zuo_system_study35/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å¹³è¡¡æœç´¢äºŒå‰æ ‘</p><p>å·¦æ—‹</p><p>å³æ—‹</p><p>AVLæ ‘çš„èŠ‚ç‚¹è¿è§„4ç§ç±»å‹ï¼ˆLLï¼ŒLRï¼ŒRLï¼ŒRRï¼‰</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>AVLæ ‘çš„å®ç°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åå››ï¼‰â€”â€”èµ„æºé™åˆ¶ç±»é¢˜ç›®çš„è§£é¢˜å¥—è·¯</title>
      <link href="/2022/04/03/zuo_system_study34/"/>
      <url>/2022/04/03/zuo_system_study34/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å¸ƒéš†è¿‡æ»¤å™¨ç”¨äºé›†åˆçš„å»ºç«‹ä¸æŸ¥è¯¢ï¼Œå¹¶å¯ä»¥èŠ‚çœå¤§é‡ç©ºé—´<br>ä¸€è‡´æ€§å“ˆå¸Œè§£å†³æ•°æ®æœåŠ¡å™¨çš„è´Ÿè½½ç®¡ç†é—®é¢˜<br>åˆ©ç”¨å¹¶æŸ¥é›†ç»“æ„åšå²›é—®é¢˜çš„å¹¶è¡Œè®¡ç®—<br>å“ˆå¸Œå‡½æ•°å¯ä»¥æŠŠæ•°æ®æŒ‰ç…§ç§ç±»å‡åŒ€åˆ†æµ<br>ä½å›¾è§£å†³æŸä¸€èŒƒå›´ä¸Šæ•°å­—çš„å‡ºç°æƒ…å†µï¼Œå¹¶å¯ä»¥èŠ‚çœå¤§é‡ç©ºé—´<br>åˆ©ç”¨åˆ†æ®µç»Ÿè®¡æ€æƒ³ã€å¹¶è¿›ä¸€æ­¥èŠ‚çœå¤§é‡ç©ºé—´<br>åˆ©ç”¨å †ã€å¤–æ’åºæ¥åšå¤šä¸ªå¤„ç†å•å…ƒçš„ç»“æœåˆå¹¶</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>32ä½æ— ç¬¦å·æ•´æ•°çš„èŒƒå›´æ˜¯0~4,294,967,295ï¼Œ<br>ç°åœ¨æœ‰ä¸€ä¸ªæ­£å¥½åŒ…å«40äº¿ä¸ªæ— ç¬¦å·æ•´æ•°çš„æ–‡ä»¶ï¼Œ<br>å¯ä»¥ä½¿ç”¨æœ€å¤š1GBçš„å†…å­˜ï¼Œæ€ä¹ˆæ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ï¼Ÿ</p><p>32ä½æ— ç¬¦å·æ•´æ•°çš„èŒƒå›´æ˜¯0~4,294,967,295ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ­£å¥½åŒ…å«40äº¿ä¸ªæ— ç¬¦å·æ•´æ•°çš„æ–‡ä»¶ï¼Œ<br>æ‰€ä»¥åœ¨æ•´ä¸ªèŒƒå›´ä¸­å¿…ç„¶å­˜åœ¨æ²¡å‡ºç°è¿‡çš„æ•°ï¼Œå¯ä»¥ä½¿ç”¨æœ€å¤š1GBçš„å†…å­˜ï¼Œæ€ä¹ˆæ‰¾åˆ°æ‰€æœ‰æœªå‡ºç°è¿‡çš„æ•°ï¼Ÿ<br>è¿›é˜¶ï¼šå†…å­˜é™åˆ¶ä¸º 3KBï¼Œä½†æ˜¯åªç”¨æ‰¾åˆ°ä¸€ä¸ªæ²¡å‡ºç°è¿‡çš„æ•°å³å¯</p><p>æœ‰ä¸€ä¸ªåŒ…å«100äº¿ä¸ªURLçš„å¤§æ–‡ä»¶ï¼Œå‡è®¾æ¯ä¸ªURLå ç”¨64Bï¼Œè¯·æ‰¾å‡ºå…¶ä¸­æ‰€æœ‰é‡å¤çš„URL<br>è¡¥å……ï¼šæŸæœç´¢å…¬å¸ä¸€å¤©çš„ç”¨æˆ·æœç´¢è¯æ±‡æ˜¯æµ·é‡çš„(ç™¾äº¿æ•°æ®é‡)ï¼Œè¯·è®¾è®¡ä¸€ç§æ±‚å‡ºæ¯å¤©çƒ­é—¨Top100è¯æ±‡çš„å¯è¡ŒåŠæ³•</p><p>32ä½æ— ç¬¦å·æ•´æ•°çš„èŒƒå›´æ˜¯0~4294967295ï¼Œç°åœ¨æœ‰40äº¿ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨æœ€å¤š1GBçš„å†…å­˜ï¼Œæ‰¾å‡ºæ‰€æœ‰å‡ºç°äº†ä¸¤æ¬¡çš„æ•°</p><p>32ä½æ— ç¬¦å·æ•´æ•°çš„èŒƒå›´æ˜¯0~4294967295ï¼Œç°åœ¨æœ‰40äº¿ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œå¯ä»¥ä½¿ç”¨æœ€å¤š3Kçš„å†…å­˜ï¼Œæ€ä¹ˆæ‰¾åˆ°è¿™40äº¿ä¸ªæ•´æ•°çš„ä¸­ä½æ•°ï¼Ÿ</p><p>32ä½æ— ç¬¦å·æ•´æ•°çš„èŒƒå›´æ˜¯0~4294967295ï¼Œæœ‰ä¸€ä¸ª10Gå¤§å°çš„æ–‡ä»¶ï¼Œæ¯ä¸€è¡Œéƒ½è£…ç€è¿™ç§ç±»å‹çš„æ•°å­—ï¼Œ<br>æ•´ä¸ªæ–‡ä»¶æ˜¯æ— åºçš„ï¼Œç»™ä½ 5Gçš„å†…å­˜ç©ºé—´ï¼Œè¯·ä½ è¾“å‡ºä¸€ä¸ª10Gå¤§å°çš„æ–‡ä»¶ï¼Œå°±æ˜¯åŸæ–‡ä»¶æ‰€æœ‰æ•°å­—æ’åºçš„ç»“æœ</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åä¸‰ï¼‰â€”â€”ä¸å“ˆå¸Œå‡½æ•°æœ‰å…³çš„ç»“æ„</title>
      <link href="/2022/04/02/zuo_system_study33/"/>
      <url>/2022/04/02/zuo_system_study33/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å“ˆå¸Œå‡½æ•°</p><p>å“ˆå¸Œå‡½æ•°çš„åº”ç”¨</p><p>å¸ƒéš†è¿‡æ»¤å™¨</p><p>ä¸€è‡´æ€§å“ˆå¸Œ</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>åŸç†è®²è¿°ä¸ºä¸»ï¼Œé¢è¯•åªä¼šèŠè®¾è®¡ï¼Œæ‰€ä»¥æœ¬èŠ‚æ— é¢˜ç›®</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åäºŒï¼‰â€”â€”IndexTreeã€ACè‡ªåŠ¨æœº</title>
      <link href="/2022/04/01/zuo_system_study32/"/>
      <url>/2022/04/01/zuo_system_study32/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>IndexTree<br>1ï¼‰æ”¯æŒåŒºé—´æŸ¥è¯¢<br>2ï¼‰æ²¡æœ‰çº¿æ®µæ ‘é‚£ä¹ˆå¼ºï¼Œä½†æ˜¯éå¸¸å®¹æ˜“æ”¹æˆä¸€ç»´ã€äºŒç»´ã€ä¸‰ç»´çš„ç»“æ„<br>3ï¼‰åªæ”¯æŒå•ç‚¹æ›´æ–°</p><p>ACè‡ªåŠ¨æœº<br>è§£å†³åœ¨ä¸€ä¸ªå¤§å­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°å¤šä¸ªå€™é€‰å­—ç¬¦ä¸²çš„é—®é¢˜<br>1ï¼‰æŠŠæ‰€æœ‰åŒ¹é…ä¸²ç”Ÿæˆä¸€æ£µå‰ç¼€æ ‘<br>2ï¼‰å‰ç¼€æ ‘èŠ‚ç‚¹å¢åŠ failæŒ‡é’ˆ<br>3ï¼‰failæŒ‡é’ˆçš„å«ä¹‰ï¼šå¦‚æœå¿…é¡»ä»¥å½“å‰å­—ç¬¦ç»“å°¾ï¼Œå½“å‰å½¢æˆçš„è·¯å¾„æ˜¯strï¼Œå‰©ä¸‹å“ªä¸€ä¸ªå­—ç¬¦ä¸²çš„å‰ç¼€å’Œstrçš„åç¼€<br>   æ‹¥æœ‰æœ€å¤§çš„åŒ¹é…é•¿åº¦ã€‚failæŒ‡é’ˆå°±æŒ‡å‘é‚£ä¸ªå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼ˆè¿·ä¸è¿·ï¼Ÿå¬è®²è¿°ï¼ï¼‰</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>IndexTreeåœ¨ä¸€ç»´æ•°ç»„å’ŒäºŒç»´æ•°ç»„ä¸Šçš„å®ç°</p><p>ACè‡ªåŠ¨æœºçš„å®ç°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åä¸€ï¼‰â€”â€”çº¿æ®µæ ‘</title>
      <link href="/2022/03/31/zuo_system_study31/"/>
      <url>/2022/03/31/zuo_system_study31/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>çº¿æ®µæ ‘æ˜¯ä¸€ç§æ”¯æŒèŒƒå›´æ•´ä½“ä¿®æ”¹å’ŒèŒƒå›´æ•´ä½“æŸ¥è¯¢çš„æ•°æ®ç»“æ„</p><p>çº¿æ®µæ ‘è§£å†³çš„é—®é¢˜èŒƒç•´ï¼šå¤§èŒƒå›´ä¿¡æ¯å¯ä»¥åªç”±å·¦ã€å³ä¸¤ä¾§ä¿¡æ¯åŠ å·¥å‡ºï¼Œè€Œä¸å¿…éå†å·¦å³ä¸¤ä¸ªå­èŒƒå›´çš„å…·ä½“çŠ¶å†µ</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œç”¨æˆ·å¸Œæœ›ä½ å®ç°å¦‚ä¸‹ä¸‰ä¸ªæ–¹æ³•<br>1ï¼‰void add(int L, int R, int V) :  è®©æ•°ç»„arr[Lâ€¦R]ä¸Šæ¯ä¸ªæ•°éƒ½åŠ ä¸ŠV<br>2ï¼‰void update(int L, int R, int V) :  è®©æ•°ç»„arr[Lâ€¦R]ä¸Šæ¯ä¸ªæ•°éƒ½å˜æˆV<br>3ï¼‰int sum(int L, int R) :è®©è¿”å›arr[Lâ€¦R]è¿™ä¸ªèŒƒå›´æ•´ä½“çš„ç´¯åŠ å’Œ<br>æ€ä¹ˆè®©è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(logN)</p><p>æƒ³è±¡ä¸€ä¸‹æ ‡å‡†çš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆï¼ŒXè½´æ˜¯ç§¯æœ¨æœ€ç»ˆä¸‹è½åˆ°åº•çš„è½´çº¿<br>ä¸‹é¢æ˜¯è¿™ä¸ªæ¸¸æˆçš„ç®€åŒ–ç‰ˆï¼š<br>1ï¼‰åªä¼šä¸‹è½æ­£æ–¹å½¢ç§¯æœ¨<br>2ï¼‰[a,b] -&gt; ä»£è¡¨ä¸€ä¸ªè¾¹é•¿ä¸ºbçš„æ­£æ–¹å½¢ç§¯æœ¨ï¼Œç§¯æœ¨å·¦è¾¹ç¼˜æ²¿ç€X &#x3D; aè¿™æ¡çº¿ä»ä¸Šæ–¹æ‰è½<br>3ï¼‰è®¤ä¸ºæ•´ä¸ªXè½´éƒ½å¯èƒ½æ¥ä½ç§¯æœ¨ï¼Œä¹Ÿå°±æ˜¯è¯´ç®€åŒ–ç‰ˆæ¸¸æˆæ˜¯æ²¡æœ‰æ•´ä½“çš„å·¦å³è¾¹ç•Œçš„<br>4ï¼‰æ²¡æœ‰æ•´ä½“çš„å·¦å³è¾¹ç•Œï¼Œæ‰€ä»¥ç®€åŒ–ç‰ˆæ¸¸æˆä¸ä¼šæ¶ˆé™¤ç§¯æœ¨ï¼Œå› ä¸ºä¸ä¼šæœ‰å“ªä¸€å±‚è¢«å¡«æ»¡ã€‚<br>ç»™å®šä¸€ä¸ªN*2çš„äºŒç»´æ•°ç»„matrixï¼Œå¯ä»¥ä»£è¡¨Nä¸ªç§¯æœ¨ä¾æ¬¡æ‰è½ï¼Œ<br>è¿”å›æ¯ä¸€æ¬¡æ‰è½ä¹‹åçš„æœ€å¤§é«˜åº¦<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/falling-squares/">https://leetcode.com/problems/falling-squares/</a></p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰åï¼‰â€”â€”äºŒå‰æ ‘çš„Morriséå†</title>
      <link href="/2022/03/30/zuo_system_study30/"/>
      <url>/2022/03/30/zuo_system_study30/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>äºŒå‰æ ‘ä¹‹å‰çš„éå†æ–¹å¼æœ‰ç©ºé—´æµªè´¹çš„é—®é¢˜</p><p>Morriséå†æ—¶é—´å¤æ‚åº¦O(N)ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦O(1)ï¼Œé€šè¿‡åˆ©ç”¨åŸæ ‘ä¸­å¤§é‡ç©ºé—²æŒ‡é’ˆçš„æ–¹å¼ï¼Œè¾¾åˆ°èŠ‚çœç©ºé—´çš„ç›®çš„</p><p>å‡è®¾æ¥åˆ°å½“å‰èŠ‚ç‚¹curï¼Œå¼€å§‹æ—¶curæ¥åˆ°å¤´èŠ‚ç‚¹ä½ç½®<br>1ï¼‰å¦‚æœcuræ²¡æœ‰å·¦å­©å­ï¼Œcurå‘å³ç§»åŠ¨(cur &#x3D; cur.right)<br>2ï¼‰å¦‚æœcuræœ‰å·¦å­©å­ï¼Œæ‰¾åˆ°å·¦å­æ ‘ä¸Šæœ€å³çš„èŠ‚ç‚¹mostRightï¼š<br>    a.å¦‚æœmostRightçš„å³æŒ‡é’ˆæŒ‡å‘ç©ºï¼Œè®©å…¶æŒ‡å‘curï¼Œ<br>    ç„¶åcurå‘å·¦ç§»åŠ¨(cur &#x3D; cur.left)<br>    b.å¦‚æœmostRightçš„å³æŒ‡é’ˆæŒ‡å‘curï¼Œè®©å…¶æŒ‡å‘nullï¼Œ<br>    ç„¶åcurå‘å³ç§»åŠ¨(cur &#x3D; cur.right)<br>3ï¼‰curä¸ºç©ºæ—¶éå†åœæ­¢</p><p>Morriséå†å®ç°äºŒå‰æ ‘çš„å…ˆåºã€ä¸­åºã€ååºéå†</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>Morriséå†çš„å®ç°</p><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„å¤´èŠ‚ç‚¹headï¼Œæ±‚ä»¥headä¸ºå¤´çš„æ ‘ä¸­ï¼Œæœ€å°æ·±åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåä¹ï¼‰â€”â€”åœ¨æ— åºæ•°ç»„ä¸­æ‰¾åˆ°ç¬¬Kå°çš„æ•°ã€è“„æ°´æ± ç®—æ³•</title>
      <link href="/2022/03/29/zuo_system_study29/"/>
      <url>/2022/03/29/zuo_system_study29/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>æ—¶é—´å¤æ‚åº¦O(N)å¯ä»¥è§£å†³åœ¨æ— åºæ•°ç»„ä¸­æ‰¾åˆ°ç¬¬Kå°çš„æ•°ï¼Œè¿™ä¸ªç»å…¸çš„é¢è¯•é¢˜</p><p>æ”¹å†™å¿«æ’çš„partitionæ–¹æ³•</p><p>bfprtç®—æ³•</p><p>è“„æ°´æ± ç®—æ³•</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>åœ¨æ— åºæ•°ç»„ä¸­æ‰¾åˆ°ç¬¬Kå°çš„æ•°ï¼ˆæ”¹å†™å¿«æ’+bfprtï¼‰</p><p>è®¾è®¡åœ¨æ— åºæ•°ç»„ä¸­æ”¶é›†æœ€å¤§çš„å‰Kä¸ªæ•°å­—çš„ç®—æ³•ï¼ˆæ ¹æ®ä¸åŒçš„ä¸‰ä¸ªæ—¶é—´å¤æ‚åº¦ï¼Œè®¾è®¡ä¸‰ä¸ªç®—æ³•ï¼‰<br>ç»™å®šä¸€ä¸ªæ— åºæ•°ç»„arrä¸­ï¼Œé•¿åº¦ä¸ºNï¼Œç»™å®šä¸€ä¸ªæ­£æ•°kï¼Œè¿”å›top kä¸ªæœ€å¤§çš„æ•°<br>ä¸åŒæ—¶é—´å¤æ‚åº¦ä¸‰ä¸ªæ–¹æ³•ï¼š<br>1ï¼‰O(N<em>logN)<br>2ï¼‰O(N + K</em>logN)<br>3ï¼‰O(n + k*logk)</p><p>è“„æ°´æ± ç®—æ³•å®ç°<br>å‡è®¾æœ‰ä¸€ä¸ªæºæºåå‡ºä¸åŒçƒçš„æœºå™¨ï¼Œ<br>åªæœ‰è£…ä¸‹10ä¸ªçƒçš„è¢‹å­ï¼Œæ¯ä¸€ä¸ªåå‡ºçš„çƒï¼Œè¦ä¹ˆæ”¾å…¥è¢‹å­ï¼Œè¦ä¹ˆæ°¸è¿œæ‰”æ‰<br>å¦‚ä½•åšåˆ°æœºå™¨åå‡ºæ¯ä¸€ä¸ªçƒä¹‹åï¼Œæ‰€æœ‰åå‡ºçš„çƒéƒ½ç­‰æ¦‚ç‡è¢«æ”¾è¿›è¢‹å­é‡Œ</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåå…«ï¼‰â€”â€”Manacherç®—æ³•</title>
      <link href="/2022/03/28/zuo_system_study28/"/>
      <url>/2022/03/28/zuo_system_study28/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>Manacherç®—æ³•</p><p>å’ŒManacherç®—æ³•ç›¸å…³çš„é¢è¯•é¢˜</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>Manacherç®—æ³•å®ç°</p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œåªèƒ½åœ¨strçš„åé¢æ·»åŠ å­—ç¬¦ï¼Œæƒ³è®©stræ•´ä½“å˜æˆå›æ–‡ä¸²ï¼Œè¿”å›è‡³å°‘è¦æ·»åŠ å‡ ä¸ªå­—ç¬¦</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåä¸ƒï¼‰â€”â€”KMPç®—æ³•</title>
      <link href="/2022/03/27/zuo_system_study27/"/>
      <url>/2022/03/27/zuo_system_study27/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>KMPç®—æ³•</p><p>å’ŒKMPç®—æ³•ç›¸å…³çš„é¢è¯•é¢˜</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>KMPç®—æ³•å®ç°</p><p>ç»™å®šä¸¤æ£µäºŒå‰æ ‘çš„å¤´èŠ‚ç‚¹head1å’Œhead2ï¼Œè¿”å›head1ä¸­æ˜¯å¦æœ‰æŸä¸ªå­æ ‘çš„ç»“æ„å’Œhead2å®Œå…¨ä¸€æ ·</p><p>åˆ¤æ–­str1å’Œstr2æ˜¯å¦äº’ä¸ºæ—‹è½¬å­—ç¬¦ä¸²</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåå…­ï¼‰â€”â€”å•è°ƒæ ˆç›¸å…³çš„é¢˜ç›®ï¼ˆç»­ï¼‰ã€æ–æ³¢é‚£å¥‘æ•°åˆ—çš„çŸ©é˜µå¿«é€Ÿå¹‚æ¨¡å‹</title>
      <link href="/2022/03/26/zuo_system_study26/"/>
      <url>/2022/03/26/zuo_system_study26/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å†è®²ä¸€ä¸ªå•è°ƒæ ˆç›¸å…³çš„é¢è¯•é¢˜</p><p>æ–æ³¢é‚£å¥‘æ•°åˆ—çš„çŸ©é˜µå¿«é€Ÿå¹‚æ¨¡å‹è¯¦è§£</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œè¿”å›æ‰€æœ‰å­æ•°ç»„æœ€å°å€¼çš„ç´¯åŠ å’Œ</p><p>æ–æ³¢é‚£å¥‘æ•°åˆ—çŸ©é˜µä¹˜æ³•æ–¹å¼çš„å®ç°</p><p>å°é˜¶æ–¹æ³•æ•°é—®é¢˜<br>ä¸€ä¸ªäººå¯ä»¥ä¸€æ¬¡å¾€ä¸Šè¿ˆ1ä¸ªå°é˜¶ï¼Œä¹Ÿå¯ä»¥è¿ˆ2ä¸ªå°é˜¶ï¼Œè¿”å›è¿ˆä¸ŠNçº§å°é˜¶çš„æ–¹æ³•æ•°</p><p>å¥¶ç‰›ç”Ÿå°ç‰›é—®é¢˜<br>ç¬¬ä¸€å¹´å†œåœºæœ‰1åªæˆç†Ÿçš„æ¯ç‰›Aï¼Œå¾€åçš„æ¯å¹´ï¼š<br>1ï¼‰æ¯ä¸€åªæˆç†Ÿçš„æ¯ç‰›éƒ½ä¼šç”Ÿä¸€åªæ¯ç‰›<br>2ï¼‰æ¯ä¸€åªæ–°å‡ºç”Ÿçš„æ¯ç‰›éƒ½åœ¨å‡ºç”Ÿçš„ç¬¬ä¸‰å¹´æˆç†Ÿ<br>3ï¼‰æ¯ä¸€åªæ¯ç‰›æ°¸è¿œä¸ä¼šæ­»<br>è¿”å›Nå¹´åç‰›çš„æ•°é‡</p><p>ç»™å®šä¸€ä¸ªæ•°Nï¼Œæƒ³è±¡åªç”±0å’Œ1ä¸¤ç§å­—ç¬¦ï¼Œç»„æˆçš„æ‰€æœ‰é•¿åº¦ä¸ºNçš„å­—ç¬¦ä¸²<br>å¦‚æœæŸä¸ªå­—ç¬¦ä¸²ï¼Œä»»ä½•0å­—ç¬¦çš„å·¦è¾¹éƒ½æœ‰1ç´§æŒ¨ç€ï¼Œè®¤ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²è¾¾æ ‡<br>è¿”å›æœ‰å¤šå°‘è¾¾æ ‡çš„å­—ç¬¦ä¸²</p><p>ç”¨1<em>2çš„ç“·ç –ï¼ŒæŠŠN</em>2çš„åŒºåŸŸå¡«æ»¡ï¼Œè¿”å›é“ºç“·ç –çš„æ–¹æ³•æ•°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåäº”ï¼‰â€”â€”å•è°ƒæ ˆ</title>
      <link href="/2022/03/25/zuo_system_study25/"/>
      <url>/2022/03/25/zuo_system_study25/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å•è°ƒæ ˆçš„åŸç†ï¼ˆæ— é‡å¤æ•°+æœ‰é‡å¤æ•°ï¼‰</p><p>ç”¨é¢˜ç›®æ¥å­¦ä¹ å•è°ƒæ ˆæä¾›çš„ä¾¿åˆ©æ€§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>å•è°ƒæ ˆå®ç°ï¼ˆæ— é‡å¤æ•°+æœ‰é‡å¤æ•°ï¼‰</p><p>ç»™å®šä¸€ä¸ªåªåŒ…å«æ­£æ•°çš„æ•°ç»„arrï¼Œarrä¸­ä»»ä½•ä¸€ä¸ªå­æ•°ç»„subï¼Œ<br>ä¸€å®šéƒ½å¯ä»¥ç®—å‡º(subç´¯åŠ å’Œ )* (subä¸­çš„æœ€å°å€¼)æ˜¯ä»€ä¹ˆï¼Œ<br>é‚£ä¹ˆæ‰€æœ‰å­æ•°ç»„ä¸­ï¼Œè¿™ä¸ªå€¼æœ€å¤§æ˜¯å¤šå°‘ï¼Ÿ</p><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•°ç»„arrï¼Œä»£è¡¨ç›´æ–¹å›¾ï¼Œè¿”å›ç›´æ–¹å›¾çš„æœ€å¤§é•¿æ–¹å½¢é¢ç§¯</p><p>ç»™å®šä¸€ä¸ªäºŒç»´æ•°ç»„matrixï¼Œå…¶ä¸­çš„å€¼ä¸æ˜¯0å°±æ˜¯1ï¼Œè¿”å›å…¨éƒ¨ç”±1ç»„æˆçš„æœ€å¤§å­çŸ©å½¢å†…éƒ¨æœ‰å¤šå°‘ä¸ª1ï¼ˆé¢ç§¯ï¼‰</p><p>ç»™å®šä¸€ä¸ªäºŒç»´æ•°ç»„matrixï¼Œå…¶ä¸­çš„å€¼ä¸æ˜¯0å°±æ˜¯1ï¼Œè¿”å›å…¨éƒ¨ç”±1ç»„æˆçš„å­çŸ©å½¢æ•°é‡</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåå››ï¼‰â€”â€”çª—å£å†…æœ€å¤§å€¼æˆ–æœ€å°å€¼çš„æ›´æ–°ç»“æ„</title>
      <link href="/2022/03/24/zuo_system_study24/"/>
      <url>/2022/03/24/zuo_system_study24/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>æ»‘åŠ¨çª—å£</p><p>çª—å£å†…æœ€å¤§å€¼æˆ–æœ€å°å€¼çš„æ›´æ–°ç»“æ„</p><p>ç”¨é¢˜ç›®æ¥å­¦ä¹ çª—å£å†…æœ€å¤§å€¼æˆ–æœ€å°å€¼çš„æ›´æ–°ç»“æ„æä¾›çš„ä¾¿åˆ©æ€§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>çª—å£å†…æœ€å¤§å€¼æˆ–æœ€å°å€¼æ›´æ–°ç»“æ„çš„å®ç°<br>å‡è®¾ä¸€ä¸ªå›ºå®šå¤§å°ä¸ºWçš„çª—å£ï¼Œä¾æ¬¡åˆ’è¿‡arrï¼Œ<br>è¿”å›æ¯ä¸€æ¬¡æ»‘å‡ºçŠ¶å†µçš„æœ€å¤§å€¼<br>ä¾‹å¦‚ï¼Œarr &#x3D; [4,3,5,4,3,3,6,7], W &#x3D; 3<br>è¿”å›ï¼š[5,5,5,4,6,7]</p><p>ç»™å®šä¸€ä¸ªæ•´å‹æ•°ç»„arrï¼Œå’Œä¸€ä¸ªæ•´æ•°num<br>æŸä¸ªarrä¸­çš„å­æ•°ç»„subï¼Œå¦‚æœæƒ³è¾¾æ ‡ï¼Œå¿…é¡»æ»¡è¶³ï¼šsubä¸­æœ€å¤§å€¼ â€“ subä¸­æœ€å°å€¼ &lt;&#x3D; numï¼Œ<br>è¿”å›arrä¸­è¾¾æ ‡å­æ•°ç»„çš„æ•°é‡</p><p>åŠ æ²¹ç«™çš„è‰¯å¥½å‡ºå‘ç‚¹é—®é¢˜</p><p>åŠ¨æ€è§„åˆ’ä¸­åˆ©ç”¨çª—å£å†…æœ€å¤§å€¼æˆ–æœ€å°å€¼æ›´æ–°ç»“æ„åšä¼˜åŒ–ï¼ˆéš¾ï¼‰<br>arræ˜¯è´§å¸æ•°ç»„ï¼Œå…¶ä¸­çš„å€¼éƒ½æ˜¯æ­£æ•°ã€‚å†ç»™å®šä¸€ä¸ªæ­£æ•°aimã€‚<br>æ¯ä¸ªå€¼éƒ½è®¤ä¸ºæ˜¯ä¸€å¼ è´§å¸ï¼Œ<br>è¿”å›ç»„æˆaimçš„æœ€å°‘è´§å¸æ•°<br>æ³¨æ„ï¼šå› ä¸ºæ˜¯æ±‚æœ€å°‘è´§å¸æ•°ï¼Œæ‰€ä»¥æ¯ä¸€å¼ è´§å¸è®¤ä¸ºæ˜¯ç›¸åŒæˆ–è€…ä¸åŒå°±ä¸é‡è¦äº†</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåä¸‰ï¼‰â€”â€”æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’ï¼ˆå…­ï¼‰</title>
      <link href="/2022/03/23/zuo_system_study23/"/>
      <url>/2022/03/23/zuo_system_study23/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ä»¥18èŠ‚ä¸ºæ€»çº²</p><p>é€šè¿‡é¢è¯•é¢˜è¿›ä¸€æ­¥å¼ºåŒ–åŠ¨æ€è§„åˆ’çš„è§£é¢˜å¥—è·¯</p><p>ä½ä¿¡æ¯æŠ€å·§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªæ­£æ•°æ•°ç»„arrï¼Œ<br>è¯·æŠŠarrä¸­æ‰€æœ‰çš„æ•°åˆ†æˆä¸¤ä¸ªé›†åˆï¼Œå°½é‡è®©ä¸¤ä¸ªé›†åˆçš„ç´¯åŠ å’Œæ¥è¿‘<br>è¿”å›æœ€æ¥è¿‘çš„æƒ…å†µä¸‹ï¼Œè¾ƒå°é›†åˆçš„ç´¯åŠ å’Œ</p><p>ç»™å®šä¸€ä¸ªæ­£æ•°æ•°ç»„arrï¼Œè¯·æŠŠarrä¸­æ‰€æœ‰çš„æ•°åˆ†æˆä¸¤ä¸ªé›†åˆ<br>å¦‚æœarré•¿åº¦ä¸ºå¶æ•°ï¼Œä¸¤ä¸ªé›†åˆåŒ…å«æ•°çš„ä¸ªæ•°è¦ä¸€æ ·å¤š<br>å¦‚æœarré•¿åº¦ä¸ºå¥‡æ•°ï¼Œä¸¤ä¸ªé›†åˆåŒ…å«æ•°çš„ä¸ªæ•°å¿…é¡»åªå·®ä¸€ä¸ª<br>è¯·å°½é‡è®©ä¸¤ä¸ªé›†åˆçš„ç´¯åŠ å’Œæ¥è¿‘<br>è¿”å›æœ€æ¥è¿‘çš„æƒ…å†µä¸‹ï¼Œè¾ƒå°é›†åˆçš„ç´¯åŠ å’Œ</p><p>Nçš‡åé—®é¢˜æ˜¯æŒ‡åœ¨N*Nçš„æ£‹ç›˜ä¸Šè¦æ‘†Nä¸ªçš‡åï¼Œ<br>è¦æ±‚ä»»ä½•ä¸¤ä¸ªçš‡åä¸åŒè¡Œã€ä¸åŒåˆ—ï¼Œ ä¹Ÿä¸åœ¨åŒä¸€æ¡æ–œçº¿ä¸Š<br>ç»™å®šä¸€ä¸ªæ•´æ•°nï¼Œè¿”å›nçš‡åçš„æ‘†æ³•æœ‰å¤šå°‘ç§ã€‚n&#x3D;1ï¼Œè¿”å›1<br>n&#x3D;2æˆ–3ï¼Œ2çš‡åå’Œ3çš‡åé—®é¢˜æ— è®ºæ€ä¹ˆæ‘†éƒ½ä¸è¡Œï¼Œè¿”å›0<br>n&#x3D;8ï¼Œè¿”å›92</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåäºŒï¼‰â€”â€”æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’ï¼ˆäº”ï¼‰</title>
      <link href="/2022/03/22/zuo_system_study22/"/>
      <url>/2022/03/22/zuo_system_study22/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ä»¥18èŠ‚ä¸ºæ€»çº²</p><p>é€šè¿‡é¢è¯•é¢˜è¿›ä¸€æ­¥å¼ºåŒ–åŠ¨æ€è§„åˆ’çš„è§£é¢˜å¥—è·¯</p><p>æ–œç‡ä¼˜åŒ–æŠ€å·§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®š3ä¸ªå‚æ•°ï¼ŒNï¼ŒMï¼ŒK<br>æ€ªå…½æœ‰Næ»´è¡€ï¼Œç­‰ç€è‹±é›„æ¥ç è‡ªå·±<br>è‹±é›„æ¯ä¸€æ¬¡æ‰“å‡»ï¼Œéƒ½ä¼šè®©æ€ªå…½æµå¤±[0<del>M]çš„è¡€é‡<br>åˆ°åº•æµå¤±å¤šå°‘ï¼Ÿæ¯ä¸€æ¬¡åœ¨[0</del>M]ä¸Šç­‰æ¦‚ç‡çš„è·å¾—ä¸€ä¸ªå€¼<br>æ±‚Kæ¬¡æ‰“å‡»ä¹‹åï¼Œè‹±é›„æŠŠæ€ªå…½ç æ­»çš„æ¦‚ç‡</p><p>arræ˜¯é¢å€¼æ•°ç»„ï¼Œå…¶ä¸­çš„å€¼éƒ½æ˜¯æ­£æ•°ä¸”æ²¡æœ‰é‡å¤ã€‚å†ç»™å®šä¸€ä¸ªæ­£æ•°aimã€‚<br>æ¯ä¸ªå€¼éƒ½è®¤ä¸ºæ˜¯ä¸€ç§é¢å€¼ï¼Œä¸”è®¤ä¸ºå¼ æ•°æ˜¯æ— é™çš„ã€‚<br>è¿”å›ç»„æˆaimçš„æœ€å°‘è´§å¸æ•°</p><p>ç»™å®šä¸€ä¸ªæ­£æ•°nï¼Œæ±‚nçš„è£‚å¼€æ–¹æ³•æ•°ï¼Œ<br>è§„å®šï¼šåé¢çš„æ•°ä¸èƒ½æ¯”å‰é¢çš„æ•°å°<br>æ¯”å¦‚4çš„è£‚å¼€æ–¹æ³•æœ‰ï¼š<br>1+1+1+1ã€1+1+2ã€1+3ã€2+2ã€4<br>5ç§ï¼Œæ‰€ä»¥è¿”å›5</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåä¸€ï¼‰â€”â€”æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’ï¼ˆå››ï¼‰</title>
      <link href="/2022/03/21/zuo_system_study21/"/>
      <url>/2022/03/21/zuo_system_study21/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ä»¥18èŠ‚ä¸ºæ€»çº²</p><p>é€šè¿‡é¢è¯•é¢˜è¿›ä¸€æ­¥å¼ºåŒ–åŠ¨æ€è§„åˆ’çš„è§£é¢˜å¥—è·¯</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªäºŒç»´æ•°ç»„matrixï¼Œä¸€ä¸ªäººå¿…é¡»ä»å·¦ä¸Šè§’å‡ºå‘ï¼Œæœ€ååˆ°è¾¾å³ä¸‹è§’<br>æ²¿é€”åªå¯ä»¥å‘ä¸‹æˆ–è€…å‘å³èµ°ï¼Œæ²¿é€”çš„æ•°å­—éƒ½ç´¯åŠ å°±æ˜¯è·ç¦»ç´¯åŠ å’Œ<br>è¿”å›æœ€å°è·ç¦»ç´¯åŠ å’Œ</p><p>arræ˜¯è´§å¸æ•°ç»„ï¼Œå…¶ä¸­çš„å€¼éƒ½æ˜¯æ­£æ•°ã€‚å†ç»™å®šä¸€ä¸ªæ­£æ•°aimã€‚<br>æ¯ä¸ªå€¼éƒ½è®¤ä¸ºæ˜¯ä¸€å¼ è´§å¸ï¼Œ<br>å³ä¾¿æ˜¯å€¼ç›¸åŒçš„è´§å¸ä¹Ÿè®¤ä¸ºæ¯ä¸€å¼ éƒ½æ˜¯ä¸åŒçš„ï¼Œ<br>è¿”å›ç»„æˆaimçš„æ–¹æ³•æ•°<br>ä¾‹å¦‚ï¼šarr &#x3D; {1,1,1}ï¼Œaim &#x3D; 2<br>ç¬¬0ä¸ªå’Œç¬¬1ä¸ªèƒ½ç»„æˆ2ï¼Œç¬¬1ä¸ªå’Œç¬¬2ä¸ªèƒ½ç»„æˆ2ï¼Œç¬¬0ä¸ªå’Œç¬¬2ä¸ªèƒ½ç»„æˆ2<br>ä¸€å…±å°±3ç§æ–¹æ³•ï¼Œæ‰€ä»¥è¿”å›3</p><p>arræ˜¯é¢å€¼æ•°ç»„ï¼Œå…¶ä¸­çš„å€¼éƒ½æ˜¯æ­£æ•°ä¸”æ²¡æœ‰é‡å¤ã€‚å†ç»™å®šä¸€ä¸ªæ­£æ•°aimã€‚<br>æ¯ä¸ªå€¼éƒ½è®¤ä¸ºæ˜¯ä¸€ç§é¢å€¼ï¼Œä¸”è®¤ä¸ºå¼ æ•°æ˜¯æ— é™çš„ã€‚<br>è¿”å›ç»„æˆaimçš„æ–¹æ³•æ•°<br>ä¾‹å¦‚ï¼šarr &#x3D; {1,2}ï¼Œaim &#x3D; 4<br>æ–¹æ³•å¦‚ä¸‹ï¼š1+1+1+1ã€1+1+2ã€2+2<br>ä¸€å…±å°±3ç§æ–¹æ³•ï¼Œæ‰€ä»¥è¿”å›3</p><p>arræ˜¯è´§å¸æ•°ç»„ï¼Œå…¶ä¸­çš„å€¼éƒ½æ˜¯æ­£æ•°ã€‚å†ç»™å®šä¸€ä¸ªæ­£æ•°aimã€‚<br>æ¯ä¸ªå€¼éƒ½è®¤ä¸ºæ˜¯ä¸€å¼ è´§å¸ï¼Œ<br>è®¤ä¸ºå€¼ç›¸åŒçš„è´§å¸æ²¡æœ‰ä»»ä½•ä¸åŒï¼Œ<br>è¿”å›ç»„æˆaimçš„æ–¹æ³•æ•°<br>ä¾‹å¦‚ï¼šarr &#x3D; {1,2,1,1,2,1,2}ï¼Œaim &#x3D; 4<br>æ–¹æ³•ï¼š1+1+1+1ã€1+1+2ã€2+2<br>ä¸€å…±å°±3ç§æ–¹æ³•ï¼Œæ‰€ä»¥è¿”å›3</p><p>ç»™å®š5ä¸ªå‚æ•°ï¼ŒNï¼ŒMï¼Œrowï¼Œcolï¼Œk<br>è¡¨ç¤ºåœ¨N<em>Mçš„åŒºåŸŸä¸Šï¼Œé†‰æ±‰Bobåˆå§‹åœ¨(row,col)ä½ç½®<br>Bobä¸€å…±è¦è¿ˆå‡ºkæ­¥ï¼Œä¸”æ¯æ­¥éƒ½ä¼šç­‰æ¦‚ç‡å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘èµ°ä¸€ä¸ªå•ä½<br>ä»»ä½•æ—¶å€™Bobåªè¦ç¦»å¼€N</em>Mçš„åŒºåŸŸï¼Œå°±ç›´æ¥æ­»äº¡<br>è¿”å›kæ­¥ä¹‹åï¼ŒBobè¿˜åœ¨N*Mçš„åŒºåŸŸçš„æ¦‚ç‡</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒåï¼‰â€”â€”æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’ï¼ˆä¸‰ï¼‰</title>
      <link href="/2022/03/20/zuo_system_study20/"/>
      <url>/2022/03/20/zuo_system_study20/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ä»¥18èŠ‚ä¸ºæ€»çº²</p><p>é€šè¿‡é¢è¯•é¢˜è¿›ä¸€æ­¥å¼ºåŒ–åŠ¨æ€è§„åˆ’çš„è§£é¢˜å¥—è·¯</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦<br>æ¯”å¦‚ ï¼š str &#x3D; â€œa12b3c43def2ghi1kpmâ€<br>æœ€é•¿å›æ–‡å­åºåˆ—æ˜¯â€œ1234321â€æˆ–è€…â€œ123c321â€ï¼Œè¿”å›é•¿åº¦7</p><p>è¯·åŒå­¦ä»¬è‡ªè¡Œæœç´¢æˆ–è€…æƒ³è±¡ä¸€ä¸ªè±¡æ£‹çš„æ£‹ç›˜ï¼Œ<br>ç„¶åæŠŠæ•´ä¸ªæ£‹ç›˜æ”¾å…¥ç¬¬ä¸€è±¡é™ï¼Œæ£‹ç›˜çš„æœ€å·¦ä¸‹è§’æ˜¯(0,0)ä½ç½®<br>é‚£ä¹ˆæ•´ä¸ªæ£‹ç›˜å°±æ˜¯æ¨ªåæ ‡ä¸Š9æ¡çº¿ã€çºµåæ ‡ä¸Š10æ¡çº¿çš„åŒºåŸŸ<br>ç»™ä½ ä¸‰ä¸ª å‚æ•° xï¼Œyï¼Œk<br>è¿”å›â€œé©¬â€ä»(0,0)ä½ç½®å‡ºå‘ï¼Œå¿…é¡»èµ°kæ­¥<br>æœ€åè½åœ¨(x,y)ä¸Šçš„æ–¹æ³•æ•°æœ‰å¤šå°‘ç§? </p><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œarr[i]ä»£è¡¨ç¬¬iå·å’–å•¡æœºæ³¡ä¸€æ¯å’–å•¡çš„æ—¶é—´<br>ç»™å®šä¸€ä¸ªæ­£æ•°Nï¼Œè¡¨ç¤ºNä¸ªäººç­‰ç€å’–å•¡æœºæ³¡å’–å•¡ï¼Œæ¯å°å’–å•¡æœºåªèƒ½è½®æµæ³¡å’–å•¡<br>åªæœ‰ä¸€å°å’–å•¡æœºï¼Œä¸€æ¬¡åªèƒ½æ´—ä¸€ä¸ªæ¯å­ï¼Œæ—¶é—´è€—è´¹aï¼Œæ´—å®Œæ‰èƒ½æ´—ä¸‹ä¸€æ¯<br>æ¯ä¸ªå’–å•¡æ¯ä¹Ÿå¯ä»¥è‡ªå·±æŒ¥å‘å¹²å‡€ï¼Œæ—¶é—´è€—è´¹bï¼Œå’–å•¡æ¯å¯ä»¥å¹¶è¡ŒæŒ¥å‘<br>å‡è®¾æ‰€æœ‰äººæ‹¿åˆ°å’–å•¡ä¹‹åç«‹åˆ»å–å¹²å‡€ï¼Œ<br>è¿”å›ä»å¼€å§‹ç­‰åˆ°æ‰€æœ‰å’–å•¡æœºå˜å¹²å‡€çš„æœ€çŸ­æ—¶é—´<br>ä¸‰ä¸ªå‚æ•°ï¼šint[] arrã€int Nï¼Œint aã€int b</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåä¹ï¼‰â€”â€”æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’ï¼ˆäºŒï¼‰</title>
      <link href="/2022/03/19/zuo_system_study19/"/>
      <url>/2022/03/19/zuo_system_study19/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>ä»¥18èŠ‚ä¸ºæ€»çº²</p><p>èƒŒåŒ…é—®é¢˜</p><p>è®°å¿†åŒ–æœç´¢çš„ä¸€ä¸ªå¾ˆé‡è¦çš„æ³¨æ„ç‚¹</p><p>é€šè¿‡é¢è¯•é¢˜è¿›ä¸€æ­¥å¼ºåŒ–åŠ¨æ€è§„åˆ’çš„è§£é¢˜å¥—è·¯</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>èƒŒåŒ…é—®é¢˜<br>ç»™å®šä¸¤ä¸ªé•¿åº¦éƒ½ä¸ºNçš„æ•°ç»„weightså’Œvaluesï¼Œweights[i]å’Œvalues[i]åˆ†åˆ«ä»£è¡¨ iå·ç‰©å“çš„é‡é‡å’Œä»·å€¼<br>ç»™å®šä¸€ä¸ªæ­£æ•°bagï¼Œè¡¨ç¤ºä¸€ä¸ªè½½é‡bagçš„è¢‹å­ï¼Œè£…çš„ç‰©å“ä¸èƒ½è¶…è¿‡è¿™ä¸ªé‡é‡<br>è¿”å›èƒ½è£…ä¸‹çš„æœ€å¤§ä»·å€¼</p><p>è§„å®š1å’ŒAå¯¹åº”ã€2å’ŒBå¯¹åº”ã€3å’ŒCå¯¹åº”â€¦26å’ŒZå¯¹åº”<br>é‚£ä¹ˆä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²æ¯”å¦‚â€111â€å°±å¯ä»¥è½¬åŒ–ä¸º:<br>â€œAAAâ€ã€â€KAâ€å’Œâ€AKâ€<br>ç»™å®šä¸€ä¸ªåªæœ‰æ•°å­—å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²strï¼Œè¿”å›æœ‰å¤šå°‘ç§è½¬åŒ–ç»“æœ </p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„arrï¼Œå‡ºç°çš„å­—ç¬¦éƒ½æ˜¯å°å†™è‹±æ–‡<br>arræ¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨ä¸€å¼ è´´çº¸ï¼Œä½ å¯ä»¥æŠŠå•ä¸ªå­—ç¬¦å‰ªå¼€ä½¿ç”¨ï¼Œç›®çš„æ˜¯æ‹¼å‡ºstræ¥<br>è¿”å›éœ€è¦è‡³å°‘å¤šå°‘å¼ è´´çº¸å¯ä»¥å®Œæˆè¿™ä¸ªä»»åŠ¡<br>ä¾‹å­ï¼šstr&#x3D; â€œbabacâ€ï¼Œarr &#x3D; {â€œbaâ€,â€câ€,â€abcdâ€}<br>ba + ba + c  3  abcd + abcd 2  abcd+ba 2<br>æ‰€ä»¥è¿”å›2</p><p>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²str1å’Œstr2ï¼Œ<br>è¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦<br>æ¯”å¦‚ ï¼š str1 &#x3D; â€œa12b3c456dâ€,str2 &#x3D; â€œ1ef23ghi4j56kâ€<br>æœ€é•¿å…¬å…±å­åºåˆ—æ˜¯â€œ123456â€ï¼Œæ‰€ä»¥è¿”å›é•¿åº¦6</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåä¸ƒï¼‰â€”â€”ç”¨åŠ å¼ºå †æ›´å¥½çš„å®ç°Dijkstraç®—æ³•ã€å¸¸è§çš„é€’å½’</title>
      <link href="/2022/03/17/zuo_system_study17/"/>
      <url>/2022/03/17/zuo_system_study17/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>åŠ å¼ºå †å®ç°Dijkstraç®—æ³•</p><p>é€’å½’çš„è®¾è®¡</p><p>å¸¸è§çš„é€’å½’</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>æ‰“å°nå±‚æ±‰è¯ºå¡”ä»æœ€å·¦è¾¹ç§»åŠ¨åˆ°æœ€å³è¾¹çš„å…¨éƒ¨è¿‡ç¨‹ï¼ˆé€’å½’+éé€’å½’å®ç°ï¼‰</p><p>æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²çš„å…¨éƒ¨å­åºåˆ—</p><p>æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²çš„å…¨éƒ¨å­åºåˆ—ï¼Œè¦æ±‚ä¸è¦å‡ºç°é‡å¤å­—é¢å€¼çš„å­åºåˆ—</p><p>æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²çš„å…¨éƒ¨æ’åˆ—</p><p>æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²çš„å…¨éƒ¨æ’åˆ—ï¼Œè¦æ±‚ä¸è¦å‡ºç°é‡å¤çš„æ’åˆ—</p><p>ç»™å®šä¸€ä¸ªæ ˆï¼Œè¯·é€†åºè¿™ä¸ªæ ˆï¼Œä¸èƒ½ç”³è¯·é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œåªèƒ½ä½¿ç”¨é€’å½’å‡½æ•°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººç®€å†</title>
      <link href="/2022/03/15/resume/"/>
      <url>/2022/03/15/resume/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th align="center">å§“åï¼š</th><th>ä¸æˆ–é</th></tr></thead><tbody><tr><td align="center"><strong>æ‰‹æœºå·ï¼š</strong></td><td>17896855162</td></tr><tr><td align="center"><strong>é‚®ç®±ï¼š</strong></td><td><font color='blue'><a href="mailto:&#97;&#x6e;&#x64;&#x6f;&#114;&#110;&#111;&#116;&#x74;&#111;&#x70;&#64;&#x31;&#x36;&#51;&#x2e;&#x63;&#x6f;&#109;">&#97;&#x6e;&#x64;&#x6f;&#114;&#110;&#111;&#116;&#x74;&#111;&#x70;&#64;&#x31;&#x36;&#51;&#x2e;&#x63;&#x6f;&#109;</a></font></td></tr><tr><td align="center"><strong>æ±‚èŒæ„å‘ï¼š</strong></td><td>Javaå¼€å‘å·¥ç¨‹å¸ˆ</td></tr></tbody></table><span id="more"></span><ul><li><p><strong>æ•™è‚²ç»å†</strong></p></li><li><p><strong>ä¸ªäººæŠ€èƒ½</strong></p><ol><li><p>ç†Ÿæ‚‰HTML5ã€JavaScriptã€jQueryã€Ajaxç­‰å‰ç«¯æŠ€æœ¯ï¼›äº†è§£Vueç­‰å‰ç«¯æ¡†æ¶ã€‚</p></li><li><p>æ‰å®çš„JavaåŸºç¡€ï¼šç†Ÿç»ƒä½¿ç”¨é›†åˆã€å¤šçº¿ç¨‹ã€JDBCç­‰ã€‚</p></li><li><p>ç†Ÿç»ƒè¿ç”¨Mysqlæ•°æ®åº“ï¼›äº†è§£æ•°æ®åº“çš„ä¼˜åŒ–ï¼šç´¢å¼•è®¾ç½®ã€ç´¢å¼•åº•å±‚æ•°æ®ç»“æ„ã€äº‹åŠ¡éš”ç¦»çº§åˆ«ç­‰ã€‚</p></li><li><p>ç†Ÿç»ƒä½¿ç”¨ETLå·¥å…·Kettleå¯¹æ•°æ®è¿›è¡ŒæŠ½å–ã€æ¸…æ´—ã€è½¬æ¢ç­‰æ“ä½œã€‚</p></li><li><p>ç†Ÿæ‚‰ä½¿ç”¨SpringBoot å¿«é€Ÿå¼€å‘æ¡†æ¶ï¼›æŒæ¡Springã€SpringMVCã€MyBatisç­‰æŠ€æœ¯æ¡†æ¶ï¼›ç†Ÿæ‚‰Springçš„IOCã€AOPæ ¸å¿ƒã€‚</p></li><li><p>ç†Ÿç»ƒä½¿ç”¨Dubboã€Zookeeperç­‰åˆ†å¸ƒå¼æŠ€æœ¯æ¡†æ¶ï¼›äº†è§£SpringCloudå¾®æœåŠ¡æ¡†æ¶ï¼šEurekaã€Consulæ³¨å†Œä¸­å¿ƒç­‰ã€‚</p></li><li><p>ç†Ÿæ‚‰Redisä¸­å¤®ç¼“å­˜ã€åº”ç”¨åœºæ™¯ã€å¸¸ç”¨æ•°æ®ç±»å‹åŠæŒ‡ä»¤ã€‚</p></li><li><p>ç†Ÿç»ƒä½¿ç”¨RocketMQæ¶ˆæ¯ä¸­é—´ä»¶ï¼›äº†è§£åº”ç”¨è§£è€¦ã€æµé‡å‰Šå³°ç­‰åº”ç”¨åœºæ™¯ã€‚</p></li><li><p>ç†Ÿç»ƒä½¿ç”¨Linuxå¸¸è§å‘½ä»¤ï¼šæ—¥å¿—æ’æŸ¥çº¿ä¸Šé—®é¢˜ç­‰ã€‚</p></li><li><p>ç†Ÿç»ƒä½¿ç”¨Ideaã€VSCodeå¼€å‘å·¥å…·ï¼›æŒæ¡SVNã€Gitä»£ç ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚</p></li></ol></li><li><p><strong>å·¥ä½œç»å†</strong></p></li><li><p><strong>é¡¹ç›®ç»å†</strong></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸ªäººç®€å† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸ªäººç®€å† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåäº”ï¼‰â€”â€”å¹¶æŸ¥é›†ç›¸å…³çš„å¸¸è§é¢è¯•é¢˜</title>
      <link href="/2022/03/15/zuo_system_study15/"/>
      <url>/2022/03/15/zuo_system_study15/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>é€šè¿‡è§£ç­”å®é™…å‡ºç°çš„é¢è¯•é¢˜æ¥ä½“ä¼šå¹¶æŸ¥é›†çš„ä¼˜åŠ¿ã€ç†Ÿæ‚‰å¹¶æŸ¥é›†çš„ä½¿ç”¨</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ä¸€ç¾¤æœ‹å‹ä¸­ï¼Œæœ‰å‡ ä¸ªä¸ç›¸äº¤çš„æœ‹å‹åœˆ<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/friend-circles/">https://leetcode.com/problems/friend-circles/</a></p><p>å²›é—®é¢˜ï¼ˆé€’å½’è§£æ³• + å¹¶æŸ¥é›†è§£æ³• + å¹¶è¡Œè§£æ³•ï¼‰<br>ç»™å®šä¸€ä¸ªäºŒç»´æ•°ç»„matrixï¼Œé‡Œé¢çš„å€¼ä¸æ˜¯1å°±æ˜¯0ï¼Œä¸Šã€ä¸‹ã€å·¦ã€å³ç›¸é‚»çš„1è®¤ä¸ºæ˜¯ä¸€ç‰‡å²›ï¼Œè¿”å›matrixä¸­å²›çš„æ•°é‡</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåå››ï¼‰â€”â€”è´ªå¿ƒç®—æ³•ï¼ˆç»­ï¼‰ã€å¹¶æŸ¥é›†</title>
      <link href="/2022/03/14/zuo_system_study14/"/>
      <url>/2022/03/14/zuo_system_study14/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>è´ªå¿ƒç®—æ³•ç»§ç»­å®æˆ˜</p><p>å¹¶æŸ¥é›†è¯¦è§£</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²strï¼Œåªç”±â€™Xâ€™å’Œâ€™.â€™ä¸¤ç§å­—ç¬¦æ„æˆ<br>â€˜Xâ€™è¡¨ç¤ºå¢™ï¼Œä¸èƒ½æ”¾ç¯ï¼Œä¹Ÿä¸éœ€è¦ç‚¹äº®ï¼›â€™.â€™è¡¨ç¤ºå±…æ°‘ç‚¹ï¼Œå¯ä»¥æ”¾ç¯ï¼Œéœ€è¦ç‚¹äº®<br>å¦‚æœç¯æ”¾åœ¨iä½ç½®ï¼Œå¯ä»¥è®©i-1ï¼Œiå’Œi+1ä¸‰ä¸ªä½ç½®è¢«ç‚¹äº®<br>è¿”å›å¦‚æœç‚¹äº®strä¸­æ‰€æœ‰éœ€è¦ç‚¹äº®çš„ä½ç½®ï¼Œè‡³å°‘éœ€è¦å‡ ç›ç¯</p><p>ä¸€å—é‡‘æ¡åˆ‡æˆä¸¤åŠï¼Œæ˜¯éœ€è¦èŠ±è´¹å’Œé•¿åº¦æ•°å€¼ä¸€æ ·çš„é“œæ¿<br>æ¯”å¦‚é•¿åº¦ä¸º20çš„é‡‘æ¡ï¼Œä¸ç®¡æ€ä¹ˆåˆ‡éƒ½è¦èŠ±è´¹20ä¸ªé“œæ¿ï¼Œä¸€ç¾¤äººæƒ³æ•´åˆ†æ•´å—é‡‘æ¡ï¼Œæ€ä¹ˆåˆ†æœ€çœé“œæ¿?<br>ä¾‹å¦‚ï¼Œç»™å®šæ•°ç»„{10,20,30}ï¼Œä»£è¡¨ä¸€å…±ä¸‰ä¸ªäººï¼Œæ•´å—é‡‘æ¡é•¿åº¦ä¸º60ï¼Œé‡‘æ¡è¦åˆ†æˆ10ï¼Œ20ï¼Œ30ä¸‰ä¸ªéƒ¨åˆ†ã€‚<br>å¦‚æœå…ˆæŠŠé•¿åº¦60çš„é‡‘æ¡åˆ†æˆ10å’Œ50ï¼ŒèŠ±è´¹60ï¼›å†æŠŠé•¿åº¦50çš„é‡‘æ¡åˆ†æˆ20å’Œ30ï¼ŒèŠ±è´¹50ï¼›ä¸€å…±èŠ±è´¹110é“œæ¿<br>ä½†å¦‚æœå…ˆæŠŠé•¿åº¦60çš„é‡‘æ¡åˆ†æˆ30å’Œ30ï¼ŒèŠ±è´¹60ï¼›å†æŠŠé•¿åº¦30é‡‘æ¡åˆ†æˆ10å’Œ20ï¼ŒèŠ±è´¹30ï¼›ä¸€å…±èŠ±è´¹90é“œæ¿<br>è¾“å…¥ä¸€ä¸ªæ•°ç»„ï¼Œè¿”å›åˆ†å‰²çš„æœ€å°ä»£ä»·</p><p>ä¸€äº›é¡¹ç›®è¦å ç”¨ä¸€ä¸ªä¼šè®®å®¤å®£è®²ï¼Œä¼šè®®å®¤ä¸èƒ½åŒæ—¶å®¹çº³ä¸¤ä¸ªé¡¹ç›®çš„å®£è®²ï¼Œç»™ä½ æ¯ä¸€ä¸ªé¡¹ç›®å¼€å§‹çš„æ—¶é—´å’Œç»“æŸçš„æ—¶é—´<br>ä½ æ¥å®‰æ’å®£è®²çš„æ—¥ç¨‹ï¼Œè¦æ±‚ä¼šè®®å®¤è¿›è¡Œçš„å®£è®²çš„åœºæ¬¡æœ€å¤šï¼Œè¿”å›æœ€å¤šçš„å®£è®²åœºæ¬¡</p><p>è¾“å…¥æ­£æ•°æ•°ç»„costsã€æ­£æ•°æ•°ç»„profitsã€æ­£æ•°Kå’Œæ­£æ•°M<br>costs[i]è¡¨ç¤ºiå·é¡¹ç›®çš„èŠ±è´¹<br>profits[i]è¡¨ç¤ºiå·é¡¹ç›®åœ¨æ‰£é™¤èŠ±è´¹ä¹‹åè¿˜èƒ½æŒ£åˆ°çš„é’±(åˆ©æ¶¦)<br>Kè¡¨ç¤ºä½ åªèƒ½ä¸²è¡Œçš„æœ€å¤šåškä¸ªé¡¹ç›®<br>Mè¡¨ç¤ºä½ åˆå§‹çš„èµ„é‡‘<br>è¯´æ˜ï¼šæ¯åšå®Œä¸€ä¸ªé¡¹ç›®ï¼Œé©¬ä¸Šè·å¾—çš„æ”¶ç›Šï¼Œå¯ä»¥æ”¯æŒä½ å»åšä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œä¸èƒ½å¹¶è¡Œçš„åšé¡¹ç›®ã€‚<br>è¾“å‡ºï¼šæœ€åè·å¾—çš„æœ€å¤§é’±æ•°</p><p>å¹¶æŸ¥é›†çš„å®ç°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¹ï¼‰â€”â€”äºŒå‰æ ‘å¸¸è§é¢è¯•é¢˜å’ŒäºŒå‰æ ‘çš„é€’å½’å¥—è·¯ï¼ˆä¸‹ï¼‰ã€è´ªå¿ƒç®—æ³•</title>
      <link href="/2022/03/13/zuo_system_study13/"/>
      <url>/2022/03/13/zuo_system_study13/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>äºŒå‰æ ‘é€’å½’å¥—è·¯ç»§ç»­å®è·µ</p><p>ä¸€é“è´ªå¿ƒç®—æ³•ä»å¤´åˆ°å°¾çš„å®Œæ•´åšæ³•</p><p>è§£å†³è´ªå¿ƒé¢˜ç›®çš„é‡è¦æŠ€å·§ï¼Œå³å¯¹æ•°å™¨æ¥éªŒè¯è„‘æ´</p><p>å†æ¬¡å¼ºè°ƒå¯¹æ•°å™¨çš„é‡è¦æ€§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼ˆä¸€èˆ¬æ–¹æ³•è§£å†³ã€é€’å½’å¥—è·¯è§£å†³ï¼‰</p><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„å¤´èŠ‚ç‚¹headï¼Œè¿”å›è¿™é¢—äºŒå‰æ ‘ä¸­æœ€å¤§çš„äºŒå‰æœç´¢å­æ ‘çš„å¤´èŠ‚ç‚¹</p><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„å¤´èŠ‚ç‚¹headï¼Œå’Œå¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹aå’Œbï¼Œè¿”å›aå’Œbçš„æœ€ä½å…¬å…±ç¥–å…ˆ</p><p>æ´¾å¯¹çš„æœ€å¤§å¿«ä¹å€¼<br> å‘˜å·¥ä¿¡æ¯çš„å®šä¹‰å¦‚ä¸‹:<br>class Employee {<br>    public int happy; &#x2F;&#x2F; è¿™åå‘˜å·¥å¯ä»¥å¸¦æ¥çš„å¿«ä¹å€¼<br>    List<Employee> subordinates; &#x2F;&#x2F; è¿™åå‘˜å·¥æœ‰å“ªäº›ç›´æ¥ä¸‹çº§<br>}<br>å…¬å¸çš„æ¯ä¸ªå‘˜å·¥éƒ½ç¬¦åˆ Employee ç±»çš„æè¿°ã€‚æ•´ä¸ªå…¬å¸çš„äººå‘˜ç»“æ„å¯ä»¥çœ‹ä½œæ˜¯ä¸€æ£µæ ‡å‡†çš„ã€ æ²¡æœ‰ç¯çš„å¤šå‰æ ‘<br>æ ‘çš„å¤´èŠ‚ç‚¹æ˜¯å…¬å¸å”¯ä¸€çš„è€æ¿ï¼Œé™¤è€æ¿ä¹‹å¤–çš„æ¯ä¸ªå‘˜å·¥éƒ½æœ‰å”¯ä¸€çš„ç›´æ¥ä¸Šçº§<br>å¶èŠ‚ç‚¹æ˜¯æ²¡æœ‰ä»»ä½•ä¸‹å±çš„åŸºå±‚å‘˜å·¥(subordinatesåˆ—è¡¨ä¸ºç©º)ï¼Œé™¤åŸºå±‚å‘˜å·¥å¤–æ¯ä¸ªå‘˜å·¥éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç›´æ¥ä¸‹çº§<br>è¿™ä¸ªå…¬å¸ç°åœ¨è¦åŠpartyï¼Œä½ å¯ä»¥å†³å®šå“ªäº›å‘˜å·¥æ¥ï¼Œå“ªäº›å‘˜å·¥ä¸æ¥ï¼Œè§„åˆ™ï¼š<br>1.å¦‚æœæŸä¸ªå‘˜å·¥æ¥äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘˜å·¥çš„æ‰€æœ‰ç›´æ¥ä¸‹çº§éƒ½ä¸èƒ½æ¥<br>2.æ´¾å¯¹çš„æ•´ä½“å¿«ä¹å€¼æ˜¯æ‰€æœ‰åˆ°åœºå‘˜å·¥å¿«ä¹å€¼çš„ç´¯åŠ <br>3.ä½ çš„ç›®æ ‡æ˜¯è®©æ´¾å¯¹çš„æ•´ä½“å¿«ä¹å€¼å°½é‡å¤§<br>ç»™å®šä¸€æ£µå¤šå‰æ ‘çš„å¤´èŠ‚ç‚¹bossï¼Œè¯·è¿”å›æ´¾å¯¹çš„æœ€å¤§å¿«ä¹å€¼ã€‚</p><p>ç»™å®šä¸€ä¸ªç”±å­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„strsï¼Œå¿…é¡»æŠŠæ‰€æœ‰çš„å­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æ‹¼æ¥ç»“æœä¸­å­—å…¸åºæœ€å°çš„ç»“æœ</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåäºŒï¼‰â€”â€”äºŒå‰æ ‘å¸¸è§é¢è¯•é¢˜å’ŒäºŒå‰æ ‘çš„é€’å½’å¥—è·¯ï¼ˆä¸­ï¼‰</title>
      <link href="/2022/03/12/zuo_system_study12/"/>
      <url>/2022/03/12/zuo_system_study12/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>é€šè¿‡é¢˜ç›®æ¥ç†Ÿæ‚‰äºŒå‰æ ‘çš„è§£é¢˜æŠ€å·§</p><p>ä»‹ç»äºŒå‰æ ‘çš„é€’å½’å¥—è·¯<br>1ï¼‰å‡è®¾ä»¥XèŠ‚ç‚¹ä¸ºå¤´ï¼Œå‡è®¾å¯ä»¥å‘Xå·¦æ ‘å’ŒXå³æ ‘è¦ä»»ä½•ä¿¡æ¯<br>2ï¼‰åœ¨ä¸Šä¸€æ­¥çš„å‡è®¾ä¸‹ï¼Œè®¨è®ºä»¥Xä¸ºå¤´èŠ‚ç‚¹çš„æ ‘ï¼Œå¾—åˆ°ç­”æ¡ˆçš„å¯èƒ½æ€§ï¼ˆæœ€é‡è¦ï¼‰<br>3ï¼‰åˆ—å‡ºæ‰€æœ‰å¯èƒ½æ€§åï¼Œç¡®å®šåˆ°åº•éœ€è¦å‘å·¦æ ‘å’Œå³æ ‘è¦ä»€ä¹ˆæ ·çš„ä¿¡æ¯<br>4ï¼‰æŠŠå·¦æ ‘ä¿¡æ¯å’Œå³æ ‘ä¿¡æ¯æ±‚å…¨é›†ï¼Œå°±æ˜¯ä»»ä½•ä¸€æ£µå­æ ‘éƒ½éœ€è¦è¿”å›çš„ä¿¡æ¯S<br>5ï¼‰é€’å½’å‡½æ•°éƒ½è¿”å›Sï¼Œæ¯ä¸€æ£µå­æ ‘éƒ½è¿™ä¹ˆè¦æ±‚<br>6ï¼‰å†™ä»£ç ï¼Œåœ¨ä»£ç ä¸­è€ƒè™‘å¦‚ä½•æŠŠå·¦æ ‘çš„ä¿¡æ¯å’Œå³æ ‘ä¿¡æ¯æ•´åˆå‡ºæ•´æ£µæ ‘çš„ä¿¡æ¯</p><span id="more"></span><p>åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯æœç´¢äºŒå‰æ ‘</p><p>åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘</p><p>åˆ¤æ–­äºŒå‰æ ‘æ˜¯ä¸æ˜¯æ»¡äºŒå‰æ ‘</p><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„å¤´èŠ‚ç‚¹headï¼Œè¿”å›è¿™é¢—äºŒå‰æ ‘ä¸­æœ€å¤§çš„äºŒå‰æœç´¢å­æ ‘çš„å¤§å°</p><p>ç»™å®šä¸€æ£µäºŒå‰æ ‘çš„å¤´èŠ‚ç‚¹headï¼Œä»»ä½•ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´éƒ½å­˜åœ¨è·ç¦»ï¼Œè¿”å›æ•´æ£µäºŒå‰æ ‘çš„æœ€å¤§è·ç¦»</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåä¸€ï¼‰â€”â€”äºŒå‰æ ‘å¸¸è§é¢è¯•é¢˜å’ŒäºŒå‰æ ‘çš„é€’å½’å¥—è·¯ï¼ˆä¸Šï¼‰</title>
      <link href="/2022/03/11/zuo_system_study11/"/>
      <url>/2022/03/11/zuo_system_study11/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>é€šè¿‡é¢˜ç›®æ¥ç†Ÿæ‚‰äºŒå‰æ ‘çš„è§£é¢˜æŠ€å·§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>äºŒå‰æ ‘çš„æŒ‰å±‚éå†</p><p>äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–</p><p>Nå‰æ ‘å¦‚ä½•é€šè¿‡äºŒå‰æ ‘æ¥åºåˆ—åŒ–ã€å¹¶å®Œæˆååºåˆ—åŒ–<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/encode-n-ary-tree-to-binary-tree/">https://leetcode.com/problems/encode-n-ary-tree-to-binary-tree/</a></p><p>æ‰“å°äºŒå‰æ ‘çš„å‡½æ•°è®¾è®¡</p><p>æ±‚äºŒå‰æ ‘çš„æœ€å¤§å®½åº¦</p><p>æ±‚äºŒå‰æ ‘æŸä¸ªèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹<br>äºŒå‰æ ‘ç»“æ„å¦‚ä¸‹å®šä¹‰ï¼š<br>Class Node {<br>    V value;<br>    Node left;<br>    Node right;<br>    Node parent;<br>}<br>ç»™ä½ äºŒå‰æ ‘ä¸­çš„æŸä¸ªèŠ‚ç‚¹ï¼Œè¿”å›è¯¥èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ </p><p>æŠ˜çº¸é—®é¢˜<br>è¯·æŠŠä¸€æ®µçº¸æ¡ç«–ç€æ”¾åœ¨æ¡Œå­ä¸Šï¼Œç„¶åä»çº¸æ¡çš„ä¸‹è¾¹å‘ä¸Šæ–¹å¯¹æŠ˜1æ¬¡ï¼Œå‹å‡ºæŠ˜ç—•åå±•å¼€<br>æ­¤æ—¶æŠ˜ç—•æ˜¯å‡¹ä¸‹å»çš„ï¼Œå³æŠ˜ç—•çªèµ·çš„æ–¹å‘æŒ‡å‘çº¸æ¡çš„èƒŒé¢<br>å¦‚æœä»çº¸æ¡çš„ä¸‹è¾¹å‘ä¸Šæ–¹è¿ç»­å¯¹æŠ˜2æ¬¡ï¼Œå‹å‡ºæŠ˜ç—•åå±•å¼€<br>æ­¤æ—¶æœ‰ä¸‰æ¡æŠ˜ç—•ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ä¸‹æŠ˜ç—•ã€ä¸‹æŠ˜ç—•å’Œä¸ŠæŠ˜ç—•ã€‚<br>ç»™å®šä¸€ä¸ªè¾“å…¥å‚æ•°Nï¼Œä»£è¡¨çº¸æ¡éƒ½ä»ä¸‹è¾¹å‘ä¸Šæ–¹è¿ç»­å¯¹æŠ˜Næ¬¡<br>è¯·ä»ä¸Šåˆ°ä¸‹æ‰“å°æ‰€æœ‰æŠ˜ç—•çš„æ–¹å‘ã€‚<br>N&#x3D;1æ—¶ï¼Œæ‰“å°: down<br>N&#x3D;2æ—¶ï¼Œæ‰“å°: down down up </p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåï¼‰â€”â€”é“¾è¡¨ç›¸å…³é¢è¯•é¢˜ï¼ˆç»­ï¼‰ã€äºŒå‰æ ‘çš„å¸¸è§éå†</title>
      <link href="/2022/03/10/zuo_system_study10/"/>
      <url>/2022/03/10/zuo_system_study10/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å•é“¾è¡¨çš„ç›¸äº¤èŠ‚ç‚¹ç³»åˆ—é—®é¢˜</p><p>ä¸€ç§çœ‹ä¼¼é«˜æ•ˆå…¶å®æç¬‘çš„èŠ‚ç‚¹åˆ é™¤æ–¹å¼</p><p>äºŒå‰æ ‘çš„ä¸­åºã€å…ˆåºã€ååºéå†</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸¤ä¸ªå¯èƒ½æœ‰ç¯ä¹Ÿå¯èƒ½æ— ç¯çš„å•é“¾è¡¨ï¼Œå¤´èŠ‚ç‚¹head1å’Œhead2<br>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤ï¼Œè¯·è¿”å›ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚å¦‚æœä¸ç›¸äº¤è¿”å›null<br>è¦æ±‚å¦‚æœä¸¤ä¸ªé“¾è¡¨é•¿åº¦ä¹‹å’Œä¸ºNï¼Œæ—¶é—´å¤æ‚åº¦è¯·è¾¾åˆ°O(N)ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦è¯·è¾¾åˆ°O(1)</p><p>èƒ½ä¸èƒ½ä¸ç»™å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œåªç»™æƒ³è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œå°±èƒ½åšåˆ°åœ¨é“¾è¡¨ä¸ŠæŠŠè¿™ä¸ªç‚¹åˆ æ‰ï¼Ÿ</p><p>äºŒå‰æ ‘å…ˆåºã€ä¸­åºã€ååºçš„é€’å½’éå†å’Œé€’å½’åº</p><p>äºŒå‰æ ‘å…ˆåºã€ä¸­åºã€ååºçš„éé€’å½’éå†</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåå…­ï¼‰â€”â€”å›¾åŠå…¶ä¸å›¾ç›¸å…³çš„ç®—æ³•</title>
      <link href="/2022/03/09/zuo_system_study16/"/>
      <url>/2022/03/09/zuo_system_study16/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å›¾çš„è¡¨è¾¾æ–¹å¼</p><p>å›¾çš„å¸¸è§æè¿°</p><p>å›¾çš„å®½åº¦ä¼˜å…ˆéå†</p><p>å›¾çš„æ·±åº¦ä¼˜å…ˆéå†</p><p>å›¾çš„æ‹“æ‰‘æ’åº</p><p>æœ€å°ç”Ÿæˆæ ‘ç®—æ³•Kruskal</p><p>æœ€å°ç”Ÿæˆæ ‘ç®—æ³•Prim</p><p>å•å…ƒæœ€çŸ­è·¯å¾„ç®—æ³•Dijkstra</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>å›¾çš„æ•°æ®ç»“æ„æŠ½è±¡</p><p>å®ç°å›¾çš„å®½åº¦ä¼˜å…ˆéå†</p><p>å®ç°å›¾çš„æ·±åº¦ä¼˜å…ˆéå†</p><p>ä¸‰ç§æ–¹å¼å®ç°å›¾çš„æ‹“æ‰‘æ’åº</p><p>ç”¨å¹¶æŸ¥é›†å®ç°Kruskalç®—æ³•</p><p>ç”¨å †å®ç°Primç®—æ³•</p><p>å®ç°Dijkstraç®—æ³•ï¼Œç”¨åŠ å¼ºå †åšæ›´å¥½çš„å®ç°ï¼ˆ16èŠ‚+17èŠ‚ä¸€å¼€å§‹ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆåå…«ï¼‰â€”â€”æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’ï¼ˆä¸€ï¼‰</title>
      <link href="/2022/03/09/zuo_system_study18/"/>
      <url>/2022/03/09/zuo_system_study18/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>è®²è¿°æš´åŠ›é€’å½’å’ŒåŠ¨æ€è§„åˆ’çš„å…³ç³»</p><p>è®°å¿†åŒ–æœç´¢</p><p>åŠ¨æ€è§„åˆ’éƒ½å¯ä»¥ç”±æš´åŠ›é€’å½’æ”¹è¿›è¿‡æ¥ï¼Œè§£å†³åŠ¨æ€è§„åˆ’çš„å¥—è·¯</p><p>å¸¸è§çš„å°è¯•æ¨¡å‹</p><p>è®¾è®¡å°è¯•è¿‡ç¨‹çš„åŸåˆ™</p><p>æœ¬èŠ‚æ˜¯æš´åŠ›é€’å½’åˆ°åŠ¨æ€è§„åˆ’çš„æ€»çº²ï¼ˆå¾ˆé‡è¦ï¼‰</p><p>åç»­çš„è¯¾éƒ½æ˜¯åœ¨è®²è¿°è¿™ä¸€ç³»åˆ—çš„å¥—è·¯</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>å‡è®¾æœ‰æ’æˆä¸€è¡Œçš„Nä¸ªä½ç½®è®°ä¸º1<del>Nï¼ŒNä¸€å®šå¤§äºæˆ–ç­‰äº2<br>å¼€å§‹æ—¶æœºå™¨äººåœ¨å…¶ä¸­çš„Mä½ç½®ä¸Š(Mä¸€å®šæ˜¯1</del>Nä¸­çš„ä¸€ä¸ª)<br>å¦‚æœæœºå™¨äººæ¥åˆ°1ä½ç½®ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥åªèƒ½å¾€å³æ¥åˆ°2ä½ç½®ï¼›<br>å¦‚æœæœºå™¨äººæ¥åˆ°Nä½ç½®ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥åªèƒ½å¾€å·¦æ¥åˆ°N-1ä½ç½®ï¼›<br>å¦‚æœæœºå™¨äººæ¥åˆ°ä¸­é—´ä½ç½®ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å¯ä»¥å¾€å·¦èµ°æˆ–è€…å¾€å³èµ°ï¼›<br>è§„å®šæœºå™¨äººå¿…é¡»èµ°Kæ­¥ï¼Œæœ€ç»ˆèƒ½æ¥åˆ°Pä½ç½®(Pä¹Ÿæ˜¯1~Nä¸­çš„ä¸€ä¸ª)çš„æ–¹æ³•æœ‰å¤šå°‘ç§<br>ç»™å®šå››ä¸ªå‚æ•° Nã€Mã€Kã€Pï¼Œè¿”å›æ–¹æ³•æ•°</p><p>ç»™å®šä¸€ä¸ªæ•´å‹æ•°ç»„arrï¼Œä»£è¡¨æ•°å€¼ä¸åŒçš„çº¸ç‰Œæ’æˆä¸€æ¡çº¿<br>ç©å®¶Aå’Œç©å®¶Bä¾æ¬¡æ‹¿èµ°æ¯å¼ çº¸ç‰Œ<br>è§„å®šç©å®¶Aå…ˆæ‹¿ï¼Œç©å®¶Båæ‹¿<br>ä½†æ˜¯æ¯ä¸ªç©å®¶æ¯æ¬¡åªèƒ½æ‹¿èµ°æœ€å·¦æˆ–æœ€å³çš„çº¸ç‰Œ<br>ç©å®¶Aå’Œç©å®¶Béƒ½ç»é¡¶èªæ˜<br>è¯·è¿”å›æœ€åè·èƒœè€…çš„åˆ†æ•°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¹ï¼‰â€”â€”æ’åºç®—æ³•å¤§æ€»ç»“ã€é“¾è¡¨åŠå…¶ç›¸å…³é¢è¯•é¢˜</title>
      <link href="/2022/03/09/zuo_system_study9/"/>
      <url>/2022/03/09/zuo_system_study9/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>æ’åºç®—æ³•æ€»ç»“</p><p>æ’åºç®—æ³•å¸¸è§çš„å‘</p><p>å·¥ç¨‹ä¸Šå¯¹æ’åºçš„å¸¸è§æ”¹è¿›</p><p>é“¾è¡¨é¢è¯•é¢˜çš„å¸¸è§æŠ€å·§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>è¾“å…¥é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œå¥‡æ•°é•¿åº¦è¿”å›ä¸­ç‚¹ï¼Œå¶æ•°é•¿åº¦è¿”å›ä¸Šä¸­ç‚¹<br>è¾“å…¥é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œå¥‡æ•°é•¿åº¦è¿”å›ä¸­ç‚¹ï¼Œå¶æ•°é•¿åº¦è¿”å›ä¸‹ä¸­ç‚¹<br>è¾“å…¥é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œå¥‡æ•°é•¿åº¦è¿”å›ä¸­ç‚¹å‰ä¸€ä¸ªï¼Œå¶æ•°é•¿åº¦è¿”å›ä¸Šä¸­ç‚¹å‰ä¸€ä¸ª<br>è¾“å…¥é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œå¥‡æ•°é•¿åº¦è¿”å›ä¸­ç‚¹å‰ä¸€ä¸ªï¼Œå¶æ•°é•¿åº¦è¿”å›ä¸‹ä¸­ç‚¹å‰ä¸€ä¸ª</p><p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹headï¼Œè¯·åˆ¤æ–­è¯¥é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡ç»“æ„</p><p>ç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹headï¼Œç»™å®šä¸€ä¸ªæ•´æ•°nï¼Œå°†é“¾è¡¨æŒ‰nåˆ’åˆ†æˆå·¦è¾¹&lt;nã€ä¸­é—´&#x3D;&#x3D;nã€å³è¾¹&gt;n</p><p>ä¸€ç§ç‰¹æ®Šçš„å•é“¾è¡¨èŠ‚ç‚¹ç±»æè¿°å¦‚ä¸‹<br>class Node {<br>int value;<br>Node next;<br>Node rand;<br>Node(int val) { value &#x3D; val; }<br>}<br>randæŒ‡é’ˆæ˜¯å•é“¾è¡¨èŠ‚ç‚¹ç»“æ„ä¸­æ–°å¢çš„æŒ‡é’ˆï¼Œrandå¯èƒ½æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½æŒ‡å‘null<br>ç»™å®šä¸€ä¸ªç”±NodeèŠ‚ç‚¹ç±»å‹ç»„æˆçš„æ— ç¯å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹headï¼Œè¯·å®ç°ä¸€ä¸ªå‡½æ•°å®Œæˆè¿™ä¸ªé“¾è¡¨çš„å¤åˆ¶<br>è¿”å›å¤åˆ¶çš„æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œè¦æ±‚æ—¶é—´å¤æ‚åº¦O(N)ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦O(1) </p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå…«ï¼‰â€”â€”å‰ç¼€æ ‘ã€ä¸åŸºäºæ¯”è¾ƒçš„æ’åºï¼ˆè®¡æ•°æ’åºã€åŸºæ•°æ’åºï¼‰ã€æ’åºç®—æ³•çš„ç¨³å®šæ€§</title>
      <link href="/2022/03/08/zuo_system_study8/"/>
      <url>/2022/03/08/zuo_system_study8/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å‰ç¼€æ ‘</p><p>è®¡æ•°æ’åº</p><p>åŸºæ•°æ’åº</p><p>æ’åºç®—æ³•çš„ç¨³å®šæ€§</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>å‰ç¼€æ ‘å®ç°</p><p>è®¡æ•°æ’åº</p><p>åŸºæ•°æ’åº</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸ƒï¼‰â€”â€”å’Œå †æœ‰å…³çš„é¢è¯•é¢˜ã€åŠ å¼ºå †ç»“æ„</title>
      <link href="/2022/03/07/zuo_system_study7/"/>
      <url>/2022/03/07/zuo_system_study7/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>çº¿æ®µæœ€å¤§é‡åˆé—®é¢˜</p><p>åŠ å¼ºå †çš„å®ç°</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šå¾ˆå¤šçº¿æ®µï¼Œæ¯ä¸ªçº¿æ®µéƒ½æœ‰ä¸¤ä¸ªæ•°[start, end]ï¼Œ<br>è¡¨ç¤ºçº¿æ®µå¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œå·¦å³éƒ½æ˜¯é—­åŒºé—´<br>è§„å®šï¼š<br>1ï¼‰çº¿æ®µçš„å¼€å§‹å’Œç»“æŸä½ç½®ä¸€å®šéƒ½æ˜¯æ•´æ•°å€¼<br>2ï¼‰çº¿æ®µé‡åˆåŒºåŸŸçš„é•¿åº¦å¿…é¡»&gt;&#x3D;1<br>è¿”å›çº¿æ®µæœ€å¤šé‡åˆåŒºåŸŸä¸­ï¼ŒåŒ…å«äº†å‡ æ¡çº¿æ®µ</p><p>åŠ å¼ºå †çš„å®ç°ã€æ³¨æ„ç‚¹è§£æ</p><p>åšä¸€ä¸ªåŠ å¼ºå †çš„é¢˜ç›®ï¼Œç»™å®šä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œint[] arrï¼›å’Œä¸€ä¸ªå¸ƒå°”ç±»å‹æ•°ç»„ï¼Œboolean[] op<br>ä¸¤ä¸ªæ•°ç»„ä¸€å®šç­‰é•¿ï¼Œå‡è®¾é•¿åº¦ä¸ºNï¼Œarr[i]è¡¨ç¤ºå®¢æˆ·ç¼–å·ï¼Œop[i]è¡¨ç¤ºå®¢æˆ·æ“ä½œ<br>arr&#x3D; [3,3,1,2,1,2,5â€¦<br>op &#x3D; [T,T,T,T,F,T,Fâ€¦<br>ä¾æ¬¡è¡¨ç¤ºï¼š<br>3ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“<br>3ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“<br>1ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“<br>2ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“<br>1ç”¨æˆ·é€€è´§äº†ä¸€ä»¶å•†å“<br>2ç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“<br>5ç”¨æˆ·é€€è´§äº†ä¸€ä»¶å•†å“â€¦<br>ä¸€å¯¹arr[i]å’Œop[i]å°±ä»£è¡¨ä¸€ä¸ªäº‹ä»¶ï¼š<br>ç”¨æˆ·å·ä¸ºarr[i]ï¼Œop[i] &#x3D;&#x3D; Tå°±ä»£è¡¨è¿™ä¸ªç”¨æˆ·è´­ä¹°äº†ä¸€ä»¶å•†å“<br>op[i] &#x3D;&#x3D; Få°±ä»£è¡¨è¿™ä¸ªç”¨æˆ·é€€è´§äº†ä¸€ä»¶å•†å“<br>ç°åœ¨ä½ ä½œä¸ºç”µå•†å¹³å°è´Ÿè´£äººï¼Œä½ æƒ³åœ¨æ¯ä¸€ä¸ªäº‹ä»¶åˆ°æ¥çš„æ—¶å€™ï¼Œ<br>éƒ½ç»™è´­ä¹°æ¬¡æ•°æœ€å¤šçš„å‰Kåç”¨æˆ·é¢å¥–ã€‚<br>æ‰€ä»¥æ¯ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä½ éƒ½éœ€è¦ä¸€ä¸ªå¾—å¥–åå•ï¼ˆå¾—å¥–åŒºï¼‰ã€‚<br>å¾—å¥–ç³»ç»Ÿçš„è§„åˆ™ï¼š<br>1ï¼Œå¦‚æœæŸä¸ªç”¨æˆ·è´­ä¹°å•†å“æ•°ä¸º0ï¼Œä½†æ˜¯åˆå‘ç”Ÿäº†é€€è´§äº‹ä»¶ï¼Œ<br>     åˆ™è®¤ä¸ºè¯¥äº‹ä»¶æ— æ•ˆï¼Œå¾—å¥–åå•å’Œä¸Šä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåä¸€è‡´ï¼Œä¾‹å­ä¸­çš„5ç”¨æˆ·<br>2ï¼ŒæŸç”¨æˆ·å‘ç”Ÿè´­ä¹°å•†å“äº‹ä»¶ï¼Œè´­ä¹°å•†å“æ•°+1ï¼Œå‘ç”Ÿé€€è´§äº‹ä»¶ï¼Œè´­ä¹°å•†å“æ•°-1<br>3ï¼Œæ¯æ¬¡éƒ½æ˜¯æœ€å¤šKä¸ªç”¨æˆ·å¾—å¥–ï¼ŒKä¹Ÿä¸ºä¼ å…¥çš„å‚æ•°<br>      å¦‚æœæ ¹æ®å…¨éƒ¨è§„åˆ™ï¼Œå¾—å¥–äººæ•°ç¡®å®ä¸å¤ŸKä¸ªï¼Œé‚£å°±ä»¥ä¸å¤Ÿçš„æƒ…å†µè¾“å‡ºç»“æœ<br>4ï¼Œå¾—å¥–ç³»ç»Ÿåˆ†ä¸ºå¾—å¥–åŒºå’Œå€™é€‰åŒºï¼Œä»»ä½•ç”¨æˆ·åªè¦è´­ä¹°æ•°&gt;0ï¼Œ<br>      ä¸€å®šåœ¨è¿™ä¸¤ä¸ªåŒºåŸŸä¸­çš„ä¸€ä¸ª<br>5ï¼Œè´­ä¹°æ•°æœ€å¤§çš„å‰Kåç”¨æˆ·è¿›å…¥å¾—å¥–åŒºï¼Œ<br>      åœ¨æœ€åˆæ—¶å¦‚æœå¾—å¥–åŒºæ²¡æœ‰åˆ°è¾¾Kä¸ªç”¨æˆ·ï¼Œé‚£ä¹ˆæ–°æ¥çš„ç”¨æˆ·ç›´æ¥è¿›å…¥å¾—å¥–åŒº<br>6ï¼Œå¦‚æœè´­ä¹°æ•°ä¸è¶³ä»¥è¿›å…¥å¾—å¥–åŒºçš„ç”¨æˆ·ï¼Œè¿›å…¥å€™é€‰åŒº<br>7ï¼Œå¦‚æœå€™é€‰åŒºè´­ä¹°æ•°æœ€å¤šçš„ç”¨æˆ·ï¼Œå·²ç»è¶³ä»¥è¿›å…¥å¾—å¥–åŒºï¼Œ<br>     è¯¥ç”¨æˆ·å°±ä¼šæ›¿æ¢å¾—å¥–åŒºä¸­è´­ä¹°æ•°æœ€å°‘çš„ç”¨æˆ·ï¼ˆå¤§äºæ‰èƒ½æ›¿æ¢ï¼‰ï¼Œ<br>     å¦‚æœå¾—å¥–åŒºä¸­è´­ä¹°æ•°æœ€å°‘çš„ç”¨æˆ·æœ‰å¤šä¸ªï¼Œå°±æ›¿æ¢æœ€æ—©è¿›å…¥å¾—å¥–åŒºçš„ç”¨æˆ·<br>     å¦‚æœå€™é€‰åŒºä¸­è´­ä¹°æ•°æœ€å¤šçš„ç”¨æˆ·æœ‰å¤šä¸ªï¼Œæœºä¼šä¼šç»™æœ€æ—©è¿›å…¥å€™é€‰åŒºçš„ç”¨æˆ·<br>8ï¼Œå€™é€‰åŒºå’Œå¾—å¥–åŒºæ˜¯ä¸¤å¥—æ—¶é—´ï¼Œ<br>     å› ç”¨æˆ·åªä¼šåœ¨å…¶ä¸­ä¸€ä¸ªåŒºåŸŸï¼Œæ‰€ä»¥åªä¼šæœ‰ä¸€ä¸ªåŒºåŸŸçš„æ—¶é—´ï¼Œå¦ä¸€ä¸ªæ²¡æœ‰<br>     ä»å¾—å¥–åŒºå‡ºæ¥è¿›å…¥å€™é€‰åŒºçš„ç”¨æˆ·ï¼Œå¾—å¥–åŒºæ—¶é—´åˆ é™¤ï¼Œ<br>     è¿›å…¥å€™é€‰åŒºçš„æ—¶é—´å°±æ˜¯å½“å‰äº‹ä»¶çš„æ—¶é—´ï¼ˆå¯ä»¥ç†è§£ä¸ºarr[i]å’Œop[i]ä¸­çš„iï¼‰<br>     ä»å€™é€‰åŒºå‡ºæ¥è¿›å…¥å¾—å¥–åŒºçš„ç”¨æˆ·ï¼Œå€™é€‰åŒºæ—¶é—´åˆ é™¤ï¼Œ<br>     è¿›å…¥å¾—å¥–åŒºçš„æ—¶é—´å°±æ˜¯å½“å‰äº‹ä»¶çš„æ—¶é—´ï¼ˆå¯ä»¥ç†è§£ä¸ºarr[i]å’Œop[i]ä¸­çš„iï¼‰<br>9ï¼Œå¦‚æœæŸç”¨æˆ·è´­ä¹°æ•°&#x3D;&#x3D;0ï¼Œä¸ç®¡åœ¨å“ªä¸ªåŒºåŸŸéƒ½ç¦»å¼€ï¼ŒåŒºåŸŸæ—¶é—´åˆ é™¤ï¼Œ<br>     ç¦»å¼€æ˜¯æŒ‡å½»åº•ç¦»å¼€ï¼Œå“ªä¸ªåŒºåŸŸä¹Ÿä¸ä¼šæ‰¾åˆ°è¯¥ç”¨æˆ·<br>     å¦‚æœä¸‹æ¬¡è¯¥ç”¨æˆ·åˆå‘ç”Ÿè´­ä¹°è¡Œä¸ºï¼Œäº§ç”Ÿ&gt;0çš„è´­ä¹°æ•°ï¼Œ<br>     ä¼šå†æ¬¡æ ¹æ®ä¹‹å‰è§„åˆ™å›åˆ°æŸä¸ªåŒºåŸŸä¸­ï¼Œè¿›å…¥åŒºåŸŸçš„æ—¶é—´é‡è®°<br>è¯·éå†arræ•°ç»„å’Œopæ•°ç»„ï¼Œéå†æ¯ä¸€æ­¥è¾“å‡ºä¸€ä¸ªå¾—å¥–åå•<br>public List&lt;List<Integer>&gt;  topK (int[] arr, boolean[] op, int k)</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå…­ï¼‰â€”â€”æ¯”è¾ƒå™¨ã€å †ç»“æ„ã€å †æ’åº</title>
      <link href="/2022/03/06/zuo_system_study6/"/>
      <url>/2022/03/06/zuo_system_study6/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>æ¯”è¾ƒå™¨</p><p>å †ç»“æ„</p><p>å †æ’åº</p><p>å»ºç«‹å¤§æ ¹å †çš„ä¸¤ç§æ–¹å¼ï¼Œä»ä¸Šåˆ°ä¸‹ã€ä»ä¸‹åˆ°ä¸Šï¼ŒåŠå…¶å¤æ‚åº¦åˆ†æ</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>æ¯”è¾ƒå™¨ä½¿ç”¨çš„codeå±•ç¤º</p><p>å †ç»“æ„çš„å®ç°</p><p>å †æ’åºçš„å®ç°</p><p>å·²çŸ¥ä¸€ä¸ªå‡ ä¹æœ‰åºçš„æ•°ç»„ã€‚å‡ ä¹æœ‰åºæ˜¯æŒ‡ï¼Œå¦‚æœæŠŠæ•°ç»„æ’å¥½é¡ºåºçš„è¯ï¼Œæ¯ä¸ªå…ƒç´ ç§»åŠ¨çš„è·ç¦»ä¸€å®šä¸è¶…è¿‡k<br>kç›¸å¯¹äºæ•°ç»„é•¿åº¦æ¥è¯´æ˜¯æ¯”è¾ƒå°çš„ã€‚è¯·é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ’åºç­–ç•¥ï¼Œå¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œæ’åºã€‚ </p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäº”ï¼‰â€”â€”å½’å¹¶æ’åºé¢è¯•é¢˜(ç»­)ã€å¿«é€Ÿæ’åº</title>
      <link href="/2022/03/05/zuo_system_study5/"/>
      <url>/2022/03/05/zuo_system_study5/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å†æ¥ä¸€ä¸ªå½’å¹¶æ’åºé¢è¯•é¢˜</p><p>è·å…°å›½æ——é—®é¢˜</p><p>å¿«é€Ÿæ’åº1.0</p><p>å¿«é€Ÿæ’åº2.0</p><p>å¿«é€Ÿæ’åº3.0</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œä¸¤ä¸ªæ•´æ•°lowerå’Œupperï¼Œ<br>è¿”å›arrä¸­æœ‰å¤šå°‘ä¸ªå­æ•°ç»„çš„ç´¯åŠ å’Œåœ¨[lower,upper]èŒƒå›´ä¸Š<br>Leetcodeé¢˜ç›®ï¼š<a href="https://leetcode.com/problems/count-of-range-sum/">https://leetcode.com/problems/count-of-range-sum/</a></p><p>è·å…°å›½æ——é—®é¢˜çš„å®ç°</p><p>å¿«é€Ÿæ’åºä»1.0åˆ°3.0çš„å®ç°</p><p>å¿«é€Ÿæ’åºçš„é€’å½’å®ç°å’Œéé€’å½’å®ç°</p><p>codeé™„åŠ ï¼ŒåŒå‘é“¾è¡¨è¿›è¡Œå¿«é€Ÿæ’åºçš„codeå®ç°</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆå››ï¼‰â€”â€”å½’å¹¶æ’åºåŠå…¶å¸¸è§é¢è¯•é¢˜</title>
      <link href="/2022/03/04/zuo_system_study4/"/>
      <url>/2022/03/04/zuo_system_study4/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å½’å¹¶æ’åº</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>å½’å¹¶æ’åºçš„é€’å½’å’Œéé€’å½’å®ç°</p><p>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä¸€ä¸ªæ•°å·¦è¾¹æ¯”å®ƒå°çš„æ•°çš„æ€»å’Œï¼Œå«è¯¥æ•°çš„å°å’Œ<br>æ‰€æœ‰æ•°çš„å°å’Œç´¯åŠ èµ·æ¥ï¼Œå«æ•°ç»„å°å’Œ<br>ä¾‹å­ï¼š [1,3,4,2,5]<br>1å·¦è¾¹æ¯”1å°çš„æ•°ï¼šæ²¡æœ‰<br>3å·¦è¾¹æ¯”3å°çš„æ•°ï¼š1<br>4å·¦è¾¹æ¯”4å°çš„æ•°ï¼š1ã€3<br>2å·¦è¾¹æ¯”2å°çš„æ•°ï¼š1<br>5å·¦è¾¹æ¯”5å°çš„æ•°ï¼š1ã€3ã€4ã€ 2<br>æ‰€ä»¥æ•°ç»„çš„å°å’Œä¸º1+1+3+1+1+3+4+2&#x3D;16<br>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œæ±‚æ•°ç»„å°å’Œ</p><p>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä»»ä½•ä¸€ä¸ªå‰é¢çš„æ•°aï¼Œå’Œä»»ä½•ä¸€ä¸ªåé¢çš„æ•°bï¼Œå¦‚æœ(a,b)æ˜¯é™åºçš„ï¼Œå°±ç§°ä¸ºé™åºå¯¹<br>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œæ±‚æ•°ç»„çš„é™åºå¯¹æ€»æ•°é‡</p><p>åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¯¹äºä»»ä½•ä¸€ä¸ªæ•°numï¼Œæ±‚æœ‰å¤šå°‘ä¸ª(åé¢çš„æ•°*2)ä¾ç„¶&lt;numï¼Œè¿”å›æ€»ä¸ªæ•°<br>æ¯”å¦‚ï¼š[3,1,7,0,2]<br>3çš„åé¢æœ‰ï¼š1ï¼Œ0<br>1çš„åé¢æœ‰ï¼š0<br>7çš„åé¢æœ‰ï¼š0ï¼Œ2<br>0çš„åé¢æ²¡æœ‰<br>2çš„åé¢æ²¡æœ‰<br>æ‰€ä»¥æ€»å…±æœ‰5ä¸ª</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸‰ï¼‰â€”â€”å•åŒé“¾è¡¨ã€æ ˆå’Œé˜Ÿåˆ—ã€é€’å½’å’ŒMasterå…¬å¼ã€å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨çš„ä½¿ç”¨å’Œæ€§èƒ½</title>
      <link href="/2022/03/03/zuo_system_study3/"/>
      <url>/2022/03/03/zuo_system_study3/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å•é“¾è¡¨ã€åŒé“¾è¡¨</p><p>æ ˆã€é˜Ÿåˆ—</p><p>é€’å½’çš„ç‰©ç†å®è´¨</p><p>è¯„ä¼°é€’å½’å¤æ‚åº¦çš„Masterå…¬å¼</p><p>å“ˆå¸Œè¡¨çš„ä½¿ç”¨å’Œæ€§èƒ½</p><p>æœ‰åºè¡¨çš„ä½¿ç”¨å’Œæ€§èƒ½</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>åè½¬å•é“¾è¡¨ã€åè½¬åŒé“¾è¡¨</p><p>åœ¨é“¾è¡¨ä¸­åˆ é™¤æŒ‡å®šå€¼çš„æ‰€æœ‰èŠ‚ç‚¹</p><p>ç”¨åŒé“¾è¡¨å®ç°æ ˆå’Œé˜Ÿåˆ—</p><p>ç”¨ç¯å½¢æ•°ç»„å®ç°æ ˆå’Œé˜Ÿåˆ—</p><p>å®ç°æœ‰getMinåŠŸèƒ½çš„æ ˆ</p><p>ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—</p><p>ä¸¤ä¸ªé˜Ÿåˆ—å®ç°æ ˆ</p><p>ç”¨é€’å½’è¡Œä¸ºå¾—åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼Œå¹¶ç”¨masterå…¬å¼æ¥ä¼°è®¡æ—¶é—´å¤æ‚åº¦</p><p>å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨ä½¿ç”¨çš„codeå±•ç¤º</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆäºŒï¼‰â€”â€”å¼‚æˆ–è¿ç®—ã€è¿›ä¸€æ­¥è®¤è¯†å¯¹æ•°å™¨çš„é‡è¦æ€§</title>
      <link href="/2022/03/02/zuo_system_study2/"/>
      <url>/2022/03/02/zuo_system_study2/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>å¼‚æˆ–è¿ç®—çš„æ€§è´¨</p><ul><li>^ å¯ç†è§£ä¸ºä¸è¿›ä½ç›¸åŠ </li><li>a^a&#x3D;0</li><li>a^0&#x3D;a</li></ul><p>å¼‚æˆ–è¿ç®—çš„é¢˜ç›®</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><h4 id="ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼"><a href="#ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼" class="headerlink" title="ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼"></a>ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">888</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">111</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;a:&quot;</span> + a + <span class="string">&quot; b:&quot;</span> + b);</span><br><span class="line"></span><br><span class="line">        a = a ^ b;</span><br><span class="line">        b = a ^ b;<span class="comment">//a ^ b ^ b</span></span><br><span class="line">        a = a ^ b;<span class="comment">//a ^ b ^ a</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;a:&quot;</span> + a + <span class="string">&quot; b:&quot;</span> + b);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a:888 b:111</span><br><span class="line">a:111 b:888</span><br></pre></td></tr></table></figure><h4 id="ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„å€¼"><a href="#ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„å€¼" class="headerlink" title="ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„å€¼"></a>ä¸ç”¨é¢å¤–å˜é‡äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªæ•°çš„å€¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swapArr</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        arr[i] = arr[i] ^ arr[j];</span><br><span class="line">        arr[j] = arr[i] ^ arr[j];</span><br><span class="line">        arr[i] = arr[i] ^ arr[j];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°éƒ½å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ€ä¹ˆæ‰¾åˆ°å¹¶æ‰“å°è¿™ç§æ•°"><a href="#ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°éƒ½å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ€ä¹ˆæ‰¾åˆ°å¹¶æ‰“å°è¿™ç§æ•°" class="headerlink" title="ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°éƒ½å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ€ä¹ˆæ‰¾åˆ°å¹¶æ‰“å°è¿™ç§æ•°"></a>ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸€ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°éƒ½å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ€ä¹ˆæ‰¾åˆ°å¹¶æ‰“å°è¿™ç§æ•°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printOddTimesNum1</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">eor</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">eor ^= arr[i];</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(eor);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€ä¹ˆæŠŠä¸€ä¸ªintç±»å‹çš„æ•°ï¼Œæå–å‡ºäºŒè¿›åˆ¶ä¸­æœ€å³ä¾§çš„1æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">mostRightOne</span> <span class="operator">=</span> pos &amp; (~pos + <span class="number">1</span>); </span><br><span class="line"><span class="comment">// mostRightOneå€¼åœ¨äºŒè¿›åˆ¶ä½ä¸Šçš„ä½æ¬¡å°±æ˜¯poså¾—æœ€å³ç¬¬ä¸€ä¸ª1çš„ä½ç½®</span></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸¤ç§æ•°å‡ºç°äº†å¥‡æ•°æ¬¡ï¼Œå…¶ä»–æ•°éƒ½å‡ºç°äº†å¶æ•°æ¬¡ï¼Œæ€ä¹ˆæ‰¾åˆ°å¹¶æ‰“å°è¿™ä¸¤ç§æ•° </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arrä¸­ï¼Œæœ‰ä¸¤ç§æ•°ï¼Œå‡ºç°å¥‡æ•°æ¬¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printOddTimesNum2</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">eor</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">eor ^= arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// a å’Œ bæ˜¯ä¸¤ç§æ•°</span></span><br><span class="line"><span class="comment">// eor != 0</span></span><br><span class="line"><span class="comment">// eoræœ€å³ä¾§çš„1ï¼Œæå–å‡ºæ¥</span></span><br><span class="line"><span class="type">int</span> <span class="variable">rightOne</span> <span class="operator">=</span> eor &amp; (-eor); <span class="comment">// æå–å‡ºæœ€å³çš„1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">onlyOne</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// eor&#x27;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; arr.length;i++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((arr[i] &amp; rightOne) != <span class="number">0</span>) &#123;</span><br><span class="line">onlyOne ^= arr[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(onlyOne + <span class="string">&quot; &quot;</span> + (eor ^ onlyOne));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªæ•°ç»„ä¸­æœ‰ä¸€ç§æ•°å‡ºç°Kæ¬¡ï¼Œå…¶ä»–æ•°éƒ½å‡ºç°äº†Mæ¬¡ï¼Œ<br>å·²çŸ¥M &gt; 1ï¼ŒK &lt; Mï¼Œæ‰¾åˆ°å‡ºç°äº†Kæ¬¡çš„æ•°<br>è¦æ±‚é¢å¤–ç©ºé—´å¤æ‚åº¦O(1)ï¼Œæ—¶é—´å¤æ‚åº¦O(N)</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ï¼ˆä¸€ï¼‰â€”â€”æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ã€å¯¹æ•°å™¨å’ŒäºŒåˆ†æ³•</title>
      <link href="/2022/03/01/zuo_system_study1/"/>
      <url>/2022/03/01/zuo_system_study1/</url>
      
        <content type="html"><![CDATA[<p>å†…å®¹ï¼š</p><p>è¯„ä¼°ç®—æ³•ä¼˜åŠ£çš„æ ¸å¿ƒæŒ‡æ ‡</p><p>æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ã€ä¼°ç®—æ–¹å¼ã€æ„ä¹‰</p><p>å¸¸æ•°æ—¶é—´çš„æ“ä½œ</p><p>é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€æ’å…¥æ’åº</p><p>æœ€ä¼˜è§£</p><p>å¯¹æ•°å™¨</p><p>äºŒåˆ†æ³•</p><span id="more"></span><p>é¢˜ç›®ï¼š</p><p>é€‰æ‹©æ’åºåŠå…¶å¯¹æ•°å™¨éªŒè¯</p><p>å†’æ³¡æ’åºåŠå…¶å¯¹æ•°å™¨éªŒè¯</p><p>æ’å…¥æ’åºåŠå…¶å¯¹æ•°å™¨éªŒè¯</p><p>æœ‰åºæ•°ç»„ä¸­æ‰¾åˆ°num</p><p>æœ‰åºæ•°ç»„ä¸­æ‰¾åˆ°&gt;&#x3D;numæœ€å·¦çš„ä½ç½®</p><p>æœ‰åºæ•°ç»„ä¸­æ‰¾åˆ°&lt;&#x3D;numæœ€å³çš„ä½ç½®</p><p>å±€éƒ¨æœ€å°å€¼é—®é¢˜<br>å®šä¹‰ä½•ä¸ºå±€éƒ¨æœ€å°å€¼ï¼š<br>arr[0] &lt; arr[1]ï¼Œ0ä½ç½®æ˜¯å±€éƒ¨æœ€å°ï¼›<br>arr[N-1] &lt; arr[N-2]ï¼ŒN-1ä½ç½®æ˜¯å±€éƒ¨æœ€å°ï¼›<br>arr[i-1] &gt; arr[i] &lt; arr[i+1]ï¼Œiä½ç½®æ˜¯å±€éƒ¨æœ€å°ï¼›<br>ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œå·²çŸ¥ä»»ä½•ä¸¤ä¸ªç›¸é‚»çš„æ•°éƒ½ä¸ç›¸ç­‰ï¼Œæ‰¾åˆ°éšä¾¿ä¸€ä¸ªå±€éƒ¨æœ€å°ä½ç½®è¿”å›</p>]]></content>
      
      
      <categories>
          
          <category> è¯¾ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> å·¦ç¨‹äº‘ç®—æ³•æ•°æ®ç»“æ„ä½“ç³»å­¦ä¹ ç­ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå¿«é€Ÿå…¥é—¨ä»¥åŠå¸¸ç”¨æŒ‡ä»¤</title>
      <link href="/2022/02/07/Vue_1_Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E4%BB%A5%E5%8F%8A%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
      <url>/2022/02/07/Vue_1_Vue%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E4%BB%A5%E5%8F%8A%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€Vue-å¿«é€Ÿå…¥é—¨"><a href="#1ã€Vue-å¿«é€Ÿå…¥é—¨" class="headerlink" title="1ã€Vue å¿«é€Ÿå…¥é—¨"></a>1ã€Vue å¿«é€Ÿå…¥é—¨</h3><h4 id="1-1ã€Vueçš„ä»‹ç»"><a href="#1-1ã€Vueçš„ä»‹ç»" class="headerlink" title="1.1ã€Vueçš„ä»‹ç»"></a>1.1ã€Vueçš„ä»‹ç»</h4><ul><li><p>Vueæ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼å‰ç«¯æ¡†æ¶ã€‚</p></li><li><p>åªå…³æ³¨è§†å›¾å±‚ï¼Œå¹¶ä¸”éå¸¸å®¹æ˜“å­¦ä¹ ï¼Œè¿˜å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸å…¶å®ƒåº“æˆ–å·²æœ‰é¡¹ç›®æ•´åˆã€‚</p></li><li><p>é€šè¿‡å°½å¯èƒ½ç®€å•çš„APIæ¥å®ç°å“åº”æ•°æ®çš„ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚</p></li></ul><span id="more"></span><ul><li>ç‰¹ç‚¹<br>æ˜“ç”¨ï¼šåœ¨æœ‰HTMLCSSJavaScriptçš„åŸºç¡€ä¸Šï¼Œå¿«é€Ÿä¸Šæ‰‹ã€‚<br>çµæ´»ï¼šç®€å•å°å·§çš„æ ¸å¿ƒï¼Œæ¸è¿›å¼æŠ€æœ¯æ ˆï¼Œè¶³ä»¥åº”ä»˜ä»»ä½•è§„æ¨¡çš„åº”ç”¨ã€‚<br>æ€§èƒ½ï¼š20kbmin+gzipè¿è¡Œå¤§å°ã€è¶…å¿«è™šæ‹ŸDOMã€æœ€çœå¿ƒçš„ä¼˜åŒ–ã€‚</li></ul><h4 id="1-2ã€Vueçš„å¿«é€Ÿå…¥é—¨"><a href="#1-2ã€Vueçš„å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.2ã€Vueçš„å¿«é€Ÿå…¥é—¨"></a>1.2ã€Vueçš„å¿«é€Ÿå…¥é—¨</h4><ul><li><strong>å¼€å‘æ­¥éª¤</strong></li></ul><ol><li>ä¸‹è½½å’Œå¼•å…¥vue.jsæ–‡ä»¶ã€‚</li><li>ç¼–å†™å…¥é—¨ç¨‹åºã€‚<br>è§†å›¾ï¼šè´Ÿè´£é¡µé¢æ¸²æŸ“ï¼Œä¸»è¦ç”±HTML+CSSæ„æˆã€‚<br>è„šæœ¬ï¼šè´Ÿè´£ä¸šåŠ¡æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ä»¥åŠæ•°æ®çš„å¤„ç†é€»è¾‘ã€‚</li></ol><ul><li><p><strong>ä»£ç å®ç°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å¿«é€Ÿå…¥é—¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;msg&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// è„šæœ¬</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">msg</span>:<span class="string">&quot;Hello Vue&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="1-3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£"><a href="#1-3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£" class="headerlink" title="1.3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£"></a>1.3ã€Vueå¿«é€Ÿå…¥é—¨è¯¦è§£</h4><ul><li><p>Vue æ ¸å¿ƒå¯¹è±¡ï¼šæ¯ä¸€ä¸ª Vue ç¨‹åºéƒ½æ˜¯ä»ä¸€ä¸ª Vue æ ¸å¿ƒå¯¹è±¡å¼€å§‹çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"> é€‰é¡¹åˆ—è¡¨;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>é€‰é¡¹åˆ—è¡¨<br>elé€‰é¡¹ï¼šç”¨äºæ¥æ”¶è·å–åˆ°é¡µé¢ä¸­çš„å…ƒç´ ã€‚(æ ¹æ®å¸¸ç”¨é€‰æ‹©å™¨è·å–)ã€‚<br>dataé€‰é¡¹ï¼šç”¨äºä¿å­˜å½“å‰Vueå¯¹è±¡ä¸­çš„æ•°æ®ã€‚åœ¨è§†å›¾ä¸­å£°æ˜çš„å˜é‡éœ€è¦åœ¨æ­¤å¤„èµ‹å€¼ã€‚<br>methodsé€‰é¡¹ï¼šç”¨äºå®šä¹‰æ–¹æ³•ã€‚æ–¹æ³•å¯ä»¥ç›´æ¥é€šè¿‡å¯¹è±¡åè°ƒç”¨ï¼Œthisä»£è¡¨å½“å‰Vueå¯¹è±¡ã€‚</p></li><li><p>æ•°æ®ç»‘å®š<br>åœ¨è§†å›¾éƒ¨åˆ†è·å–è„šæœ¬éƒ¨åˆ†çš„æ•°æ®ã€‚</p></li></ul><h4 id="1-4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§"><a href="#1-4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§" class="headerlink" title="1.4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§"></a>1.4ã€Vueå¿«é€Ÿå…¥é—¨çš„å‡çº§</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å¿«é€Ÿå…¥é—¨å‡çº§<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>å§“åï¼š&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>ç­çº§ï¼š&#123;&#123;classRoom&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;hi()&quot;</span>&gt;</span>æ‰“æ‹›å‘¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;update()&quot;</span>&gt;</span>ä¿®æ”¹ç­çº§<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/ &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// è„šæœ¬</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;<span class="comment">// vmå®ä¾‹åŒ–æ—¶ï¼Œä¼šå°†elå’Œdataé€‰é¡¹å˜ä¸ºvmçš„å±æ€§ï¼Œè¯­æ³•ï¼š$å±æ€§å</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,<span class="comment">// element:å…ƒç´ ï¼Œå°†idä¸ºdivçš„å…ƒç´ ä¸vueå®ä¾‹å¯¹è±¡è¿›è¡Œç»‘å®šï¼Œç»‘å®šä¹‹åï¼Œdivå†…éƒ¨å°±å¯ä»¥ä½¿ç”¨vueå®šä¹‰çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>:<span class="string">&quot;å¼ ä¸‰&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">classRoom</span>:<span class="string">&quot;ä¸‰å¹´ä¸€ç­&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">study</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;æ­£åœ¨&quot;</span> + <span class="variable language_">this</span>.<span class="property">classRoom</span> + <span class="string">&quot;å¥½å¥½å­¦ä¹ !&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//å®šä¹‰æ‰“æ‹›å‘¼æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">hi</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        vm.<span class="title function_">study</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//å®šä¹‰ä¿®æ”¹ç­çº§</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        vm.<span class="property">classRoom</span> = <span class="string">&quot;äº”å¹´å…«ç­&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="1-5ã€Vueå°ç»“"><a href="#1-5ã€Vueå°ç»“" class="headerlink" title="1.5ã€Vueå°ç»“"></a>1.5ã€Vueå°ç»“</h4><ul><li>Vueæ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼å‰ç«¯æ¡†æ¶ã€‚</li><li>Vueçš„ç¨‹åºåŒ…å«è§†å›¾å’Œè„šæœ¬ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ã€‚</li><li>è„šæœ¬éƒ¨åˆ†<ul><li>Vueæ ¸å¿ƒå¯¹è±¡ã€‚</li><li>é€‰é¡¹åˆ—è¡¨<ul><li>elï¼šæ¥æ”¶è·å–çš„å…ƒç´ ã€‚</li><li>dataï¼šä¿å­˜æ•°æ®ã€‚</li><li>methodsï¼šå®šä¹‰æ–¹æ³•ã€‚</li></ul></li></ul></li><li>è§†å›¾éƒ¨åˆ†<ul><li>æ•°æ®ç»‘å®šï¼š</li></ul></li></ul><h3 id="2ã€Vue-å¸¸ç”¨æŒ‡ä»¤"><a href="#2ã€Vue-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="2ã€Vue å¸¸ç”¨æŒ‡ä»¤"></a>2ã€Vue å¸¸ç”¨æŒ‡ä»¤</h3><h4 id="2-1ã€æŒ‡ä»¤ä»‹ç»"><a href="#2-1ã€æŒ‡ä»¤ä»‹ç»" class="headerlink" title="2.1ã€æŒ‡ä»¤ä»‹ç»"></a>2.1ã€æŒ‡ä»¤ä»‹ç»</h4><ul><li><p>æŒ‡ä»¤ï¼šæ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Šå±æ€§ï¼Œä¸åŒæŒ‡ä»¤å…·æœ‰ä¸åŒå«ä¹‰ã€‚ä¾‹å¦‚ v-htmlï¼Œv-ifï¼Œv-forã€‚</p></li><li><p>ä½¿ç”¨æŒ‡ä»¤æ—¶ï¼Œé€šå¸¸ç¼–å†™åœ¨æ ‡ç­¾çš„å±æ€§ä¸Šï¼Œå€¼å¯ä»¥ä½¿ç”¨ JS çš„è¡¨è¾¾å¼ã€‚</p></li><li><p>æŒ‡ä»¤ï¼švueæ¡†æ¶å®šä¹‰çš„ï¼Œä¸€äº›æ ‡ç­¾çš„è‡ªå®šä¹‰çš„å±æ€§ã€‚</p></li><li><p>å¸¸ç”¨æŒ‡ä»¤</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Vue1_1.png"></p></li></ul><h4 id="2-2ã€æ–‡æœ¬æ’å€¼"><a href="#2-2ã€æ–‡æœ¬æ’å€¼" class="headerlink" title="2.2ã€æ–‡æœ¬æ’å€¼"></a>2.2ã€æ–‡æœ¬æ’å€¼</h4><ul><li><p>v-htmlï¼šæŠŠæ–‡æœ¬è§£æä¸º HTML ä»£ç ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ–‡æœ¬æ’å€¼<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">msg</span>:<span class="string">&quot;&lt;b&gt;Hello Vue&lt;/b&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>é¡µé¢å±•ç¤ºï¼š</p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Vue1_2.png" alt="image-20220126133032882" style="zoom: 80%;" /><h4 id="2-3ã€ç»‘å®šå±æ€§"><a href="#2-3ã€ç»‘å®šå±æ€§" class="headerlink" title="2.3ã€ç»‘å®šå±æ€§"></a>2.3ã€ç»‘å®šå±æ€§</h4><ul><li><p>v-bindï¼šä¸º HTML æ ‡ç­¾ç»‘å®šå±æ€§å€¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç»‘å®šå±æ€§<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.my</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>ç™¾åº¦ä¸€ä¸‹<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>ç™¾åº¦ä¸€ä¸‹<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;cls&quot;</span>&gt;</span>æˆ‘æ˜¯div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&quot;https://www.baidu.com&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">cls</span>:<span class="string">&quot;my&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-4ã€æ¡ä»¶æ¸²æŸ“"><a href="#2-4ã€æ¡ä»¶æ¸²æŸ“" class="headerlink" title="2.4ã€æ¡ä»¶æ¸²æŸ“"></a>2.4ã€æ¡ä»¶æ¸²æŸ“</h4><ul><li><p>v-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“æŸå…ƒç´ ï¼Œåˆ¤å®šä¸ºçœŸæ—¶æ¸²æŸ“,å¦åˆ™ä¸æ¸²æŸ“ã€‚</p></li><li><p>v-elseï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚</p></li><li><p>v-else-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚</p></li><li><p>v-showï¼šæ ¹æ®æ¡ä»¶å±•ç¤ºæŸå…ƒç´ ï¼ŒåŒºåˆ«åœ¨äºåˆ‡æ¢çš„æ˜¯displayå±æ€§çš„å€¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ¡ä»¶æ¸²æŸ“<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ¤æ–­numçš„å€¼ï¼Œå¯¹3å–ä½™  ä½™æ•°ä¸º0æ˜¾ç¤ºdiv1  ä½™æ•°ä¸º1æ˜¾ç¤ºdiv2  ä½™æ•°ä¸º2æ˜¾ç¤ºdiv3 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;num % 3 == 0&quot;</span>&gt;</span>div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;num % 3 == 1&quot;</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>=<span class="string">&quot;num % 3 == 2&quot;</span>&gt;</span>div3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;flag&quot;</span>&gt;</span>div4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">num</span>:<span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">flag</span>:<span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-5ã€åˆ—è¡¨æ¸²æŸ“"><a href="#2-5ã€åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="2.5ã€åˆ—è¡¨æ¸²æŸ“"></a>2.5ã€åˆ—è¡¨æ¸²æŸ“</h4><ul><li><p>v-forï¼šåˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ—è¡¨æ¸²æŸ“<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(name,index) in names&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123;name&#125;&#125;&#123;&#123;index&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,key) in student&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123;value&#125;&#125;&#123;&#123;key&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">names</span>:[<span class="string">&quot;å¼ ä¸‰&quot;</span>,<span class="string">&quot;æå››&quot;</span>,<span class="string">&quot;ç‹äº”&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">student</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>:<span class="string">&quot;å¼ ä¸‰&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>:<span class="number">23</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>é¡µé¢å±•ç¤ºï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Vue1_3.png" alt="image-20220126141148834"></p><h4 id="2-6ã€äº‹ä»¶ç»‘å®š"><a href="#2-6ã€äº‹ä»¶ç»‘å®š" class="headerlink" title="2.6ã€äº‹ä»¶ç»‘å®š"></a>2.6ã€äº‹ä»¶ç»‘å®š</h4><ul><li><p>v-onï¼šä¸º HTML æ ‡ç­¾ç»‘å®šäº‹ä»¶ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>äº‹ä»¶ç»‘å®š<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;change()&quot;</span>&gt;</span>æ”¹å˜divçš„å†…å®¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:dblclick</span>=<span class="string">&quot;change()&quot;</span>&gt;</span>æ”¹å˜divçš„å†…å®¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;change()&quot;</span> &gt;</span>æ”¹å˜divçš„å†…å®¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>:<span class="string">&quot;ä¸æˆ–é&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">change</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;andornot&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;); </span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-7ã€è¡¨å•ç»‘å®š"><a href="#2-7ã€è¡¨å•ç»‘å®š" class="headerlink" title="2.7ã€è¡¨å•ç»‘å®š"></a>2.7ã€è¡¨å•ç»‘å®š</h4><ul><li><p><strong>è¡¨å•ç»‘å®š</strong><br>v-modelï¼šåœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚</p></li><li><p><strong>åŒå‘æ•°æ®ç»‘å®š</strong><br>æ›´æ–°dataæ•°æ®ï¼Œé¡µé¢ä¸­çš„æ•°æ®ä¹Ÿä¼šæ›´æ–°ã€‚<br>æ›´æ–°é¡µé¢æ•°æ®ï¼Œdataæ•°æ®ä¹Ÿä¼šæ›´æ–°ã€‚</p></li><li><p><strong>MVVMæ¨¡å‹(ModelViewViewModel)ï¼šæ˜¯MVCæ¨¡å¼çš„æ”¹è¿›ç‰ˆ</strong><br>åœ¨å‰ç«¯é¡µé¢ä¸­ï¼ŒJSå¯¹è±¡è¡¨ç¤ºModelï¼Œé¡µé¢è¡¨ç¤ºViewï¼Œä¸¤è€…åšåˆ°äº†æœ€å¤§é™åº¦çš„åˆ†ç¦»ã€‚<br>å°†Modelå’ŒViewå…³è”èµ·æ¥çš„å°±æ˜¯ViewModelï¼Œå®ƒæ˜¯æ¡¥æ¢ã€‚<br>ViewModelè´Ÿè´£æŠŠModelçš„æ•°æ®åŒæ­¥åˆ°Viewæ˜¾ç¤ºå‡ºæ¥ï¼Œè¿˜è´Ÿè´£æŠŠViewä¿®æ”¹çš„æ•°æ®åŒæ­¥å›Modelã€‚</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Vue1_4.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è¡¨å•ç»‘å®š<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- v-html &#123;&#123;&#125;&#125; å•å‘æ•°æ®ç»‘å®šï¼šæ•°æ®å˜åŒ–ä¼šå½±å“ç•Œé¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!-- v-model ï¼šåŒå‘æ•°æ®ç»‘å®šï¼Œæ•°æ®å˜åŒ–ä¼šå½±å“ç•Œé¢ï¼Œç”¨æˆ·ä¿®æ”¹ç•Œé¢å†…å®¹ä¼šå½±å“æ•°æ®</span></span><br><span class="line"><span class="comment">                 v-model åªèƒ½ç”¨åœ¨è¡¨å•æ§ä»¶ä¸­</span></span><br><span class="line"><span class="comment">            --&gt;</span></span><br><span class="line">            å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            å¹´é¾„ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#div&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">username</span>:<span class="string">&quot;å¼ ä¸‰&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>:<span class="number">23</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="2-8ã€å°ç»“"><a href="#2-8ã€å°ç»“" class="headerlink" title="2.8ã€å°ç»“"></a>2.8ã€å°ç»“</h4><ul><li><strong>æŒ‡ä»¤ï¼šæ˜¯å¸¦æœ‰v-å‰ç¼€çš„ç‰¹æ®Šå±æ€§ï¼Œä¸åŒæŒ‡ä»¤å…·æœ‰ä¸åŒå«ä¹‰ã€‚</strong></li><li><strong>æ–‡æœ¬æ’å€¼</strong><br>v-htmlï¼šæŠŠæ–‡æœ¬è§£æä¸ºHTMLä»£ç ã€‚</li><li><strong>ç»‘å®šå±æ€§</strong><br>v-bindï¼šä¸ºHTMLæ ‡ç­¾ç»‘å®šå±æ€§å€¼ã€‚</li><li><strong>æ¡ä»¶æ¸²æŸ“</strong><br>v-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“æŸå…ƒç´ ï¼Œåˆ¤å®šä¸ºçœŸæ—¶æ¸²æŸ“,å¦åˆ™ä¸æ¸²æŸ“ã€‚<br>v-elseï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚<br>v-else-ifï¼šæ¡ä»¶æ€§çš„æ¸²æŸ“ã€‚<br>v-showï¼šæ ¹æ®æ¡ä»¶å±•ç¤ºæŸå…ƒç´ ï¼ŒåŒºåˆ«åœ¨äºåˆ‡æ¢çš„æ˜¯displayå±æ€§çš„å€¼ã€‚</li><li><strong>åˆ—è¡¨æ¸²æŸ“</strong><br>v-forï¼šåˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§ã€‚</li><li><strong>äº‹ä»¶ç»‘å®š</strong><br>v-onï¼šä¸ºHTMLæ ‡ç­¾ç»‘å®šäº‹ä»¶ã€‚</li><li><strong>è¡¨å•ç»‘å®š</strong><br>v-modelï¼šåœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®šã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>prop() å’Œ attr() çš„åŒºåˆ«</title>
      <link href="/2022/01/28/jQuery_1_prop()%20%E5%92%8C%20attr()%20%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2022/01/28/jQuery_1_prop()%20%E5%92%8C%20attr()%20%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p>attrå’Œpropåˆ†åˆ«æ˜¯å•è¯attributeå’Œpropertyçš„ç¼©å†™ï¼Œå¹¶ä¸”å®ƒä»¬å‡è¡¨ç¤ºâ€å±æ€§â€çš„æ„æ€ã€‚</p><p>ä¸è¿‡ï¼Œåœ¨jQueryä¸­ï¼Œattributeå’Œpropertyå´æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µã€‚attributeè¡¨ç¤ºHTMLæ–‡æ¡£èŠ‚ç‚¹çš„å±æ€§ï¼Œpropertyè¡¨ç¤ºJSå¯¹è±¡çš„å±æ€§ã€‚</p><span id="more"></span><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿™é‡Œçš„idã€classã€data_idå‡æ˜¯è¯¥å…ƒç´ æ–‡æ¡£èŠ‚ç‚¹çš„attribute --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;message&quot;</span> <span class="attr">class</span>=<span class="string">&quot;test&quot;</span> <span class="attr">data_id</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// è¿™é‡Œçš„nameã€ageæ˜¯Personçš„property</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> <span class="title class_">Person</span> = &#123; <span class="attr">name</span>: <span class="string">&quot;å°æ˜&quot;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨jQueryä¸­ï¼Œprop()å‡½æ•°çš„è®¾è®¡ç›®æ ‡æ˜¯ç”¨äºè®¾ç½®æˆ–è·å–æŒ‡å®šDOMå…ƒç´ (æŒ‡çš„æ˜¯JSå¯¹è±¡ï¼ŒElementç±»å‹)ä¸Šçš„å±æ€§(property)ï¼›attr()å‡½æ•°çš„è®¾è®¡ç›®æ ‡æ˜¯ç”¨äºè®¾ç½®æˆ–è·å–æŒ‡å®šDOMå…ƒç´ æ‰€å¯¹åº”çš„æ–‡æ¡£èŠ‚ç‚¹ä¸Šçš„å±æ€§(attribute)ã€‚</p><p>æ­¤å¤–ï¼Œå¯¹äºè¡¨å•å…ƒç´ çš„checkedã€selectedã€disabledç­‰å±æ€§ï¼Œåœ¨jQuery 1.6ä¹‹å‰ï¼Œattr()è·å–è¿™äº›å±æ€§çš„è¿”å›å€¼ä¸ºBooleanç±»å‹ï¼šå¦‚æœè¢«é€‰ä¸­(æˆ–ç¦ç”¨)å°±è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p><table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>attr(name,[value])</td><td>è·å¾—&#x2F;è®¾ç½®å±æ€§çš„å€¼</td></tr><tr><td>prop(name,[value])</td><td>è·å¾—&#x2F;è®¾ç½®å±æ€§çš„å€¼ï¼ˆcheckedã€selectedã€disabledï¼‰</td></tr></tbody></table><ul><li>propä¸“é—¨ç”¨äºæ“ä½œå•é€‰æ¡†ï¼Œå¤é€‰æ¡†ï¼Œä¸‹æ‹‰åˆ—è¡¨</li></ul><p>ä½†æ˜¯ä»1.6å¼€å§‹ï¼Œä½¿ç”¨attr()è·å–è¿™äº›å±æ€§çš„è¿”å›å€¼ä¸ºStringç±»å‹ï¼Œå¦‚æœè¢«é€‰ä¸­(æˆ–ç¦ç”¨)å°±è¿”å›checkedã€selectedæˆ–disabledï¼Œå¦åˆ™(å³å…ƒç´ èŠ‚ç‚¹æ²¡æœ‰è¯¥å±æ€§)è¿”å›undefinedã€‚å¹¶ä¸”ï¼Œåœ¨æŸäº›ç‰ˆæœ¬ä¸­ï¼Œè¿™äº›å±æ€§å€¼è¡¨ç¤ºæ–‡æ¡£åŠ è½½æ—¶çš„åˆå§‹çŠ¶æ€å€¼ï¼Œå³ä½¿ä¹‹åæ›´æ”¹äº†è¿™äº›å…ƒç´ çš„é€‰ä¸­(æˆ–ç¦ç”¨)çŠ¶æ€ï¼Œå¯¹åº”çš„å±æ€§å€¼ä¹Ÿä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p><p>å› ä¸ºjQueryè®¤ä¸ºï¼šattributeçš„checkedã€selectedã€disabledå°±æ˜¯è¡¨ç¤ºè¯¥å±æ€§åˆå§‹çŠ¶æ€çš„å€¼ï¼Œpropertyçš„checkedã€selectedã€disabledæ‰è¡¨ç¤ºè¯¥å±æ€§å®æ—¶çŠ¶æ€çš„å€¼(å€¼ä¸ºtrueæˆ–false)ã€‚</p><p>å› æ­¤ï¼Œåœ¨jQuery 1.6åŠä»¥åç‰ˆæœ¬ä¸­ï¼Œè¯·ä½¿ç”¨prop()å‡½æ•°æ¥è®¾ç½®æˆ–è·å–checkedã€selectedã€disabledç­‰å±æ€§ã€‚å¯¹äºå…¶å®ƒèƒ½å¤Ÿç”¨prop()å®ç°çš„æ“ä½œï¼Œä¹Ÿå°½é‡ä½¿ç”¨prop()å‡½æ•°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// $(&#x27;button&#x27;).on(&#x27;click&#x27;,function()&#123;</span></span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// var r = $(&#x27;input&#x27;);</span></span></span><br><span class="line"><span class="language-javascript">    $(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">11</span>)</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> ($(<span class="string">&#x27;input&#x27;</span>).<span class="title function_">prop</span>(<span class="string">&#x27;checked&#x27;</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;input&#x27;</span>).<span class="title function_">prop</span>(<span class="string">&#x27;checked&#x27;</span>,<span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&#x27;input&#x27;</span>).<span class="title function_">prop</span>(<span class="string">&#x27;checked&#x27;</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> jQuery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤–è§‚æ•°åˆ—</title>
      <link href="/2022/01/19/DailyPracticing_18_%E5%A4%96%E8%A7%82%E6%95%B0%E5%88%97/"/>
      <url>/2022/01/19/DailyPracticing_18_%E5%A4%96%E8%A7%82%E6%95%B0%E5%88%97/</url>
      
        <content type="html"><![CDATA[<p>æœ‰ä¸€ä¸ªæ•°åˆ—A[n]ï¼Œä»A[0]å¼€å§‹æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ•°åˆ—ä¸­A[n+1]éƒ½æ˜¯A[n]çš„æè¿°ï¼Œå…¶ä¸­A[0]&#x3D;1ã€‚<br>è§„åˆ™å¦‚ä¸‹ï¼š</p><span id="more"></span><blockquote><p> A[0]:1</p><p> A[1]:11 å«ä¹‰å…¶ä¸­A[0]&#x3D;1æ˜¯1ä¸ª1 å³11</p><p> è¡¨ç¤ºA[0]ä»å·¦åˆ°å³è¿ç»­å‡ºç°äº†1æ¬¡1</p><p> A[2]:21 å«ä¹‰å…¶ä¸­A[1]&#x3D;11æ˜¯2ä¸ª1 å³21</p><p> è¡¨ç¤ºA[1]ä»å·¦åˆ°å³è¿ç»­å‡ºç°äº†2æ¬¡1</p><p> A[3]:1211 å«ä¹‰å…¶ä¸­A[2]ä»å·¦åˆ°å³æ˜¯ç”±ä¸€ä¸ª2å’Œä¸€ä¸ª1ç»„æˆ å³1211</p><p> è¡¨ç¤ºA[2]ä»å·¦åˆ°å³è¿ç»­å‡ºç°äº†ä¸€æ¬¡2åˆè¿ç»­å‡ºç°äº†ä¸€æ¬¡1</p><p> A[4]:111221  å«ä¹‰A[3]&#x3D;1211 ä»å·¦åˆ°å³æ˜¯ç”±ä¸€ä¸ª1å’Œä¸€ä¸ª2ä¸¤ä¸ª1 å³111221</p><p> è¡¨ç¤ºA[3]ä»å·¦åˆ°å³è¿ç»­å‡ºç°äº†ä¸€æ¬¡1åˆè¿ç»­å‡ºç°äº†ä¸€æ¬¡2åˆè¿ç»­å‡ºç°äº†2æ¬¡1</p></blockquote><p>æˆ‘çš„é¢˜è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">A</span><span class="params">(<span class="type">int</span> n)</span>&#123;</span><br><span class="line">       Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">       map.put(<span class="number">0</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">       map.put(<span class="number">1</span>,<span class="string">&quot;11&quot;</span>);</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">           <span class="type">char</span>[] chars = map.get(j-<span class="number">1</span>).toCharArray();</span><br><span class="line">           <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">           <span class="type">String</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">           <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (i==chars.length-<span class="number">1</span> &amp;&amp; chars[i] == chars[i-<span class="number">1</span>])&#123;</span><br><span class="line">                   num++;</span><br><span class="line">                   temp = temp + num + chars[i-<span class="number">1</span>];</span><br><span class="line">                   <span class="keyword">break</span>;</span><br><span class="line">               &#125;<span class="keyword">else</span> <span class="keyword">if</span> (chars[i] == chars[i-<span class="number">1</span>])&#123;</span><br><span class="line">                   num++;</span><br><span class="line">                   <span class="keyword">continue</span>;</span><br><span class="line">               &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i==chars.length-<span class="number">1</span> &amp;&amp; chars[i] != chars[i-<span class="number">1</span>])&#123;</span><br><span class="line">                   temp = temp + num + chars[i-<span class="number">1</span>];</span><br><span class="line">                   num=<span class="number">1</span>;</span><br><span class="line">                   temp = temp + num + chars[i];</span><br><span class="line">               &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                   temp = temp + num + chars[i-<span class="number">1</span>];</span><br><span class="line">                   num=<span class="number">1</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           map.put(j,temp);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> map.get(n);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><hr><p>çœ‹å®ŒåŠ›æ‰£åŸé¢˜é¢˜è§£åï¼Œå‘ç°ä½¿ç”¨<code>StringBuilder </code>ä»£æ›¿<code>String</code>è¿›è¡Œæ‹¼æ¥æ—¶ï¼Œæ•ˆç‡å¯ä»¥æé«˜å¾ˆå¤šï¼Œä¸¤è€…åŒºåˆ«å¯ä»¥çœ‹è¿™ä¸€ç¯‡<a href="https://daijing.online/2021/01/20/Java_1_String%E3%80%81StringBuffer%E5%92%8CStringBuilder/">Stringã€StringBufferå’ŒStringBuilderçš„åŒºåˆ« | ä¸æˆ–éâ€™s Blog (daijing.online)</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">countAndSay</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">       map.put(<span class="number">0</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">       map.put(<span class="number">1</span>,<span class="string">&quot;11&quot;</span>);</span><br><span class="line">       <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">           <span class="type">char</span>[] chars = map.get(j-<span class="number">1</span>).toCharArray();</span><br><span class="line">           <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">           <span class="type">StringBuilder</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">           <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">               <span class="keyword">if</span> (i==chars.length-<span class="number">1</span> &amp;&amp; chars[i] == chars[i-<span class="number">1</span>])&#123;</span><br><span class="line">                   num++;</span><br><span class="line">                   temp.append(num).append(chars[i-<span class="number">1</span>]);</span><br><span class="line">                  <span class="comment">// temp = temp + num + chars[i-1];</span></span><br><span class="line">                   <span class="keyword">break</span>;</span><br><span class="line">               &#125;<span class="keyword">else</span> <span class="keyword">if</span> (chars[i] == chars[i-<span class="number">1</span>])&#123;</span><br><span class="line">                   num++;</span><br><span class="line">                   <span class="keyword">continue</span>;</span><br><span class="line">               &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i==chars.length-<span class="number">1</span> &amp;&amp; chars[i] != chars[i-<span class="number">1</span>])&#123;</span><br><span class="line">                   temp.append(num).append(chars[i-<span class="number">1</span>]);</span><br><span class="line">                   <span class="comment">//temp = temp + num + chars[i-1];</span></span><br><span class="line">                   num=<span class="number">1</span>;</span><br><span class="line">                   temp.append(num).append(chars[i]);</span><br><span class="line">                   <span class="comment">//temp = temp + num + chars[i];</span></span><br><span class="line">               &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                   temp.append(num).append(chars[i-<span class="number">1</span>]);</span><br><span class="line">                  <span class="comment">// temp = temp + num + chars[i-1];</span></span><br><span class="line">                   num=<span class="number">1</span>;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           map.put(j,temp.toString());</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> map.get(n);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>å¦å¤–è¿˜æœ‰å·æ‡’è§£æ³•ï¼Œå°±æ˜¯ç›´æ¥æ‰“è¡¨ï¼Œæ‰§è¡Œæ•ˆç‡æœ€é«˜</p><p>æ¥è‡ªæœ‹å‹é¢è¯•åä¸ºçš„é¢˜ï¼Œåœ¨leetcodeä¸ŠåŸé¢˜ä¸ºå¤–è§‚æ•°åˆ—<a href="https://leetcode-cn.com/problems/count-and-say/">38. å¤–è§‚æ•°åˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ¯æ—¥ä¸€é¢˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> String </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaä¸­çš„substringå’ŒSQLä¸­substrçš„åŒºåˆ«</title>
      <link href="/2021/11/28/MySQL_13_Java%E4%B8%AD%E7%9A%84substring%E5%92%8CSQL%E4%B8%ADsubstr%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2021/11/28/MySQL_13_Java%E4%B8%AD%E7%9A%84substring%E5%92%8CSQL%E4%B8%ADsubstr%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p><strong>javaçš„substring(a,b)</strong><br>ä»ä¸‹æ ‡aå¼€å§‹ï¼Œæˆªå–åˆ°ä¸‹æ ‡bï¼Œå·¦é—­å³å¼€ï¼Œä¹Ÿå°±æ˜¯åŒ…å«ä¸‹æ ‡açš„å€¼ï¼Œä½†ä¸åŒ…å«ä¸‹æ ‡bçš„å€¼ã€‚</p><span id="more"></span> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">Str</span> <span class="operator">=</span> <span class="string">&quot;www.daijing.com&quot;</span>;</span><br><span class="line">System.out.println(Str.substring(<span class="number">4</span>,<span class="number">11</span>));</span><br><span class="line"></span><br><span class="line"> &gt;&gt; daijing</span><br></pre></td></tr></table></figure><p><strong>æˆ–è€…substring(a)</strong><br>å»é™¤ä»ä¸‹æ ‡0å¼€å§‹ï¼Œåˆ°ä¸‹æ ‡açš„è¿™ä¸€æ®µï¼Œè¿”å›å‰©ä¸‹çš„é‚£ä¸€æ®µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">Str</span> <span class="operator">=</span> <span class="string">&quot;www.daijing.com&quot;</span>;</span><br><span class="line">System.out.println(Str.substring(<span class="number">4</span>));</span><br><span class="line"></span><br><span class="line"> &gt;&gt; daijing.com</span><br></pre></td></tr></table></figure><p><strong>SQLä¸­çš„substr(str,a,b)</strong><br>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²<br>ç¬¬äºŒä¸ªå‚æ•°ï¼šä»å“ªé‡Œå¼€å§‹å– (ä¸‹æ ‡ä»1å¼€å§‹ï¼Œä¸æ˜¯0)<br>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå–å‡ ä½</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SUBSTR(&quot;www.daijing.com&quot; ,<span class="number">5</span>,<span class="number">7</span>);</span><br><span class="line"> <span class="operator">&gt;&gt;</span> daijing</span><br></pre></td></tr></table></figure><p>ä»5å¼€å§‹ï¼ŒåŒ…æ‹¬5ï¼Œè¿”å›å‰©ä¸‹çš„ä¸€æ®µ (ä¸‹æ ‡ä»1å¼€å§‹ï¼Œä¸æ˜¯0)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SUBSTR(&quot;www.daijing.com&quot; ,<span class="number">5</span>);</span><br><span class="line"> <span class="operator">&gt;&gt;</span> daijing.com</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é…ç½®ç±»WebMvcConfigï¼Œè®¾ç½®é™æ€èµ„æºæ˜ å°„</title>
      <link href="/2021/10/02/SpringMVC_1_WebMvcConfig/"/>
      <url>/2021/10/02/SpringMVC_1_WebMvcConfig/</url>
      
        <content type="html"><![CDATA[<p>ç”¨äºåœ¨Springbooté¡¹ç›®ä¸­, é»˜è®¤é™æ€èµ„æºçš„å­˜æ”¾ç›®å½•ä¸º : â€œclasspath:&#x2F;resources&#x2F;â€œ, â€œclasspath:&#x2F;static&#x2F;â€œ, â€œclasspath:&#x2F;public&#x2F;â€œ ; </p><p>å¦‚æœé¡¹ç›®ä¸­é™æ€èµ„æºå­˜æ”¾åœ¨å…¶ä»–ç›®å½•ä¸­, é‚£ä¹ˆè¿™ä¸ªæ—¶å€™è¦æƒ³è®¿é—®åˆ°é™æ€èµ„æº, å°±éœ€è¦è®¾ç½®é™æ€èµ„æºæ˜ å°„ã€‚</p><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcConfig</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®é™æ€èµ„æºæ˜ å°„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼€å§‹è¿›è¡Œé™æ€èµ„æºæ˜ å°„...&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/backend/**&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/backend/&quot;</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/front/**&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/front/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL é«˜çº§å‡½æ•°</title>
      <link href="/2021/09/21/MySQL_12_MySQL%20%E9%AB%98%E7%BA%A7%E5%87%BD%E6%95%B0/"/>
      <url>/2021/09/21/MySQL_12_MySQL%20%E9%AB%98%E7%BA%A7%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>MySQL å‡½æ•° â– é«˜çº§å‡½æ•°</p><span id="more"></span><table><thead><tr><th align="left">å‡½æ•°å</th><th align="left">æè¿°</th><th align="left">å®ä¾‹</th></tr></thead><tbody><tr><td align="left">BIN(x)</td><td align="left">è¿”å› x çš„äºŒè¿›åˆ¶ç¼–ç </td><td align="left">15 çš„ 2 è¿›åˆ¶ç¼–ç :<code>SELECT BIN(15); -- 1111</code></td></tr><tr><td align="left">BINARY(s)</td><td align="left">å°†å­—ç¬¦ä¸² s è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td align="left"><code>SELECT BINARY &quot;RUNOOB&quot;; -&gt; RUNOOB</code></td></tr><tr><td align="left"><code>CASE expression    WHEN condition1 THEN result1    WHEN condition2 THEN result2   ...    WHEN conditionN THEN resultN    ELSE result END</code></td><td align="left">CASE è¡¨ç¤ºå‡½æ•°å¼€å§‹ï¼ŒEND è¡¨ç¤ºå‡½æ•°ç»“æŸã€‚å¦‚æœ condition1 æˆç«‹ï¼Œåˆ™è¿”å› result1, å¦‚æœ condition2 æˆç«‹ï¼Œåˆ™è¿”å› result2ï¼Œå½“å…¨éƒ¨ä¸æˆç«‹åˆ™è¿”å› resultï¼Œè€Œå½“æœ‰ä¸€ä¸ªæˆç«‹ä¹‹åï¼Œåé¢çš„å°±ä¸æ‰§è¡Œäº†ã€‚</td><td align="left"><code>SELECT CASE  ã€€WHEN 1 &gt; 0 ã€€THEN &#39;1 &gt; 0&#39; ã€€WHEN 2 &gt; 0 ã€€THEN &#39;2 &gt; 0&#39; ã€€ELSE &#39;3 &gt; 0&#39; ã€€END -&gt;1 &gt; 0</code></td></tr><tr><td align="left">CAST(x AS type)</td><td align="left">è½¬æ¢æ•°æ®ç±»å‹</td><td align="left">å­—ç¬¦ä¸²æ—¥æœŸè½¬æ¢ä¸ºæ—¥æœŸï¼š<code>SELECT CAST(&quot;2017-08-29&quot; AS DATE); -&gt; 2017-08-29</code></td></tr><tr><td align="left">COALESCE(expr1, expr2, â€¦., expr_n)</td><td align="left">è¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºè¡¨è¾¾å¼ï¼ˆä»å·¦å‘å³ï¼‰</td><td align="left"><code>SELECT COALESCE(NULL, NULL, NULL, &#39;runoob.com&#39;, NULL, &#39;google.com&#39;); -&gt; runoob.com</code></td></tr><tr><td align="left">CONNECTION_ID()</td><td align="left">è¿”å›å”¯ä¸€çš„è¿æ¥ ID</td><td align="left"><code>SELECT CONNECTION_ID(); -&gt; 4292835</code></td></tr><tr><td align="left">CONV(x,f1,f2)</td><td align="left">è¿”å› f1 è¿›åˆ¶æ•°å˜æˆ f2 è¿›åˆ¶æ•°</td><td align="left"><code>SELECT CONV(15, 10, 2); -&gt; 1111</code></td></tr><tr><td align="left">CONVERT(s USING cs)</td><td align="left">å‡½æ•°å°†å­—ç¬¦ä¸² s çš„å­—ç¬¦é›†å˜æˆ cs</td><td align="left"><code>SELECT CHARSET(&#39;ABC&#39;) -&gt;utf-8     SELECT CHARSET(CONVERT(&#39;ABC&#39; USING gbk)) -&gt;gbk</code></td></tr><tr><td align="left">CURRENT_USER()</td><td align="left">è¿”å›å½“å‰ç”¨æˆ·</td><td align="left"><code>SELECT CURRENT_USER(); -&gt; guest@%</code></td></tr><tr><td align="left">DATABASE()</td><td align="left">è¿”å›å½“å‰æ•°æ®åº“å</td><td align="left"><code>SELECT DATABASE();    -&gt; runoob</code></td></tr><tr><td align="left">IF(expr,v1,v2)</td><td align="left">å¦‚æœè¡¨è¾¾å¼ expr æˆç«‹ï¼Œè¿”å›ç»“æœ v1ï¼›å¦åˆ™ï¼Œè¿”å›ç»“æœ v2ã€‚</td><td align="left"><code>SELECT IF(1 &gt; 0,&#39;æ­£ç¡®&#39;,&#39;é”™è¯¯&#39;)     -&gt;æ­£ç¡®</code></td></tr><tr><td align="left"><a href="https://www.runoob.com/mysql/mysql-func-ifnull.html">IFNULL(v1,v2)</a></td><td align="left">å¦‚æœ v1 çš„å€¼ä¸ä¸º NULLï¼Œåˆ™è¿”å› v1ï¼Œå¦åˆ™è¿”å› v2ã€‚</td><td align="left"><code>SELECT IFNULL(null,&#39;Hello Word&#39;) -&gt;Hello Word</code></td></tr><tr><td align="left">ISNULL(expression)</td><td align="left">åˆ¤æ–­è¡¨è¾¾å¼æ˜¯å¦ä¸º NULL</td><td align="left"><code>SELECT ISNULL(NULL); -&gt;1</code></td></tr><tr><td align="left">LAST_INSERT_ID()</td><td align="left">è¿”å›æœ€è¿‘ç”Ÿæˆçš„ AUTO_INCREMENT å€¼</td><td align="left"><code>SELECT LAST_INSERT_ID(); -&gt;6</code></td></tr><tr><td align="left">NULLIF(expr1, expr2)</td><td align="left">æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸² expr1 ä¸ expr2 ç›¸ç­‰ è¿”å› NULLï¼Œå¦åˆ™è¿”å› expr1</td><td align="left"><code>SELECT NULLIF(25, 25); -&gt;</code></td></tr><tr><td align="left">SESSION_USER()</td><td align="left">è¿”å›å½“å‰ç”¨æˆ·</td><td align="left"><code>SELECT SESSION_USER(); -&gt; guest@%</code></td></tr><tr><td align="left">SYSTEM_USER()</td><td align="left">è¿”å›å½“å‰ç”¨æˆ·</td><td align="left"><code>SELECT SYSTEM_USER(); -&gt; guest@%</code></td></tr><tr><td align="left">USER()</td><td align="left">è¿”å›å½“å‰ç”¨æˆ·</td><td align="left"><code>SELECT USER(); -&gt; guest@%</code></td></tr><tr><td align="left">VERSION()</td><td align="left">è¿”å›æ•°æ®åº“çš„ç‰ˆæœ¬å·</td><td align="left"><code>SELECT VERSION() -&gt; 5.6.34</code></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL æ—¥æœŸå‡½æ•°</title>
      <link href="/2021/09/20/MySQL_11_MySQL%20%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0/"/>
      <url>/2021/09/20/MySQL_11_MySQL%20%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>MySQL å‡½æ•° â– æ—¥æœŸå‡½æ•°</p><span id="more"></span><table><thead><tr><th align="left">å‡½æ•°å</th><th align="left">æè¿°</th><th align="left">å®ä¾‹</th></tr></thead><tbody><tr><td align="left">ADDDATE(d,n)</td><td align="left">è®¡ç®—èµ·å§‹æ—¥æœŸ d åŠ ä¸Š n å¤©çš„æ—¥æœŸ</td><td align="left"><code>SELECT ADDDATE(&quot;2017-06-15&quot;, INTERVAL 10 DAY); -&gt;2017-06-25</code></td></tr><tr><td align="left">ADDTIME(t,n)</td><td align="left">n æ˜¯ä¸€ä¸ªæ—¶é—´è¡¨è¾¾å¼ï¼Œæ—¶é—´ t åŠ ä¸Šæ—¶é—´è¡¨è¾¾å¼ n</td><td align="left">åŠ  5 ç§’ï¼š<code>SELECT ADDTIME(&#39;2011-11-11 11:11:11&#39;, 5); -&gt;2011-11-11 11:11:16 (ç§’)</code>æ·»åŠ  2 å°æ—¶, 10 åˆ†é’Ÿ, 5 ç§’:<code>SELECT ADDTIME(&quot;2020-06-15 09:34:21&quot;, &quot;2:10:5&quot;);  -&gt; 2020-06-15 11:44:26</code></td></tr><tr><td align="left">CURDATE()</td><td align="left">è¿”å›å½“å‰æ—¥æœŸ</td><td align="left"><code>SELECT CURDATE(); -&gt; 2018-09-19</code></td></tr><tr><td align="left">CURRENT_DATE()</td><td align="left">è¿”å›å½“å‰æ—¥æœŸ</td><td align="left"><code>SELECT CURRENT_DATE(); -&gt; 2018-09-19</code></td></tr><tr><td align="left">CURRENT_TIME</td><td align="left">è¿”å›å½“å‰æ—¶é—´</td><td align="left"><code>SELECT CURRENT_TIME(); -&gt; 19:59:02</code></td></tr><tr><td align="left">CURRENT_TIMESTAMP()</td><td align="left">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td align="left"><code>SELECT CURRENT_TIMESTAMP() -&gt; 2018-09-19 20:57:43</code></td></tr><tr><td align="left">CURTIME()</td><td align="left">è¿”å›å½“å‰æ—¶é—´</td><td align="left"><code>SELECT CURTIME(); -&gt; 19:59:02</code></td></tr><tr><td align="left">DATE()</td><td align="left">ä»æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ä¸­æå–æ—¥æœŸå€¼</td><td align="left"><code>SELECT DATE(&quot;2017-06-15&quot;);     -&gt; 2017-06-15</code></td></tr><tr><td align="left">DATEDIFF(d1,d2)</td><td align="left">è®¡ç®—æ—¥æœŸ d1-&gt;d2 ä¹‹é—´ç›¸éš”çš„å¤©æ•°</td><td align="left"><code>SELECT DATEDIFF(&#39;2001-01-01&#39;,&#39;2001-02-02&#39;) -&gt; -32</code></td></tr><tr><td align="left">DATE_ADD(dï¼ŒINTERVAL expr type)</td><td align="left">è®¡ç®—èµ·å§‹æ—¥æœŸ d åŠ ä¸Šä¸€ä¸ªæ—¶é—´æ®µåçš„æ—¥æœŸï¼Œtype å€¼å¯ä»¥æ˜¯ï¼š<br>MICROSECOND<br>SECOND<br/>MINUTE<br/>HOUR<br/>DAY<br/>WEEK<br/>MONTH<br/>QUARTER<br/>YEAR<br/>SECOND_MICROSECOND<br/>MINUTE_MICROSECOND<br/>MINUTE_SECOND<br/>HOUR_MICROSECOND<br/>HOUR_SECOND<br/>HOUR_MINUTE<br/>DAY_MICROSECOND<br/>DAY_SECOND<br/>DAY_MINUTE<br/>DAY_HOUR<br/>YEAR_MONTH</td><td align="left"><code>SELECT DATE_ADD(&quot;2017-06-15&quot;, INTERVAL 10 DAY);     -&gt; 2017-06-25</code> <br/><code>SELECT DATE_ADD(&quot;2017-06-15 09:34:21&quot;, INTERVAL 15 MINUTE); -&gt; 2017-06-15 09:49:21</code> <br/> <code>SELECT DATE_ADD(&quot;2017-06-15 09:34:21&quot;, INTERVAL -3 HOUR); -&gt;2017-06-15 06:34:21 SELECT DATE_ADD(&quot;2017-06-15 09:34:21&quot;, INTERVAL -3 MONTH); -&gt;2017-04-15</code></td></tr><tr><td align="left">DATE_FORMAT(d,f)</td><td align="left">æŒ‰è¡¨è¾¾å¼ fçš„è¦æ±‚æ˜¾ç¤ºæ—¥æœŸ d</td><td align="left"><code>SELECT DATE_FORMAT(&#39;2011-11-11 11:11:11&#39;,&#39;%Y-%m-%d %r&#39;) -&gt; 2011-11-11 11:11:11 AM</code></td></tr><tr><td align="left">DATE_SUB(date,INTERVAL expr type)</td><td align="left">å‡½æ•°ä»æ—¥æœŸå‡å»æŒ‡å®šçš„æ—¶é—´é—´éš”ã€‚</td><td align="left">Orders è¡¨ä¸­ OrderDate å­—æ®µå‡å» 2 å¤©ï¼š<code>SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders</code></td></tr><tr><td align="left">DAY(d)</td><td align="left">è¿”å›æ—¥æœŸå€¼ d çš„æ—¥æœŸéƒ¨åˆ†</td><td align="left"><code>SELECT DAY(&quot;2017-06-15&quot;);   -&gt; 15</code></td></tr><tr><td align="left">DAYNAME(d)</td><td align="left">è¿”å›æ—¥æœŸ d æ˜¯æ˜ŸæœŸå‡ ï¼Œå¦‚ Monday,Tuesday</td><td align="left"><code>SELECT DAYNAME(&#39;2011-11-11 11:11:11&#39;) -&gt;Friday</code></td></tr><tr><td align="left">DAYOFMONTH(d)</td><td align="left">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬æœˆçš„ç¬¬å‡ å¤©</td><td align="left"><code>SELECT DAYOFMONTH(&#39;2011-11-11 11:11:11&#39;) -&gt;11</code></td></tr><tr><td align="left">DAYOFWEEK(d)</td><td align="left">æ—¥æœŸ d ä»Šå¤©æ˜¯æ˜ŸæœŸå‡ ï¼Œ1 æ˜ŸæœŸæ—¥ï¼Œ2 æ˜ŸæœŸä¸€ï¼Œä»¥æ­¤ç±»æ¨</td><td align="left"><code>SELECT DAYOFWEEK(&#39;2011-11-11 11:11:11&#39;) -&gt;6</code></td></tr><tr><td align="left">DAYOFYEAR(d)</td><td align="left">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ å¤©</td><td align="left"><code>SELECT DAYOFYEAR(&#39;2011-11-11 11:11:11&#39;) -&gt;315</code></td></tr><tr><td align="left">EXTRACT(type FROM d)</td><td align="left">ä»æ—¥æœŸ d ä¸­è·å–æŒ‡å®šçš„å€¼ï¼Œtype æŒ‡å®šè¿”å›çš„å€¼ã€‚ typeå¯å–å€¼ä¸ºï¼š<br/>MICROSECOND<br/>SECOND<br/>MINUTE<br/>HOUR<br/>DAY<br/>WEEK<br/>MONTH<br/>QUARTER<br/>YEAR<br/>SECOND_MICROSECOND<br/>MINUTE_MICROSECOND<br/>MINUTE_SECOND<br/>HOUR_MICROSECOND<br/>HOUR_SECOND<br/>HOUR_MINUTE<br/>DAY_MICROSECOND<br/>DAY_SECOND<br/>DAY_MINUTE<br/>DAY_HOUR<br/>YEAR_MONTH</td><td align="left"><code>SELECT EXTRACT(MINUTE FROM &#39;2011-11-11 11:11:11&#39;)  -&gt; 11</code></td></tr><tr><td align="left">FROM_DAYS(n)</td><td align="left">è®¡ç®—ä» 0000 å¹´ 1 æœˆ 1 æ—¥å¼€å§‹ n å¤©åçš„æ—¥æœŸ</td><td align="left"><code>SELECT FROM_DAYS(1111) -&gt; 0003-01-16</code></td></tr><tr><td align="left">HOUR(t)</td><td align="left">è¿”å› t ä¸­çš„å°æ—¶å€¼</td><td align="left"><code>SELECT HOUR(&#39;1:2:3&#39;) -&gt; 1</code></td></tr><tr><td align="left">LAST_DAY(d)</td><td align="left">è¿”å›ç»™ç»™å®šæ—¥æœŸçš„é‚£ä¸€æœˆä»½çš„æœ€åä¸€å¤©</td><td align="left"><code>SELECT LAST_DAY(&quot;2017-06-20&quot;); -&gt; 2017-06-30</code></td></tr><tr><td align="left">LOCALTIME()</td><td align="left">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td align="left"><code>SELECT LOCALTIME() -&gt; 2018-09-19 20:57:43</code></td></tr><tr><td align="left">LOCALTIMESTAMP()</td><td align="left">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td align="left"><code>SELECT LOCALTIMESTAMP() -&gt; 2018-09-19 20:57:43</code></td></tr><tr><td align="left">MAKEDATE(year, day-of-year)</td><td align="left">åŸºäºç»™å®šå‚æ•°å¹´ä»½ year å’Œæ‰€åœ¨å¹´ä¸­çš„å¤©æ•°åºå· day-of-year è¿”å›ä¸€ä¸ªæ—¥æœŸ</td><td align="left"><code>SELECT MAKEDATE(2017, 3); -&gt; 2017-01-03</code></td></tr><tr><td align="left">MAKETIME(hour, minute, second)</td><td align="left">ç»„åˆæ—¶é—´ï¼Œå‚æ•°åˆ†åˆ«ä¸ºå°æ—¶ã€åˆ†é’Ÿã€ç§’</td><td align="left"><code>SELECT MAKETIME(11, 35, 4); -&gt; 11:35:04</code></td></tr><tr><td align="left">MICROSECOND(date)</td><td align="left">è¿”å›æ—¥æœŸå‚æ•°æ‰€å¯¹åº”çš„å¾®ç§’æ•°</td><td align="left"><code>SELECT MICROSECOND(&quot;2017-06-20 09:34:00.000023&quot;); -&gt; 23</code></td></tr><tr><td align="left">MINUTE(t)</td><td align="left">è¿”å› t ä¸­çš„åˆ†é’Ÿå€¼</td><td align="left"><code>SELECT MINUTE(&#39;1:2:3&#39;) -&gt; 2</code></td></tr><tr><td align="left">MONTHNAME(d)</td><td align="left">è¿”å›æ—¥æœŸå½“ä¸­çš„æœˆä»½åç§°ï¼Œå¦‚ November</td><td align="left"><code>SELECT MONTHNAME(&#39;2011-11-11 11:11:11&#39;) -&gt; November</code></td></tr><tr><td align="left">MONTH(d)</td><td align="left">è¿”å›æ—¥æœŸdä¸­çš„æœˆä»½å€¼ï¼Œ1 åˆ° 12</td><td align="left"><code>SELECT MONTH(&#39;2011-11-11 11:11:11&#39;) -&gt;11</code></td></tr><tr><td align="left">NOW()</td><td align="left">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td align="left"><code>SELECT NOW() -&gt; 2018-09-19 20:57:43</code></td></tr><tr><td align="left">PERIOD_ADD(period, number)</td><td align="left">ä¸º å¹´-æœˆ ç»„åˆæ—¥æœŸæ·»åŠ ä¸€ä¸ªæ—¶æ®µ</td><td align="left"><code>SELECT PERIOD_ADD(201703, 5);    -&gt; 201708</code></td></tr><tr><td align="left">PERIOD_DIFF(period1, period2)</td><td align="left">è¿”å›ä¸¤ä¸ªæ—¶æ®µä¹‹é—´çš„æœˆä»½å·®å€¼</td><td align="left"><code>SELECT PERIOD_DIFF(201710, 201703); -&gt; 7</code></td></tr><tr><td align="left">QUARTER(d)</td><td align="left">è¿”å›æ—¥æœŸdæ˜¯ç¬¬å‡ å­£èŠ‚ï¼Œè¿”å› 1 åˆ° 4</td><td align="left"><code>SELECT QUARTER(&#39;2011-11-11 11:11:11&#39;) -&gt; 4</code></td></tr><tr><td align="left">SECOND(t)</td><td align="left">è¿”å› t ä¸­çš„ç§’é’Ÿå€¼</td><td align="left"><code>SELECT SECOND(&#39;1:2:3&#39;) -&gt; 3</code></td></tr><tr><td align="left">SEC_TO_TIME(s)</td><td align="left">å°†ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´ s è½¬æ¢ä¸ºæ—¶åˆ†ç§’çš„æ ¼å¼</td><td align="left"><code>SELECT SEC_TO_TIME(4320) -&gt; 01:12:00</code></td></tr><tr><td align="left">STR_TO_DATE(string, format_mask)</td><td align="left">å°†å­—ç¬¦ä¸²è½¬å˜ä¸ºæ—¥æœŸ</td><td align="left"><code>SELECT STR_TO_DATE(&quot;August 10 2017&quot;, &quot;%M %d %Y&quot;); -&gt; 2017-08-10</code></td></tr><tr><td align="left">SUBDATE(d,n)</td><td align="left">æ—¥æœŸ d å‡å» n å¤©åçš„æ—¥æœŸ</td><td align="left"><code>SELECT SUBDATE(&#39;2011-11-11 11:11:11&#39;, 1) -&gt;2011-11-10 11:11:11 (é»˜è®¤æ˜¯å¤©)</code></td></tr><tr><td align="left">SUBTIME(t,n)</td><td align="left">æ—¶é—´ t å‡å» n ç§’çš„æ—¶é—´</td><td align="left"><code>SELECT SUBTIME(&#39;2011-11-11 11:11:11&#39;, 5) -&gt;2011-11-11 11:11:06 (ç§’)</code></td></tr><tr><td align="left">SYSDATE()</td><td align="left">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td align="left"><code>SELECT SYSDATE() -&gt; 2018-09-19 20:57:43</code></td></tr><tr><td align="left">TIME(expression)</td><td align="left">æå–ä¼ å…¥è¡¨è¾¾å¼çš„æ—¶é—´éƒ¨åˆ†</td><td align="left"><code>SELECT TIME(&quot;19:30:10&quot;); -&gt; 19:30:10</code></td></tr><tr><td align="left">TIME_FORMAT(t,f)</td><td align="left">æŒ‰è¡¨è¾¾å¼ f çš„è¦æ±‚æ˜¾ç¤ºæ—¶é—´ t</td><td align="left"><code>SELECT TIME_FORMAT(&#39;11:11:11&#39;,&#39;%r&#39;) 11:11:11 AM</code></td></tr><tr><td align="left">TIME_TO_SEC(t)</td><td align="left">å°†æ—¶é—´ t è½¬æ¢ä¸ºç§’</td><td align="left"><code>SELECT TIME_TO_SEC(&#39;1:12:00&#39;) -&gt; 4320</code></td></tr><tr><td align="left">TIMEDIFF(time1, time2)</td><td align="left">è®¡ç®—æ—¶é—´å·®å€¼</td><td align="left"><code>mysql&gt; SELECT TIMEDIFF(&quot;13:10:11&quot;, &quot;13:10:10&quot;); -&gt; 00:00:01 mysql&gt; SELECT TIMEDIFF(&#39;2000:01:01 00:00:00&#39;,    -&gt;                 &#39;2000:01:01 00:00:00.000001&#39;);        -&gt; &#39;-00:00:00.000001&#39; mysql&gt; SELECT TIMEDIFF(&#39;2008-12-31 23:59:59.000001&#39;,    -&gt;                 &#39;2008-12-30 01:01:01.000002&#39;);        -&gt; &#39;46:58:57.999999&#39;</code></td></tr><tr><td align="left">TIMESTAMP(expression, interval)</td><td align="left">å•ä¸ªå‚æ•°æ—¶ï¼Œå‡½æ•°è¿”å›æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ï¼›æœ‰2ä¸ªå‚æ•°æ—¶ï¼Œå°†å‚æ•°åŠ å’Œ</td><td align="left"><code>mysql&gt; SELECT TIMESTAMP(&quot;2017-07-23&quot;,  &quot;13:10:11&quot;); -&gt; 2017-07-23 13:10:11 mysql&gt; SELECT TIMESTAMP(&#39;2003-12-31&#39;);        -&gt; &#39;2003-12-31 00:00:00&#39; mysql&gt; SELECT TIMESTAMP(&#39;2003-12-31 12:00:00&#39;,&#39;12:00:00&#39;);        -&gt; &#39;2004-01-01 00:00:00&#39;</code></td></tr><tr><td align="left">TIMESTAMPDIFF<br/>(unit,datetime_expr1,datetime_expr2)</td><td align="left">è®¡ç®—æ—¶é—´å·®ï¼Œè¿”å› datetime_expr2 âˆ’ datetime_expr1 çš„æ—¶é—´å·®</td><td align="left"><code>mysql&gt; SELECT TIMESTAMPDIFF(DAY,&#39;2003-02-01&#39;,&#39;2003-05-01&#39;);   // è®¡ç®—ä¸¤ä¸ªæ—¶é—´ç›¸éš”å¤šå°‘å¤©        -&gt; 89 mysql&gt; SELECT TIMESTAMPDIFF(MONTH,&#39;2003-02-01&#39;,&#39;2003-05-01&#39;);   // è®¡ç®—ä¸¤ä¸ªæ—¶é—´ç›¸éš”å¤šå°‘æœˆ        -&gt; 3 mysql&gt; SELECT TIMESTAMPDIFF(YEAR,&#39;2002-05-01&#39;,&#39;2001-01-01&#39;);    // è®¡ç®—ä¸¤ä¸ªæ—¶é—´ç›¸éš”å¤šå°‘å¹´        -&gt; -1 mysql&gt; SELECT TIMESTAMPDIFF(MINUTE,&#39;2003-02-01&#39;,&#39;2003-05-01 12:05:55&#39;);  // è®¡ç®—ä¸¤ä¸ªæ—¶é—´ç›¸éš”å¤šå°‘åˆ†é’Ÿ        -&gt; 128885</code></td></tr><tr><td align="left">TO_DAYS(d)</td><td align="left">è®¡ç®—æ—¥æœŸ d è·ç¦» 0000 å¹´ 1 æœˆ 1 æ—¥çš„å¤©æ•°</td><td align="left"><code>SELECT TO_DAYS(&#39;0001-01-01 01:01:01&#39;) -&gt; 366</code></td></tr><tr><td align="left">WEEK(d)</td><td align="left">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼ŒèŒƒå›´æ˜¯ 0 åˆ° 53</td><td align="left"><code>SELECT WEEK(&#39;2011-11-11 11:11:11&#39;) -&gt; 45</code></td></tr><tr><td align="left">WEEKDAY(d)</td><td align="left">æ—¥æœŸ d æ˜¯æ˜ŸæœŸå‡ ï¼Œ0 è¡¨ç¤ºæ˜ŸæœŸä¸€ï¼Œ1 è¡¨ç¤ºæ˜ŸæœŸäºŒ</td><td align="left"><code>SELECT WEEKDAY(&quot;2017-06-15&quot;); -&gt; 3</code></td></tr><tr><td align="left">WEEKOFYEAR(d)</td><td align="left">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼ŒèŒƒå›´æ˜¯ 0 åˆ° 53</td><td align="left"><code>SELECT WEEKOFYEAR(&#39;2011-11-11 11:11:11&#39;) -&gt; 45</code></td></tr><tr><td align="left">YEAR(d)</td><td align="left">è¿”å›å¹´ä»½</td><td align="left"><code>SELECT YEAR(&quot;2017-06-15&quot;); -&gt; 2017</code></td></tr><tr><td align="left">YEARWEEK(date, mode)</td><td align="left">è¿”å›å¹´ä»½åŠç¬¬å‡ å‘¨ï¼ˆ0åˆ°53ï¼‰ï¼Œmode ä¸­ 0 è¡¨ç¤ºå‘¨å¤©ï¼Œ1è¡¨ç¤ºå‘¨ä¸€ï¼Œä»¥æ­¤ç±»æ¨</td><td align="left"><code>SELECT YEARWEEK(&quot;2017-06-15&quot;); -&gt; 201724</code></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL æ•°å­—å‡½æ•°</title>
      <link href="/2021/09/19/MySQL_10_MySQL%20%E6%95%B0%E5%AD%97%E5%87%BD%E6%95%B0/"/>
      <url>/2021/09/19/MySQL_10_MySQL%20%E6%95%B0%E5%AD%97%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>MySQL å‡½æ•° â– æ•°å­—å‡½æ•°</p><span id="more"></span><table><thead><tr><th align="left">å‡½æ•°å</th><th align="left">æè¿°</th><th align="left">å®ä¾‹</th></tr></thead><tbody><tr><td align="left">ABS(x)</td><td align="left">è¿”å› x çš„ç»å¯¹å€¼</td><td align="left">è¿”å› -1 çš„ç»å¯¹å€¼ï¼š<code>SELECT ABS(-1) -- è¿”å›1</code></td></tr><tr><td align="left">ACOS(x)</td><td align="left">æ±‚ x çš„åä½™å¼¦å€¼ï¼ˆå•ä½ä¸ºå¼§åº¦ï¼‰ï¼Œx ä¸ºä¸€ä¸ªæ•°å€¼</td><td align="left"><code>SELECT ACOS(0.25);</code></td></tr><tr><td align="left">ASIN(x)</td><td align="left">æ±‚åæ­£å¼¦å€¼ï¼ˆå•ä½ä¸ºå¼§åº¦ï¼‰ï¼Œx ä¸ºä¸€ä¸ªæ•°å€¼</td><td align="left"><code>SELECT ASIN(0.25);</code></td></tr><tr><td align="left">ATAN(x)</td><td align="left">æ±‚åæ­£åˆ‡å€¼ï¼ˆå•ä½ä¸ºå¼§åº¦ï¼‰ï¼Œx ä¸ºä¸€ä¸ªæ•°å€¼</td><td align="left"><code>SELECT ATAN(2.5);</code></td></tr><tr><td align="left">ATAN2(n, m)</td><td align="left">æ±‚åæ­£åˆ‡å€¼ï¼ˆå•ä½ä¸ºå¼§åº¦ï¼‰</td><td align="left"><code>SELECT ATAN2(-0.8, 2);</code></td></tr><tr><td align="left">AVG(expression)</td><td align="left">è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼çš„å¹³å‡å€¼ï¼Œexpression æ˜¯ä¸€ä¸ªå­—æ®µ</td><td align="left">è¿”å› Products è¡¨ä¸­Price å­—æ®µçš„å¹³å‡å€¼ï¼š<code>SELECT AVG(Price) AS AveragePrice FROM Products;</code></td></tr><tr><td align="left">CEIL(x)</td><td align="left">è¿”å›å¤§äºæˆ–ç­‰äº x çš„æœ€å°æ•´æ•°</td><td align="left"><code>SELECT CEIL(1.5) -- è¿”å›2</code></td></tr><tr><td align="left">CEILING(x)</td><td align="left">è¿”å›å¤§äºæˆ–ç­‰äº x çš„æœ€å°æ•´æ•°</td><td align="left"><code>SELECT CEILING(1.5); -- è¿”å›2</code></td></tr><tr><td align="left">COS(x)</td><td align="left">æ±‚ä½™å¼¦å€¼(å‚æ•°æ˜¯å¼§åº¦)</td><td align="left"><code>SELECT COS(2);</code></td></tr><tr><td align="left">COT(x)</td><td align="left">æ±‚ä½™åˆ‡å€¼(å‚æ•°æ˜¯å¼§åº¦)</td><td align="left"><code>SELECT COT(6);</code></td></tr><tr><td align="left">COUNT(expression)</td><td align="left">è¿”å›æŸ¥è¯¢çš„è®°å½•æ€»æ•°ï¼Œexpression å‚æ•°æ˜¯ä¸€ä¸ªå­—æ®µæˆ–è€… * å·</td><td align="left">è¿”å› Products è¡¨ä¸­ products å­—æ®µæ€»å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼š<code>SELECT COUNT(ProductID) AS NumberOfProducts FROM Products;</code></td></tr><tr><td align="left">DEGREES(x)</td><td align="left">å°†å¼§åº¦è½¬æ¢ä¸ºè§’åº¦</td><td align="left"><code>SELECT DEGREES(3.1415926535898) -- 180</code></td></tr><tr><td align="left">n DIV m</td><td align="left">æ•´é™¤ï¼Œn ä¸ºè¢«é™¤æ•°ï¼Œm ä¸ºé™¤æ•°</td><td align="left">è®¡ç®— 10 é™¤äº 5ï¼š<code>SELECT 10 DIV 5;  -- 2</code></td></tr><tr><td align="left">EXP(x)</td><td align="left">è¿”å› e çš„ x æ¬¡æ–¹</td><td align="left">è®¡ç®— e çš„ä¸‰æ¬¡æ–¹ï¼š<code>SELECT EXP(3) -- 20.085536923188</code></td></tr><tr><td align="left">FLOOR(x)</td><td align="left">è¿”å›å°äºæˆ–ç­‰äº x çš„æœ€å¤§æ•´æ•°</td><td align="left">å°äºæˆ–ç­‰äº 1.5 çš„æ•´æ•°ï¼š<code>SELECT FLOOR(1.5) -- è¿”å›1</code></td></tr><tr><td align="left">GREATEST(expr1, expr2, expr3, â€¦)</td><td align="left">è¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼</td><td align="left">è¿”å›ä»¥ä¸‹æ•°å­—åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼ï¼š<code>SELECT GREATEST(3, 12, 34, 8, 25); -- 34</code>è¿”å›ä»¥ä¸‹å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼ï¼š<code>SELECT GREATEST(&quot;Google&quot;, &quot;Runoob&quot;, &quot;Apple&quot;);   -- Runoob</code></td></tr><tr><td align="left">LEAST(expr1, expr2, expr3, â€¦)</td><td align="left">è¿”å›åˆ—è¡¨ä¸­çš„æœ€å°å€¼</td><td align="left">è¿”å›ä»¥ä¸‹æ•°å­—åˆ—è¡¨ä¸­çš„æœ€å°å€¼ï¼š<code>SELECT LEAST(3, 12, 34, 8, 25); -- 3</code>è¿”å›ä»¥ä¸‹å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„æœ€å°å€¼ï¼š<code>SELECT LEAST(&quot;Google&quot;, &quot;Runoob&quot;, &quot;Apple&quot;);   -- Apple</code></td></tr><tr><td align="left">LN</td><td align="left">è¿”å›æ•°å­—çš„è‡ªç„¶å¯¹æ•°ï¼Œä»¥ e ä¸ºåº•ã€‚</td><td align="left">è¿”å› 2 çš„è‡ªç„¶å¯¹æ•°ï¼š<code>SELECT LN(2);  -- 0.6931471805599453</code></td></tr><tr><td align="left">LOG(x) æˆ– LOG(base, x)</td><td align="left">è¿”å›è‡ªç„¶å¯¹æ•°(ä»¥ e ä¸ºåº•çš„å¯¹æ•°)ï¼Œå¦‚æœå¸¦æœ‰ base å‚æ•°ï¼Œåˆ™ base ä¸ºæŒ‡å®šå¸¦åº•æ•°ã€‚</td><td align="left"><code>SELECT LOG(20.085536923188) -- 3 SELECT LOG(2, 4); -- 2</code></td></tr><tr><td align="left">LOG10(x)</td><td align="left">è¿”å›ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°</td><td align="left"><code>SELECT LOG10(100) -- 2</code></td></tr><tr><td align="left">LOG2(x)</td><td align="left">è¿”å›ä»¥ 2 ä¸ºåº•çš„å¯¹æ•°</td><td align="left">è¿”å›ä»¥ 2 ä¸ºåº• 6 çš„å¯¹æ•°ï¼š<code>SELECT LOG2(6);  -- 2.584962500721156</code></td></tr><tr><td align="left">MAX(expression)</td><td align="left">è¿”å›å­—æ®µ expression ä¸­çš„æœ€å¤§å€¼</td><td align="left">è¿”å›æ•°æ®è¡¨ Products ä¸­å­—æ®µ Price çš„æœ€å¤§å€¼ï¼š<code>SELECT MAX(Price) AS LargestPrice FROM Products;</code></td></tr><tr><td align="left">MIN(expression)</td><td align="left">è¿”å›å­—æ®µ expression ä¸­çš„æœ€å°å€¼</td><td align="left">è¿”å›æ•°æ®è¡¨ Products ä¸­å­—æ®µ Price çš„æœ€å°å€¼ï¼š<code>SELECT MIN(Price) AS MinPrice FROM Products;</code></td></tr><tr><td align="left">MOD(x,y)</td><td align="left">è¿”å› x é™¤ä»¥ y ä»¥åçš„ä½™æ•°</td><td align="left">5 é™¤äº 2 çš„ä½™æ•°ï¼š<code>SELECT MOD(5,2) -- 1</code></td></tr><tr><td align="left">PI()</td><td align="left">è¿”å›åœ†å‘¨ç‡(3.141593ï¼‰</td><td align="left"><code>SELECT PI() --3.141593</code></td></tr><tr><td align="left">POW(x,y)</td><td align="left">è¿”å› x çš„ y æ¬¡æ–¹</td><td align="left">2 çš„ 3 æ¬¡æ–¹ï¼š<code>SELECT POW(2,3) -- 8</code></td></tr><tr><td align="left">POWER(x,y)</td><td align="left">è¿”å› x çš„ y æ¬¡æ–¹</td><td align="left">2 çš„ 3 æ¬¡æ–¹ï¼š<code>SELECT POWER(2,3) -- 8</code></td></tr><tr><td align="left">RADIANS(x)</td><td align="left">å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦</td><td align="left">180 åº¦è½¬æ¢ä¸ºå¼§åº¦ï¼š<code>SELECT RADIANS(180) -- 3.1415926535898</code></td></tr><tr><td align="left">RAND()</td><td align="left">è¿”å› 0 åˆ° 1 çš„éšæœºæ•°</td><td align="left"><code>SELECT RAND() --0.93099315644334</code></td></tr><tr><td align="left">ROUND(x)</td><td align="left">è¿”å›ç¦» x æœ€è¿‘çš„æ•´æ•°</td><td align="left"><code>SELECT ROUND(1.23456) --1</code></td></tr><tr><td align="left">SIGN(x)</td><td align="left">è¿”å› x çš„ç¬¦å·ï¼Œx æ˜¯è´Ÿæ•°ã€0ã€æ­£æ•°åˆ†åˆ«è¿”å› -1ã€0 å’Œ 1</td><td align="left"><code>SELECT SIGN(-10) -- (-1)</code></td></tr><tr><td align="left">SIN(x)</td><td align="left">æ±‚æ­£å¼¦å€¼(å‚æ•°æ˜¯å¼§åº¦)</td><td align="left"><code>SELECT SIN(RADIANS(30)) -- 0.5</code></td></tr><tr><td align="left">SQRT(x)</td><td align="left">è¿”å›xçš„å¹³æ–¹æ ¹</td><td align="left">25 çš„å¹³æ–¹æ ¹ï¼š<code>SELECT SQRT(25) -- 5</code></td></tr><tr><td align="left">SUM(expression)</td><td align="left">è¿”å›æŒ‡å®šå­—æ®µçš„æ€»å’Œ</td><td align="left">è®¡ç®— OrderDetails è¡¨ä¸­å­—æ®µ Quantity çš„æ€»å’Œï¼š<code>SELECT SUM(Quantity) AS TotalItemsOrdered FROM OrderDetails;</code></td></tr><tr><td align="left">TAN(x)</td><td align="left">æ±‚æ­£åˆ‡å€¼(å‚æ•°æ˜¯å¼§åº¦)</td><td align="left"><code>SELECT TAN(1.75);  -- -5.52037992250933</code></td></tr><tr><td align="left">TRUNCATE(x,y)</td><td align="left">è¿”å›æ•°å€¼ x ä¿ç•™åˆ°å°æ•°ç‚¹å y ä½çš„å€¼ï¼ˆä¸ ROUND æœ€å¤§çš„åŒºåˆ«æ˜¯ä¸ä¼šè¿›è¡Œå››èˆäº”å…¥ï¼‰</td><td align="left"><code>SELECT TRUNCATE(1.23456,3) -- 1.234</code></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL å­—ç¬¦ä¸²å‡½æ•°</title>
      <link href="/2021/09/18/MySQL_9_MySQL%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0/"/>
      <url>/2021/09/18/MySQL_9_MySQL%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>MySQL å‡½æ•° â– å­—ç¬¦ä¸²å‡½æ•°</p><span id="more"></span><table><thead><tr><th align="left">å‡½æ•°</th><th align="left">æè¿°</th><th align="left">å®ä¾‹</th></tr></thead><tbody><tr><td align="left">ASCII(s)</td><td align="left">è¿”å›å­—ç¬¦ä¸² s çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç ã€‚</td><td align="left"><code>SELECT ASCII(&quot;www.daijing.com&quot;);</code><br />&gt;119</td></tr><tr><td align="left">CHAR_LENGTH(s)</td><td align="left">è¿”å›å­—ç¬¦ä¸² s çš„å­—ç¬¦æ•°</td><td align="left"><code>SELECT CHAR_LENGTH(&quot;daijing&quot;);</code><br />&gt;7</td></tr><tr><td align="left">CHARACTER_LENGTH(s)</td><td align="left">è¿”å›å­—ç¬¦ä¸² s çš„å­—ç¬¦æ•°</td><td align="left"><code>SELECT CHARACTER_LENGTH(&quot;daijing&quot;);</code><br />&gt;7</td></tr><tr><td align="left">CONCAT(s1,s2â€¦sn)</td><td align="left">å­—ç¬¦ä¸² s1,s2 ç­‰å¤šä¸ªå­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</td><td align="left"><code>SELECT CONCAT(&quot;www&quot;,&quot;daijing&quot;,&quot;com&quot;);</code><br />&gt;wwwdaijingcom</td></tr><tr><td align="left">CONCAT_WS(x, s1,s2â€¦sn)</td><td align="left">åŒ CONCAT(s1,s2,â€¦) å‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´è¦åŠ ä¸Š xï¼Œx å¯ä»¥æ˜¯åˆ†éš”ç¬¦</td><td align="left"><code>SELECT CONCAT_WS(&quot;.&quot;,&quot;www&quot;,&quot;daijing&quot;,&quot;com&quot;);</code><br />&gt;<a href="http://www.daijing.com/">www.daijing.com</a></td></tr><tr><td align="left">FIELD(s,s1,s2â€¦)</td><td align="left">è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² s åœ¨å­—ç¬¦ä¸²åˆ—è¡¨(s1,s2â€¦)ä¸­çš„ä½ç½®</td><td align="left"><code>SELECT FIELD(&quot;daijing&quot;,&quot;www&quot;,&quot;daijing&quot;,&quot;com&quot;);</code><br />&gt;2</td></tr><tr><td align="left">FIND_IN_SET(s1,s2)</td><td align="left">è¿”å›åœ¨å­—ç¬¦ä¸²s2ä¸­ä¸s1åŒ¹é…çš„å­—ç¬¦ä¸²çš„ä½ç½®</td><td align="left"><code>SELECT FIND_IN_SET(&quot;daijing&quot;,&quot;www,daijing,com&quot;);</code><br />&gt;2<br />s2å­—ç¬¦ä¸²å¿…é¡»ç”¨<code>ï¼Œ</code>éš”å¼€</td></tr><tr><td align="left">FORMAT(x,n)</td><td align="left">å‡½æ•°å¯ä»¥å°†æ•°å­— x è¿›è¡Œæ ¼å¼åŒ– â€œ#,###.##â€, å°† x ä¿ç•™åˆ°å°æ•°ç‚¹å n ä½ï¼Œæœ€åä¸€ä½å››èˆäº”å…¥ã€‚</td><td align="left">æ ¼å¼åŒ–æ•°å­— â€œ#,###.##â€ å½¢å¼ï¼š<br /><code>SELECT FORMAT(250500.5634, 2);   </code><br />  â€“ è¾“å‡º 250,500.56</td></tr><tr><td align="left">INSERT(s1,x,len,s2)</td><td align="left">å­—ç¬¦ä¸² s2 æ›¿æ¢ s1 çš„ x ä½ç½®å¼€å§‹é•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²</td><td align="left">ä»å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹çš„ 7ä¸ªå­—ç¬¦æ›¿æ¢ä¸º daijingï¼š<br /><code>SELECT INSERT(&quot;jialing.com&quot;, 1, 7, &quot;daijing&quot;);  </code><br />â€“ è¾“å‡ºï¼šdaijing.com</td></tr><tr><td align="left">LOCATE(s1,s)</td><td align="left">ä»å­—ç¬¦ä¸² s ä¸­è·å– s1 çš„å¼€å§‹ä½ç½®</td><td align="left">è¿”å›å­—ç¬¦ä¸² abc ä¸­ b çš„ä½ç½®ï¼š<br /><code>SELECT LOCATE(&#39;b&#39;, &#39;abc&#39;)</code><br /> â€“ 2</td></tr><tr><td align="left">LCASE(s)</td><td align="left">å°†å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—æ¯å˜æˆå°å†™å­—æ¯</td><td align="left"><code>SELECT LCASE(&#39;DAIJING&#39;) </code><br />â€“ daijing</td></tr><tr><td align="left">LEFT(s,n)</td><td align="left">è¿”å›å­—ç¬¦ä¸² s çš„å‰ n ä¸ªå­—ç¬¦</td><td align="left"><code>SELECT LEFT(&#39;daijing&#39;,3)</code><br /> â€“ dai</td></tr><tr><td align="left">LOWER(s)</td><td align="left">å°†å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—æ¯å˜æˆå°å†™å­—æ¯</td><td align="left"><code>SELECT LOWER(&#39;DAIJING&#39;) </code><br />â€“ daijing</td></tr><tr><td align="left">LPAD(s1,len,s2)</td><td align="left">åœ¨å­—ç¬¦ä¸² s1 çš„å¼€å§‹å¤„å¡«å……å­—ç¬¦ä¸² s2ï¼Œä½¿å­—ç¬¦ä¸²é•¿åº¦è¾¾åˆ° len</td><td align="left"><code>SELECT LPAD(&#39;abc&#39;,8,&#39;x&#39;);</code><br />&gt; xxxxxabc<br /><code>SELECT LPAD(&#39;abc&#39;,8,&#39;xd&#39;);</code><br />&gt; xdxdxabc</td></tr><tr><td align="left">LTRIM(s)</td><td align="left">å»æ‰å­—ç¬¦ä¸² s å¼€å§‹å¤„çš„ç©ºæ ¼</td><td align="left"><code>SELECT LTRIM(&quot;    DAI&quot;);</code><br />â€“ DAI</td></tr><tr><td align="left">MID(s,n,len)</td><td align="left">ä»å­—ç¬¦ä¸² s çš„ n ä½ç½®æˆªå–é•¿åº¦ä¸º len çš„å­å­—ç¬¦ä¸²ï¼ŒåŒ SUBSTRING(s,n,len)</td><td align="left"><code>SELECT MID(&quot;DAIJING&quot;, 2, 3); </code><br />â€“ AIJ</td></tr><tr><td align="left">POSITION(s1 IN s)</td><td align="left">ä»å­—ç¬¦ä¸² s ä¸­è·å– s1 çš„å¼€å§‹ä½ç½®</td><td align="left"><code>SELECT POSITION(&#39;i&#39; in &#39;daijing&#39;);</code><br /> â€“ 3</td></tr><tr><td align="left">REPEAT(s,n)</td><td align="left">å°†å­—ç¬¦ä¸² s é‡å¤ n æ¬¡</td><td align="left"><code>SELECT REPEAT(&#39;dai&#39;,3); </code><br />â€“ daidaidai</td></tr><tr><td align="left">REPLACE(s,s1,s2)</td><td align="left">å°†å­—ç¬¦ä¸² s2 æ›¿ä»£å­—ç¬¦ä¸² s ä¸­çš„å­—ç¬¦ä¸² s1</td><td align="left">å°†å­—ç¬¦ä¸² abc ä¸­çš„å­—ç¬¦ a æ›¿æ¢ä¸ºå­—ç¬¦ xï¼š<br /><code>SELECT REPLACE(&#39;abc&#39;,&#39;a&#39;,&#39;x&#39;); </code><br />â€“xbc</td></tr><tr><td align="left">REVERSE(s)</td><td align="left">å°†å­—ç¬¦ä¸²sçš„é¡ºåºåè¿‡æ¥</td><td align="left"><code>SELECT REVERSE(&#39;abc&#39;);</code><br /> â€“ cba</td></tr><tr><td align="left">RIGHT(s,n)</td><td align="left">è¿”å›å­—ç¬¦ä¸² s çš„å n ä¸ªå­—ç¬¦</td><td align="left"><code>SELECT RIGHT(&#39;daijing&#39;,2)</code>;<br /> â€“ ng</td></tr><tr><td align="left">RPAD(s1,len,s2)</td><td align="left">åœ¨å­—ç¬¦ä¸² s1 çš„ç»“å°¾å¤„æ·»åŠ å­—ç¬¦ä¸² s2ï¼Œä½¿å­—ç¬¦ä¸²çš„é•¿åº¦è¾¾åˆ° len</td><td align="left">å°†å­—ç¬¦ä¸² xx å¡«å……åˆ° abc å­—ç¬¦ä¸²çš„ç»“å°¾å¤„ï¼š<br /><code>SELECT RPAD(&#39;abc&#39;,5,&#39;xx&#39;);</code><br /> â€“ abcxx&#96;</td></tr><tr><td align="left">RTRIM(s)</td><td align="left">å»æ‰å­—ç¬¦ä¸² s ç»“å°¾å¤„çš„ç©ºæ ¼</td><td align="left"><code>SELECT RTRIM(&quot;DAI     &quot;) ;  </code><br /> â€“ DAI</td></tr><tr><td align="left">SPACE(n)</td><td align="left">è¿”å› n ä¸ªç©ºæ ¼</td><td align="left">è¿”å› 10 ä¸ªç©ºæ ¼ï¼š<code>SELECT SPACE(10);</code></td></tr><tr><td align="left">STRCMP(s1,s2)</td><td align="left">æ¯”è¾ƒå­—ç¬¦ä¸² s1 å’Œ s2ï¼Œå¦‚æœ s1 ä¸ s2 ç›¸ç­‰è¿”å› 0 ï¼Œå¦‚æœ s1&gt;s2 è¿”å› 1ï¼Œå¦‚æœ s1&lt;s2 è¿”å› -1</td><td align="left"><code>SELECT STRCMP(&quot;DAI&quot;, &quot;DAI&quot;); </code><br /> â€“ 0<br /><code>SELECT STRCMP(&quot;DAI&quot;, &quot;dai&quot;);</code><br />â€“ 0<br />(æŒ‰ASCIIå€¼å¤§å°ç›¸æ¯”è¾ƒï¼Ÿï¼Ÿï¼Ÿ)</td></tr><tr><td align="left">SUBSTR(s, start, length)</td><td align="left">ä»å­—ç¬¦ä¸² s çš„ start ä½ç½®æˆªå–é•¿åº¦ä¸º length çš„å­å­—ç¬¦ä¸²</td><td align="left"><code>SELECT SUBSTR(&quot;DAIJING&quot;, 2, 3);</code><br /> â€“ AIJ</td></tr><tr><td align="left">SUBSTRING(s, start, length)</td><td align="left">ä»å­—ç¬¦ä¸² s çš„ start ä½ç½®æˆªå–é•¿åº¦ä¸º length çš„å­å­—ç¬¦ä¸²</td><td align="left"><code>SELECT SUBSTR(&quot;DAIJING&quot;, 2, 3);</code><br /> â€“ AIJ</td></tr><tr><td align="left">SUBSTRING_INDEX(s, delimiter, number)</td><td align="left">è¿”å›ä»å­—ç¬¦ä¸² s çš„ç¬¬ number ä¸ªå‡ºç°çš„åˆ†éš”ç¬¦ delimiter ä¹‹åçš„å­ä¸²ã€‚ å¦‚æœ number æ˜¯æ­£æ•°ï¼Œè¿”å›ç¬¬ number ä¸ªå­—ç¬¦å·¦è¾¹çš„å­—ç¬¦ä¸²ã€‚ å¦‚æœ number æ˜¯<strong>è´Ÿæ•°</strong>ï¼Œè¿”å›ç¬¬(number çš„ç»å¯¹å€¼(<strong>ä»å³è¾¹æ•°</strong>))ä¸ªå­—ç¬¦å³è¾¹çš„å­—ç¬¦ä¸²ã€‚</td><td align="left"><code>SELECT SUBSTRING_INDEX(&#39;a*b&#39;,&#39;*&#39;,1)</code><br /> â€“ a <br /><code>SELECT SUBSTRING_INDEX(&#39;a*b&#39;,&#39;*&#39;,-1)</code> <br /> â€“ b <br /><code>SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(&#39;a*b*c*d*e&#39;,&#39;*&#39;,3),&#39;*&#39;,-1)</code>  <br />â€“ c</td></tr><tr><td align="left">TRIM(s)</td><td align="left">å»æ‰å­—ç¬¦ä¸² s å¼€å§‹å’Œç»“å°¾å¤„çš„ç©ºæ ¼</td><td align="left"><code>SELECT TRIM(&#39;    DAI    &#39;);</code><br />â€“ DAI</td></tr><tr><td align="left">UCASE(s)</td><td align="left">å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</td><td align="left"><code>SELECT UCASE(&quot;dai&quot;);</code><br /> â€“ DAI</td></tr><tr><td align="left">UPPER(s)</td><td align="left">å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</td><td align="left"><code>SELECT UPPER(&quot;dai&quot;);</code><br /> â€“ DAI</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»“åˆ AND å’Œ OR è¿ç®—ç¬¦</title>
      <link href="/2021/08/08/MySQL_8_%E7%BB%93%E5%90%88%20AND%20%E5%92%8C%20OR%20%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
      <url>/2021/08/08/MySQL_8_%E7%BB%93%E5%90%88%20AND%20%E5%92%8C%20OR%20%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>æŠŠ AND å’Œ OR ç»“åˆèµ·æ¥ï¼ˆä½¿ç”¨åœ†æ‹¬å·æ¥ç»„æˆå¤æ‚çš„è¡¨è¾¾å¼ï¼‰:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Persons <span class="keyword">WHERE</span> (FirstName<span class="operator">=</span><span class="string">&#x27;Thomas&#x27;</span> <span class="keyword">OR</span> FirstName<span class="operator">=</span><span class="string">&#x27;William&#x27;</span>) </span><br><span class="line"><span class="keyword">AND</span> LastName<span class="operator">=</span><span class="string">&#x27;Carter&#x27;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p><strong>åŸå§‹çš„è¡¨ (ç”¨åœ¨ä¾‹å­ä¸­çš„)ï¼š</strong></p><table><thead><tr><th align="left">LastName</th><th align="left">FirstName</th><th align="left">Address</th><th align="left">City</th></tr></thead><tbody><tr><td align="left">Adams</td><td align="left">John</td><td align="left">Oxford Street</td><td align="left">London</td></tr><tr><td align="left">Bush</td><td align="left">George</td><td align="left">Fifth Avenue</td><td align="left">New York</td></tr><tr><td align="left">Carter</td><td align="left">Thomas</td><td align="left">Changan Street</td><td align="left">Beijing</td></tr><tr><td align="left">Carter</td><td align="left">William</td><td align="left">Xuanwumen 10</td><td align="left">Beijing</td></tr></tbody></table><p><strong>ç»“æœï¼š</strong></p><table><thead><tr><th align="left">LastName</th><th align="left">FirstName</th><th align="left">Address</th><th align="left">City</th></tr></thead><tbody><tr><td align="left">Carter</td><td align="left">Thomas</td><td align="left">Changan Street</td><td align="left">Beijing</td></tr><tr><td align="left">Carter</td><td align="left">William</td><td align="left">Xuanwumen 10</td><td align="left">Beijing</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL è¯­å¥æ„å»ºå™¨</title>
      <link href="/2021/08/07/MyBatis_22_SQL%20%E8%AF%AD%E5%8F%A5%E6%9E%84%E5%BB%BA%E5%99%A8/"/>
      <url>/2021/08/07/MyBatis_22_SQL%20%E8%AF%AD%E5%8F%A5%E6%9E%84%E5%BB%BA%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>Java ç¨‹åºå‘˜é¢å¯¹çš„æœ€ç—›è‹¦çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯åœ¨ Java ä»£ç ä¸­åµŒå…¥ SQL è¯­å¥ã€‚è¿™é€šå¸¸æ˜¯å› ä¸ºéœ€è¦åŠ¨æ€ç”Ÿæˆ SQL è¯­å¥ï¼Œä¸ç„¶æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶æˆ–è€…å­˜å‚¨è¿‡ç¨‹ä¸­ã€‚å¦‚ä½ æ‰€è§ï¼ŒMyBatis åœ¨ XML æ˜ å°„ä¸­å…·å¤‡å¼ºå¤§çš„ SQL åŠ¨æ€ç”Ÿæˆèƒ½åŠ›ã€‚ä½†æœ‰æ—¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦åœ¨ Java ä»£ç é‡Œæ„å»º SQL è¯­å¥ã€‚æ­¤æ—¶ï¼ŒMyBatis æœ‰å¦å¤–ä¸€ä¸ªç‰¹æ€§å¯ä»¥å¸®åˆ°ä½ ï¼Œè®©ä½ ä»å¤„ç†å…¸å‹é—®é¢˜ä¸­è§£æ”¾å‡ºæ¥ï¼Œæ¯”å¦‚åŠ å·ã€å¼•å·ã€æ¢è¡Œã€æ ¼å¼åŒ–é—®é¢˜ã€åµŒå…¥æ¡ä»¶çš„é€—å·ç®¡ç†åŠ AND è¿æ¥ã€‚ç¡®å®ï¼Œåœ¨ Java ä»£ç ä¸­åŠ¨æ€ç”Ÿæˆ SQL ä»£ç çœŸçš„å°±æ˜¯ä¸€åœºå™©æ¢¦ã€‚</p><span id="more"></span><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME, &quot;</span></span><br><span class="line"><span class="string">&quot;P.LAST_NAME,P.CREATED_ON, P.UPDATED_ON &quot;</span> +</span><br><span class="line"><span class="string">&quot;FROM PERSON P, ACCOUNT A &quot;</span> +</span><br><span class="line"><span class="string">&quot;INNER JOIN DEPARTMENT D on D.ID = P.DEPARTMENT_ID &quot;</span> +</span><br><span class="line"><span class="string">&quot;INNER JOIN COMPANY C on D.COMPANY_ID = C.ID &quot;</span> +</span><br><span class="line"><span class="string">&quot;WHERE (P.ID = A.ID AND P.FIRST_NAME like ?) &quot;</span> +</span><br><span class="line"><span class="string">&quot;OR (P.LAST_NAME like ?) &quot;</span> +</span><br><span class="line"><span class="string">&quot;GROUP BY P.ID &quot;</span> +</span><br><span class="line"><span class="string">&quot;HAVING (P.LAST_NAME like ?) &quot;</span> +</span><br><span class="line"><span class="string">&quot;OR (P.FIRST_NAME like ?) &quot;</span> +</span><br><span class="line"><span class="string">&quot;ORDER BY P.ID, P.FULL_NAME&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h3><p>MyBatis 3 æä¾›äº†æ–¹ä¾¿çš„å·¥å…·ç±»æ¥å¸®åŠ©è§£å†³æ­¤é—®é¢˜ã€‚å€ŸåŠ© SQL ç±»ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•åœ°åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå¹¶è°ƒç”¨å®ƒçš„æ–¹æ³•å³å¯ç”Ÿæˆ SQL è¯­å¥ã€‚è®©æˆ‘ä»¬æ¥ç”¨ SQL ç±»é‡å†™ä¸Šé¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String <span class="title function_">selectPersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>() &#123;&#123;</span><br><span class="line">    SELECT(<span class="string">&quot;P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME&quot;</span>);</span><br><span class="line">    SELECT(<span class="string">&quot;P.LAST_NAME, P.CREATED_ON, P.UPDATED_ON&quot;</span>);</span><br><span class="line">    FROM(<span class="string">&quot;PERSON P&quot;</span>);</span><br><span class="line">    FROM(<span class="string">&quot;ACCOUNT A&quot;</span>);</span><br><span class="line">    INNER_JOIN(<span class="string">&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;</span>);</span><br><span class="line">    INNER_JOIN(<span class="string">&quot;COMPANY C on D.COMPANY_ID = C.ID&quot;</span>);</span><br><span class="line">    WHERE(<span class="string">&quot;P.ID = A.ID&quot;</span>);</span><br><span class="line">    WHERE(<span class="string">&quot;P.FIRST_NAME like ?&quot;</span>);</span><br><span class="line">    OR();</span><br><span class="line">    WHERE(<span class="string">&quot;P.LAST_NAME like ?&quot;</span>);</span><br><span class="line">    GROUP_BY(<span class="string">&quot;P.ID&quot;</span>);</span><br><span class="line">    HAVING(<span class="string">&quot;P.LAST_NAME like ?&quot;</span>);</span><br><span class="line">    OR();</span><br><span class="line">    HAVING(<span class="string">&quot;P.FIRST_NAME like ?&quot;</span>);</span><br><span class="line">    ORDER_BY(<span class="string">&quot;P.ID&quot;</span>);</span><br><span class="line">    ORDER_BY(<span class="string">&quot;P.FULL_NAME&quot;</span>);</span><br><span class="line">  &#125;&#125;.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„å—ï¼Ÿä»”ç»†çœ‹ä¸€ä¸‹ä½ ä¼šå‘ç°ï¼Œä½ ä¸ç”¨æ‹…å¿ƒå¯èƒ½ä¼šé‡å¤å‡ºç°çš„ â€œANDâ€ å…³é”®å­—ï¼Œæˆ–è€…è¦åšå‡ºç”¨ â€œWHEREâ€ æ‹¼æ¥è¿˜æ˜¯ â€œANDâ€ æ‹¼æ¥è¿˜æ˜¯ä¸ç”¨æ‹¼æ¥çš„é€‰æ‹©ã€‚SQL ç±»å·²ç»ä¸ºä½ å¤„ç†äº†å“ªé‡Œåº”è¯¥æ’å…¥ â€œWHEREâ€ã€å“ªé‡Œåº”è¯¥ä½¿ç”¨ â€œANDâ€ çš„é—®é¢˜ï¼Œå¹¶å¸®ä½ å®Œæˆæ‰€æœ‰çš„å­—ç¬¦ä¸²æ‹¼æ¥å·¥ä½œã€‚</p><h3 id="SQL-ç±»"><a href="#SQL-ç±»" class="headerlink" title="SQL ç±»"></a>SQL ç±»</h3><p>è¿™é‡Œæœ‰ä¸€äº›ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¿åå†…éƒ¨ç±»é£æ ¼</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">deletePersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>() &#123;&#123;</span><br><span class="line">    DELETE_FROM(<span class="string">&quot;PERSON&quot;</span>);</span><br><span class="line">    WHERE(<span class="string">&quot;ID = #&#123;id&#125;&quot;</span>);</span><br><span class="line">  &#125;&#125;.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Builder / Fluent é£æ ¼</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">insertPersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()</span><br><span class="line">    .INSERT_INTO(<span class="string">&quot;PERSON&quot;</span>)</span><br><span class="line">    .VALUES(<span class="string">&quot;ID, FIRST_NAME&quot;</span>, <span class="string">&quot;#&#123;id&#125;, #&#123;firstName&#125;&quot;</span>)</span><br><span class="line">    .VALUES(<span class="string">&quot;LAST_NAME&quot;</span>, <span class="string">&quot;#&#123;lastName&#125;&quot;</span>)</span><br><span class="line">    .toString();</span><br><span class="line">  <span class="keyword">return</span> sql;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€æ¡ä»¶ï¼ˆæ³¨æ„å‚æ•°éœ€è¦ä½¿ç”¨ final ä¿®é¥°ï¼Œä»¥ä¾¿åŒ¿åå†…éƒ¨ç±»å¯¹å®ƒä»¬è¿›è¡Œè®¿é—®ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">selectPersonLike</span><span class="params">(<span class="keyword">final</span> String id, <span class="keyword">final</span> String firstName, <span class="keyword">final</span> String lastName)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>() &#123;&#123;</span><br><span class="line">    SELECT(<span class="string">&quot;P.ID, P.USERNAME, P.PASSWORD, P.FIRST_NAME, P.LAST_NAME&quot;</span>);</span><br><span class="line">    FROM(<span class="string">&quot;PERSON P&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (id != <span class="literal">null</span>) &#123;</span><br><span class="line">      WHERE(<span class="string">&quot;P.ID like #&#123;id&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (firstName != <span class="literal">null</span>) &#123;</span><br><span class="line">      WHERE(<span class="string">&quot;P.FIRST_NAME like #&#123;firstName&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (lastName != <span class="literal">null</span>) &#123;</span><br><span class="line">      WHERE(<span class="string">&quot;P.LAST_NAME like #&#123;lastName&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ORDER_BY(<span class="string">&quot;P.LAST_NAME&quot;</span>);</span><br><span class="line">  &#125;&#125;.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">deletePersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>() &#123;&#123;</span><br><span class="line">    DELETE_FROM(<span class="string">&quot;PERSON&quot;</span>);</span><br><span class="line">    WHERE(<span class="string">&quot;ID = #&#123;id&#125;&quot;</span>);</span><br><span class="line">  &#125;&#125;.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">insertPersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>() &#123;&#123;</span><br><span class="line">    INSERT_INTO(<span class="string">&quot;PERSON&quot;</span>);</span><br><span class="line">    VALUES(<span class="string">&quot;ID, FIRST_NAME&quot;</span>, <span class="string">&quot;#&#123;id&#125;, #&#123;firstName&#125;&quot;</span>);</span><br><span class="line">    VALUES(<span class="string">&quot;LAST_NAME&quot;</span>, <span class="string">&quot;#&#123;lastName&#125;&quot;</span>);</span><br><span class="line">  &#125;&#125;.toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">updatePersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>() &#123;&#123;</span><br><span class="line">    UPDATE(<span class="string">&quot;PERSON&quot;</span>);</span><br><span class="line">    SET(<span class="string">&quot;FIRST_NAME = #&#123;firstName&#125;&quot;</span>);</span><br><span class="line">    WHERE(<span class="string">&quot;ID = #&#123;id&#125;&quot;</span>);</span><br><span class="line">  &#125;&#125;.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>SELECT(String)``SELECT(String...)</code></td><td align="left">å¼€å§‹æ–°çš„æˆ–è¿½åŠ åˆ°å·²æœ‰çš„ <code>SELECT</code>å­å¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå‚æ•°ä¼šè¢«è¿½åŠ åˆ° <code>SELECT</code> å­å¥ã€‚ å‚æ•°é€šå¸¸ä½¿ç”¨é€—å·åˆ†éš”çš„åˆ—åå’Œåˆ«ååˆ—è¡¨ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“é©±åŠ¨ç¨‹åºæ¥å—çš„ä»»æ„å‚æ•°ã€‚</td></tr><tr><td align="left"><code>SELECT_DISTINCT(String)``SELECT_DISTINCT(String...)</code></td><td align="left">å¼€å§‹æ–°çš„æˆ–è¿½åŠ åˆ°å·²æœ‰çš„ <code>SELECT</code>å­å¥ï¼Œå¹¶æ·»åŠ  <code>DISTINCT</code> å…³é”®å­—åˆ°ç”Ÿæˆçš„æŸ¥è¯¢ä¸­ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå‚æ•°ä¼šè¢«è¿½åŠ åˆ° <code>SELECT</code> å­å¥ã€‚ å‚æ•°é€šå¸¸ä½¿ç”¨é€—å·åˆ†éš”çš„åˆ—åå’Œåˆ«ååˆ—è¡¨ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“é©±åŠ¨ç¨‹åºæ¥å—çš„ä»»æ„å‚æ•°ã€‚</td></tr><tr><td align="left"><code>FROM(String)``FROM(String...)</code></td><td align="left">å¼€å§‹æ–°çš„æˆ–è¿½åŠ åˆ°å·²æœ‰çš„ <code>FROM</code>å­å¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå‚æ•°ä¼šè¢«è¿½åŠ åˆ° <code>FROM</code>å­å¥ã€‚ å‚æ•°é€šå¸¸æ˜¯ä¸€ä¸ªè¡¨åæˆ–åˆ«åï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°æ®åº“é©±åŠ¨ç¨‹åºæ¥å—çš„ä»»æ„å‚æ•°ã€‚</td></tr><tr><td align="left"><code>JOIN(String)``JOIN(String...)``INNER_JOIN(String)``INNER_JOIN(String...)``LEFT_OUTER_JOIN(String)``LEFT_OUTER_JOIN(String...)``RIGHT_OUTER_JOIN(String)``RIGHT_OUTER_JOIN(String...)</code></td><td align="left">åŸºäºè°ƒç”¨çš„æ–¹æ³•ï¼Œæ·»åŠ æ–°çš„åˆé€‚ç±»å‹çš„ <code>JOIN</code> å­å¥ã€‚ å‚æ•°å¯ä»¥åŒ…å«ä¸€ä¸ªç”±åˆ—å’Œè¿æ¥æ¡ä»¶æ„æˆçš„æ ‡å‡†è¿æ¥ã€‚</td></tr><tr><td align="left"><code>WHERE(String)``WHERE(String...)</code></td><td align="left">æ’å…¥æ–°çš„ <code>WHERE</code> å­å¥æ¡ä»¶ï¼Œå¹¶ä½¿ç”¨ <code>AND</code> æ‹¼æ¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œå¯¹äºæ¯ä¸€æ¬¡è°ƒç”¨äº§ç”Ÿçš„æ–°æ¡ä»¶ï¼Œä¼šä½¿ç”¨ <code>AND</code> æ‹¼æ¥èµ·æ¥ã€‚è¦ä½¿ç”¨ <code>OR</code> åˆ†éš”ï¼Œè¯·ä½¿ç”¨ <code>OR()</code>ã€‚</td></tr><tr><td align="left"><code>OR()</code></td><td align="left">ä½¿ç”¨ <code>OR</code> æ¥åˆ†éš”å½“å‰çš„ <code>WHERE</code> å­å¥æ¡ä»¶ã€‚ å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä½†åœ¨ä¸€è¡Œä¸­å¤šæ¬¡è°ƒç”¨ä¼šç”Ÿæˆé”™è¯¯çš„ <code>SQL</code>ã€‚</td></tr><tr><td align="left"><code>AND()</code></td><td align="left">ä½¿ç”¨ <code>AND</code> æ¥åˆ†éš”å½“å‰çš„ <code>WHERE</code>å­å¥æ¡ä»¶ã€‚ å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œä½†åœ¨ä¸€è¡Œä¸­å¤šæ¬¡è°ƒç”¨ä¼šç”Ÿæˆé”™è¯¯çš„ <code>SQL</code>ã€‚ç”±äº <code>WHERE</code> å’Œ <code>HAVING</code>éƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨ <code>AND</code> æ‹¼æ¥, å› æ­¤è¿™ä¸ªæ–¹æ³•å¹¶ä¸å¸¸ç”¨ï¼Œåªæ˜¯ä¸ºäº†å®Œæ•´æ€§æ‰è¢«å®šä¹‰å‡ºæ¥ã€‚</td></tr><tr><td align="left"><code>GROUP_BY(String)``GROUP_BY(String...)</code></td><td align="left">è¿½åŠ æ–°çš„ <code>GROUP BY</code> å­å¥ï¼Œä½¿ç”¨é€—å·æ‹¼æ¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šä½¿ç”¨é€—å·å°†æ–°çš„æ¡ä»¶æ‹¼æ¥èµ·æ¥ã€‚</td></tr><tr><td align="left"><code>HAVING(String)``HAVING(String...)</code></td><td align="left">è¿½åŠ æ–°çš„ <code>HAVING</code> å­å¥ã€‚ä½¿ç”¨ AND æ‹¼æ¥ã€‚å¯ä»¥è¢«å¤šæ¬¡è°ƒç”¨ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä½¿ç”¨<code>AND</code>æ¥æ‹¼æ¥æ–°çš„æ¡ä»¶ã€‚è¦ä½¿ç”¨ <code>OR</code> åˆ†éš”ï¼Œè¯·ä½¿ç”¨ <code>OR()</code>ã€‚</td></tr><tr><td align="left"><code>ORDER_BY(String)``ORDER_BY(String...)</code></td><td align="left">è¿½åŠ æ–°çš„ <code>ORDER BY</code> å­å¥ï¼Œä½¿ç”¨é€—å·æ‹¼æ¥ã€‚å¯ä»¥å¤šæ¬¡è¢«è°ƒç”¨ï¼Œæ¯æ¬¡è°ƒç”¨ä¼šä½¿ç”¨é€—å·æ‹¼æ¥æ–°çš„æ¡ä»¶ã€‚</td></tr><tr><td align="left"><code>LIMIT(String)``LIMIT(int)</code></td><td align="left">è¿½åŠ æ–°çš„ <code>LIMIT</code> å­å¥ã€‚ ä»…åœ¨ SELECT()ã€UPDATE()ã€DELETE() æ—¶æœ‰æ•ˆã€‚ å½“åœ¨ SELECT() ä¸­ä½¿ç”¨æ—¶ï¼Œåº”è¯¥é…åˆ OFFSET() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 å¼•å…¥ï¼‰</td></tr><tr><td align="left"><code>OFFSET(String)``OFFSET(long)</code></td><td align="left">è¿½åŠ æ–°çš„ <code>OFFSET</code> å­å¥ã€‚ ä»…åœ¨ SELECT() æ—¶æœ‰æ•ˆã€‚ å½“åœ¨ SELECT() æ—¶ä½¿ç”¨æ—¶ï¼Œåº”è¯¥é…åˆ LIMIT() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 å¼•å…¥ï¼‰</td></tr><tr><td align="left"><code>OFFSET_ROWS(String)``OFFSET_ROWS(long)</code></td><td align="left">è¿½åŠ æ–°çš„ <code>OFFSET n ROWS</code> å­å¥ã€‚ ä»…åœ¨ SELECT() æ—¶æœ‰æ•ˆã€‚ è¯¥æ–¹æ³•åº”è¯¥é…åˆ FETCH_FIRST_ROWS_ONLY() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 åŠ å…¥ï¼‰</td></tr><tr><td align="left"><code>FETCH_FIRST_ROWS_ONLY(String)``FETCH_FIRST_ROWS_ONLY(int)</code></td><td align="left">è¿½åŠ æ–°çš„ <code>FETCH FIRST n ROWS ONLY</code> å­å¥ã€‚ ä»…åœ¨ SELECT() æ—¶æœ‰æ•ˆã€‚ è¯¥æ–¹æ³•åº”è¯¥é…åˆ OFFSET_ROWS() ä½¿ç”¨ã€‚ï¼ˆäº 3.5.2 åŠ å…¥ï¼‰</td></tr><tr><td align="left"><code>DELETE_FROM(String)</code></td><td align="left">å¼€å§‹æ–°çš„ delete è¯­å¥ï¼Œå¹¶æŒ‡å®šåˆ é™¤è¡¨çš„è¡¨åã€‚é€šå¸¸å®ƒåé¢éƒ½ä¼šè·Ÿç€ä¸€ä¸ª WHERE å­å¥ï¼</td></tr><tr><td align="left"><code>INSERT_INTO(String)</code></td><td align="left">å¼€å§‹æ–°çš„ insert è¯­å¥ï¼Œå¹¶æŒ‡å®šæ’å…¥æ•°æ®è¡¨çš„è¡¨åã€‚åé¢åº”è¯¥ä¼šè·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ª VALUES() è°ƒç”¨ï¼Œæˆ– INTO_COLUMNS() å’Œ INTO_VALUES() è°ƒç”¨ã€‚</td></tr><tr><td align="left"><code>SET(String)``SET(String...)</code></td><td align="left">å¯¹ update è¯­å¥è¿½åŠ  â€œsetâ€ å±æ€§çš„åˆ—è¡¨</td></tr><tr><td align="left"><code>UPDATE(String)</code></td><td align="left">å¼€å§‹æ–°çš„ update è¯­å¥ï¼Œå¹¶æŒ‡å®šæ›´æ–°è¡¨çš„è¡¨åã€‚åé¢éƒ½ä¼šè·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ª SET() è°ƒç”¨ï¼Œé€šå¸¸ä¹Ÿä¼šæœ‰ä¸€ä¸ª WHERE() è°ƒç”¨ã€‚</td></tr><tr><td align="left"><code>VALUES(String, String)</code></td><td align="left">è¿½åŠ æ•°æ®å€¼åˆ° insert è¯­å¥ä¸­ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°æ®æ’å…¥çš„åˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯æ•°æ®å€¼ã€‚</td></tr><tr><td align="left"><code>INTO_COLUMNS(String...)</code></td><td align="left">è¿½åŠ æ’å…¥åˆ—å­å¥åˆ° insert è¯­å¥ä¸­ã€‚åº”ä¸ INTO_VALUES() ä¸€åŒä½¿ç”¨ã€‚</td></tr><tr><td align="left"><code>INTO_VALUES(String...)</code></td><td align="left">è¿½åŠ æ’å…¥å€¼å­å¥åˆ° insert è¯­å¥ä¸­ã€‚åº”ä¸ INTO_COLUMNS() ä¸€åŒä½¿ç”¨ã€‚</td></tr><tr><td align="left"><code>ADD_ROW()</code></td><td align="left">æ·»åŠ æ–°çš„ä¸€è¡Œæ•°æ®ï¼Œä»¥ä¾¿æ‰§è¡Œæ‰¹é‡æ’å…¥ã€‚ï¼ˆäº 3.5.2 å¼•å…¥ï¼‰</td></tr></tbody></table><p><strong>æç¤º</strong> æ³¨æ„ï¼ŒSQL ç±»å°†åŸæ ·æ’å…¥ <code>LIMIT</code>ã€<code>OFFSET</code>ã€<code>OFFSET n ROWS</code> ä»¥åŠ <code>FETCH FIRST n ROWS ONLY</code> å­å¥ã€‚æ¢å¥è¯è¯´ï¼Œç±»åº“ä¸ä¼šä¸ºä¸æ”¯æŒè¿™äº›å­å¥çš„æ•°æ®åº“æ‰§è¡Œä»»ä½•è½¬æ¢ã€‚ å› æ­¤ï¼Œç”¨æˆ·åº”è¯¥è¦äº†è§£ç›®æ ‡æ•°æ®åº“æ˜¯å¦æ”¯æŒè¿™äº›å­å¥ã€‚å¦‚æœç›®æ ‡æ•°æ®åº“ä¸æ”¯æŒè¿™äº›å­å¥ï¼Œäº§ç”Ÿçš„ SQL å¯èƒ½ä¼šå¼•èµ·è¿è¡Œé”™è¯¯ã€‚</p><p>ä»ç‰ˆæœ¬ 3.4.2 å¼€å§‹ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨å¯å˜é•¿åº¦å‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">selectPersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()</span><br><span class="line">    .SELECT(<span class="string">&quot;P.ID&quot;</span>, <span class="string">&quot;A.USERNAME&quot;</span>, <span class="string">&quot;A.PASSWORD&quot;</span>, <span class="string">&quot;P.FULL_NAME&quot;</span>, <span class="string">&quot;D.DEPARTMENT_NAME&quot;</span>, <span class="string">&quot;C.COMPANY_NAME&quot;</span>)</span><br><span class="line">    .FROM(<span class="string">&quot;PERSON P&quot;</span>, <span class="string">&quot;ACCOUNT A&quot;</span>)</span><br><span class="line">    .INNER_JOIN(<span class="string">&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;</span>, <span class="string">&quot;COMPANY C on D.COMPANY_ID = C.ID&quot;</span>)</span><br><span class="line">    .WHERE(<span class="string">&quot;P.ID = A.ID&quot;</span>, <span class="string">&quot;P.FULL_NAME like #&#123;name&#125;&quot;</span>)</span><br><span class="line">    .ORDER_BY(<span class="string">&quot;P.ID&quot;</span>, <span class="string">&quot;P.FULL_NAME&quot;</span>)</span><br><span class="line">    .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">insertPersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()</span><br><span class="line">    .INSERT_INTO(<span class="string">&quot;PERSON&quot;</span>)</span><br><span class="line">    .INTO_COLUMNS(<span class="string">&quot;ID&quot;</span>, <span class="string">&quot;FULL_NAME&quot;</span>)</span><br><span class="line">    .INTO_VALUES(<span class="string">&quot;#&#123;id&#125;&quot;</span>, <span class="string">&quot;#&#123;fullName&#125;&quot;</span>)</span><br><span class="line">    .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">updatePersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()</span><br><span class="line">    .UPDATE(<span class="string">&quot;PERSON&quot;</span>)</span><br><span class="line">    .SET(<span class="string">&quot;FULL_NAME = #&#123;fullName&#125;&quot;</span>, <span class="string">&quot;DATE_OF_BIRTH = #&#123;dateOfBirth&#125;&quot;</span>)</span><br><span class="line">    .WHERE(<span class="string">&quot;ID = #&#123;id&#125;&quot;</span>)</span><br><span class="line">    .toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ç‰ˆæœ¬ 3.5.2 å¼€å§‹ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·æ„å»ºæ‰¹é‡æ’å…¥è¯­å¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">insertPersonsSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// INSERT INTO PERSON (ID, FULL_NAME)</span></span><br><span class="line">  <span class="comment">//     VALUES (#&#123;mainPerson.id&#125;, #&#123;mainPerson.fullName&#125;) , (#&#123;subPerson.id&#125;, #&#123;subPerson.fullName&#125;)</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()</span><br><span class="line">    .INSERT_INTO(<span class="string">&quot;PERSON&quot;</span>)</span><br><span class="line">    .INTO_COLUMNS(<span class="string">&quot;ID&quot;</span>, <span class="string">&quot;FULL_NAME&quot;</span>)</span><br><span class="line">    .INTO_VALUES(<span class="string">&quot;#&#123;mainPerson.id&#125;&quot;</span>, <span class="string">&quot;#&#123;mainPerson.fullName&#125;&quot;</span>)</span><br><span class="line">    .ADD_ROW()</span><br><span class="line">    .INTO_VALUES(<span class="string">&quot;#&#123;subPerson.id&#125;&quot;</span>, <span class="string">&quot;#&#123;subPerson.fullName&#125;&quot;</span>)</span><br><span class="line">    .toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ç‰ˆæœ¬ 3.5.2 å¼€å§‹ï¼Œä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·æ„å»ºé™åˆ¶è¿”å›ç»“æœæ•°çš„ SELECT è¯­å¥,ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">selectPersonsWithOffsetLimitSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// SELECT id, name FROM PERSON</span></span><br><span class="line">  <span class="comment">//     LIMIT #&#123;limit&#125; OFFSET #&#123;offset&#125;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()</span><br><span class="line">    .SELECT(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>)</span><br><span class="line">    .FROM(<span class="string">&quot;PERSON&quot;</span>)</span><br><span class="line">    .LIMIT(<span class="string">&quot;#&#123;limit&#125;&quot;</span>)</span><br><span class="line">    .OFFSET(<span class="string">&quot;#&#123;offset&#125;&quot;</span>)</span><br><span class="line">    .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">selectPersonsWithFetchFirstSql</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="comment">// SELECT id, name FROM PERSON</span></span><br><span class="line">  <span class="comment">//     OFFSET #&#123;offset&#125; ROWS FETCH FIRST #&#123;limit&#125; ROWS ONLY</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()</span><br><span class="line">    .SELECT(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>)</span><br><span class="line">    .FROM(<span class="string">&quot;PERSON&quot;</span>)</span><br><span class="line">    .OFFSET_ROWS(<span class="string">&quot;#&#123;offset&#125;&quot;</span>)</span><br><span class="line">    .FETCH_FIRST_ROWS_ONLY(<span class="string">&quot;#&#123;limit&#125;&quot;</span>)</span><br><span class="line">    .toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="SqlBuilder-å’Œ-SelectBuilder-å·²ç»åºŸå¼ƒ"><a href="#SqlBuilder-å’Œ-SelectBuilder-å·²ç»åºŸå¼ƒ" class="headerlink" title="SqlBuilder å’Œ SelectBuilder (å·²ç»åºŸå¼ƒ)"></a>SqlBuilder å’Œ SelectBuilder (å·²ç»åºŸå¼ƒ)</h3><p>åœ¨ç‰ˆæœ¬ 3.2 ä¹‹å‰ï¼Œæˆ‘ä»¬çš„å®ç°æ–¹å¼ä¸å¤ªä¸€æ ·ï¼Œæˆ‘ä»¬åˆ©ç”¨ ThreadLocal å˜é‡æ¥æ©ç›–ä¸€äº›å¯¹ Java DSL ä¸å¤ªå‹å¥½çš„è¯­è¨€é™åˆ¶ã€‚ç°åœ¨ï¼Œç°ä»£ SQL æ„å»ºæ¡†æ¶ä½¿ç”¨çš„æ„å»ºå™¨å’ŒåŒ¿åå†…éƒ¨ç±»æ€æƒ³å·²è¢«äººä»¬æ‰€ç†ŸçŸ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åºŸå¼ƒäº†åŸºäºè¿™ç§å®ç°æ–¹å¼çš„ SelectBuilder å’Œ SqlBuilder ç±»ã€‚</p><p>ä¸‹é¢çš„æ–¹æ³•ä»…ä»…é€‚ç”¨äºåºŸå¼ƒçš„ SqlBuilder å’Œ SelectBuilder ç±»ã€‚</p><table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>BEGIN()</code> &#x2F; <code>RESET()</code></td><td align="left">è¿™äº›æ–¹æ³•æ¸…ç©º SelectBuilder ç±»çš„ ThreadLocal çŠ¶æ€ï¼Œå¹¶å‡†å¤‡å¥½æ„å»ºä¸€ä¸ªæ–°çš„è¯­å¥ã€‚å¼€å§‹æ–°çš„è¯­å¥æ—¶ï¼Œ<code>BEGIN()</code> æ˜¯æœ€åå‰¯å…¶å®çš„ï¼ˆå¯è¯»æ€§æœ€å¥½çš„ï¼‰ã€‚ä½†å¦‚æœç”±äºä¸€äº›åŸå› ï¼ˆæ¯”å¦‚ç¨‹åºé€»è¾‘åœ¨æŸäº›æ¡ä»¶ä¸‹éœ€è¦ä¸€ä¸ªå®Œå…¨ä¸åŒçš„è¯­å¥ï¼‰ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¦é‡ç½®è¯­å¥æ„å»ºçŠ¶æ€ï¼Œå°±å¾ˆé€‚åˆä½¿ç”¨ <code>RESET()</code>ã€‚</td></tr><tr><td align="left"><code>SQL()</code></td><td align="left">è¯¥æ–¹æ³•è¿”å›ç”Ÿæˆçš„ <code>SQL()</code> å¹¶é‡ç½® <code>SelectBuilder</code> çŠ¶æ€ï¼ˆç­‰ä»·äºè°ƒç”¨äº† <code>BEGIN()</code> æˆ– <code>RESET()</code>ï¼‰ã€‚å› æ­¤ï¼Œè¯¥æ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼</td></tr></tbody></table><p>SelectBuilder å’Œ SqlBuilder ç±»å¹¶ä¸ç¥å¥‡ï¼Œä½†æœ€å¥½è¿˜æ˜¯çŸ¥é“å®ƒä»¬çš„å·¥ä½œåŸç†ã€‚ SelectBuilder ä»¥åŠ SqlBuilder å€ŸåŠ©é™æ€å¯¼å…¥å’Œ ThreadLocal å˜é‡å®ç°äº†å¯¹æ’å…¥æ¡ä»¶å‹å¥½çš„ç®€æ´è¯­æ³•ã€‚è¦ä½¿ç”¨å®ƒä»¬ï¼Œåªéœ€è¦é™æ€å¯¼å…¥è¿™ä¸ªç±»çš„æ–¹æ³•å³å¯ï¼Œå°±åƒè¿™æ ·ï¼ˆåªèƒ½ä½¿ç”¨å…¶ä¸­çš„ä¸€æ¡ï¼Œä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼‰:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.apache.ibatis.jdbc.SelectBuilder.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.apache.ibatis.jdbc.SqlBuilder.*;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ›å»ºä¸€äº›æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å·²è¢«åºŸå¼ƒ */</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">selectBlogsSql</span><span class="params">()</span> &#123;</span><br><span class="line">  BEGIN(); <span class="comment">// é‡ç½® ThreadLocal çŠ¶æ€å˜é‡</span></span><br><span class="line">  SELECT(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">  FROM(<span class="string">&quot;BLOG&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> SQL();</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">/* å·²è¢«åºŸå¼ƒ */</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">selectPersonSql</span><span class="params">()</span> &#123;</span><br><span class="line">  BEGIN(); <span class="comment">// é‡ç½® ThreadLocal çŠ¶æ€å˜é‡</span></span><br><span class="line">  SELECT(<span class="string">&quot;P.ID, P.USERNAME, P.PASSWORD, P.FULL_NAME&quot;</span>);</span><br><span class="line">  SELECT(<span class="string">&quot;P.LAST_NAME, P.CREATED_ON, P.UPDATED_ON&quot;</span>);</span><br><span class="line">  FROM(<span class="string">&quot;PERSON P&quot;</span>);</span><br><span class="line">  FROM(<span class="string">&quot;ACCOUNT A&quot;</span>);</span><br><span class="line">  INNER_JOIN(<span class="string">&quot;DEPARTMENT D on D.ID = P.DEPARTMENT_ID&quot;</span>);</span><br><span class="line">  INNER_JOIN(<span class="string">&quot;COMPANY C on D.COMPANY_ID = C.ID&quot;</span>);</span><br><span class="line">  WHERE(<span class="string">&quot;P.ID = A.ID&quot;</span>);</span><br><span class="line">  WHERE(<span class="string">&quot;P.FIRST_NAME like ?&quot;</span>);</span><br><span class="line">  OR();</span><br><span class="line">  WHERE(<span class="string">&quot;P.LAST_NAME like ?&quot;</span>);</span><br><span class="line">  GROUP_BY(<span class="string">&quot;P.ID&quot;</span>);</span><br><span class="line">  HAVING(<span class="string">&quot;P.LAST_NAME like ?&quot;</span>);</span><br><span class="line">  OR();</span><br><span class="line">  HAVING(<span class="string">&quot;P.FIRST_NAME like ?&quot;</span>);</span><br><span class="line">  ORDER_BY(<span class="string">&quot;P.ID&quot;</span>);</span><br><span class="line">  ORDER_BY(<span class="string">&quot;P.FULL_NAME&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> SQL();</span><br><span class="line">&#125;</span><br><span class="line">        </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ—¥å¿—</title>
      <link href="/2021/08/07/MyBatis_23_MyBatis%E6%97%A5%E5%BF%97/"/>
      <url>/2021/08/07/MyBatis_23_MyBatis%E6%97%A5%E5%BF%97/</url>
      
        <content type="html"><![CDATA[<p>Mybatis é€šè¿‡ä½¿ç”¨å†…ç½®çš„æ—¥å¿—å·¥å‚æä¾›æ—¥å¿—åŠŸèƒ½ã€‚å†…ç½®æ—¥å¿—å·¥å‚å°†ä¼šæŠŠæ—¥å¿—å·¥ä½œå§”æ‰˜ç»™ä¸‹é¢çš„å®ç°ä¹‹ä¸€ï¼š</p><ul><li>SLF4J</li><li>Apache Commons Logging</li><li>Log4j 2</li><li>Log4j (deprecated since 3.5.9)</li><li>JDK logging</li></ul><p>MyBatis å†…ç½®æ—¥å¿—å·¥å‚åŸºäºè¿è¡Œæ—¶è‡ªçœæœºåˆ¶é€‰æ‹©åˆé€‚çš„æ—¥å¿—å·¥å…·ã€‚å®ƒä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªæŸ¥æ‰¾å¾—åˆ°çš„å·¥å…·ï¼ˆæŒ‰ä¸Šæ–‡åˆ—ä¸¾çš„é¡ºåºæŸ¥æ‰¾ï¼‰ã€‚å¦‚æœä¸€ä¸ªéƒ½æœªæ‰¾åˆ°ï¼Œæ—¥å¿—åŠŸèƒ½å°±ä¼šè¢«ç¦ç”¨ã€‚</p><span id="more"></span><p>ä¸å°‘åº”ç”¨æœåŠ¡å™¨ï¼ˆå¦‚ Tomcat å’Œ WebShpereï¼‰çš„ç±»è·¯å¾„ä¸­å·²ç»åŒ…å« Commons Loggingï¼Œæ‰€ä»¥åœ¨è¿™ç§é…ç½®ç¯å¢ƒä¸‹çš„ MyBatis ä¼šæŠŠå®ƒä½œä¸ºæ—¥å¿—å·¥å…·ï¼Œè®°ä½è¿™ç‚¹éå¸¸é‡è¦ã€‚è¿™å°†æ„å‘³ç€ï¼Œåœ¨è¯¸å¦‚ WebSphere çš„ç¯å¢ƒä¸­ï¼Œå®ƒæä¾›äº† Commons Logging çš„ç§æœ‰å®ç°ï¼Œä½ çš„ Log4J é…ç½®å°†è¢«å¿½ç•¥ã€‚MyBatis å°†ä½ çš„ Log4J é…ç½®å¿½ç•¥æ‰æ˜¯ç›¸å½“ä»¤äººéƒé—·çš„ï¼ˆäº‹å®ä¸Šï¼Œæ­£æ˜¯å› ä¸ºåœ¨è¿™ç§é…ç½®ç¯å¢ƒä¸‹ï¼ŒMyBatis æ‰ä¼šé€‰æ‹©ä½¿ç”¨ Commons Logging è€Œä¸æ˜¯ Log4Jï¼‰ã€‚å¦‚æœä½ çš„åº”ç”¨éƒ¨ç½²åœ¨ä¸€ä¸ªç±»è·¯å¾„å·²ç»åŒ…å« Commons Logging çš„ç¯å¢ƒä¸­ï¼Œè€Œä½ åˆæƒ³ä½¿ç”¨å…¶å®ƒæ—¥å¿—å·¥å…·ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ MyBatis é…ç½®æ–‡ä»¶ mybatis-config.xml é‡Œé¢æ·»åŠ ä¸€é¡¹ setting æ¥é€‰æ‹©åˆ«çš„æ—¥å¿—å·¥å…·ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>logImpl å¯é€‰çš„å€¼æœ‰ï¼šSLF4Jã€LOG4Jã€LOG4J2ã€JDK_LOGGINGã€COMMONS_LOGGINGã€STDOUT_LOGGINGã€NO_LOGGINGï¼Œæˆ–è€…æ˜¯å®ç°äº†æ¥å£ <code>org.apache.ibatis.logging.Log</code> çš„ï¼Œä¸”æ„é€ æ–¹æ³•æ˜¯ä»¥å­—ç¬¦ä¸²ä¸ºå‚æ•°çš„ç±»çš„å®Œå…¨é™å®šåã€‚ï¼ˆè¯‘è€…æ³¨ï¼šå¯ä»¥å‚è€ƒorg.apache.ibatis.logging.slf4j.Slf4jImpl.javaçš„å®ç°ï¼‰</p><p>ä½ ä¹Ÿå¯ä»¥è°ƒç”¨å¦‚ä¸‹ä»»ä¸€æ–¹æ³•æ¥ä½¿ç”¨æ—¥å¿—å·¥å…·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">org.apache.ibatis.logging.LogFactory.useSlf4jLogging();</span><br><span class="line">org.apache.ibatis.logging.LogFactory.useLog4JLogging();</span><br><span class="line">org.apache.ibatis.logging.LogFactory.useJdkLogging();</span><br><span class="line">org.apache.ibatis.logging.LogFactory.useCommonsLogging();</span><br><span class="line">org.apache.ibatis.logging.LogFactory.useStdOutLogging();</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å†³å®šè¦è°ƒç”¨ä»¥ä¸ŠæŸä¸ªæ–¹æ³•ï¼Œè¯·åœ¨è°ƒç”¨å…¶å®ƒ MyBatis æ–¹æ³•ä¹‹å‰è°ƒç”¨å®ƒã€‚å¦å¤–ï¼Œä»…å½“è¿è¡Œæ—¶ç±»è·¯å¾„ä¸­å­˜åœ¨è¯¥æ—¥å¿—å·¥å…·æ—¶ï¼Œè°ƒç”¨ä¸è¯¥æ—¥å¿—å·¥å…·å¯¹åº”çš„æ–¹æ³•æ‰ä¼šç”Ÿæ•ˆï¼Œå¦åˆ™ MyBatis ä¸€æ¦‚å¿½ç•¥ã€‚å¦‚ä½ ç¯å¢ƒä¸­å¹¶ä¸å­˜åœ¨ Log4J2ï¼Œä½ å´è°ƒç”¨äº†ç›¸åº”çš„æ–¹æ³•ï¼ŒMyBatis å°±ä¼šå¿½ç•¥è¿™ä¸€è°ƒç”¨ï¼Œè½¬è€Œä»¥é»˜è®¤çš„æŸ¥æ‰¾é¡ºåºæŸ¥æ‰¾æ—¥å¿—å·¥å…·ã€‚</p><p>å…³äº SLF4Jã€Apache Commons Loggingã€Apache Log4J å’Œ JDK Logging çš„ API ä»‹ç»ä¸åœ¨æœ¬æ–‡æ¡£ä»‹ç»èŒƒå›´å†…ã€‚ä¸è¿‡ï¼Œä¸‹é¢çš„ä¾‹å­å¯ä»¥ä½œä¸ºä¸€ä¸ªå¿«é€Ÿå…¥é—¨ã€‚å…³äºè¿™äº›æ—¥å¿—æ¡†æ¶çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š</p><ul><li><a href="http://www.slf4j.org/">SLF4J</a></li><li><a href="http://commons.apache.org/logging">Apache Commons Logging</a></li><li><a href="http://logging.apache.org/log4j/">Apache Log4j 1.x and 2.x</a></li><li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/logging/overview.html">JDK Logging API</a></li></ul><h3 id="æ—¥å¿—é…ç½®"><a href="#æ—¥å¿—é…ç½®" class="headerlink" title="æ—¥å¿—é…ç½®"></a>æ—¥å¿—é…ç½®</h3><p>ä½ å¯ä»¥å¯¹åŒ…ã€æ˜ å°„ç±»çš„å…¨é™å®šåã€å‘½åç©ºé—´æˆ–å…¨é™å®šè¯­å¥åå¼€å¯æ—¥å¿—åŠŸèƒ½æ¥æŸ¥çœ‹ MyBatis çš„æ—¥å¿—è¯­å¥ã€‚</p><p>å†æ¬¡è¯´æ˜ä¸‹ï¼Œå…·ä½“æ€ä¹ˆåšï¼Œç”±ä½¿ç”¨çš„æ—¥å¿—å·¥å…·å†³å®šï¼Œè¿™é‡Œä»¥ SLF4J(Logback) ä¸ºä¾‹ã€‚é…ç½®æ—¥å¿—åŠŸèƒ½éå¸¸ç®€å•ï¼šæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ˆå¦‚ <code>logback.xml</code>ï¼‰ï¼Œæœ‰æ—¶éœ€è¦æ·»åŠ  jar åŒ…ã€‚ä¸‹é¢çš„ä¾‹å­å°†ä½¿ç”¨ SLF4J(Logback) æ¥é…ç½®å®Œæ•´çš„æ—¥å¿—æœåŠ¡ï¼Œå…±ä¸¤ä¸ªæ­¥éª¤ï¼š</p><h4 id="æ­¥éª¤-1ï¼šæ·»åŠ -SLF4J-Logback-çš„-jar-åŒ…"><a href="#æ­¥éª¤-1ï¼šæ·»åŠ -SLF4J-Logback-çš„-jar-åŒ…" class="headerlink" title="æ­¥éª¤ 1ï¼šæ·»åŠ  SLF4J + Logback çš„ jar åŒ…"></a>æ­¥éª¤ 1ï¼šæ·»åŠ  SLF4J + Logback çš„ jar åŒ…</h4><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ SLF4J(Logback)ï¼Œå°±è¦ç¡®ä¿å®ƒçš„ jar åŒ…åœ¨åº”ç”¨ä¸­æ˜¯å¯ç”¨çš„ã€‚è¦å¯ç”¨ SLF4J(Logback)ï¼Œåªè¦å°† jar åŒ…æ·»åŠ åˆ°åº”ç”¨çš„ç±»è·¯å¾„ä¸­å³å¯ã€‚SLF4J(Logback) çš„ jar åŒ…å¯ä»¥åœ¨ä¸Šé¢çš„é“¾æ¥ä¸­ä¸‹è½½ã€‚</p><p>å¯¹äº web åº”ç”¨æˆ–ä¼ä¸šçº§åº”ç”¨ï¼Œåˆ™éœ€è¦å°† <code>logback-classic.jar</code>, <code>logback-core.jar</code> and <code>slf4j-api.jar</code> æ·»åŠ åˆ° <code>WEB-INF/lib</code> ç›®å½•ä¸‹ï¼›å¯¹äºç‹¬ç«‹åº”ç”¨ï¼Œå¯ä»¥å°†å®ƒæ·»åŠ åˆ°JVM çš„ <code>-classpath</code> å¯åŠ¨å‚æ•°ä¸­ã€‚</p><p>If you use the maven, you can download jar files by adding following settings on your <code>pom.xml</code>.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤-2ï¼šé…ç½®-Logback"><a href="#æ­¥éª¤-2ï¼šé…ç½®-Logback" class="headerlink" title="æ­¥éª¤ 2ï¼šé…ç½® Logback"></a>æ­¥éª¤ 2ï¼šé…ç½® Logback</h4><p>é…ç½® Logback æ¯”è¾ƒç®€å•ï¼Œå‡å¦‚ä½ éœ€è¦è®°å½•è¿™ä¸ªæ˜ å°„å™¨æ¥å£çš„æ—¥å¿—ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">package org.mybatis.example;</span><br><span class="line">public interface BlogMapper &#123;</span><br><span class="line">  @Select(&quot;SELECT * FROM blog WHERE id = #&#123;id&#125;&quot;)</span><br><span class="line">  Blog selectBlog(int id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨åº”ç”¨çš„ç±»è·¯å¾„ä¸­åˆ›å»ºä¸€ä¸ªåç§°ä¸º <code>logback.xml</code> çš„æ–‡ä»¶ï¼Œæ–‡ä»¶çš„å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;stdout&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%5level [%thread] - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.example.BlogMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;trace&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;error&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;stdout&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸Šé…ç½®åï¼ŒSLF4J(Logback) å°±ä¼šè®°å½• <code>org.mybatis.example.BlogMapper</code> çš„è¯¦ç»†æ‰§è¡Œæ“ä½œï¼Œä¸”ä»…è®°å½•åº”ç”¨ä¸­å…¶å®ƒç±»çš„é”™è¯¯ä¿¡æ¯ï¼ˆè‹¥æœ‰ï¼‰ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥å°†æ—¥å¿—çš„è®°å½•æ–¹å¼ä»æ¥å£çº§åˆ«åˆ‡æ¢åˆ°è¯­å¥çº§åˆ«ï¼Œä»è€Œå®ç°æ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚å¦‚ä¸‹é…ç½®åªå¯¹ <code>selectBlog</code> è¯­å¥è®°å½•æ—¥å¿—ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.example.BlogMapper.selectBlog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;trace&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸æ­¤ç›¸å¯¹ï¼Œå¯ä»¥å¯¹ä¸€ç»„æ˜ å°„å™¨æ¥å£è®°å½•æ—¥å¿—ï¼Œåªè¦å¯¹æ˜ å°„å™¨æ¥å£æ‰€åœ¨çš„åŒ…å¼€å¯æ—¥å¿—åŠŸèƒ½å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.example&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;trace&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æŸäº›æŸ¥è¯¢å¯èƒ½ä¼šè¿”å›åºå¤§çš„ç»“æœé›†ï¼Œæ­¤æ—¶åªæƒ³è®°å½•å…¶æ‰§è¡Œçš„ SQL è¯­å¥è€Œä¸æƒ³è®°å½•ç»“æœè¯¥æ€ä¹ˆåŠï¼Ÿä¸ºæ­¤ï¼ŒMybatis ä¸­ SQL è¯­å¥çš„æ—¥å¿—çº§åˆ«è¢«è®¾ä¸ºDEBUGï¼ˆJDK æ—¥å¿—è®¾ä¸º FINEï¼‰ï¼Œç»“æœçš„æ—¥å¿—çº§åˆ«ä¸º TRACEï¼ˆJDK æ—¥å¿—è®¾ä¸º FINER)ã€‚æ‰€ä»¥ï¼Œåªè¦å°†æ—¥å¿—çº§åˆ«è°ƒæ•´ä¸º DEBUG å³å¯è¾¾åˆ°ç›®çš„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.example&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;debug&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¦è®°å½•æ—¥å¿—çš„æ˜¯ç±»ä¼¼ä¸‹é¢çš„æ˜ å°„å™¨æ–‡ä»¶è€Œä¸æ˜¯æ˜ å°„å™¨æ¥å£åˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;org.mybatis.example.BlogMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">    select * from Blog where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚éœ€å¯¹ XML æ–‡ä»¶è®°å½•æ—¥å¿—ï¼Œåªè¦å¯¹å‘½åç©ºé—´å¢åŠ æ—¥å¿—è®°å½•åŠŸèƒ½å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.example.BlogMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;trace&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¦è®°å½•å…·ä½“è¯­å¥çš„æ—¥å¿—å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.example.BlogMapper.selectBlog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">level</span> <span class="attr">value</span>=<span class="string">&quot;trace&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œä¸ºæ˜ å°„å™¨æ¥å£å’Œ XML æ–‡ä»¶æ·»åŠ æ—¥å¿—åŠŸèƒ½çš„è¯­å¥æ¯«æ— å·®åˆ«ã€‚</p><p><strong>æ³¨æ„</strong> å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ SLF4J æˆ– Log4j 2ï¼ŒMyBatis å°†ä»¥ <code>MYBATIS</code> è¿™ä¸ªå€¼è¿›è¡Œè°ƒç”¨ã€‚</p><p>é…ç½®æ–‡ä»¶ <code>log4j.properties</code> çš„ä½™ä¸‹å†…å®¹æ˜¯é’ˆå¯¹æ—¥å¿—è¾“å‡ºæºçš„ï¼Œè¿™ä¸€å†…å®¹å·²ç»è¶…å‡ºæœ¬æ–‡æ¡£èŒƒå›´ã€‚å…³äº Logback çš„æ›´å¤šå†…å®¹ï¼Œå¯ä»¥å‚è€ƒ<a href="https://logback.qos.ch/">Logback</a> çš„ç½‘ç«™ã€‚ä¸è¿‡ï¼Œä½ ä¹Ÿå¯ä»¥ç®€å•åœ°åšåšå®éªŒï¼Œçœ‹çœ‹ä¸åŒçš„é…ç½®ä¼šäº§ç”Ÿæ€æ ·çš„æ•ˆæœã€‚</p><h4 id="Configuration-example-for-Log4j-2"><a href="#Configuration-example-for-Log4j-2" class="headerlink" title="Configuration example for Log4j 2"></a>Configuration example for Log4j 2</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">pom.xml</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">log4j2.xml</span><br><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Configuration</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://logging.apache.org/log4j/2.0/config&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">&quot;stdout&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%5level [%t] - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Logger</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.example.BlogMapper&quot;</span> <span class="attr">level</span>=<span class="string">&quot;trace&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">&quot;error&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;stdout&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Configuration-example-for-Log4j"><a href="#Configuration-example-for-Log4j" class="headerlink" title="Configuration example for Log4j"></a>Configuration example for Log4j</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pom.xml</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">log4j.properties</span><br><span class="line">log4j.rootLogger=ERROR, stdout</span><br><span class="line"></span><br><span class="line">log4j.logger.org.mybatis.example.BlogMapper=TRACE</span><br><span class="line"></span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure><h4 id="Configuration-example-for-JDK-logging"><a href="#Configuration-example-for-JDK-logging" class="headerlink" title="Configuration example for JDK logging"></a>Configuration example for JDK logging</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">logging.properties</span><br><span class="line">handlers=java.util.logging.ConsoleHandler</span><br><span class="line">.level=SEVERE</span><br><span class="line"></span><br><span class="line">org.mybatis.example.BlogMapper=FINER</span><br><span class="line"></span><br><span class="line">java.util.logging.ConsoleHandler.level=ALL</span><br><span class="line">java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter</span><br><span class="line">java.util.logging.SimpleFormatter.format=%1$tT.%1$tL %4$s %3$s - %5$s%6$s%n</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisçš„Javaç›¸å…³API</title>
      <link href="/2021/08/06/MyBatis_21_MyBatis%E7%9A%84Java%E7%9B%B8%E5%85%B3API/"/>
      <url>/2021/08/06/MyBatis_21_MyBatis%E7%9A%84Java%E7%9B%B8%E5%85%B3API/</url>
      
        <content type="html"><![CDATA[<p>æ—¢ç„¶ä½ å·²ç»çŸ¥é“å¦‚ä½•é…ç½® MyBatis ä»¥åŠå¦‚ä½•åˆ›å»ºæ˜ å°„ï¼Œæ˜¯æ—¶å€™æ¥å°ç‚¹ç”œå¤´äº†ã€‚MyBatis çš„ Java API å°±æ˜¯è¿™ä¸ªç”œå¤´ã€‚ç¨åä½ å°†çœ‹åˆ°ï¼Œå’Œ JDBC ç›¸æ¯”ï¼ŒMyBatis å¤§å¹…ç®€åŒ–ä½ çš„ä»£ç å¹¶åŠ›å›¾ä¿æŒå…¶ç®€æ´ã€å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚ä¸ºäº†ä½¿å¾— SQL æ˜ å°„æ›´åŠ ä¼˜ç§€ï¼ŒMyBatis 3 å¼•å…¥äº†è®¸å¤šé‡è¦çš„æ”¹è¿›ã€‚</p><span id="more"></span><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><p>åœ¨æˆ‘ä»¬æ·±å…¥ Java API ä¹‹å‰ï¼Œç†è§£å…³äºç›®å½•ç»“æ„çš„æœ€ä½³å®è·µæ˜¯å¾ˆé‡è¦çš„ã€‚MyBatis éå¸¸çµæ´»ï¼Œä½ å¯ä»¥éšæ„å®‰æ’ä½ çš„æ–‡ä»¶ã€‚ä½†å’Œå…¶å®ƒæ¡†æ¶ä¸€æ ·ï¼Œç›®å½•ç»“æ„æœ‰ä¸€ç§æœ€ä½³å®è·µã€‚</p><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å…¸å‹çš„åº”ç”¨ç›®å½•ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/my_application</span><br><span class="line">  /bin</span><br><span class="line">  /devlib</span><br><span class="line">  /lib                &lt;-- MyBatis *.jar æ–‡ä»¶åœ¨è¿™é‡Œã€‚</span><br><span class="line">  /src</span><br><span class="line">    /org/myapp/</span><br><span class="line">      /action</span><br><span class="line">      /data           &lt;-- MyBatis é…ç½®æ–‡ä»¶åœ¨è¿™é‡Œï¼ŒåŒ…æ‹¬æ˜ å°„å™¨ç±»ã€XML é…ç½®ã€XML æ˜ å°„æ–‡ä»¶ã€‚</span><br><span class="line">        /mybatis-config.xml</span><br><span class="line">        /BlogMapper.java</span><br><span class="line">        /BlogMapper.xml</span><br><span class="line">      /model</span><br><span class="line">      /service</span><br><span class="line">      /view</span><br><span class="line">    /properties       &lt;-- åœ¨ XML é…ç½®ä¸­å‡ºç°çš„å±æ€§å€¼åœ¨è¿™é‡Œã€‚</span><br><span class="line">  /test</span><br><span class="line">    /org/myapp/</span><br><span class="line">      /action</span><br><span class="line">      /data</span><br><span class="line">      /model</span><br><span class="line">      /service</span><br><span class="line">      /view</span><br><span class="line">    /properties</span><br><span class="line">  /web</span><br><span class="line">    /WEB-INF</span><br><span class="line">      /web.xml</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿™æ˜¯æ¨èçš„ç›®å½•ç»“æ„ï¼Œå¹¶éå¼ºåˆ¶è¦æ±‚ï¼Œä½†ä½¿ç”¨ä¸€ä¸ªé€šç”¨çš„ç›®å½•ç»“æ„å°†æ›´æœ‰åˆ©äºå¤§å®¶æ²Ÿé€šã€‚</p><p>æœ¬ç« æ¥ä¸‹æ¥çš„ç¤ºä¾‹å°†å‡å®šä½ éµå¾ªè¿™ç§ç›®å½•ç»“æ„ã€‚</p><h3 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h3><p>ä½¿ç”¨ MyBatis çš„ä¸»è¦ Java æ¥å£å°±æ˜¯ SqlSessionã€‚ä½ å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å£æ¥æ‰§è¡Œå‘½ä»¤ï¼Œè·å–æ˜ å°„å™¨å®ä¾‹å’Œç®¡ç†äº‹åŠ¡ã€‚åœ¨ä»‹ç» SqlSession æ¥å£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£å¦‚ä½•è·å–ä¸€ä¸ª SqlSession å®ä¾‹ã€‚SqlSessions æ˜¯ç”± SqlSessionFactory å®ä¾‹åˆ›å»ºçš„ã€‚SqlSessionFactory å¯¹è±¡åŒ…å«åˆ›å»º SqlSession å®ä¾‹çš„å„ç§æ–¹æ³•ã€‚è€Œ SqlSessionFactory æœ¬èº«æ˜¯ç”± SqlSessionFactoryBuilder åˆ›å»ºçš„ï¼Œå®ƒå¯ä»¥ä» XMLã€æ³¨è§£æˆ– Java é…ç½®ä»£ç æ¥åˆ›å»º SqlSessionFactoryã€‚</p><p><strong>æç¤º</strong> å½“ Mybatis ä¸ä¸€äº›ä¾èµ–æ³¨å…¥æ¡†æ¶ï¼ˆå¦‚ Spring æˆ–è€… Guiceï¼‰æ­é…ä½¿ç”¨æ—¶ï¼ŒSqlSession å°†è¢«ä¾èµ–æ³¨å…¥æ¡†æ¶åˆ›å»ºå¹¶æ³¨å…¥ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ä½¿ç”¨ SqlSessionFactoryBuilder æˆ–è€… SqlSessionFactoryï¼Œå¯ä»¥ç›´æ¥é˜…è¯» SqlSession è¿™ä¸€èŠ‚ã€‚è¯·å‚è€ƒ Mybatis-Spring æˆ–è€… Mybatis-Guice æ‰‹å†Œä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><h4 id="SqlSessionFactoryBuilder"><a href="#SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionFactoryBuilder"></a>SqlSessionFactoryBuilder</h4><p>SqlSessionFactoryBuilder æœ‰äº”ä¸ª build() æ–¹æ³•ï¼Œæ¯ä¸€ç§éƒ½å…è®¸ä½ ä»ä¸åŒçš„èµ„æºä¸­åˆ›å»ºä¸€ä¸ª SqlSessionFactory å®ä¾‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SqlSessionFactory <span class="title function_">build</span><span class="params">(InputStream inputStream)</span></span><br><span class="line">SqlSessionFactory <span class="title function_">build</span><span class="params">(InputStream inputStream, String environment)</span></span><br><span class="line">SqlSessionFactory <span class="title function_">build</span><span class="params">(InputStream inputStream, Properties properties)</span></span><br><span class="line">SqlSessionFactory <span class="title function_">build</span><span class="params">(InputStream inputStream, String env, Properties props)</span></span><br><span class="line">SqlSessionFactory <span class="title function_">build</span><span class="params">(Configuration config)</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯æœ€å¸¸ç”¨çš„ï¼Œå®ƒæ¥å—ä¸€ä¸ªæŒ‡å‘ XML æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯ä¹‹å‰è®¨è®ºçš„ mybatis-config.xml æ–‡ä»¶ï¼‰çš„ InputStream å®ä¾‹ã€‚å¯é€‰çš„å‚æ•°æ˜¯ environment å’Œ propertiesã€‚environment å†³å®šåŠ è½½å“ªç§ç¯å¢ƒï¼ŒåŒ…æ‹¬æ•°æ®æºå’Œäº‹åŠ¡ç®¡ç†å™¨ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;production&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;MANAGED&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;JNDI&quot;</span>&gt;</span></span><br><span class="line">        ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è°ƒç”¨äº†å¸¦ environment å‚æ•°çš„ build æ–¹æ³•ï¼Œé‚£ä¹ˆ MyBatis å°†ä½¿ç”¨è¯¥ç¯å¢ƒå¯¹åº”çš„é…ç½®ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æŒ‡å®šäº†ä¸€ä¸ªæ— æ•ˆçš„ç¯å¢ƒï¼Œä¼šæ”¶åˆ°é”™è¯¯ã€‚å¦‚æœä½ è°ƒç”¨äº†ä¸å¸¦ environment å‚æ•°çš„ build æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨é»˜è®¤çš„ç¯å¢ƒé…ç½®ï¼ˆåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡ default&#x3D;â€developmentâ€ æŒ‡å®šäº†é»˜è®¤ç¯å¢ƒï¼‰ã€‚</p><p>å¦‚æœä½ è°ƒç”¨äº†æ¥å— properties å®ä¾‹çš„æ–¹æ³•ï¼Œé‚£ä¹ˆ MyBatis å°±ä¼šåŠ è½½è¿™äº›å±æ€§ï¼Œå¹¶åœ¨é…ç½®ä¸­æä¾›ä½¿ç”¨ã€‚ç»å¤§å¤šæ•°åœºåˆä¸‹ï¼Œå¯ä»¥ç”¨ ${propName} å½¢å¼å¼•ç”¨è¿™äº›é…ç½®å€¼ã€‚</p><p>å›æƒ³ä¸€ä¸‹ï¼Œåœ¨ mybatis-config.xml ä¸­ï¼Œå¯ä»¥å¼•ç”¨å±æ€§å€¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šå±æ€§å€¼ã€‚å› æ­¤ï¼Œç†è§£å±æ€§çš„ä¼˜å…ˆçº§æ˜¯å¾ˆé‡è¦çš„ã€‚åœ¨ä¹‹å‰çš„æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡äº†ç›¸å…³å†…å®¹ï¼Œä½†ä¸ºäº†æ–¹ä¾¿æŸ¥é˜…ï¼Œè¿™é‡Œå†é‡æ–°ä»‹ç»ä¸€ä¸‹ï¼š</p><hr><p>å¦‚æœä¸€ä¸ªå±æ€§å­˜åœ¨äºä¸‹é¢çš„å¤šä¸ªä½ç½®ï¼Œé‚£ä¹ˆ MyBatis å°†æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ¥åŠ è½½å®ƒä»¬ï¼š</p><ul><li>é¦–å…ˆï¼Œè¯»å–åœ¨ properties å…ƒç´ ä½“ä¸­æŒ‡å®šçš„å±æ€§ï¼›</li><li>å…¶æ¬¡ï¼Œè¯»å–åœ¨ properties å…ƒç´ çš„ç±»è·¯å¾„ resource æˆ– url æŒ‡å®šçš„å±æ€§ï¼Œä¸”ä¼šè¦†ç›–å·²ç»æŒ‡å®šäº†çš„é‡å¤å±æ€§ï¼›</li><li>æœ€åï¼Œè¯»å–ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§ï¼Œä¸”ä¼šè¦†ç›–å·²ç»ä» properties å…ƒç´ ä½“å’Œ resource æˆ– url å±æ€§ä¸­åŠ è½½äº†çš„é‡å¤å±æ€§ã€‚</li></ul><p>å› æ­¤ï¼Œé€šè¿‡æ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œresource æˆ– url æŒ‡å®šçš„å±æ€§ä¼˜å…ˆçº§ä¸­ç­‰ï¼Œåœ¨ properties å…ƒç´ ä½“ä¸­æŒ‡å®šçš„å±æ€§ä¼˜å…ˆçº§æœ€ä½ã€‚</p><hr><p>æ€»ç»“ä¸€ä¸‹ï¼Œå‰å››ä¸ªæ–¹æ³•å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä½†æä¾›äº†ä¸åŒçš„è¦†ç›–é€‰é¡¹ï¼Œå…è®¸ä½ å¯é€‰åœ°æŒ‡å®š environment å’Œ&#x2F;æˆ– propertiesã€‚ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªä» mybatis-config.xml æ–‡ä»¶åˆ›å»º SqlSessionFactory çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;org/mybatis/builder/mybatis-config.xml&quot;</span>;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(inputStream);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† Resources å·¥å…·ç±»ï¼Œè¿™ä¸ªç±»åœ¨ org.apache.ibatis.io åŒ…ä¸­ã€‚Resources ç±»æ­£å¦‚å…¶åï¼Œä¼šå¸®åŠ©ä½ ä»ç±»è·¯å¾„ä¸‹ã€æ–‡ä»¶ç³»ç»Ÿæˆ–ä¸€ä¸ª web URL ä¸­åŠ è½½èµ„æºæ–‡ä»¶ã€‚åœ¨ç•¥è¯»è¯¥ç±»çš„æºä»£ç æˆ–ç”¨ IDE æŸ¥çœ‹è¯¥ç±»ä¿¡æ¯åï¼Œä½ ä¼šå‘ç°ä¸€æ•´å¥—ç›¸å½“å®ç”¨çš„æ–¹æ³•ã€‚è¿™é‡Œç»™å‡ºä¸€ä¸ªç®€è¡¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">URL <span class="title function_">getResourceURL</span><span class="params">(String resource)</span></span><br><span class="line">URL <span class="title function_">getResourceURL</span><span class="params">(ClassLoader loader, String resource)</span></span><br><span class="line">InputStream <span class="title function_">getResourceAsStream</span><span class="params">(String resource)</span></span><br><span class="line">InputStream <span class="title function_">getResourceAsStream</span><span class="params">(ClassLoader loader, String resource)</span></span><br><span class="line">Properties <span class="title function_">getResourceAsProperties</span><span class="params">(String resource)</span></span><br><span class="line">Properties <span class="title function_">getResourceAsProperties</span><span class="params">(ClassLoader loader, String resource)</span></span><br><span class="line">Reader <span class="title function_">getResourceAsReader</span><span class="params">(String resource)</span></span><br><span class="line">Reader <span class="title function_">getResourceAsReader</span><span class="params">(ClassLoader loader, String resource)</span></span><br><span class="line">File <span class="title function_">getResourceAsFile</span><span class="params">(String resource)</span></span><br><span class="line">File <span class="title function_">getResourceAsFile</span><span class="params">(ClassLoader loader, String resource)</span></span><br><span class="line">InputStream <span class="title function_">getUrlAsStream</span><span class="params">(String urlString)</span></span><br><span class="line">Reader <span class="title function_">getUrlAsReader</span><span class="params">(String urlString)</span></span><br><span class="line">Properties <span class="title function_">getUrlAsProperties</span><span class="params">(String urlString)</span></span><br><span class="line">Class <span class="title function_">classForName</span><span class="params">(String className)</span></span><br></pre></td></tr></table></figure><p>æœ€åä¸€ä¸ª build æ–¹æ³•æ¥å—ä¸€ä¸ª Configuration å®ä¾‹ã€‚Configuration ç±»åŒ…å«äº†å¯¹ä¸€ä¸ª SqlSessionFactory å®ä¾‹ä½ å¯èƒ½å…³å¿ƒçš„æ‰€æœ‰å†…å®¹ã€‚åœ¨æ£€æŸ¥é…ç½®æ—¶ï¼ŒConfiguration ç±»å¾ˆæœ‰ç”¨ï¼Œå®ƒå…è®¸ä½ æŸ¥æ‰¾å’Œæ“çºµ SQL æ˜ å°„ï¼ˆä½†å½“åº”ç”¨å¼€å§‹æ¥æ”¶è¯·æ±‚æ—¶ä¸æ¨èä½¿ç”¨ï¼‰ã€‚ä½ ä¹‹å‰å­¦ä¹ è¿‡çš„æ‰€æœ‰é…ç½®å¼€å…³éƒ½å­˜åœ¨äº Configuration ç±»ï¼Œåªä¸è¿‡å®ƒä»¬æ˜¯ä»¥ Java API å½¢å¼æš´éœ²çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•æ‰‹åŠ¨é…ç½® Configuration å®ä¾‹ï¼Œç„¶åå°†å®ƒä¼ é€’ç»™ build() æ–¹æ³•æ¥åˆ›å»º SqlSessionFactoryã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> BaseDataTest.createBlogDataSource();</span><br><span class="line"><span class="type">TransactionFactory</span> <span class="variable">transactionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTransactionFactory</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">Environment</span> <span class="variable">environment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Environment</span>(<span class="string">&quot;development&quot;</span>, transactionFactory, dataSource);</span><br><span class="line"></span><br><span class="line"><span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>(environment);</span><br><span class="line">configuration.setLazyLoadingEnabled(<span class="literal">true</span>);</span><br><span class="line">configuration.setEnhancementEnabled(<span class="literal">true</span>);</span><br><span class="line">configuration.getTypeAliasRegistry().registerAlias(Blog.class);</span><br><span class="line">configuration.getTypeAliasRegistry().registerAlias(Post.class);</span><br><span class="line">configuration.getTypeAliasRegistry().registerAlias(Author.class);</span><br><span class="line">configuration.addMapper(BoundBlogMapper.class);</span><br><span class="line">configuration.addMapper(BoundAuthorMapper.class);</span><br><span class="line"></span><br><span class="line"><span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(configuration);</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å°±è·å¾—ä¸€ä¸ªå¯ä»¥ç”¨æ¥åˆ›å»º SqlSession å®ä¾‹çš„ SqlSessionFactory äº†ã€‚</p><h4 id="SqlSessionFactory"><a href="#SqlSessionFactory" class="headerlink" title="SqlSessionFactory"></a>SqlSessionFactory</h4><p>SqlSessionFactory æœ‰å…­ä¸ªæ–¹æ³•åˆ›å»º SqlSession å®ä¾‹ã€‚é€šå¸¸æ¥è¯´ï¼Œå½“ä½ é€‰æ‹©å…¶ä¸­ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><strong>äº‹åŠ¡å¤„ç†</strong>ï¼šä½ å¸Œæœ›åœ¨ session ä½œç”¨åŸŸä¸­ä½¿ç”¨äº‹åŠ¡ä½œç”¨åŸŸï¼Œè¿˜æ˜¯ä½¿ç”¨è‡ªåŠ¨æäº¤ï¼ˆauto-commitï¼‰ï¼Ÿï¼ˆå¯¹å¾ˆå¤šæ•°æ®åº“å’Œ&#x2F;æˆ– JDBC é©±åŠ¨æ¥è¯´ï¼Œç­‰åŒäºå…³é—­äº‹åŠ¡æ”¯æŒï¼‰</li><li><strong>æ•°æ®åº“è¿æ¥</strong>ï¼šä½ å¸Œæœ› MyBatis å¸®ä½ ä»å·²é…ç½®çš„æ•°æ®æºè·å–è¿æ¥ï¼Œè¿˜æ˜¯ä½¿ç”¨è‡ªå·±æä¾›çš„è¿æ¥ï¼Ÿ</li><li><strong>è¯­å¥æ‰§è¡Œ</strong>ï¼šä½ å¸Œæœ› MyBatis å¤ç”¨ PreparedStatement å’Œ&#x2F;æˆ–æ‰¹é‡æ›´æ–°è¯­å¥ï¼ˆåŒ…æ‹¬æ’å…¥è¯­å¥å’Œåˆ é™¤è¯­å¥ï¼‰å—ï¼Ÿ</li></ul><p>åŸºäºä»¥ä¸Šéœ€æ±‚ï¼Œæœ‰ä¸‹åˆ—å·²é‡è½½çš„å¤šä¸ª openSession() æ–¹æ³•ä¾›ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">()</span></span><br><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">(<span class="type">boolean</span> autoCommit)</span></span><br><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">(Connection connection)</span></span><br><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">(TransactionIsolationLevel level)</span></span><br><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">(ExecutorType execType, TransactionIsolationLevel level)</span></span><br><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">(ExecutorType execType)</span></span><br><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">(ExecutorType execType, <span class="type">boolean</span> autoCommit)</span></span><br><span class="line">SqlSession <span class="title function_">openSession</span><span class="params">(ExecutorType execType, Connection connection)</span></span><br><span class="line">Configuration <span class="title function_">getConfiguration</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><p>é»˜è®¤çš„ openSession() æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œå®ƒä¼šåˆ›å»ºå…·å¤‡å¦‚ä¸‹ç‰¹æ€§çš„ SqlSessionï¼š</p><ul><li>äº‹åŠ¡ä½œç”¨åŸŸå°†ä¼šå¼€å¯ï¼ˆä¹Ÿå°±æ˜¯ä¸è‡ªåŠ¨æäº¤ï¼‰ã€‚</li><li>å°†ç”±å½“å‰ç¯å¢ƒé…ç½®çš„ DataSource å®ä¾‹ä¸­è·å– Connection å¯¹è±¡ã€‚</li><li>äº‹åŠ¡éš”ç¦»çº§åˆ«å°†ä¼šä½¿ç”¨é©±åŠ¨æˆ–æ•°æ®æºçš„é»˜è®¤è®¾ç½®ã€‚</li><li>é¢„å¤„ç†è¯­å¥ä¸ä¼šè¢«å¤ç”¨ï¼Œä¹Ÿä¸ä¼šæ‰¹é‡å¤„ç†æ›´æ–°ã€‚</li></ul><p>ç›¸ä¿¡ä½ å·²ç»èƒ½ä»æ–¹æ³•ç­¾åä¸­çŸ¥é“è¿™äº›æ–¹æ³•çš„åŒºåˆ«ã€‚å‘ <code>autoCommit</code> å¯é€‰å‚æ•°ä¼ é€’ <code>true</code> å€¼å³å¯å¼€å¯è‡ªåŠ¨æäº¤åŠŸèƒ½ã€‚è‹¥è¦ä½¿ç”¨è‡ªå·±çš„ <code>Connection</code> å®ä¾‹ï¼Œä¼ é€’ä¸€ä¸ª <code>Connection</code> å®ä¾‹ç»™ <code>connection</code> å‚æ•°å³å¯ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬æ²¡æœ‰æä¾›åŒæ—¶è®¾ç½® <code>Connection</code> å’Œ <code>autoCommit</code> çš„æ–¹æ³•ï¼Œè¿™æ˜¯å› ä¸º MyBatis ä¼šä¾æ®ä¼ å…¥çš„ Connection æ¥å†³å®šæ˜¯å¦å¯ç”¨ autoCommitã€‚å¯¹äºäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒMyBatis ä½¿ç”¨äº†ä¸€ä¸ª Java æšä¸¾åŒ…è£…å™¨æ¥è¡¨ç¤ºï¼Œç§°ä¸º <code>TransactionIsolationLevel</code>ï¼Œäº‹åŠ¡éš”ç¦»çº§åˆ«æ”¯æŒ JDBC çš„äº”ä¸ªéš”ç¦»çº§åˆ«ï¼ˆ<code>NONE</code>ã€<code>READ_UNCOMMITTED</code>ã€<code>READ_COMMITTED</code>ã€<code>REPEATABLE_READ</code> å’Œ <code>SERIALIZABLE</code>ï¼‰ï¼Œå¹¶ä¸”ä¸é¢„æœŸçš„è¡Œä¸ºä¸€è‡´ã€‚</p><p>ä½ å¯èƒ½å¯¹ <code>ExecutorType</code> å‚æ•°æ„Ÿåˆ°é™Œç”Ÿã€‚è¿™ä¸ªæšä¸¾ç±»å‹å®šä¹‰äº†ä¸‰ä¸ªå€¼:</p><ul><li><code>ExecutorType.SIMPLE</code>ï¼šè¯¥ç±»å‹çš„æ‰§è¡Œå™¨æ²¡æœ‰ç‰¹åˆ«çš„è¡Œä¸ºã€‚å®ƒä¸ºæ¯ä¸ªè¯­å¥çš„æ‰§è¡Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¢„å¤„ç†è¯­å¥ã€‚</li><li><code>ExecutorType.REUSE</code>ï¼šè¯¥ç±»å‹çš„æ‰§è¡Œå™¨ä¼šå¤ç”¨é¢„å¤„ç†è¯­å¥ã€‚</li><li><code>ExecutorType.BATCH</code>ï¼šè¯¥ç±»å‹çš„æ‰§è¡Œå™¨ä¼šæ‰¹é‡æ‰§è¡Œæ‰€æœ‰æ›´æ–°è¯­å¥ï¼Œå¦‚æœ SELECT åœ¨å¤šä¸ªæ›´æ–°ä¸­é—´æ‰§è¡Œï¼Œå°†åœ¨å¿…è¦æ—¶å°†å¤šæ¡æ›´æ–°è¯­å¥åˆ†éš”å¼€æ¥ï¼Œä»¥æ–¹ä¾¿ç†è§£ã€‚</li></ul><p><strong>æç¤º</strong> åœ¨ SqlSessionFactory ä¸­è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æˆ‘ä»¬æ²¡æœ‰æåŠï¼Œå°±æ˜¯ getConfiguration()ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Configuration å®ä¾‹ï¼Œä½ å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨å®ƒæ¥æ£€æŸ¥ MyBatis çš„é…ç½®ã€‚</p><p><strong>æç¤º</strong> å¦‚æœä½ ä½¿ç”¨è¿‡ MyBatis çš„æ—§ç‰ˆæœ¬ï¼Œå¯èƒ½è¿˜è®°å¾— sessionã€äº‹åŠ¡å’Œæ‰¹é‡æ“ä½œæ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­åˆ™ä¸æ˜¯è¿™æ ·ã€‚ä¸Šè¿°ä¸‰è€…éƒ½åŒ…å«åœ¨ session ä½œç”¨åŸŸå†…ã€‚ä½ ä¸å¿…åˆ†åˆ«å¤„ç†äº‹åŠ¡æˆ–æ‰¹é‡æ“ä½œå°±èƒ½å¾—åˆ°æƒ³è¦çš„å…¨éƒ¨æ•ˆæœã€‚</p><h4 id="SqlSession-1"><a href="#SqlSession-1" class="headerlink" title="SqlSession"></a>SqlSession</h4><p>æ­£å¦‚ä¹‹å‰æ‰€æåˆ°çš„ï¼ŒSqlSession åœ¨ MyBatis ä¸­æ˜¯éå¸¸å¼ºå¤§çš„ä¸€ä¸ªç±»ã€‚å®ƒåŒ…å«äº†æ‰€æœ‰æ‰§è¡Œè¯­å¥ã€æäº¤æˆ–å›æ»šäº‹åŠ¡ä»¥åŠè·å–æ˜ å°„å™¨å®ä¾‹çš„æ–¹æ³•ã€‚</p><p>SqlSession ç±»çš„æ–¹æ³•è¶…è¿‡äº† 20 ä¸ªï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å°†å®ƒä»¬åˆ†æˆå‡ ç§ç»„åˆ«ã€‚</p><h5 id="è¯­å¥æ‰§è¡Œæ–¹æ³•"><a href="#è¯­å¥æ‰§è¡Œæ–¹æ³•" class="headerlink" title="è¯­å¥æ‰§è¡Œæ–¹æ³•"></a>è¯­å¥æ‰§è¡Œæ–¹æ³•</h5><p>è¿™äº›æ–¹æ³•è¢«ç”¨æ¥æ‰§è¡Œå®šä¹‰åœ¨ SQL æ˜ å°„ XML æ–‡ä»¶ä¸­çš„ SELECTã€INSERTã€UPDATE å’Œ DELETE è¯­å¥ã€‚ä½ å¯ä»¥é€šè¿‡åå­—å¿«é€Ÿäº†è§£å®ƒä»¬çš„ä½œç”¨ï¼Œæ¯ä¸€æ–¹æ³•éƒ½æ¥å—è¯­å¥çš„ ID ä»¥åŠå‚æ•°å¯¹è±¡ï¼Œå‚æ•°å¯ä»¥æ˜¯åŸå§‹ç±»å‹ï¼ˆæ”¯æŒè‡ªåŠ¨è£…ç®±æˆ–åŒ…è£…ç±»ï¼‰ã€JavaBeanã€POJO æˆ– Mapã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt; T <span class="title function_">selectOne</span><span class="params">(String statement, Object parameter)</span></span><br><span class="line">&lt;E&gt; List&lt;E&gt; <span class="title function_">selectList</span><span class="params">(String statement, Object parameter)</span></span><br><span class="line">&lt;T&gt; Cursor&lt;T&gt; <span class="title function_">selectCursor</span><span class="params">(String statement, Object parameter)</span></span><br><span class="line">&lt;K,V&gt; Map&lt;K,V&gt; <span class="title function_">selectMap</span><span class="params">(String statement, Object parameter, String mapKey)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(String statement, Object parameter)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">update</span><span class="params">(String statement, Object parameter)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">delete</span><span class="params">(String statement, Object parameter)</span></span><br></pre></td></tr></table></figure><p>selectOne å’Œ selectList çš„ä¸åŒä»…ä»…æ˜¯ selectOne å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡æˆ– null å€¼ã€‚å¦‚æœè¿”å›å€¼å¤šäºä¸€ä¸ªï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœä½ ä¸çŸ¥é“è¿”å›å¯¹è±¡ä¼šæœ‰å¤šå°‘ï¼Œè¯·ä½¿ç”¨ selectListã€‚å¦‚æœéœ€è¦æŸ¥çœ‹æŸä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯æŸ¥è¯¢ä¸€ä¸ª count å€¼ï¼ˆ0 æˆ– 1ï¼‰ã€‚selectMap ç¨å¾®ç‰¹æ®Šä¸€ç‚¹ï¼Œå®ƒä¼šå°†è¿”å›å¯¹è±¡çš„å…¶ä¸­ä¸€ä¸ªå±æ€§ä½œä¸º key å€¼ï¼Œå°†å¯¹è±¡ä½œä¸º value å€¼ï¼Œä»è€Œå°†å¤šä¸ªç»“æœé›†è½¬ä¸º Map ç±»å‹å€¼ã€‚ç”±äºå¹¶ä¸æ˜¯æ‰€æœ‰è¯­å¥éƒ½éœ€è¦å‚æ•°ï¼Œæ‰€ä»¥è¿™äº›æ–¹æ³•éƒ½å…·æœ‰ä¸€ä¸ªä¸éœ€è¦å‚æ•°çš„é‡è½½å½¢å¼ã€‚</p><p>æ¸¸æ ‡ï¼ˆCursorï¼‰ä¸åˆ—è¡¨ï¼ˆListï¼‰è¿”å›çš„ç»“æœç›¸åŒï¼Œä¸åŒçš„æ˜¯ï¼Œæ¸¸æ ‡å€ŸåŠ©è¿­ä»£å™¨å®ç°äº†æ•°æ®çš„æƒ°æ€§åŠ è½½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (Cursor&lt;MyEntity&gt; entities = session.selectCursor(statement, param)) &#123;</span><br><span class="line">   <span class="keyword">for</span> (MyEntity entity:entities) &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†å•ä¸ªå®ä½“</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>insertã€update ä»¥åŠ delete æ–¹æ³•è¿”å›çš„å€¼è¡¨ç¤ºå—è¯¥è¯­å¥å½±å“çš„è¡Œæ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt; T <span class="title function_">selectOne</span><span class="params">(String statement)</span></span><br><span class="line">&lt;E&gt; List&lt;E&gt; <span class="title function_">selectList</span><span class="params">(String statement)</span></span><br><span class="line">&lt;T&gt; Cursor&lt;T&gt; <span class="title function_">selectCursor</span><span class="params">(String statement)</span></span><br><span class="line">&lt;K,V&gt; Map&lt;K,V&gt; <span class="title function_">selectMap</span><span class="params">(String statement, String mapKey)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(String statement)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">update</span><span class="params">(String statement)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">delete</span><span class="params">(String statement)</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œè¿˜æœ‰ select æ–¹æ³•çš„ä¸‰ä¸ªé«˜çº§ç‰ˆæœ¬ï¼Œå®ƒä»¬å…è®¸ä½ é™åˆ¶è¿”å›è¡Œæ•°çš„èŒƒå›´ï¼Œæˆ–æ˜¯æä¾›è‡ªå®šä¹‰ç»“æœå¤„ç†é€»è¾‘ï¼Œé€šå¸¸åœ¨æ•°æ®é›†éå¸¸åºå¤§çš„æƒ…å½¢ä¸‹ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;E&gt; List&lt;E&gt; <span class="title function_">selectList</span> <span class="params">(String statement, Object parameter, RowBounds rowBounds)</span></span><br><span class="line">&lt;T&gt; Cursor&lt;T&gt; <span class="title function_">selectCursor</span><span class="params">(String statement, Object parameter, RowBounds rowBounds)</span></span><br><span class="line">&lt;K,V&gt; Map&lt;K,V&gt; <span class="title function_">selectMap</span><span class="params">(String statement, Object parameter, String mapKey, RowBounds rowbounds)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">select</span> <span class="params">(String statement, Object parameter, ResultHandler&lt;T&gt; handler)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">select</span> <span class="params">(String statement, Object parameter, RowBounds rowBounds, ResultHandler&lt;T&gt; handler)</span></span><br></pre></td></tr></table></figure><p>RowBounds å‚æ•°ä¼šå‘Šè¯‰ MyBatis ç•¥è¿‡æŒ‡å®šæ•°é‡çš„è®°å½•ï¼Œå¹¶é™åˆ¶è¿”å›ç»“æœçš„æ•°é‡ã€‚RowBounds ç±»çš„ offset å’Œ limit å€¼åªæœ‰åœ¨æ„é€ å‡½æ•°æ—¶æ‰èƒ½ä¼ å…¥ï¼Œå…¶å®ƒæ—¶å€™æ˜¯ä¸èƒ½ä¿®æ”¹çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">offset</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">limit</span> <span class="operator">=</span> <span class="number">25</span>;</span><br><span class="line"><span class="type">RowBounds</span> <span class="variable">rowBounds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RowBounds</span>(offset, limit);</span><br></pre></td></tr></table></figure><p>æ•°æ®åº“é©±åŠ¨å†³å®šäº†ç•¥è¿‡è®°å½•æ—¶çš„æŸ¥è¯¢æ•ˆç‡ã€‚ä¸ºäº†è·å¾—æœ€ä½³çš„æ€§èƒ½ï¼Œå»ºè®®å°† ResultSet ç±»å‹è®¾ç½®ä¸º SCROLL_SENSITIVE æˆ– SCROLL_INSENSITIVEï¼ˆæ¢å¥è¯è¯´ï¼šä¸è¦ä½¿ç”¨ FORWARD_ONLYï¼‰ã€‚</p><p>ResultHandler å‚æ•°å…è®¸è‡ªå®šä¹‰æ¯è¡Œç»“æœçš„å¤„ç†è¿‡ç¨‹ã€‚ä½ å¯ä»¥å°†å®ƒæ·»åŠ åˆ° List ä¸­ã€åˆ›å»º Map å’Œ Setï¼Œç”šè‡³ä¸¢å¼ƒæ¯ä¸ªè¿”å›å€¼ï¼Œåªä¿ç•™è®¡ç®—åçš„ç»Ÿè®¡ç»“æœã€‚ä½ å¯ä»¥ä½¿ç”¨ ResultHandler åšå¾ˆå¤šäº‹ï¼Œè¿™å…¶å®å°±æ˜¯ MyBatis æ„å»º ç»“æœåˆ—è¡¨çš„å†…éƒ¨å®ç°åŠæ³•ã€‚</p><p>ä»ç‰ˆæœ¬ 3.4.6 å¼€å§‹ï¼Œ<code>ResultHandler</code> ä¼šåœ¨å­˜å‚¨è¿‡ç¨‹çš„ REFCURSOR è¾“å‡ºå‚æ•°ä¸­ä¼ é€’ä½¿ç”¨çš„ <code>CALLABLE</code> è¯­å¥ã€‚</p><p>å®ƒçš„æ¥å£å¾ˆç®€å•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.apache.ibatis.session;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ResultHandler</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">handleResult</span><span class="params">(ResultContext&lt;? extends T&gt; context)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ResultContext å‚æ•°å…è®¸ä½ è®¿é—®ç»“æœå¯¹è±¡å’Œå½“å‰å·²è¢«åˆ›å»ºçš„å¯¹è±¡æ•°ç›®ï¼Œå¦å¤–è¿˜æä¾›äº†ä¸€ä¸ªè¿”å›å€¼ä¸º Boolean çš„ stop æ–¹æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨æ­¤ stop æ–¹æ³•æ¥åœæ­¢ MyBatis åŠ è½½æ›´å¤šçš„ç»“æœã€‚</p><p>ä½¿ç”¨ ResultHandler çš„æ—¶å€™éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ä¸ªé™åˆ¶ï¼š</p><ul><li>ä½¿ç”¨å¸¦ ResultHandler å‚æ•°çš„æ–¹æ³•æ—¶ï¼Œæ”¶åˆ°çš„æ•°æ®ä¸ä¼šè¢«ç¼“å­˜ã€‚</li><li>å½“ä½¿ç”¨é«˜çº§çš„ç»“æœæ˜ å°„é›†ï¼ˆresultMapï¼‰æ—¶ï¼ŒMyBatis å¾ˆå¯èƒ½éœ€è¦æ•°è¡Œç»“æœæ¥æ„é€ ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœä½ ä½¿ç”¨äº† ResultHandlerï¼Œä½ å¯èƒ½ä¼šæ¥æ”¶åˆ°å…³è”ï¼ˆassociationï¼‰æˆ–è€…é›†åˆï¼ˆcollectionï¼‰ä¸­å°šæœªè¢«å®Œæ•´å¡«å……çš„å¯¹è±¡ã€‚</li></ul><h5 id="ç«‹å³æ‰¹é‡æ›´æ–°æ–¹æ³•"><a href="#ç«‹å³æ‰¹é‡æ›´æ–°æ–¹æ³•" class="headerlink" title="ç«‹å³æ‰¹é‡æ›´æ–°æ–¹æ³•"></a>ç«‹å³æ‰¹é‡æ›´æ–°æ–¹æ³•</h5><p>å½“ä½ å°† <code>ExecutorType</code> è®¾ç½®ä¸º <code>ExecutorType.BATCH</code> æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¸…é™¤ï¼ˆæ‰§è¡Œï¼‰ç¼“å­˜åœ¨ JDBC é©±åŠ¨ç±»ä¸­çš„æ‰¹é‡æ›´æ–°è¯­å¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;BatchResult&gt; <span class="title function_">flushStatements</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h5 id="äº‹åŠ¡æ§åˆ¶æ–¹æ³•"><a href="#äº‹åŠ¡æ§åˆ¶æ–¹æ³•" class="headerlink" title="äº‹åŠ¡æ§åˆ¶æ–¹æ³•"></a>äº‹åŠ¡æ§åˆ¶æ–¹æ³•</h5><p>æœ‰å››ä¸ªæ–¹æ³•ç”¨æ¥æ§åˆ¶äº‹åŠ¡ä½œç”¨åŸŸã€‚å½“ç„¶ï¼Œå¦‚æœä½ å·²ç»è®¾ç½®äº†è‡ªåŠ¨æäº¤æˆ–ä½ ä½¿ç”¨äº†å¤–éƒ¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™äº›æ–¹æ³•å°±æ²¡ä»€ä¹ˆä½œç”¨äº†ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ­£åœ¨ä½¿ç”¨ç”± Connection å®ä¾‹æ§åˆ¶çš„ JDBC äº‹åŠ¡ç®¡ç†å™¨ï¼Œé‚£ä¹ˆè¿™å››ä¸ªæ–¹æ³•å°±ä¼šæ´¾ä¸Šç”¨åœºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">commit</span><span class="params">(<span class="type">boolean</span> force)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">(<span class="type">boolean</span> force)</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ MyBatis ä¸ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œé™¤éå®ƒä¾¦æµ‹åˆ°è°ƒç”¨äº†æ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ–¹æ³•æ”¹å˜äº†æ•°æ®åº“ã€‚å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨è¿™äº›æ–¹æ³•æäº¤ä¿®æ”¹ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨ commit å’Œ rollback æ–¹æ³•å‚æ•°ä¸­ä¼ å…¥ true å€¼ï¼Œæ¥ä¿è¯äº‹åŠ¡è¢«æ­£å¸¸æäº¤ï¼ˆæ³¨æ„ï¼Œåœ¨è‡ªåŠ¨æäº¤æ¨¡å¼æˆ–è€…ä½¿ç”¨äº†å¤–éƒ¨äº‹åŠ¡ç®¡ç†å™¨çš„æƒ…å†µä¸‹ï¼Œè®¾ç½® force å€¼å¯¹ session æ— æ•ˆï¼‰ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä½ æ— éœ€è°ƒç”¨ rollback()ï¼Œå› ä¸º MyBatis ä¼šåœ¨ä½ æ²¡æœ‰è°ƒç”¨ commit æ—¶æ›¿ä½ å®Œæˆå›æ»šæ“ä½œã€‚ä¸è¿‡ï¼Œå½“ä½ è¦åœ¨ä¸€ä¸ªå¯èƒ½å¤šæ¬¡æäº¤æˆ–å›æ»šçš„ session ä¸­è¯¦ç»†æ§åˆ¶äº‹åŠ¡ï¼Œå›æ»šæ“ä½œå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><p><strong>æç¤º</strong> MyBatis-Spring å’Œ MyBatis-Guice æä¾›äº†å£°æ˜å¼äº‹åŠ¡å¤„ç†ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨ä½¿ç”¨ Mybatis çš„åŒæ—¶ä½¿ç”¨äº† Spring æˆ–è€… Guiceï¼Œè¯·å‚è€ƒå®ƒä»¬çš„æ‰‹å†Œä»¥è·å–æ›´å¤šçš„å†…å®¹ã€‚</p><h5 id="æœ¬åœ°ç¼“å­˜"><a href="#æœ¬åœ°ç¼“å­˜" class="headerlink" title="æœ¬åœ°ç¼“å­˜"></a>æœ¬åœ°ç¼“å­˜</h5><p>Mybatis ä½¿ç”¨åˆ°äº†ä¸¤ç§ç¼“å­˜ï¼šæœ¬åœ°ç¼“å­˜ï¼ˆlocal cacheï¼‰å’ŒäºŒçº§ç¼“å­˜ï¼ˆsecond level cacheï¼‰ã€‚</p><p>æ¯å½“ä¸€ä¸ªæ–° session è¢«åˆ›å»ºï¼ŒMyBatis å°±ä¼šåˆ›å»ºä¸€ä¸ªä¸ä¹‹ç›¸å…³è”çš„æœ¬åœ°ç¼“å­˜ã€‚ä»»ä½•åœ¨ session æ‰§è¡Œè¿‡çš„æŸ¥è¯¢ç»“æœéƒ½ä¼šè¢«ä¿å­˜åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼Œæ‰€ä»¥ï¼Œå½“å†æ¬¡æ‰§è¡Œå‚æ•°ç›¸åŒçš„ç›¸åŒæŸ¥è¯¢æ—¶ï¼Œå°±ä¸éœ€è¦å®é™…æŸ¥è¯¢æ•°æ®åº“äº†ã€‚æœ¬åœ°ç¼“å­˜å°†ä¼šåœ¨åšå‡ºä¿®æ”¹ã€äº‹åŠ¡æäº¤æˆ–å›æ»šï¼Œä»¥åŠå…³é—­ session æ—¶æ¸…ç©ºã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ¬åœ°ç¼“å­˜æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸç­‰åŒäºæ•´ä¸ª session çš„å‘¨æœŸã€‚ç”±äºç¼“å­˜ä¼šè¢«ç”¨æ¥è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜å’ŒåŠ å¿«é‡å¤åµŒå¥—æŸ¥è¯¢çš„é€Ÿåº¦ï¼Œæ‰€ä»¥æ— æ³•å°†å…¶å®Œå…¨ç¦ç”¨ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡è®¾ç½® localCacheScope&#x3D;STATEMENT æ¥åªåœ¨è¯­å¥æ‰§è¡Œæ—¶ä½¿ç”¨ç¼“å­˜ã€‚</p><p>æ³¨æ„ï¼Œå¦‚æœ localCacheScope è¢«è®¾ç½®ä¸º SESSIONï¼Œå¯¹äºæŸä¸ªå¯¹è±¡ï¼ŒMyBatis å°†è¿”å›åœ¨æœ¬åœ°ç¼“å­˜ä¸­å”¯ä¸€å¯¹è±¡çš„å¼•ç”¨ã€‚å¯¹è¿”å›çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ listï¼‰åšå‡ºçš„ä»»ä½•ä¿®æ”¹å°†ä¼šå½±å“æœ¬åœ°ç¼“å­˜çš„å†…å®¹ï¼Œè¿›è€Œå°†ä¼šå½±å“åˆ°åœ¨æœ¬æ¬¡ session ä¸­ä»ç¼“å­˜è¿”å›çš„å€¼ã€‚å› æ­¤ï¼Œä¸è¦å¯¹ MyBatis æ‰€è¿”å›çš„å¯¹è±¡ä½œå‡ºæ›´æ”¹ï¼Œä»¥é˜²åæ‚£ã€‚</p><p>ä½ å¯ä»¥éšæ—¶è°ƒç”¨ä»¥ä¸‹æ–¹æ³•æ¥æ¸…ç©ºæœ¬åœ°ç¼“å­˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">clearCache</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h5 id="ç¡®ä¿-SqlSession-è¢«å…³é—­"><a href="#ç¡®ä¿-SqlSession-è¢«å…³é—­" class="headerlink" title="ç¡®ä¿ SqlSession è¢«å…³é—­"></a>ç¡®ä¿ SqlSession è¢«å…³é—­</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä½ æ‰“å¼€çš„ä»»ä½• sessionï¼Œä½ éƒ½è¦ä¿è¯å®ƒä»¬è¢«å¦¥å–„å…³é—­ï¼Œè¿™å¾ˆé‡è¦ã€‚ä¿è¯å¦¥å–„å…³é—­çš„æœ€ä½³ä»£ç æ¨¡å¼æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">    <span class="comment">// å‡è®¾ä¸‹é¢ä¸‰è¡Œä»£ç æ˜¯ä½ çš„ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">    session.insert(...);</span><br><span class="line">    session.update(...);</span><br><span class="line">    session.delete(...);</span><br><span class="line">    session.commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æç¤º</strong> å’Œ SqlSessionFactory ä¸€æ ·ï¼Œä½ å¯ä»¥è°ƒç”¨å½“å‰ä½¿ç”¨çš„ SqlSession çš„ getConfiguration æ–¹æ³•æ¥è·å¾— Configuration å®ä¾‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Configuration <span class="title function_">getConfiguration</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h5 id="ä½¿ç”¨æ˜ å°„å™¨"><a href="#ä½¿ç”¨æ˜ å°„å™¨" class="headerlink" title="ä½¿ç”¨æ˜ å°„å™¨"></a>ä½¿ç”¨æ˜ å°„å™¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;T&gt; T <span class="title function_">getMapper</span><span class="params">(Class&lt;T&gt; type)</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°çš„å„ä¸ª insertã€updateã€delete å’Œ select æ–¹æ³•éƒ½å¾ˆå¼ºå¤§ï¼Œä½†ä¹Ÿæœ‰äº›ç¹çï¼Œå®ƒä»¬å¹¶ä¸ç¬¦åˆç±»å‹å®‰å…¨ï¼Œå¯¹ä½ çš„ IDE å’Œå•å…ƒæµ‹è¯•ä¹Ÿä¸æ˜¯é‚£ä¹ˆå‹å¥½ã€‚å› æ­¤ï¼Œä½¿ç”¨æ˜ å°„å™¨ç±»æ¥æ‰§è¡Œæ˜ å°„è¯­å¥æ˜¯æ›´å¸¸è§çš„åšæ³•ã€‚</p><p>æˆ‘ä»¬å·²ç»åœ¨ä¹‹å‰çš„å…¥é—¨ç« èŠ‚ä¸­è§åˆ°è¿‡ä¸€ä¸ªä½¿ç”¨æ˜ å°„å™¨çš„ç¤ºä¾‹ã€‚ä¸€ä¸ªæ˜ å°„å™¨ç±»å°±æ˜¯ä¸€ä¸ªä»…éœ€å£°æ˜ä¸ SqlSession æ–¹æ³•ç›¸åŒ¹é…æ–¹æ³•çš„æ¥å£ã€‚ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†ä¸€äº›æ–¹æ³•ç­¾åä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•æ˜ å°„åˆ° SqlSession ä¸Šçš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">AuthorMapper</span> &#123;</span><br><span class="line">  <span class="comment">// (Author) selectOne(&quot;selectAuthor&quot;,5);</span></span><br><span class="line">  Author <span class="title function_">selectAuthor</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">  <span class="comment">// (List&lt;Author&gt;) selectList(â€œselectAuthorsâ€)</span></span><br><span class="line">  List&lt;Author&gt; <span class="title function_">selectAuthors</span><span class="params">()</span>;</span><br><span class="line">  <span class="comment">// (Map&lt;Integer,Author&gt;) selectMap(&quot;selectAuthors&quot;, &quot;id&quot;)</span></span><br><span class="line">  <span class="meta">@MapKey(&quot;id&quot;)</span></span><br><span class="line">  Map&lt;Integer, Author&gt; <span class="title function_">selectAuthors</span><span class="params">()</span>;</span><br><span class="line">  <span class="comment">// insert(&quot;insertAuthor&quot;, author)</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">insertAuthor</span><span class="params">(Author author)</span>;</span><br><span class="line">  <span class="comment">// updateAuthor(&quot;updateAuthor&quot;, author)</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">updateAuthor</span><span class="params">(Author author)</span>;</span><br><span class="line">  <span class="comment">// delete(&quot;deleteAuthor&quot;,5)</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">deleteAuthor</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œæ¯ä¸ªæ˜ å°„å™¨æ–¹æ³•ç­¾ååº”è¯¥åŒ¹é…ç›¸å…³è”çš„ SqlSession æ–¹æ³•ï¼Œå­—ç¬¦ä¸²å‚æ•° ID æ— éœ€åŒ¹é…ã€‚è€Œæ˜¯ç”±æ–¹æ³•ååŒ¹é…æ˜ å°„è¯­å¥çš„ IDã€‚</p><p>æ­¤å¤–ï¼Œè¿”å›ç±»å‹å¿…é¡»åŒ¹é…æœŸæœ›çš„ç»“æœç±»å‹ï¼Œè¿”å›å•ä¸ªå€¼æ—¶ï¼Œè¿”å›ç±»å‹åº”è¯¥æ˜¯è¿”å›å€¼çš„ç±»ï¼Œè¿”å›å¤šä¸ªå€¼æ—¶ï¼Œåˆ™ä¸ºæ•°ç»„æˆ–é›†åˆç±»ï¼Œå¦å¤–ä¹Ÿå¯ä»¥æ˜¯æ¸¸æ ‡ï¼ˆCursorï¼‰ã€‚æ‰€æœ‰å¸¸ç”¨çš„ç±»å‹éƒ½æ˜¯æ”¯æŒçš„ï¼ŒåŒ…æ‹¬ï¼šåŸå§‹ç±»å‹ã€Mapã€POJO å’Œ JavaBeanã€‚</p><p><strong>æç¤º</strong> æ˜ å°„å™¨æ¥å£ä¸éœ€è¦å»å®ç°ä»»ä½•æ¥å£æˆ–ç»§æ‰¿è‡ªä»»ä½•ç±»ã€‚åªè¦æ–¹æ³•ç­¾åå¯ä»¥è¢«ç”¨æ¥å”¯ä¸€è¯†åˆ«å¯¹åº”çš„æ˜ å°„è¯­å¥å°±å¯ä»¥äº†ã€‚</p><p><strong>æç¤º</strong> æ˜ å°„å™¨æ¥å£å¯ä»¥ç»§æ‰¿è‡ªå…¶ä»–æ¥å£ã€‚åœ¨ä½¿ç”¨ XML æ¥ç»‘å®šæ˜ å°„å™¨æ¥å£æ—¶ï¼Œä¿è¯è¯­å¥å¤„äºåˆé€‚çš„å‘½åç©ºé—´ä¸­å³å¯ã€‚å”¯ä¸€çš„é™åˆ¶æ˜¯ï¼Œä¸èƒ½åœ¨ä¸¤ä¸ªå…·æœ‰ç»§æ‰¿å…³ç³»çš„æ¥å£ä¸­æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ç­¾åï¼ˆè¿™æ˜¯æ½œåœ¨çš„å±é™©åšæ³•ï¼Œä¸å¯å–ï¼‰ã€‚</p><p>ä½ å¯ä»¥ä¼ é€’å¤šä¸ªå‚æ•°ç»™ä¸€ä¸ªæ˜ å°„å™¨æ–¹æ³•ã€‚åœ¨å¤šä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤å®ƒä»¬å°†ä¼šä»¥ param åŠ ä¸Šå®ƒä»¬åœ¨å‚æ•°åˆ—è¡¨ä¸­çš„ä½ç½®æ¥å‘½åï¼Œæ¯”å¦‚ï¼š#{param1}ã€#{param2}ç­‰ã€‚å¦‚æœä½ æƒ³ï¼ˆåœ¨æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼‰è‡ªå®šä¹‰å‚æ•°çš„åç§°ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨å‚æ•°ä¸Šä½¿ç”¨ @Param(â€œparamNameâ€) æ³¨è§£ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ç»™æ–¹æ³•ä¼ é€’ä¸€ä¸ª RowBounds å®ä¾‹æ¥é™åˆ¶æŸ¥è¯¢ç»“æœã€‚</p><h5 id="æ˜ å°„å™¨æ³¨è§£"><a href="#æ˜ å°„å™¨æ³¨è§£" class="headerlink" title="æ˜ å°„å™¨æ³¨è§£"></a>æ˜ å°„å™¨æ³¨è§£</h5><p>è®¾è®¡åˆæœŸçš„ MyBatis æ˜¯ä¸€ä¸ª XML é©±åŠ¨çš„æ¡†æ¶ã€‚é…ç½®ä¿¡æ¯æ˜¯åŸºäº XML çš„ï¼Œæ˜ å°„è¯­å¥ä¹Ÿæ˜¯å®šä¹‰åœ¨ XML ä¸­çš„ã€‚è€Œåœ¨ MyBatis 3 ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†å…¶å®ƒçš„é…ç½®æ–¹å¼ã€‚MyBatis 3 æ„å»ºåœ¨å…¨é¢ä¸”å¼ºå¤§çš„åŸºäº Java è¯­è¨€çš„é…ç½® API ä¹‹ä¸Šã€‚å®ƒæ˜¯ XML å’Œæ³¨è§£é…ç½®çš„åŸºç¡€ã€‚æ³¨è§£æä¾›äº†ä¸€ç§ç®€å•ä¸”ä½æˆæœ¬çš„æ–¹å¼æ¥å®ç°ç®€å•çš„æ˜ å°„è¯­å¥ã€‚</p><p><strong>æç¤º</strong> ä¸å¹¸çš„æ˜¯ï¼ŒJava æ³¨è§£çš„è¡¨è¾¾èƒ½åŠ›å’Œçµæ´»æ€§ååˆ†æœ‰é™ã€‚å°½ç®¡æˆ‘ä»¬èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨è°ƒæŸ¥ã€è®¾è®¡å’Œè¯•éªŒä¸Šï¼Œä½†æœ€å¼ºå¤§çš„ MyBatis æ˜ å°„å¹¶ä¸èƒ½ç”¨æ³¨è§£æ¥æ„å»ºâ€”â€”æˆ‘ä»¬çœŸæ²¡å¼€ç©ç¬‘ã€‚è€Œ C# å±æ€§å°±æ²¡æœ‰è¿™äº›é™åˆ¶ï¼Œå› æ­¤ MyBatis.NET çš„é…ç½®ä¼šæ¯” XML æœ‰æ›´å¤§çš„é€‰æ‹©ä½™åœ°ã€‚è™½è¯´å¦‚æ­¤ï¼ŒåŸºäº Java æ³¨è§£çš„é…ç½®è¿˜æ˜¯æœ‰å®ƒçš„å¥½å¤„çš„ã€‚</p><p><strong>æ³¨è§£å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</strong></p><table><thead><tr><th align="left">æ³¨è§£</th><th align="left">ä½¿ç”¨å¯¹è±¡</th><th align="left">XML ç­‰ä»·å½¢å¼</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>@CacheNamespace</code></td><td align="left"><code>ç±»</code></td><td align="left"><code>&lt;cache&gt;</code></td><td align="left">ä¸ºç»™å®šçš„å‘½åç©ºé—´ï¼ˆæ¯”å¦‚ç±»ï¼‰é…ç½®ç¼“å­˜ã€‚å±æ€§ï¼š<code>implemetation</code>ã€<code>eviction</code>ã€<code>flushInterval</code>ã€<code>size</code>ã€<code>readWrite</code>ã€<code>blocking</code>ã€<code>properties</code>ã€‚</td></tr><tr><td align="left"><code>@Property</code></td><td align="left">N&#x2F;A</td><td align="left"><code>&lt;property&gt;</code></td><td align="left">æŒ‡å®šå‚æ•°å€¼æˆ–å ä½ç¬¦ï¼ˆplaceholderï¼‰ï¼ˆè¯¥å ä½ç¬¦èƒ½è¢« <code>mybatis-config.xml</code> å†…çš„é…ç½®å±æ€§æ›¿æ¢ï¼‰ã€‚å±æ€§ï¼š<code>name</code>ã€<code>value</code>ã€‚ï¼ˆä»…åœ¨ MyBatis 3.4.2 ä»¥ä¸Šå¯ç”¨ï¼‰</td></tr><tr><td align="left"><code>@CacheNamespaceRef</code></td><td align="left"><code>ç±»</code></td><td align="left"><code>&lt;cacheRef&gt;</code></td><td align="left">å¼•ç”¨å¦å¤–ä¸€ä¸ªå‘½åç©ºé—´çš„ç¼“å­˜ä»¥ä¾›ä½¿ç”¨ã€‚æ³¨æ„ï¼Œå³ä½¿å…±äº«ç›¸åŒçš„å…¨é™å®šç±»åï¼Œåœ¨ XML æ˜ å°„æ–‡ä»¶ä¸­å£°æ˜çš„ç¼“å­˜ä»è¢«è¯†åˆ«ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å‘½åç©ºé—´ã€‚å±æ€§ï¼š<code>value</code>ã€<code>name</code>ã€‚å¦‚æœä½ ä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£ï¼Œä½ åº”è®¾ç½® <code>value</code> æˆ–è€… <code>name</code> å±æ€§çš„å…¶ä¸­ä¸€ä¸ªã€‚<code>value</code> å±æ€§ç”¨äºæŒ‡å®šèƒ½å¤Ÿè¡¨ç¤ºè¯¥å‘½åç©ºé—´çš„ Java ç±»å‹ï¼ˆå‘½åç©ºé—´åå°±æ˜¯è¯¥ Java ç±»å‹çš„å…¨é™å®šç±»åï¼‰ï¼Œ<code>name</code> å±æ€§ï¼ˆè¿™ä¸ªå±æ€§ä»…åœ¨ MyBatis 3.4.2 ä»¥ä¸Šå¯ç”¨ï¼‰åˆ™ç›´æ¥æŒ‡å®šäº†å‘½åç©ºé—´çš„åå­—ã€‚</td></tr><tr><td align="left"><code>@ConstructorArgs</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left"><code>&lt;constructor&gt;</code></td><td align="left">æ”¶é›†ä¸€ç»„ç»“æœä»¥ä¼ é€’ç»™ä¸€ä¸ªç»“æœå¯¹è±¡çš„æ„é€ æ–¹æ³•ã€‚å±æ€§ï¼š<code>value</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>Arg</code> æ•°ç»„ã€‚</td></tr><tr><td align="left"><code>@Arg</code></td><td align="left">N&#x2F;A</td><td align="left"><code>&lt;arg&gt;``&lt;idArg&gt;</code></td><td align="left">ConstructorArgs é›†åˆçš„ä¸€éƒ¨åˆ†ï¼Œä»£è¡¨ä¸€ä¸ªæ„é€ æ–¹æ³•å‚æ•°ã€‚å±æ€§ï¼š<code>id</code>ã€<code>column</code>ã€<code>javaType</code>ã€<code>jdbcType</code>ã€<code>typeHandler</code>ã€<code>select</code>ã€<code>resultMap</code>ã€‚id å±æ€§å’Œ XML å…ƒç´  <code>&lt;idArg&gt;</code> ç›¸ä¼¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å±æ€§æ˜¯å¦ç”¨äºå”¯ä¸€æ ‡è¯†å’Œæ¯”è¾ƒå¯¹è±¡ã€‚ä»ç‰ˆæœ¬ 3.5.4 å¼€å§‹ï¼Œè¯¥æ³¨è§£å˜ä¸ºå¯é‡å¤æ³¨è§£ã€‚</td></tr><tr><td align="left"><code>@TypeDiscriminator</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left"><code>&lt;discriminator&gt;</code></td><td align="left">å†³å®šä½¿ç”¨ä½•ç§ç»“æœæ˜ å°„çš„ä¸€ç»„å–å€¼ï¼ˆcaseï¼‰ã€‚å±æ€§ï¼š<code>column</code>ã€<code>javaType</code>ã€<code>jdbcType</code>ã€<code>typeHandler</code>ã€<code>cases</code>ã€‚cases å±æ€§æ˜¯ä¸€ä¸ª <code>Case</code> çš„æ•°ç»„ã€‚</td></tr><tr><td align="left"><code>@Case</code></td><td align="left">N&#x2F;A</td><td align="left"><code>&lt;case&gt;</code></td><td align="left">è¡¨ç¤ºæŸä¸ªå€¼çš„ä¸€ä¸ªå–å€¼ä»¥åŠè¯¥å–å€¼å¯¹åº”çš„æ˜ å°„ã€‚å±æ€§ï¼š<code>value</code>ã€<code>type</code>ã€<code>results</code>ã€‚results å±æ€§æ˜¯ä¸€ä¸ª <code>Results</code> çš„æ•°ç»„ï¼Œå› æ­¤è¿™ä¸ªæ³¨è§£å®é™…ä¸Šå’Œ <code>ResultMap</code> å¾ˆç›¸ä¼¼ï¼Œç”±ä¸‹é¢çš„ <code>Results</code> æ³¨è§£æŒ‡å®šã€‚</td></tr><tr><td align="left"><code>@Results</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left"><code>&lt;resultMap&gt;</code></td><td align="left">ä¸€ç»„ç»“æœæ˜ å°„ï¼ŒæŒ‡å®šäº†å¯¹æŸä¸ªç‰¹å®šç»“æœåˆ—ï¼Œæ˜ å°„åˆ°æŸä¸ªå±æ€§æˆ–å­—æ®µçš„æ–¹å¼ã€‚å±æ€§ï¼š<code>value</code>ã€<code>id</code>ã€‚value å±æ€§æ˜¯ä¸€ä¸ª <code>Result</code> æ³¨è§£çš„æ•°ç»„ã€‚è€Œ id å±æ€§åˆ™æ˜¯ç»“æœæ˜ å°„çš„åç§°ã€‚ä»ç‰ˆæœ¬ 3.5.4 å¼€å§‹ï¼Œè¯¥æ³¨è§£å˜ä¸ºå¯é‡å¤æ³¨è§£ã€‚</td></tr><tr><td align="left"><code>@Result</code></td><td align="left">N&#x2F;A</td><td align="left"><code>&lt;result&gt;``&lt;id&gt;</code></td><td align="left">åœ¨åˆ—å’Œå±æ€§æˆ–å­—æ®µä¹‹é—´çš„å•ä¸ªç»“æœæ˜ å°„ã€‚å±æ€§ï¼š<code>id</code>ã€<code>column</code>ã€<code>javaType</code>ã€<code>jdbcType</code>ã€<code>typeHandler</code>ã€<code>one</code>ã€<code>many</code>ã€‚id å±æ€§å’Œ XML å…ƒç´  <code>&lt;id&gt;</code> ç›¸ä¼¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å±æ€§æ˜¯å¦ç”¨äºå”¯ä¸€æ ‡è¯†å’Œæ¯”è¾ƒå¯¹è±¡ã€‚one å±æ€§æ˜¯ä¸€ä¸ªå…³è”ï¼Œå’Œ <code>&lt;association&gt;</code> ç±»ä¼¼ï¼Œè€Œ many å±æ€§åˆ™æ˜¯é›†åˆå…³è”ï¼Œå’Œ <code>&lt;collection&gt;</code> ç±»ä¼¼ã€‚è¿™æ ·å‘½åæ˜¯ä¸ºäº†é¿å…äº§ç”Ÿåç§°å†²çªã€‚</td></tr><tr><td align="left"><code>@One</code></td><td align="left">N&#x2F;A</td><td align="left"><code>&lt;association&gt;</code></td><td align="left">å¤æ‚ç±»å‹çš„å•ä¸ªå±æ€§æ˜ å°„ã€‚å±æ€§ï¼š <code>select</code>ï¼ŒæŒ‡å®šå¯åŠ è½½åˆé€‚ç±»å‹å®ä¾‹çš„æ˜ å°„è¯­å¥ï¼ˆä¹Ÿå°±æ˜¯æ˜ å°„å™¨æ–¹æ³•ï¼‰å…¨é™å®šåï¼› <code>fetchType</code>ï¼ŒæŒ‡å®šåœ¨è¯¥æ˜ å°„ä¸­è¦†ç›–å…¨å±€é…ç½®å‚æ•° <code>lazyLoadingEnabled</code>ï¼› <code>resultMap</code>(available since 3.5.5), which is the fully qualified name of a result map that map to a single container object from select resultï¼› <code>columnPrefix</code>(available since 3.5.5), which is column prefix for grouping select columns at nested result map. <strong>æç¤º</strong> æ³¨è§£ API ä¸æ”¯æŒè”åˆæ˜ å°„ã€‚è¿™æ˜¯ç”±äº Java æ³¨è§£ä¸å…è®¸äº§ç”Ÿå¾ªç¯å¼•ç”¨ã€‚</td></tr><tr><td align="left"><code>@Many</code></td><td align="left">N&#x2F;A</td><td align="left"><code>&lt;collection&gt;</code></td><td align="left">å¤æ‚ç±»å‹çš„é›†åˆå±æ€§æ˜ å°„ã€‚å±æ€§ï¼š <code>select</code>ï¼ŒæŒ‡å®šå¯åŠ è½½åˆé€‚ç±»å‹å®ä¾‹é›†åˆçš„æ˜ å°„è¯­å¥ï¼ˆä¹Ÿå°±æ˜¯æ˜ å°„å™¨æ–¹æ³•ï¼‰å…¨é™å®šåï¼› <code>fetchType</code>ï¼ŒæŒ‡å®šåœ¨è¯¥æ˜ å°„ä¸­è¦†ç›–å…¨å±€é…ç½®å‚æ•° <code>lazyLoadingEnabled</code> <code>resultMap</code>(available since 3.5.5), which is the fully qualified name of a result map that map to collection object from select resultï¼› <code>columnPrefix</code>(available since 3.5.5), which is column prefix for grouping select columns at nested result map. <strong>æç¤º</strong> æ³¨è§£ API ä¸æ”¯æŒè”åˆæ˜ å°„ã€‚è¿™æ˜¯ç”±äº Java æ³¨è§£ä¸å…è®¸äº§ç”Ÿå¾ªç¯å¼•ç”¨ã€‚</td></tr><tr><td align="left"><code>@MapKey</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left"></td><td align="left">ä¾›è¿”å›å€¼ä¸º Map çš„æ–¹æ³•ä½¿ç”¨çš„æ³¨è§£ã€‚å®ƒä½¿ç”¨å¯¹è±¡çš„æŸä¸ªå±æ€§ä½œä¸º keyï¼Œå°†å¯¹è±¡ List è½¬åŒ–ä¸º Mapã€‚å±æ€§ï¼š<code>value</code>ï¼ŒæŒ‡å®šä½œä¸º Map çš„ key å€¼çš„å¯¹è±¡å±æ€§åã€‚</td></tr><tr><td align="left"><code>@Options</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left">æ˜ å°„è¯­å¥çš„å±æ€§</td><td align="left">è¯¥æ³¨è§£å…è®¸ä½ æŒ‡å®šå¤§éƒ¨åˆ†å¼€å…³å’Œé…ç½®é€‰é¡¹ï¼Œå®ƒä»¬é€šå¸¸åœ¨æ˜ å°„è¯­å¥ä¸Šä½œä¸ºå±æ€§å‡ºç°ã€‚ä¸åœ¨æ³¨è§£ä¸Šæä¾›å¤§é‡çš„å±æ€§ç›¸æ¯”ï¼Œ<code>Options</code> æ³¨è§£æä¾›äº†ä¸€è‡´ã€æ¸…æ™°çš„æ–¹å¼æ¥æŒ‡å®šé€‰é¡¹ã€‚å±æ€§ï¼š<code>useCache=true</code>ã€<code>flushCache=FlushCachePolicy.DEFAULT</code>ã€<code>resultSetType=DEFAULT</code>ã€<code>statementType=PREPARED</code>ã€<code>fetchSize=-1</code>ã€<code>timeout=-1</code>ã€<code>useGeneratedKeys=false</code>ã€<code>keyProperty=&quot;&quot;</code>ã€<code>keyColumn=&quot;&quot;</code>ã€<code>resultSets=&quot;&quot;</code>, <code>databaseId=&quot;&quot;</code>ã€‚æ³¨æ„ï¼ŒJava æ³¨è§£æ— æ³•æŒ‡å®š <code>null</code> å€¼ã€‚å› æ­¤ï¼Œä¸€æ—¦ä½ ä½¿ç”¨äº† <code>Options</code> æ³¨è§£ï¼Œä½ çš„è¯­å¥å°±ä¼šè¢«ä¸Šè¿°å±æ€§çš„é»˜è®¤å€¼æ‰€å½±å“ã€‚è¦æ³¨æ„é¿å…é»˜è®¤å€¼å¸¦æ¥çš„éé¢„æœŸè¡Œä¸ºã€‚ The <code>databaseId</code>(Available since 3.5.5), in case there is a configured <code>DatabaseIdProvider</code>, the MyBatis use the <code>Options</code> with no <code>databaseId</code> attribute or with a <code>databaseId</code> that matches the current one. If found with and without the <code>databaseId</code> the latter will be discarded.      æ³¨æ„ï¼š<code>keyColumn</code> å±æ€§åªåœ¨æŸäº›æ•°æ®åº“ä¸­æœ‰æ•ˆï¼ˆå¦‚ Oracleã€PostgreSQL ç­‰ï¼‰ã€‚è¦äº†è§£æ›´å¤šå…³äº <code>keyColumn</code> å’Œ <code>keyProperty</code> å¯é€‰å€¼ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹â€œinsert, update å’Œ deleteâ€ä¸€èŠ‚ã€‚</td></tr><tr><td align="left"><code>@Insert``@Update``@Delete``@Select</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left"><code>&lt;insert&gt;``&lt;update&gt;``&lt;delete&gt;``&lt;select&gt;</code></td><td align="left">æ¯ä¸ªæ³¨è§£åˆ†åˆ«ä»£è¡¨å°†ä¼šè¢«æ‰§è¡Œçš„ SQL è¯­å¥ã€‚å®ƒä»¬ç”¨å­—ç¬¦ä¸²æ•°ç»„ï¼ˆæˆ–å•ä¸ªå­—ç¬¦ä¸²ï¼‰ä½œä¸ºå‚æ•°ã€‚å¦‚æœä¼ é€’çš„æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œå­—ç¬¦ä¸²æ•°ç»„ä¼šè¢«è¿æ¥æˆå•ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´åŠ å…¥ä¸€ä¸ªç©ºæ ¼ã€‚è¿™æœ‰æ•ˆåœ°é¿å…äº†ç”¨ Java ä»£ç æ„å»º SQL è¯­å¥æ—¶äº§ç”Ÿçš„â€œä¸¢å¤±ç©ºæ ¼â€é—®é¢˜ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æå‰æ‰‹åŠ¨è¿æ¥å¥½å­—ç¬¦ä¸²ã€‚å±æ€§ï¼š<code>value</code>ï¼ŒæŒ‡å®šç”¨æ¥ç»„æˆå•ä¸ª SQL è¯­å¥çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚ The <code>databaseId</code>(Available since 3.5.5), in case there is a configured <code>DatabaseIdProvider</code>, the MyBatis use a statement with no <code>databaseId</code> attribute or with a <code>databaseId</code> that matches the current one. If found with and without the <code>databaseId</code> the latter will be discarded.</td></tr><tr><td align="left"><code>@InsertProvider``@UpdateProvider``@DeleteProvider``@SelectProvider</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left"><code>&lt;insert&gt;``&lt;update&gt;``&lt;delete&gt;``&lt;select&gt;</code></td><td align="left">å…è®¸æ„å»ºåŠ¨æ€ SQLã€‚è¿™äº›å¤‡é€‰çš„ SQL æ³¨è§£å…è®¸ä½ æŒ‡å®šè¿”å› SQL è¯­å¥çš„ç±»å’Œæ–¹æ³•ï¼Œä»¥ä¾›è¿è¡Œæ—¶æ‰§è¡Œã€‚ï¼ˆä» MyBatis 3.4.6 å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>CharSequence</code> ä»£æ›¿ <code>String</code> æ¥ä½œä¸ºè¿”å›ç±»å‹ï¼‰ã€‚å½“æ‰§è¡Œæ˜ å°„è¯­å¥æ—¶ï¼ŒMyBatis ä¼šå®ä¾‹åŒ–æ³¨è§£æŒ‡å®šçš„ç±»ï¼Œå¹¶è°ƒç”¨æ³¨è§£æŒ‡å®šçš„æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ <code>ProviderContext</code> ä¼ é€’æ˜ å°„æ–¹æ³•æ¥æ”¶åˆ°çš„å‚æ•°ã€â€Mapper interface typeâ€ å’Œ â€œMapper methodâ€ï¼ˆä»…åœ¨ MyBatis 3.4.5 ä»¥ä¸Šæ”¯æŒï¼‰ä½œä¸ºå‚æ•°ã€‚ï¼ˆMyBatis 3.4 ä»¥ä¸Šæ”¯æŒä¼ å…¥å¤šä¸ªå‚æ•°ï¼‰ å±æ€§ï¼š<code>value</code>ã€<code>type</code>ã€<code>method</code>ã€<code>databaseId</code>ã€‚ <code>value</code> and <code>type</code> å±æ€§ç”¨äºæŒ‡å®šç±»å (The <code>type</code> attribute is alias for <code>value</code>, you must be specify either one. But both attributes can be omit when specify the <code>defaultSqlProviderType</code> as global configuration)ã€‚ <code>method</code> ç”¨äºæŒ‡å®šè¯¥ç±»çš„æ–¹æ³•åï¼ˆä»ç‰ˆæœ¬ 3.5.1 å¼€å§‹ï¼Œå¯ä»¥çœç•¥ <code>method</code> å±æ€§ï¼ŒMyBatis å°†ä¼šä½¿ç”¨ <code>ProviderMethodResolver</code> æ¥å£è§£ææ–¹æ³•çš„å…·ä½“å®ç°ã€‚å¦‚æœè§£æå¤±è´¥ï¼ŒMyBatis å°†ä¼šä½¿ç”¨åä¸º <code>provideSql</code> çš„é™çº§å®ç°ï¼‰ã€‚<strong>æç¤º</strong> æ¥ä¸‹æ¥çš„â€œSQL è¯­å¥æ„å»ºå™¨â€ä¸€ç« å°†ä¼šè®¨è®ºè¯¥è¯é¢˜ï¼Œä»¥å¸®åŠ©ä½ ä»¥æ›´æ¸…æ™°ã€æ›´ä¾¿äºé˜…è¯»çš„æ–¹å¼æ„å»ºåŠ¨æ€ SQLã€‚ The <code>databaseId</code>(Available since 3.5.5), in case there is a configured <code>DatabaseIdProvider</code>, the MyBatis will use a provider method with no <code>databaseId</code> attribute or with a <code>databaseId</code> that matches the current one. If found with and without the <code>databaseId</code> the latter will be discarded.</td></tr><tr><td align="left"><code>@Param</code></td><td align="left"><code>å‚æ•°</code></td><td align="left">N&#x2F;A</td><td align="left">å¦‚æœä½ çš„æ˜ å°„æ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£è‡ªå®šä¹‰æ¯ä¸ªå‚æ•°çš„åå­—ã€‚å¦åˆ™åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤ <code>RowBounds</code> ä»¥å¤–çš„å‚æ•°ä¼šä»¥ â€œparamâ€ åŠ å‚æ•°ä½ç½®è¢«å‘½åã€‚ä¾‹å¦‚ <code>#&#123;param1&#125;</code>, <code>#&#123;param2&#125;</code>ã€‚å¦‚æœä½¿ç”¨äº† <code>@Param(&quot;person&quot;)</code>ï¼Œå‚æ•°å°±ä¼šè¢«å‘½åä¸º <code>#&#123;person&#125;</code>ã€‚</td></tr><tr><td align="left"><code>@SelectKey</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left"><code>&lt;selectKey&gt;</code></td><td align="left">è¿™ä¸ªæ³¨è§£çš„åŠŸèƒ½ä¸ <code>&lt;selectKey&gt;</code> æ ‡ç­¾å®Œå…¨ä¸€è‡´ã€‚è¯¥æ³¨è§£åªèƒ½åœ¨ <code>@Insert</code> æˆ– <code>@InsertProvider</code> æˆ– <code>@Update</code> æˆ– <code>@UpdateProvider</code> æ ‡æ³¨çš„æ–¹æ³•ä¸Šä½¿ç”¨ï¼Œå¦åˆ™å°†ä¼šè¢«å¿½ç•¥ã€‚å¦‚æœæ ‡æ³¨äº† <code>@SelectKey</code> æ³¨è§£ï¼ŒMyBatis å°†ä¼šå¿½ç•¥æ‰ç”± <code>@Options</code> æ³¨è§£æ‰€è®¾ç½®çš„ç”Ÿæˆä¸»é”®æˆ–è®¾ç½®ï¼ˆconfigurationï¼‰å±æ€§ã€‚å±æ€§ï¼š<code>statement</code> ä»¥å­—ç¬¦ä¸²æ•°ç»„å½¢å¼æŒ‡å®šå°†ä¼šè¢«æ‰§è¡Œçš„ SQL è¯­å¥ï¼Œ<code>keyProperty</code> æŒ‡å®šä½œä¸ºå‚æ•°ä¼ å…¥çš„å¯¹è±¡å¯¹åº”å±æ€§çš„åç§°ï¼Œè¯¥å±æ€§å°†ä¼šæ›´æ–°æˆæ–°çš„å€¼ï¼Œ<code>before</code> å¯ä»¥æŒ‡å®šä¸º <code>true</code> æˆ– <code>false</code> ä»¥æŒ‡æ˜ SQL è¯­å¥åº”è¢«åœ¨æ’å…¥è¯­å¥çš„ä¹‹å‰è¿˜æ˜¯ä¹‹åæ‰§è¡Œã€‚<code>resultType</code> åˆ™æŒ‡å®š <code>keyProperty</code> çš„ Java ç±»å‹ã€‚<code>statementType</code> åˆ™ç”¨äºé€‰æ‹©è¯­å¥ç±»å‹ï¼Œå¯ä»¥é€‰æ‹© <code>STATEMENT</code>ã€<code>PREPARED</code> æˆ– <code>CALLABLE</code> ä¹‹ä¸€ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”äº <code>Statement</code>ã€<code>PreparedStatement</code> å’Œ <code>CallableStatement</code>ã€‚é»˜è®¤å€¼æ˜¯ <code>PREPARED</code>ã€‚ The <code>databaseId</code>(Available since 3.5.5), in case there is a configured <code>DatabaseIdProvider</code>, the MyBatis will use a statement with no <code>databaseId</code> attribute or with a <code>databaseId</code> that matches the current one. If found with and without the <code>databaseId</code> the latter will be discarded.</td></tr><tr><td align="left"><code>@ResultMap</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left">N&#x2F;A</td><td align="left">è¿™ä¸ªæ³¨è§£ä¸º <code>@Select</code> æˆ–è€… <code>@SelectProvider</code> æ³¨è§£æŒ‡å®š XML æ˜ å°„ä¸­ <code>&lt;resultMap&gt;</code> å…ƒç´ çš„ idã€‚è¿™ä½¿å¾—æ³¨è§£çš„ select å¯ä»¥å¤ç”¨å·²åœ¨ XML ä¸­å®šä¹‰çš„ ResultMapã€‚å¦‚æœæ ‡æ³¨çš„ select æ³¨è§£ä¸­å­˜åœ¨ <code>@Results</code> æˆ–è€… <code>@ConstructorArgs</code> æ³¨è§£ï¼Œè¿™ä¸¤ä¸ªæ³¨è§£å°†è¢«æ­¤æ³¨è§£è¦†ç›–ã€‚</td></tr><tr><td align="left"><code>@ResultType</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left">N&#x2F;A</td><td align="left">åœ¨ä½¿ç”¨äº†ç»“æœå¤„ç†å™¨çš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä½¿ç”¨æ­¤æ³¨è§£ã€‚ç”±äºæ­¤æ—¶çš„è¿”å›ç±»å‹ä¸º voidï¼Œæ‰€ä»¥ Mybatis éœ€è¦æœ‰ä¸€ç§æ–¹æ³•æ¥åˆ¤æ–­æ¯ä¸€è¡Œè¿”å›çš„å¯¹è±¡ç±»å‹ã€‚å¦‚æœåœ¨ XML æœ‰å¯¹åº”çš„ç»“æœæ˜ å°„ï¼Œè¯·ä½¿ç”¨ <code>@ResultMap</code> æ³¨è§£ã€‚å¦‚æœç»“æœç±»å‹åœ¨ XML çš„ <code>&lt;select&gt;</code> å…ƒç´ ä¸­æŒ‡å®šäº†ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨å…¶å®ƒæ³¨è§£äº†ã€‚å¦åˆ™å°±éœ€è¦ä½¿ç”¨æ­¤æ³¨è§£ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ ‡æ³¨äº† @Select çš„æ–¹æ³•æƒ³è¦ä½¿ç”¨ç»“æœå¤„ç†å™¨ï¼Œé‚£ä¹ˆå®ƒçš„è¿”å›ç±»å‹å¿…é¡»æ˜¯ voidï¼Œå¹¶ä¸”å¿…é¡»ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼ˆæˆ–è€… @ResultMapï¼‰ã€‚è¿™ä¸ªæ³¨è§£ä»…åœ¨æ–¹æ³•è¿”å›ç±»å‹æ˜¯ void çš„æƒ…å†µä¸‹ç”Ÿæ•ˆã€‚</td></tr><tr><td align="left"><code>@Flush</code></td><td align="left"><code>æ–¹æ³•</code></td><td align="left">N&#x2F;A</td><td align="left">å¦‚æœä½¿ç”¨äº†è¿™ä¸ªæ³¨è§£ï¼Œå®šä¹‰åœ¨ Mapper æ¥å£ä¸­çš„æ–¹æ³•å°±èƒ½å¤Ÿè°ƒç”¨ <code>SqlSession#flushStatements()</code> æ–¹æ³•ã€‚ï¼ˆMybatis 3.3 ä»¥ä¸Šå¯ç”¨ï¼‰</td></tr></tbody></table><h5 id="æ˜ å°„æ³¨è§£ç¤ºä¾‹"><a href="#æ˜ å°„æ³¨è§£ç¤ºä¾‹" class="headerlink" title="æ˜ å°„æ³¨è§£ç¤ºä¾‹"></a>æ˜ å°„æ³¨è§£ç¤ºä¾‹</h5><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ @SelectKey æ³¨è§£æ¥åœ¨æ’å…¥å‰è¯»å–æ•°æ®åº“åºåˆ—çš„å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(&quot;insert into table3 (id, name) values(#&#123;nameId&#125;, #&#123;name&#125;)&quot;)</span></span><br><span class="line"><span class="meta">@SelectKey(statement=&quot;call next value for TestSequence&quot;, keyProperty=&quot;nameId&quot;, before=true, resultType=int.class)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insertTable3</span><span class="params">(Name name)</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ @SelectKey æ³¨è§£æ¥åœ¨æ’å…¥åè¯»å–æ•°æ®åº“è‡ªå¢åˆ—çš„å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Insert(&quot;insert into table2 (name) values(#&#123;name&#125;)&quot;)</span></span><br><span class="line"><span class="meta">@SelectKey(statement=&quot;call identity()&quot;, keyProperty=&quot;nameId&quot;, before=false, resultType=int.class)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insertTable2</span><span class="params">(Name name)</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>@Flush</code> æ³¨è§£æ¥è°ƒç”¨ <code>SqlSession#flushStatements()</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Flush</span></span><br><span class="line">List&lt;BatchResult&gt; <span class="title function_">flush</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><p>è¿™äº›ä¾‹å­å±•ç¤ºäº†å¦‚ä½•é€šè¿‡æŒ‡å®š @Result çš„ id å±æ€§æ¥å‘½åç»“æœé›†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Results(id = &quot;userResult&quot;, value = &#123;</span></span><br><span class="line"><span class="meta">  @Result(property = &quot;id&quot;, column = &quot;uid&quot;, id = true),</span></span><br><span class="line"><span class="meta">  @Result(property = &quot;firstName&quot;, column = &quot;first_name&quot;),</span></span><br><span class="line"><span class="meta">  @Result(property = &quot;lastName&quot;, column = &quot;last_name&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from users where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">User <span class="title function_">getUserById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Results(id = &quot;companyResults&quot;)</span></span><br><span class="line"><span class="meta">@ConstructorArgs(&#123;</span></span><br><span class="line"><span class="meta">  @Arg(column = &quot;cid&quot;, javaType = Integer.class, id = true),</span></span><br><span class="line"><span class="meta">  @Arg(column = &quot;name&quot;, javaType = String.class)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from company where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">Company <span class="title function_">getCompanyById</span><span class="params">(Integer id)</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å•ä¸ªå‚æ•°çš„ @SqlProvider æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SelectProvider(type = UserSqlBuilder.class, method = &quot;buildGetUsersByName&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUsersByName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSqlBuilder</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">buildGetUsersByName</span><span class="params">(<span class="keyword">final</span> String name)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()&#123;&#123;</span><br><span class="line">      SELECT(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">      FROM(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (name != <span class="literal">null</span>) &#123;</span><br><span class="line">        WHERE(<span class="string">&quot;name like #&#123;value&#125; || &#x27;%&#x27;&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      ORDER_BY(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    &#125;&#125;.toString();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ @SqlProvider æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SelectProvider(type = UserSqlBuilder.class, method = &quot;buildGetUsersByName&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUsersByName</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="meta">@Param(&quot;name&quot;)</span> String name, <span class="meta">@Param(&quot;orderByColumn&quot;)</span> String orderByColumn)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSqlBuilder</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœä¸ä½¿ç”¨ @Paramï¼Œå°±åº”è¯¥å®šä¹‰ä¸ mapper æ–¹æ³•ç›¸åŒçš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">buildGetUsersByName</span><span class="params">(</span></span><br><span class="line"><span class="params">      <span class="keyword">final</span> String name, <span class="keyword">final</span> String orderByColumn)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()&#123;&#123;</span><br><span class="line">      SELECT(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">      FROM(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">      WHERE(<span class="string">&quot;name like #&#123;name&#125; || &#x27;%&#x27;&quot;</span>);</span><br><span class="line">      ORDER_BY(orderByColumn);</span><br><span class="line">    &#125;&#125;.toString();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœä½¿ç”¨ @Paramï¼Œå°±å¯ä»¥åªå®šä¹‰éœ€è¦ä½¿ç”¨çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">buildGetUsersByName</span><span class="params">(<span class="meta">@Param(&quot;orderByColumn&quot;)</span> <span class="keyword">final</span> String orderByColumn)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()&#123;&#123;</span><br><span class="line">      SELECT(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">      FROM(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">      WHERE(<span class="string">&quot;name like #&#123;name&#125; || &#x27;%&#x27;&quot;</span>);</span><br><span class="line">      ORDER_BY(orderByColumn);</span><br><span class="line">    &#125;&#125;.toString();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This example shows usage that share an sql provider class to all mapper methods using global configuration(Available since 3.5.6):</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>();</span><br><span class="line">configuration.setDefaultSqlProviderType(TemplateFilePathProvider.class); <span class="comment">// Specify an sql provider class for sharing on all mapper methods</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// Can omit the type/value attribute on sql provider annotation</span></span><br><span class="line"><span class="comment">// If omit it, the MyBatis apply the class that specified on defaultSqlProviderType.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@SelectProvider</span> <span class="comment">// Same with @SelectProvider(TemplateFilePathProvider.class)</span></span><br><span class="line">  User <span class="title function_">findUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@InsertProvider</span> <span class="comment">// Same with @InsertProvider(TemplateFilePathProvider.class)</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">createUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@UpdateProvider</span> <span class="comment">// Same with @UpdateProvider(TemplateFilePathProvider.class)</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@DeleteProvider</span> <span class="comment">// Same with @DeleteProvider(TemplateFilePathProvider.class)</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¾‹å­å±•ç¤ºäº† <code>ProviderMethodResolver</code>ï¼ˆ3.5.1 åå¯ç”¨ï¼‰çš„é»˜è®¤å®ç°ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SelectProvider(UserSqlProvider.class)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUsersByName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ä½ çš„ provider ç±»ä¸­å®ç° ProviderMethodResolver æ¥å£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserSqlProvider</span> <span class="keyword">implements</span> <span class="title class_">ProviderMethodResolver</span> &#123;</span><br><span class="line">  <span class="comment">// é»˜è®¤å®ç°ä¸­ï¼Œä¼šå°†æ˜ å°„å™¨æ–¹æ³•çš„è°ƒç”¨è§£æåˆ°å®ç°çš„åŒåæ–¹æ³•ä¸Š</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getUsersByName</span><span class="params">(<span class="keyword">final</span> String name)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SQL</span>()&#123;&#123;</span><br><span class="line">      SELECT(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">      FROM(<span class="string">&quot;users&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (name != <span class="literal">null</span>) &#123;</span><br><span class="line">        WHERE(<span class="string">&quot;name like #&#123;value&#125; || &#x27;%&#x27;&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      ORDER_BY(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    &#125;&#125;.toString();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This example shows usage the <code>databaseId</code> attribute on the statement annotation(Available since 3.5.5):</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(value = &quot;SELECT SYS_GUID() FROM dual&quot;, databaseId = &quot;oracle&quot;)</span> <span class="comment">// Use this statement if DatabaseIdProvider provide &quot;oracle&quot;</span></span><br><span class="line"><span class="meta">@Select(value = &quot;SELECT uuid_generate_v4()&quot;, databaseId = &quot;postgres&quot;)</span> <span class="comment">// Use this statement if DatabaseIdProvider provide &quot;postgres&quot;</span></span><br><span class="line"><span class="meta">@Select(&quot;SELECT RANDOM_UUID()&quot;)</span> <span class="comment">// Use this statement if the DatabaseIdProvider not configured or not matches databaseId</span></span><br><span class="line">String <span class="title function_">generateId</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ¨æ€SQL</title>
      <link href="/2021/08/05/MyBatis_20_%E5%8A%A8%E6%80%81SQL/"/>
      <url>/2021/08/05/MyBatis_20_%E5%8A%A8%E6%80%81SQL/</url>
      
        <content type="html"><![CDATA[<p>åŠ¨æ€ SQL æ˜¯ MyBatis çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ JDBC æˆ–å…¶å®ƒç±»ä¼¼çš„æ¡†æ¶ï¼Œä½ åº”è¯¥èƒ½ç†è§£æ ¹æ®ä¸åŒæ¡ä»¶æ‹¼æ¥ SQL è¯­å¥æœ‰å¤šç—›è‹¦ï¼Œä¾‹å¦‚æ‹¼æ¥æ—¶è¦ç¡®ä¿ä¸èƒ½å¿˜è®°æ·»åŠ å¿…è¦çš„ç©ºæ ¼ï¼Œè¿˜è¦æ³¨æ„å»æ‰åˆ—è¡¨æœ€åä¸€ä¸ªåˆ—åçš„é€—å·ã€‚åˆ©ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</p><p>ä½¿ç”¨åŠ¨æ€ SQL å¹¶éä¸€ä»¶æ˜“äº‹ï¼Œä½†å€ŸåŠ©å¯ç”¨äºä»»ä½• SQL æ˜ å°„è¯­å¥ä¸­çš„å¼ºå¤§çš„åŠ¨æ€ SQL è¯­è¨€ï¼ŒMyBatis æ˜¾è‘—åœ°æå‡äº†è¿™ä¸€ç‰¹æ€§çš„æ˜“ç”¨æ€§ã€‚</p><p>å¦‚æœä½ ä¹‹å‰ç”¨è¿‡ JSTL æˆ–ä»»ä½•åŸºäºç±» XML è¯­è¨€çš„æ–‡æœ¬å¤„ç†å™¨ï¼Œä½ å¯¹åŠ¨æ€ SQL å…ƒç´ å¯èƒ½ä¼šæ„Ÿè§‰ä¼¼æ›¾ç›¸è¯†ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œéœ€è¦èŠ±æ—¶é—´äº†è§£å¤§é‡çš„å…ƒç´ ã€‚å€ŸåŠ©åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼ï¼ŒMyBatis 3 æ›¿æ¢äº†ä¹‹å‰çš„å¤§éƒ¨åˆ†å…ƒç´ ï¼Œå¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨è¦å­¦ä¹ çš„å…ƒç´ ç§ç±»æ¯”åŸæ¥çš„ä¸€åŠè¿˜è¦å°‘ã€‚</p><ul><li>if</li><li>choose (when, otherwise)</li><li>trim (where, set)</li><li>foreach</li></ul><span id="more"></span><h3 id="if"><a href="#if" class="headerlink" title="if"></a>if</h3><p>ä½¿ç”¨åŠ¨æ€ SQL æœ€å¸¸è§æƒ…æ™¯æ˜¯æ ¹æ®æ¡ä»¶åŒ…å« where å­å¥çš„ä¸€éƒ¨åˆ†ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogWithTitleLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  WHERE state = â€˜ACTIVEâ€™</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">    AND title like #&#123;title&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ¡è¯­å¥æä¾›äº†å¯é€‰çš„æŸ¥æ‰¾æ–‡æœ¬åŠŸèƒ½ã€‚å¦‚æœä¸ä¼ å…¥ â€œtitleâ€ï¼Œé‚£ä¹ˆæ‰€æœ‰å¤„äº â€œACTIVEâ€ çŠ¶æ€çš„ BLOG éƒ½ä¼šè¿”å›ï¼›å¦‚æœä¼ å…¥äº† â€œtitleâ€ å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹ â€œtitleâ€ ä¸€åˆ—è¿›è¡Œæ¨¡ç³ŠæŸ¥æ‰¾å¹¶è¿”å›å¯¹åº”çš„ BLOG ç»“æœï¼ˆç»†å¿ƒçš„è¯»è€…å¯èƒ½ä¼šå‘ç°ï¼Œâ€œtitleâ€ çš„å‚æ•°å€¼éœ€è¦åŒ…å«æŸ¥æ‰¾æ©ç æˆ–é€šé…ç¬¦å­—ç¬¦ï¼‰ã€‚</p><p>å¦‚æœå¸Œæœ›é€šè¿‡ â€œtitleâ€ å’Œ â€œauthorâ€ ä¸¤ä¸ªå‚æ•°è¿›è¡Œå¯é€‰æœç´¢è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘æƒ³å…ˆå°†è¯­å¥åç§°ä¿®æ”¹æˆæ›´åå‰¯å…¶å®çš„åç§°ï¼›æ¥ä¸‹æ¥ï¼Œåªéœ€è¦åŠ å…¥å¦ä¸€ä¸ªæ¡ä»¶å³å¯ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">    AND title like #&#123;title&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">    AND author_name like #&#123;author.name&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="chooseã€whenã€otherwise"><a href="#chooseã€whenã€otherwise" class="headerlink" title="chooseã€whenã€otherwise"></a>chooseã€whenã€otherwise</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨æ‰€æœ‰çš„æ¡ä»¶ï¼Œè€Œåªæ˜¯æƒ³ä»å¤šä¸ªæ¡ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªä½¿ç”¨ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥ã€‚</p><p>è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œä½†æ˜¯ç­–ç•¥å˜ä¸ºï¼šä¼ å…¥äº† â€œtitleâ€ å°±æŒ‰ â€œtitleâ€ æŸ¥æ‰¾ï¼Œä¼ å…¥äº† â€œauthorâ€ å°±æŒ‰ â€œauthorâ€ æŸ¥æ‰¾çš„æƒ…å½¢ã€‚è‹¥ä¸¤è€…éƒ½æ²¡æœ‰ä¼ å…¥ï¼Œå°±è¿”å›æ ‡è®°ä¸º featured çš„ BLOGï¼ˆè¿™å¯èƒ½æ˜¯ç®¡ç†å‘˜è®¤ä¸ºï¼Œä¸å…¶è¿”å›å¤§é‡çš„æ— æ„ä¹‰éšæœº Blogï¼Œè¿˜ä¸å¦‚è¿”å›ä¸€äº›ç”±ç®¡ç†å‘˜ç²¾é€‰çš„ Blogï¼‰ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™</span><br><span class="line">  <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">      AND title like #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">      AND author_name like #&#123;author.name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">      AND featured = 1</span><br><span class="line">    <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="trimã€whereã€set"><a href="#trimã€whereã€set" class="headerlink" title="trimã€whereã€set"></a>trimã€whereã€set</h3><p>å‰é¢å‡ ä¸ªä¾‹å­å·²ç»æ–¹ä¾¿åœ°è§£å†³äº†ä¸€ä¸ªè‡­åæ˜­è‘—çš„åŠ¨æ€ SQL é—®é¢˜ã€‚ç°åœ¨å›åˆ°ä¹‹å‰çš„ â€œifâ€ ç¤ºä¾‹ï¼Œè¿™æ¬¡æˆ‘ä»¬å°† â€œstate &#x3D; â€˜ACTIVEâ€™â€ è®¾ç½®æˆåŠ¨æ€æ¡ä»¶ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  WHERE</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">    state = #&#123;state&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">    AND title like #&#123;title&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">    AND author_name like #&#123;author.name&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰åŒ¹é…çš„æ¡ä»¶ä¼šæ€ä¹ˆæ ·ï¼Ÿæœ€ç»ˆè¿™æ¡ SQL ä¼šå˜æˆè¿™æ ·ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM BLOG</span><br><span class="line">WHERE</span><br></pre></td></tr></table></figure><p>è¿™ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ã€‚å¦‚æœåŒ¹é…çš„åªæ˜¯ç¬¬äºŒä¸ªæ¡ä»¶åˆä¼šæ€æ ·ï¼Ÿè¿™æ¡ SQL ä¼šæ˜¯è¿™æ ·:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM BLOG</span><br><span class="line">WHERE</span><br><span class="line">AND title like â€˜someTitleâ€™</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæŸ¥è¯¢ä¹Ÿä¼šå¤±è´¥ã€‚è¿™ä¸ªé—®é¢˜ä¸èƒ½ç®€å•åœ°ç”¨æ¡ä»¶å…ƒç´ æ¥è§£å†³ã€‚è¿™ä¸ªé—®é¢˜æ˜¯å¦‚æ­¤çš„éš¾ä»¥è§£å†³ï¼Œä»¥è‡³äºè§£å†³è¿‡çš„äººä¸ä¼šå†æƒ³ç¢°åˆ°è¿™ç§é—®é¢˜ã€‚</p><p>MyBatis æœ‰ä¸€ä¸ªç®€å•ä¸”é€‚åˆå¤§å¤šæ•°åœºæ™¯çš„è§£å†³åŠæ³•ã€‚è€Œåœ¨å…¶ä»–åœºæ™¯ä¸­ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ä»¥ç¬¦åˆéœ€æ±‚ã€‚è€Œè¿™ï¼Œåªéœ€è¦ä¸€å¤„ç®€å•çš„æ”¹åŠ¨ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findActiveBlogLike&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">         state = #&#123;state&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        AND title like #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">        AND author_name like #&#123;author.name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>where</em> å…ƒç´ åªä¼šåœ¨å­å…ƒç´ è¿”å›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹æ‰æ’å…¥ â€œWHEREâ€ å­å¥ã€‚è€Œä¸”ï¼Œè‹¥å­å¥çš„å¼€å¤´ä¸º â€œANDâ€ æˆ– â€œORâ€ï¼Œ<em>where</em> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤ã€‚</p><p>å¦‚æœ <em>where</em> å…ƒç´ ä¸ä½ æœŸæœ›çš„ä¸å¤ªä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ trim å…ƒç´ æ¥å®šåˆ¶ <em>where</em> å…ƒç´ çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œå’Œ <em>where</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ trim å…ƒç´ ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;WHERE&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;AND |OR &quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>prefixOverrides</em> å±æ€§ä¼šå¿½ç•¥é€šè¿‡ç®¡é“ç¬¦åˆ†éš”çš„æ–‡æœ¬åºåˆ—ï¼ˆæ³¨æ„æ­¤ä¾‹ä¸­çš„ç©ºæ ¼æ˜¯å¿…è¦çš„ï¼‰ã€‚ä¸Šè¿°ä¾‹å­ä¼šç§»é™¤æ‰€æœ‰ <em>prefixOverrides</em> å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ï¼Œå¹¶ä¸”æ’å…¥ <em>prefix</em> å±æ€§ä¸­æŒ‡å®šçš„å†…å®¹ã€‚</p><p>ç”¨äºåŠ¨æ€æ›´æ–°è¯­å¥çš„ç±»ä¼¼è§£å†³æ–¹æ¡ˆå«åš <em>set</em>ã€‚<em>set</em> å…ƒç´ å¯ä»¥ç”¨äºåŠ¨æ€åŒ…å«éœ€è¦æ›´æ–°çš„åˆ—ï¼Œå¿½ç•¥å…¶å®ƒä¸æ›´æ–°çš„åˆ—ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateAuthorIfNecessary&quot;</span>&gt;</span></span><br><span class="line">  update Author</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null&quot;</span>&gt;</span>username=#&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null&quot;</span>&gt;</span>password=#&#123;password&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;email != null&quot;</span>&gt;</span>email=#&#123;email&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;bio != null&quot;</span>&gt;</span>bio=#&#123;bio&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">  where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<em>set</em> å…ƒç´ ä¼šåŠ¨æ€åœ°åœ¨è¡Œé¦–æ’å…¥ SET å…³é”®å­—ï¼Œå¹¶ä¼šåˆ æ‰é¢å¤–çš„é€—å·ï¼ˆè¿™äº›é€—å·æ˜¯åœ¨ä½¿ç”¨æ¡ä»¶è¯­å¥ç»™åˆ—èµ‹å€¼æ—¶å¼•å…¥çš„ï¼‰ã€‚</p><p>æ¥çœ‹çœ‹ä¸ <em>set</em> å…ƒç´ ç­‰ä»·çš„è‡ªå®šä¹‰ <em>trim</em> å…ƒç´ å§ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;SET&quot;</span> <span class="attr">suffixOverrides</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œæˆ‘ä»¬è¦†ç›–äº†åç¼€å€¼è®¾ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰äº†å‰ç¼€å€¼ã€‚</p><h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><p>åŠ¨æ€ SQL çš„å¦ä¸€ä¸ªå¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯å¯¹é›†åˆè¿›è¡Œéå†ï¼ˆå°¤å…¶æ˜¯åœ¨æ„å»º IN æ¡ä»¶è¯­å¥çš„æ—¶å€™ï¼‰ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPostIn&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;domain.blog.Post&quot;</span>&gt;</span></span><br><span class="line">  SELECT *</span><br><span class="line">  FROM POST P</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">index</span>=<span class="string">&quot;index&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">open</span>=<span class="string">&quot;ID in (&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">nullable</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">          #&#123;item&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>foreach</em> å…ƒç´ çš„åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå®ƒå…è®¸ä½ æŒ‡å®šä¸€ä¸ªé›†åˆï¼Œå£°æ˜å¯ä»¥åœ¨å…ƒç´ ä½“å†…ä½¿ç”¨çš„é›†åˆé¡¹ï¼ˆitemï¼‰å’Œç´¢å¼•ï¼ˆindexï¼‰å˜é‡ã€‚å®ƒä¹Ÿå…è®¸ä½ æŒ‡å®šå¼€å¤´ä¸ç»“å°¾çš„å­—ç¬¦ä¸²ä»¥åŠé›†åˆé¡¹è¿­ä»£ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚è¿™ä¸ªå…ƒç´ ä¹Ÿä¸ä¼šé”™è¯¯åœ°æ·»åŠ å¤šä½™çš„åˆ†éš”ç¬¦ï¼Œçœ‹å®ƒå¤šæ™ºèƒ½ï¼</p><p><strong>æç¤º</strong> ä½ å¯ä»¥å°†ä»»ä½•å¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚ Listã€Set ç­‰ï¼‰ã€Map å¯¹è±¡æˆ–è€…æ•°ç»„å¯¹è±¡ä½œä¸ºé›†åˆå‚æ•°ä¼ é€’ç»™ <em>foreach</em>ã€‚å½“ä½¿ç”¨å¯è¿­ä»£å¯¹è±¡æˆ–è€…æ•°ç»„æ—¶ï¼Œindex æ˜¯å½“å‰è¿­ä»£çš„åºå·ï¼Œitem çš„å€¼æ˜¯æœ¬æ¬¡è¿­ä»£è·å–åˆ°çš„å…ƒç´ ã€‚å½“ä½¿ç”¨ Map å¯¹è±¡ï¼ˆæˆ–è€… Map.Entry å¯¹è±¡çš„é›†åˆï¼‰æ—¶ï¼Œindex æ˜¯é”®ï¼Œitem æ˜¯å€¼ã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸ XML é…ç½®åŠæ˜ å°„æ–‡ä»¶ç›¸å…³çš„è®¨è®ºã€‚ä¸‹ä¸€ç« å°†è¯¦ç»†æ¢è®¨ Java APIï¼Œä»¥ä¾¿ä½ èƒ½å……åˆ†åˆ©ç”¨å·²ç»åˆ›å»ºçš„æ˜ å°„é…ç½®ã€‚</p><h3 id="script"><a href="#script" class="headerlink" title="script"></a>script</h3><p>è¦åœ¨å¸¦æ³¨è§£çš„æ˜ å°„å™¨æ¥å£ç±»ä¸­ä½¿ç”¨åŠ¨æ€ SQLï¼Œå¯ä»¥ä½¿ç”¨ <em>script</em> å…ƒç´ ã€‚æ¯”å¦‚:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Update(&#123;&quot;<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;update Author&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;  <span class="tag">&lt;<span class="name">set</span>&gt;</span>&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&#x27;username != null&#x27;</span>&gt;</span>username=#&#123;username&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span>&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&#x27;password != null&#x27;</span>&gt;</span>password=#&#123;password&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span>&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&#x27;email != null&#x27;</span>&gt;</span>email=#&#123;email&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span>&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&#x27;bio != null&#x27;</span>&gt;</span>bio=#&#123;bio&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span>&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;  <span class="tag">&lt;/<span class="name">set</span>&gt;</span>&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;where id=#&#123;id&#125;&quot;,</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">  &quot;</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>&quot;&#125;)</span><br><span class="line">void updateAuthorValues(Author author);</span><br></pre></td></tr></table></figure><h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h3><p><code>bind</code> å…ƒç´ å…è®¸ä½ åœ¨ OGNL è¡¨è¾¾å¼ä»¥å¤–åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°å½“å‰çš„ä¸Šä¸‹æ–‡ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlogsLike&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bind</span> <span class="attr">name</span>=<span class="string">&quot;pattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#x27;%&#x27; + _parameter.getTitle() + &#x27;%&#x27;&quot;</span> /&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line">  WHERE title LIKE #&#123;pattern&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å¤šæ•°æ®åº“æ”¯æŒ"><a href="#å¤šæ•°æ®åº“æ”¯æŒ" class="headerlink" title="å¤šæ•°æ®åº“æ”¯æŒ"></a>å¤šæ•°æ®åº“æ”¯æŒ</h3><p>å¦‚æœé…ç½®äº† databaseIdProviderï¼Œä½ å°±å¯ä»¥åœ¨åŠ¨æ€ä»£ç ä¸­ä½¿ç”¨åä¸º â€œ_databaseIdâ€ çš„å˜é‡æ¥ä¸ºä¸åŒçš„æ•°æ®åº“æ„å»ºç‰¹å®šçš„è¯­å¥ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId == &#x27;oracle&#x27;&quot;</span>&gt;</span></span><br><span class="line">      select seq_users.nextval from dual</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;_databaseId == &#x27;db2&#x27;&quot;</span>&gt;</span></span><br><span class="line">      select nextval for seq_users from sysibm.sysdummy1&quot;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">  insert into users values (#&#123;id&#125;, #&#123;name&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€-SQL-ä¸­çš„æ’å…¥è„šæœ¬è¯­è¨€"><a href="#åŠ¨æ€-SQL-ä¸­çš„æ’å…¥è„šæœ¬è¯­è¨€" class="headerlink" title="åŠ¨æ€ SQL ä¸­çš„æ’å…¥è„šæœ¬è¯­è¨€"></a>åŠ¨æ€ SQL ä¸­çš„æ’å…¥è„šæœ¬è¯­è¨€</h3><p>MyBatis ä» 3.2 ç‰ˆæœ¬å¼€å§‹æ”¯æŒæ’å…¥è„šæœ¬è¯­è¨€ï¼Œè¿™å…è®¸ä½ æ’å…¥ä¸€ç§è¯­è¨€é©±åŠ¨ï¼Œå¹¶åŸºäºè¿™ç§è¯­è¨€æ¥ç¼–å†™åŠ¨æ€ SQL æŸ¥è¯¢è¯­å¥ã€‚</p><p>å¯ä»¥é€šè¿‡å®ç°ä»¥ä¸‹æ¥å£æ¥æ’å…¥ä¸€ç§è¯­è¨€ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">LanguageDriver</span> &#123;</span><br><span class="line">  ParameterHandler <span class="title function_">createParameterHandler</span><span class="params">(MappedStatement mappedStatement, Object parameterObject, BoundSql boundSql)</span>;</span><br><span class="line">  SqlSource <span class="title function_">createSqlSource</span><span class="params">(Configuration configuration, XNode script, Class&lt;?&gt; parameterType)</span>;</span><br><span class="line">  SqlSource <span class="title function_">createSqlSource</span><span class="params">(Configuration configuration, String script, Class&lt;?&gt; parameterType)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°è‡ªå®šä¹‰è¯­è¨€é©±åŠ¨åï¼Œä½ å°±å¯ä»¥åœ¨ mybatis-config.xml æ–‡ä»¶ä¸­å°†å®ƒè®¾ç½®ä¸ºé»˜è®¤è¯­è¨€ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;org.sample.MyLanguageDriver&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;myLanguage&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultScriptingLanguage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;myLanguage&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>lang</code> å±æ€§ä¸ºç‰¹å®šçš„è¯­å¥æŒ‡å®šè¯­è¨€ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">lang</span>=<span class="string">&quot;myLanguage&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œåœ¨ä½ çš„ mapper æ¥å£ä¸Šæ·»åŠ  <code>@Lang</code> æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Mapper</span> &#123;</span><br><span class="line">  <span class="meta">@Lang(MyLanguageDriver.class)</span></span><br><span class="line">  <span class="meta">@Select(&quot;SELECT * FROM BLOG&quot;)</span></span><br><span class="line">  List&lt;Blog&gt; <span class="title function_">selectBlog</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æç¤º</strong> å¯ä»¥ä½¿ç”¨ Apache Velocity ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œæ›´å¤šç»†èŠ‚è¯·å‚è€ƒ MyBatis-Velocity é¡¹ç›®ã€‚</p><p>ä½ å‰é¢çœ‹åˆ°çš„æ‰€æœ‰ xml æ ‡ç­¾éƒ½ç”±é»˜è®¤ MyBatis è¯­è¨€æä¾›ï¼Œè€Œå®ƒç”±è¯­è¨€é©±åŠ¨ <code>org.apache.ibatis.scripting.xmltags.XmlLanguageDriver</code>ï¼ˆåˆ«åä¸º <code>xml</code>ï¼‰æ‰€æä¾›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”ç¼“å­˜</title>
      <link href="/2021/08/03/MyBatis_19_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E7%BC%93%E5%AD%98/"/>
      <url>/2021/08/03/MyBatis_19_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E7%BC%93%E5%AD%98/</url>
      
        <content type="html"><![CDATA[<p>MyBatis å†…ç½®äº†ä¸€ä¸ªå¼ºå¤§çš„äº‹åŠ¡æ€§æŸ¥è¯¢ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°é…ç½®å’Œå®šåˆ¶ã€‚ ä¸ºäº†ä½¿å®ƒæ›´åŠ å¼ºå¤§è€Œä¸”æ˜“äºé…ç½®ï¼Œæˆ‘ä»¬å¯¹ MyBatis 3 ä¸­çš„ç¼“å­˜å®ç°è¿›è¡Œäº†è®¸å¤šæ”¹è¿›ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå¯ç”¨äº†æœ¬åœ°çš„ä¼šè¯ç¼“å­˜ï¼Œå®ƒä»…ä»…å¯¹ä¸€ä¸ªä¼šè¯ä¸­çš„æ•°æ®è¿›è¡Œç¼“å­˜ã€‚ è¦å¯ç”¨å…¨å±€çš„äºŒçº§ç¼“å­˜ï¼Œåªéœ€è¦åœ¨ä½ çš„ SQL æ˜ å°„æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>åŸºæœ¬ä¸Šå°±æ˜¯è¿™æ ·ã€‚</p><span id="more"></span><p>è¿™ä¸ªç®€å•è¯­å¥çš„æ•ˆæœå¦‚ä¸‹:</p><ul><li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ select è¯­å¥çš„ç»“æœå°†ä¼šè¢«ç¼“å­˜ã€‚</li><li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ insertã€update å’Œ delete è¯­å¥ä¼šåˆ·æ–°ç¼“å­˜ã€‚</li><li>ç¼“å­˜ä¼šä½¿ç”¨æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLRU, Least Recently Usedï¼‰ç®—æ³•æ¥æ¸…é™¤ä¸éœ€è¦çš„ç¼“å­˜ã€‚</li><li>ç¼“å­˜ä¸ä¼šå®šæ—¶è¿›è¡Œåˆ·æ–°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰åˆ·æ–°é—´éš”ï¼‰ã€‚</li><li>ç¼“å­˜ä¼šä¿å­˜åˆ—è¡¨æˆ–å¯¹è±¡ï¼ˆæ— è®ºæŸ¥è¯¢æ–¹æ³•è¿”å›å“ªç§ï¼‰çš„ 1024 ä¸ªå¼•ç”¨ã€‚</li><li>ç¼“å­˜ä¼šè¢«è§†ä¸ºè¯»&#x2F;å†™ç¼“å­˜ï¼Œè¿™æ„å‘³ç€è·å–åˆ°çš„å¯¹è±¡å¹¶ä¸æ˜¯å…±äº«çš„ï¼Œå¯ä»¥å®‰å…¨åœ°è¢«è°ƒç”¨è€…ä¿®æ”¹ï¼Œè€Œä¸å¹²æ‰°å…¶ä»–è°ƒç”¨è€…æˆ–çº¿ç¨‹æ‰€åšçš„æ½œåœ¨ä¿®æ”¹ã€‚</li></ul><p><strong>æç¤º</strong> ç¼“å­˜åªä½œç”¨äº cache æ ‡ç­¾æ‰€åœ¨çš„æ˜ å°„æ–‡ä»¶ä¸­çš„è¯­å¥ã€‚å¦‚æœä½ æ··åˆä½¿ç”¨ Java API å’Œ XML æ˜ å°„æ–‡ä»¶ï¼Œåœ¨å…±ç”¨æ¥å£ä¸­çš„è¯­å¥å°†ä¸ä¼šè¢«é»˜è®¤ç¼“å­˜ã€‚ä½ éœ€è¦ä½¿ç”¨ @CacheNamespaceRef æ³¨è§£æŒ‡å®šç¼“å­˜ä½œç”¨åŸŸã€‚</p><p>è¿™äº›å±æ€§å¯ä»¥é€šè¿‡ cache å…ƒç´ çš„å±æ€§æ¥ä¿®æ”¹ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag">  <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">&quot;512&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜ï¼Œæ¯éš” 60 ç§’åˆ·æ–°ï¼Œæœ€å¤šå¯ä»¥å­˜å‚¨ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨ï¼Œè€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹å¯èƒ½ä¼šåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…äº§ç”Ÿå†²çªã€‚</p><p>å¯ç”¨çš„æ¸…é™¤ç­–ç•¥æœ‰ï¼š</p><ul><li><code>LRU</code> â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚</li><li><code>FIFO</code> â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚</li><li><code>SOFT</code> â€“ è½¯å¼•ç”¨ï¼šåŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡ã€‚</li><li><code>WEAK</code> â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™ç§»é™¤å¯¹è±¡ã€‚</li></ul><p>é»˜è®¤çš„æ¸…é™¤ç­–ç•¥æ˜¯ LRUã€‚</p><p>flushIntervalï¼ˆåˆ·æ–°é—´éš”ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„çš„æ­£æ•´æ•°ï¼Œè®¾ç½®çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„åˆç†æ—¶é—´é‡ã€‚ é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…ä¼šåœ¨è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°ã€‚</p><p>sizeï¼ˆå¼•ç”¨æ•°ç›®ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„æ­£æ•´æ•°ï¼Œè¦æ³¨æ„æ¬²ç¼“å­˜å¯¹è±¡çš„å¤§å°å’Œè¿è¡Œç¯å¢ƒä¸­å¯ç”¨çš„å†…å­˜èµ„æºã€‚é»˜è®¤å€¼æ˜¯ 1024ã€‚</p><p>readOnlyï¼ˆåªè¯»ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸º true æˆ– falseã€‚åªè¯»çš„ç¼“å­˜ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚ å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™å°±æä¾›äº†å¯è§‚çš„æ€§èƒ½æå‡ã€‚è€Œå¯è¯»å†™çš„ç¼“å­˜ä¼šï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰è¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ã€‚ é€Ÿåº¦ä¸Šä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯æ›´å®‰å…¨ï¼Œå› æ­¤é»˜è®¤å€¼æ˜¯ falseã€‚</p><p><strong>æç¤º</strong> äºŒçº§ç¼“å­˜æ˜¯äº‹åŠ¡æ€§çš„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ SqlSession å®Œæˆå¹¶æäº¤æ—¶ï¼Œæˆ–æ˜¯å®Œæˆå¹¶å›æ»šï¼Œä½†æ²¡æœ‰æ‰§è¡Œ flushCache&#x3D;true çš„ insert&#x2F;delete&#x2F;update è¯­å¥æ—¶ï¼Œç¼“å­˜ä¼šè·å¾—æ›´æ–°ã€‚</p><h4 id="ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜"><a href="#ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜"></a>ä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜</h4><p>é™¤äº†ä¸Šè¿°è‡ªå®šä¹‰ç¼“å­˜çš„æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å®ç°ä½ è‡ªå·±çš„ç¼“å­˜ï¼Œæˆ–ä¸ºå…¶ä»–ç¬¬ä¸‰æ–¹ç¼“å­˜æ–¹æ¡ˆåˆ›å»ºé€‚é…å™¨ï¼Œæ¥å®Œå…¨è¦†ç›–ç¼“å­˜è¡Œä¸ºã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;com.domain.something.MyCustomCache&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ç¼“å­˜å®ç°ã€‚type å±æ€§æŒ‡å®šçš„ç±»å¿…é¡»å®ç° org.apache.ibatis.cache.Cache æ¥å£ï¼Œä¸”æä¾›ä¸€ä¸ªæ¥å— String å‚æ•°ä½œä¸º id çš„æ„é€ å™¨ã€‚ è¿™ä¸ªæ¥å£æ˜¯ MyBatis æ¡†æ¶ä¸­è®¸å¤šå¤æ‚çš„æ¥å£ä¹‹ä¸€ï¼Œä½†æ˜¯è¡Œä¸ºå´éå¸¸ç®€å•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Cache</span> &#123;</span><br><span class="line">  String <span class="title function_">getId</span><span class="params">()</span>;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">getSize</span><span class="params">()</span>;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">putObject</span><span class="params">(Object key, Object value)</span>;</span><br><span class="line">  Object <span class="title function_">getObject</span><span class="params">(Object key)</span>;</span><br><span class="line">  <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(Object key)</span>;</span><br><span class="line">  Object <span class="title function_">removeObject</span><span class="params">(Object key)</span>;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†å¯¹ä½ çš„ç¼“å­˜è¿›è¡Œé…ç½®ï¼Œåªéœ€è¦ç®€å•åœ°åœ¨ä½ çš„ç¼“å­˜å®ç°ä¸­æ·»åŠ å…¬æœ‰çš„ JavaBean å±æ€§ï¼Œç„¶åé€šè¿‡ cache å…ƒç´ ä¼ é€’å±æ€§å€¼ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢çš„ä¾‹å­å°†åœ¨ä½ çš„ç¼“å­˜å®ç°ä¸Šè°ƒç”¨ä¸€ä¸ªåä¸º <code>setCacheFile(String file)</code> çš„æ–¹æ³•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;com.domain.something.MyCustomCache&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cacheFile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/tmp/my-custom-cache.tmp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨æ‰€æœ‰ç®€å•ç±»å‹ä½œä¸º JavaBean å±æ€§çš„ç±»å‹ï¼ŒMyBatis ä¼šè¿›è¡Œè½¬æ¢ã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚ <code>$&#123;cache.file&#125;</code>ï¼‰ï¼Œä»¥ä¾¿æ›¿æ¢æˆåœ¨<a href="https://mybatis.org/mybatis-3/zh/configuration.html#properties">é…ç½®æ–‡ä»¶å±æ€§</a>ä¸­å®šä¹‰çš„å€¼ã€‚</p><p>ä»ç‰ˆæœ¬ 3.4.2 å¼€å§‹ï¼ŒMyBatis å·²ç»æ”¯æŒåœ¨æ‰€æœ‰å±æ€§è®¾ç½®å®Œæ¯•ä¹‹åï¼Œè°ƒç”¨ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ã€‚ å¦‚æœæƒ³è¦ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œè¯·åœ¨ä½ çš„è‡ªå®šä¹‰ç¼“å­˜ç±»é‡Œå®ç° <code>org.apache.ibatis.builder.InitializingObject</code> æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">InitializingObject</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">initialize</span><span class="params">()</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æç¤º</strong> ä¸Šä¸€èŠ‚ä¸­å¯¹ç¼“å­˜çš„é…ç½®ï¼ˆå¦‚æ¸…é™¤ç­–ç•¥ã€å¯è¯»æˆ–å¯è¯»å†™ç­‰ï¼‰ï¼Œä¸èƒ½åº”ç”¨äºè‡ªå®šä¹‰ç¼“å­˜ã€‚</p><p>è¯·æ³¨æ„ï¼Œç¼“å­˜çš„é…ç½®å’Œç¼“å­˜å®ä¾‹ä¼šè¢«ç»‘å®šåˆ° SQL æ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´ä¸­ã€‚ å› æ­¤ï¼ŒåŒä¸€å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰è¯­å¥å’Œç¼“å­˜å°†é€šè¿‡å‘½åç©ºé—´ç»‘å®šåœ¨ä¸€èµ·ã€‚ æ¯æ¡è¯­å¥å¯ä»¥è‡ªå®šä¹‰ä¸ç¼“å­˜äº¤äº’çš„æ–¹å¼ï¼Œæˆ–å°†å®ƒä»¬å®Œå…¨æ’é™¤äºç¼“å­˜ä¹‹å¤–ï¼Œè¿™å¯ä»¥é€šè¿‡åœ¨æ¯æ¡è¯­å¥ä¸Šä½¿ç”¨ä¸¤ä¸ªç®€å•å±æ€§æ¥è¾¾æˆã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯­å¥ä¼šè¿™æ ·æ¥é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">...</span> <span class="attr">flushCache</span>=<span class="string">&quot;false&quot;</span> <span class="attr">useCache</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">...</span> <span class="attr">flushCache</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">...</span> <span class="attr">flushCache</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">...</span> <span class="attr">flushCache</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>é‰´äºè¿™æ˜¯é»˜è®¤è¡Œä¸ºï¼Œæ˜¾ç„¶ä½ æ°¸è¿œä¸åº”è¯¥ä»¥è¿™æ ·çš„æ–¹å¼æ˜¾å¼é…ç½®ä¸€æ¡è¯­å¥ã€‚ä½†å¦‚æœä½ æƒ³æ”¹å˜é»˜è®¤çš„è¡Œä¸ºï¼Œåªéœ€è¦è®¾ç½® flushCache å’Œ useCache å±æ€§ã€‚æ¯”å¦‚ï¼ŒæŸäº›æƒ…å†µä¸‹ä½ å¯èƒ½å¸Œæœ›ç‰¹å®š select è¯­å¥çš„ç»“æœæ’é™¤äºç¼“å­˜ä¹‹å¤–ï¼Œæˆ–å¸Œæœ›ä¸€æ¡ select è¯­å¥æ¸…ç©ºç¼“å­˜ã€‚ç±»ä¼¼åœ°ï¼Œä½ å¯èƒ½å¸Œæœ›æŸäº› update è¯­å¥æ‰§è¡Œæ—¶ä¸è¦åˆ·æ–°ç¼“å­˜ã€‚</p><h4 id="cache-ref"><a href="#cache-ref" class="headerlink" title="cache-ref"></a>cache-ref</h4><p>å›æƒ³ä¸€ä¸‹ä¸Šä¸€èŠ‚çš„å†…å®¹ï¼Œå¯¹æŸä¸€å‘½åç©ºé—´çš„è¯­å¥ï¼Œåªä¼šä½¿ç”¨è¯¥å‘½åç©ºé—´çš„ç¼“å­˜è¿›è¡Œç¼“å­˜æˆ–åˆ·æ–°ã€‚ ä½†ä½ å¯èƒ½ä¼šæƒ³è¦åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å…±äº«ç›¸åŒçš„ç¼“å­˜é…ç½®å’Œå®ä¾‹ã€‚è¦å®ç°è¿™ç§éœ€æ±‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ cache-ref å…ƒç´ æ¥å¼•ç”¨å¦ä¸€ä¸ªç¼“å­˜ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache-ref</span> <span class="attr">namespace</span>=<span class="string">&quot;com.someone.application.data.SomeMapper&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”è‡ªåŠ¨æ˜ å°„</title>
      <link href="/2021/08/02/MyBatis_18_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84/"/>
      <url>/2021/08/02/MyBatis_18_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E8%87%AA%E5%8A%A8%E6%98%A0%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<p>æ­£å¦‚ä½ åœ¨å‰é¢ä¸€èŠ‚çœ‹åˆ°çš„ï¼Œåœ¨ç®€å•çš„åœºæ™¯ä¸‹ï¼ŒMyBatis å¯ä»¥ä¸ºä½ è‡ªåŠ¨æ˜ å°„æŸ¥è¯¢ç»“æœã€‚ä½†å¦‚æœé‡åˆ°å¤æ‚çš„åœºæ™¯ï¼Œä½ éœ€è¦æ„å»ºä¸€ä¸ªç»“æœæ˜ å°„ã€‚ ä½†æ˜¯åœ¨æœ¬èŠ‚ä¸­ï¼Œä½ å°†çœ‹åˆ°ï¼Œä½ å¯ä»¥æ··åˆä½¿ç”¨è¿™ä¸¤ç§ç­–ç•¥ã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹è‡ªåŠ¨æ˜ å°„æ˜¯æ€æ ·å·¥ä½œçš„ã€‚</p><p>å½“è‡ªåŠ¨æ˜ å°„æŸ¥è¯¢ç»“æœæ—¶ï¼ŒMyBatis ä¼šè·å–ç»“æœä¸­è¿”å›çš„åˆ—åå¹¶åœ¨ Java ç±»ä¸­æŸ¥æ‰¾ç›¸åŒåå­—çš„å±æ€§ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ã€‚ è¿™æ„å‘³ç€å¦‚æœå‘ç°äº† <em>ID</em> åˆ—å’Œ <em>id</em> å±æ€§ï¼ŒMyBatis ä¼šå°†åˆ— <em>ID</em> çš„å€¼èµ‹ç»™ <em>id</em> å±æ€§ã€‚</p><span id="more"></span><p>é€šå¸¸æ•°æ®åº“åˆ—ä½¿ç”¨å¤§å†™å­—æ¯ç»„æˆçš„å•è¯å‘½åï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼›è€Œ Java å±æ€§ä¸€èˆ¬éµå¾ªé©¼å³°å‘½åæ³•çº¦å®šã€‚ä¸ºäº†åœ¨è¿™ä¸¤ç§å‘½åæ–¹å¼ä¹‹é—´å¯ç”¨è‡ªåŠ¨æ˜ å°„ï¼Œéœ€è¦å°† <code>mapUnderscoreToCamelCase</code> è®¾ç½®ä¸º trueã€‚</p><p>ç”šè‡³åœ¨æä¾›äº†ç»“æœæ˜ å°„åï¼Œè‡ªåŠ¨æ˜ å°„ä¹Ÿèƒ½å·¥ä½œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºæ¯ä¸€ä¸ªç»“æœæ˜ å°„ï¼Œåœ¨ ResultSet å‡ºç°çš„åˆ—ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æ‰‹åŠ¨æ˜ å°„ï¼Œå°†è¢«è‡ªåŠ¨æ˜ å°„ã€‚åœ¨è‡ªåŠ¨æ˜ å°„å¤„ç†å®Œæ¯•åï¼Œå†å¤„ç†æ‰‹åŠ¨æ˜ å°„ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<em>id</em> å’Œ <em>userName</em> åˆ—å°†è¢«è‡ªåŠ¨æ˜ å°„ï¼Œ<em>hashed_password</em> åˆ—å°†æ ¹æ®é…ç½®è¿›è¡Œæ˜ å°„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userResultMap&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    user_id             as &quot;id&quot;,</span><br><span class="line">    user_name           as &quot;userName&quot;,</span><br><span class="line">    hashed_password</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hashed_password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ‰ä¸‰ç§è‡ªåŠ¨æ˜ å°„ç­‰çº§ï¼š</p><ul><li><code>NONE</code> - ç¦ç”¨è‡ªåŠ¨æ˜ å°„ã€‚ä»…å¯¹æ‰‹åŠ¨æ˜ å°„çš„å±æ€§è¿›è¡Œæ˜ å°„ã€‚</li><li><code>PARTIAL</code> - å¯¹é™¤åœ¨å†…éƒ¨å®šä¹‰äº†åµŒå¥—ç»“æœæ˜ å°„ï¼ˆä¹Ÿå°±æ˜¯è¿æ¥çš„å±æ€§ï¼‰ä»¥å¤–çš„å±æ€§è¿›è¡Œæ˜ å°„</li><li><code>FULL</code> - è‡ªåŠ¨æ˜ å°„æ‰€æœ‰å±æ€§ã€‚</li></ul><p>é»˜è®¤å€¼æ˜¯ <code>PARTIAL</code>ï¼Œè¿™æ˜¯æœ‰åŸå› çš„ã€‚å½“å¯¹è¿æ¥æŸ¥è¯¢çš„ç»“æœä½¿ç”¨ <code>FULL</code> æ—¶ï¼Œè¿æ¥æŸ¥è¯¢ä¼šåœ¨åŒä¸€è¡Œä¸­è·å–å¤šä¸ªä¸åŒå®ä½“çš„æ•°æ®ï¼Œå› æ­¤å¯èƒ½å¯¼è‡´éé¢„æœŸçš„æ˜ å°„ã€‚ ä¸‹é¢çš„ä¾‹å­å°†å±•ç¤ºè¿™ç§é£é™©ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    B.id,</span><br><span class="line">    B.title,</span><br><span class="line">    A.username,</span><br><span class="line">  from Blog B left outer join Author A on B.author_id = A.id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;authorResult&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;authorResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_username&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¯¥ç»“æœæ˜ å°„ä¸­ï¼Œ<em>Blog</em> å’Œ <em>Author</em> å‡å°†è¢«è‡ªåŠ¨æ˜ å°„ã€‚ä½†æ˜¯æ³¨æ„ <em>Author</em> æœ‰ä¸€ä¸ª <em>id</em> å±æ€§ï¼Œåœ¨ ResultSet ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåä¸º <em>id</em> çš„åˆ—ï¼Œæ‰€ä»¥ Author çš„ id å°†å¡«å…¥ Blog çš„ idï¼Œè¿™å¯ä¸æ˜¯ä½ æœŸæœ›çš„è¡Œä¸ºã€‚ æ‰€ä»¥ï¼Œè¦è°¨æ…ä½¿ç”¨ <code>FULL</code>ã€‚</p><p>æ— è®ºè®¾ç½®çš„è‡ªåŠ¨æ˜ å°„ç­‰çº§æ˜¯å“ªç§ï¼Œä½ éƒ½å¯ä»¥é€šè¿‡åœ¨ç»“æœæ˜ å°„ä¸Šè®¾ç½® <code>autoMapping</code> å±æ€§æ¥ä¸ºæŒ‡å®šçš„ç»“æœæ˜ å°„è®¾ç½®å¯ç”¨&#x2F;ç¦ç”¨è‡ªåŠ¨æ˜ å°„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span> <span class="attr">autoMapping</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hashed_password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”ç»“æœæ˜ å°„</title>
      <link href="/2021/08/01/MyBatis_17_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E7%BB%93%E6%9E%9C%E6%98%A0%E5%B0%84/"/>
      <url>/2021/08/01/MyBatis_17_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E7%BB%93%E6%9E%9C%E6%98%A0%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>#&#123;&#125;</code> å‚æ•°è¯­æ³•æ—¶ï¼ŒMyBatis ä¼šåˆ›å»º <code>PreparedStatement</code> å‚æ•°å ä½ç¬¦ï¼Œå¹¶é€šè¿‡å ä½ç¬¦å®‰å…¨åœ°è®¾ç½®å‚æ•°ï¼ˆå°±åƒä½¿ç”¨ ? ä¸€æ ·ï¼‰ã€‚ è¿™æ ·åšæ›´å®‰å…¨ï¼Œæ›´è¿…é€Ÿï¼Œé€šå¸¸ä¹Ÿæ˜¯é¦–é€‰åšæ³•ï¼Œä¸è¿‡æœ‰æ—¶ä½ å°±æ˜¯æƒ³ç›´æ¥åœ¨ SQL è¯­å¥ä¸­ç›´æ¥æ’å…¥ä¸€ä¸ªä¸è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚ æ¯”å¦‚ ORDER BY å­å¥ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORDER BY $&#123;columnName&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼ŒMyBatis å°±ä¸ä¼šä¿®æ”¹æˆ–è½¬ä¹‰è¯¥å­—ç¬¦ä¸²äº†ã€‚</p><span id="more"></span><p><code>resultMap</code> å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ ã€‚å®ƒå¯ä»¥è®©ä½ ä» 90% çš„ JDBC <code>ResultSets</code> æ•°æ®æå–ä»£ç ä¸­è§£æ”¾å‡ºæ¥ï¼Œå¹¶åœ¨ä¸€äº›æƒ…å½¢ä¸‹å…è®¸ä½ è¿›è¡Œä¸€äº› JDBC ä¸æ”¯æŒçš„æ“ä½œã€‚å®é™…ä¸Šï¼Œåœ¨ä¸ºä¸€äº›æ¯”å¦‚è¿æ¥çš„å¤æ‚è¯­å¥ç¼–å†™æ˜ å°„ä»£ç çš„æ—¶å€™ï¼Œä¸€ä»½ <code>resultMap</code> èƒ½å¤Ÿä»£æ›¿å®ç°åŒç­‰åŠŸèƒ½çš„æ•°åƒè¡Œä»£ç ã€‚ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹ç®€å•çš„è¯­å¥åšåˆ°é›¶é…ç½®ï¼Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼Œåªéœ€è¦æè¿°è¯­å¥ä¹‹é—´çš„å…³ç³»å°±è¡Œäº†ã€‚</p><p>ä¹‹å‰ä½ å·²ç»è§è¿‡ç®€å•æ˜ å°„è¯­å¥çš„ç¤ºä¾‹ï¼Œå®ƒä»¬æ²¡æœ‰æ˜¾å¼æŒ‡å®š <code>resultMap</code>ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select id, username, hashedPassword</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°è¯­å¥åªæ˜¯ç®€å•åœ°å°†æ‰€æœ‰çš„åˆ—æ˜ å°„åˆ° <code>HashMap</code> çš„é”®ä¸Šï¼Œè¿™ç”± <code>resultType</code> å±æ€§æŒ‡å®šã€‚è™½ç„¶åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¤Ÿç”¨ï¼Œä½†æ˜¯ HashMap å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é¢†åŸŸæ¨¡å‹ã€‚ä½ çš„ç¨‹åºæ›´å¯èƒ½ä¼šä½¿ç”¨ JavaBean æˆ– POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä½œä¸ºé¢†åŸŸæ¨¡å‹ã€‚MyBatis å¯¹ä¸¤è€…éƒ½æä¾›äº†æ”¯æŒã€‚çœ‹çœ‹ä¸‹é¢è¿™ä¸ª JavaBeanï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.someapp.model;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="keyword">private</span> String hashedPassword;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> username;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.username = username;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getHashedPassword</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> hashedPassword;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHashedPassword</span><span class="params">(String hashedPassword)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.hashedPassword = hashedPassword;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸºäº JavaBean çš„è§„èŒƒï¼Œä¸Šé¢è¿™ä¸ªç±»æœ‰ 3 ä¸ªå±æ€§ï¼šidï¼Œusername å’Œ hashedPasswordã€‚è¿™äº›å±æ€§ä¼šå¯¹åº”åˆ° select è¯­å¥ä¸­çš„åˆ—åã€‚</p><p>è¿™æ ·çš„ä¸€ä¸ª JavaBean å¯ä»¥è¢«æ˜ å°„åˆ° <code>ResultSet</code>ï¼Œå°±åƒæ˜ å°„åˆ° <code>HashMap</code> ä¸€æ ·ç®€å•ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.someapp.model.User&quot;</span>&gt;</span></span><br><span class="line">  select id, username, hashedPassword</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç±»å‹åˆ«åæ˜¯ä½ çš„å¥½å¸®æ‰‹ã€‚ä½¿ç”¨å®ƒä»¬ï¼Œä½ å°±å¯ä»¥ä¸ç”¨è¾“å…¥ç±»çš„å…¨é™å®šåäº†ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-config.xml ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.someapp.model.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- SQL æ˜ å°„ XML ä¸­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  select id, username, hashedPassword</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™äº›æƒ…å†µä¸‹ï¼ŒMyBatis ä¼šåœ¨å¹•åè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª <code>ResultMap</code>ï¼Œå†æ ¹æ®å±æ€§åæ¥æ˜ å°„åˆ—åˆ° JavaBean çš„å±æ€§ä¸Šã€‚å¦‚æœåˆ—åå’Œå±æ€§åä¸èƒ½åŒ¹é…ä¸Šï¼Œå¯ä»¥åœ¨ SELECT è¯­å¥ä¸­è®¾ç½®åˆ—åˆ«åï¼ˆè¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ SQL ç‰¹æ€§ï¼‰æ¥å®ŒæˆåŒ¹é…ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    user_id             as &quot;id&quot;,</span><br><span class="line">    user_name           as &quot;userName&quot;,</span><br><span class="line">    hashed_password     as &quot;hashedPassword&quot;</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨å­¦ä¹ äº†ä¸Šé¢çš„çŸ¥è¯†åï¼Œä½ ä¼šå‘ç°ä¸Šé¢çš„ä¾‹å­æ²¡æœ‰ä¸€ä¸ªéœ€è¦æ˜¾å¼é…ç½® <code>ResultMap</code>ï¼Œè¿™å°±æ˜¯ <code>ResultMap</code> çš„ä¼˜ç§€ä¹‹å¤„â€”â€”ä½ å®Œå…¨å¯ä»¥ä¸ç”¨æ˜¾å¼åœ°é…ç½®å®ƒä»¬ã€‚ è™½ç„¶ä¸Šé¢çš„ä¾‹å­ä¸ç”¨æ˜¾å¼é…ç½® <code>ResultMap</code>ã€‚ ä½†ä¸ºäº†è®²è§£ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚æœåœ¨åˆšåˆšçš„ç¤ºä¾‹ä¸­ï¼Œæ˜¾å¼ä½¿ç”¨å¤–éƒ¨çš„ <code>resultMap</code> ä¼šæ€æ ·ï¼Œè¿™ä¹Ÿæ˜¯è§£å†³åˆ—åä¸åŒ¹é…çš„å¦å¤–ä¸€ç§æ–¹å¼ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;userResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;user_name&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;hashed_password&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨å¼•ç”¨å®ƒçš„è¯­å¥ä¸­è®¾ç½® <code>resultMap</code> å±æ€§å°±è¡Œäº†ï¼ˆæ³¨æ„æˆ‘ä»¬å»æ‰äº† <code>resultType</code> å±æ€§ï¼‰ã€‚æ¯”å¦‚:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;userResultMap&quot;</span>&gt;</span></span><br><span class="line">  select user_id, user_name, hashed_password</span><br><span class="line">  from some_table</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™ä¸ªä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚</p><h4 id="é«˜çº§ç»“æœæ˜ å°„"><a href="#é«˜çº§ç»“æœæ˜ å°„" class="headerlink" title="é«˜çº§ç»“æœæ˜ å°„"></a>é«˜çº§ç»“æœæ˜ å°„</h4><p>MyBatis åˆ›å»ºæ—¶çš„ä¸€ä¸ªæ€æƒ³æ˜¯ï¼šæ•°æ®åº“ä¸å¯èƒ½æ°¸è¿œæ˜¯ä½ æ‰€æƒ³æˆ–æ‰€éœ€çš„é‚£ä¸ªæ ·å­ã€‚ æˆ‘ä»¬å¸Œæœ›æ¯ä¸ªæ•°æ®åº“éƒ½å…·å¤‡è‰¯å¥½çš„ç¬¬ä¸‰èŒƒå¼æˆ– BCNF èŒƒå¼ï¼Œå¯æƒœå®ƒä»¬å¹¶ä¸éƒ½æ˜¯é‚£æ ·ã€‚ å¦‚æœèƒ½æœ‰ä¸€ç§æ•°æ®åº“æ˜ å°„æ¨¡å¼ï¼Œå®Œç¾é€‚é…æ‰€æœ‰çš„åº”ç”¨ç¨‹åºï¼Œé‚£å°±å¤ªå¥½äº†ï¼Œä½†å¯æƒœä¹Ÿæ²¡æœ‰ã€‚ è€Œ ResultMap å°±æ˜¯ MyBatis å¯¹è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¦‚ä½•æ˜ å°„ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼Ÿ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- éå¸¸å¤æ‚çš„è¯­å¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlogDetails&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;detailedBlogResultMap&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">       B.id as blog_id,</span><br><span class="line">       B.title as blog_title,</span><br><span class="line">       B.author_id as blog_author_id,</span><br><span class="line">       A.id as author_id,</span><br><span class="line">       A.username as author_username,</span><br><span class="line">       A.password as author_password,</span><br><span class="line">       A.email as author_email,</span><br><span class="line">       A.bio as author_bio,</span><br><span class="line">       A.favourite_section as author_favourite_section,</span><br><span class="line">       P.id as post_id,</span><br><span class="line">       P.blog_id as post_blog_id,</span><br><span class="line">       P.author_id as post_author_id,</span><br><span class="line">       P.created_on as post_created_on,</span><br><span class="line">       P.section as post_section,</span><br><span class="line">       P.subject as post_subject,</span><br><span class="line">       P.draft as draft,</span><br><span class="line">       P.body as post_body,</span><br><span class="line">       C.id as comment_id,</span><br><span class="line">       C.post_id as comment_post_id,</span><br><span class="line">       C.name as comment_name,</span><br><span class="line">       C.comment as comment_text,</span><br><span class="line">       T.id as tag_id,</span><br><span class="line">       T.name as tag_name</span><br><span class="line">  from Blog B</span><br><span class="line">       left outer join Author A on B.author_id = A.id</span><br><span class="line">       left outer join Post P on B.id = P.blog_id</span><br><span class="line">       left outer join Comment C on P.id = C.post_id</span><br><span class="line">       left outer join Post_Tag PT on PT.post_id = P.id</span><br><span class="line">       left outer join Tag T on PT.tag_id = T.id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½æƒ³æŠŠå®ƒæ˜ å°„åˆ°ä¸€ä¸ªæ™ºèƒ½çš„å¯¹è±¡æ¨¡å‹ï¼Œè¿™ä¸ªå¯¹è±¡è¡¨ç¤ºäº†ä¸€ç¯‡åšå®¢ï¼Œå®ƒç”±æŸä½ä½œè€…æ‰€å†™ï¼Œæœ‰å¾ˆå¤šçš„åšæ–‡ï¼Œæ¯ç¯‡åšæ–‡æœ‰é›¶æˆ–å¤šæ¡çš„è¯„è®ºå’Œæ ‡ç­¾ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„ç»“æœæ˜ å°„ï¼ˆå‡è®¾ä½œè€…ï¼Œåšå®¢ï¼Œåšæ–‡ï¼Œè¯„è®ºå’Œæ ‡ç­¾éƒ½æ˜¯ç±»å‹åˆ«åï¼‰ã€‚ ä¸ç”¨ç´§å¼ ï¼Œæˆ‘ä»¬ä¼šä¸€æ­¥ä¸€æ­¥åœ°æ¥è¯´æ˜ã€‚è™½ç„¶å®ƒçœ‹èµ·æ¥ä»¤äººæœ›è€Œç”Ÿç•ï¼Œä½†å…¶å®éå¸¸ç®€å•ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- éå¸¸å¤æ‚çš„ç»“æœæ˜ å°„ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;detailedBlogResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">constructor</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">idArg</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">constructor</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_username&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_password&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_email&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_bio&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;favouriteSection&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_favourite_section&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_subject&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Author&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;comments&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Comment&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;comment_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;tags&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Tag&quot;</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tag_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">column</span>=<span class="string">&quot;draft&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;DraftPost&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>resultMap</code> å…ƒç´ æœ‰å¾ˆå¤šå­å…ƒç´ å’Œä¸€ä¸ªå€¼å¾—æ·±å…¥æ¢è®¨çš„ç»“æ„ã€‚ ä¸‹é¢æ˜¯<code>resultMap</code> å…ƒç´ çš„æ¦‚å¿µè§†å›¾ã€‚</p><h4 id="ç»“æœæ˜ å°„ï¼ˆresultMapï¼‰"><a href="#ç»“æœæ˜ å°„ï¼ˆresultMapï¼‰" class="headerlink" title="ç»“æœæ˜ å°„ï¼ˆresultMapï¼‰"></a>ç»“æœæ˜ å°„ï¼ˆresultMapï¼‰</h4><ul><li><code>constructor</code>- ç”¨äºåœ¨å®ä¾‹åŒ–ç±»æ—¶ï¼Œæ³¨å…¥ç»“æœåˆ°æ„é€ æ–¹æ³•ä¸­<ul><li><code>idArg</code> - ID å‚æ•°ï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½</li><li><code>arg</code> - å°†è¢«æ³¨å…¥åˆ°æ„é€ æ–¹æ³•çš„ä¸€ä¸ªæ™®é€šç»“æœ</li></ul></li><li><code>id</code> â€“ ä¸€ä¸ª ID ç»“æœï¼›æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½</li><li><code>result</code> â€“ æ³¨å…¥åˆ°å­—æ®µæˆ– JavaBean å±æ€§çš„æ™®é€šç»“æœ</li><li><code>association</code>â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”ï¼›è®¸å¤šç»“æœå°†åŒ…è£…æˆè¿™ç§ç±»å‹<ul><li>åµŒå¥—ç»“æœæ˜ å°„ â€“ å…³è”å¯ä»¥æ˜¯ <code>resultMap</code> å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨</li></ul></li><li><code>collection</code>â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„é›†åˆ<ul><li>åµŒå¥—ç»“æœæ˜ å°„ â€“ é›†åˆå¯ä»¥æ˜¯ <code>resultMap</code> å…ƒç´ ï¼Œæˆ–æ˜¯å¯¹å…¶å®ƒç»“æœæ˜ å°„çš„å¼•ç”¨</li></ul></li><li><code>discriminator</code>â€“ ä½¿ç”¨ç»“æœå€¼æ¥å†³å®šä½¿ç”¨å“ªä¸ª<code>resultMap</code><ul><li><code>case</code>â€“ åŸºäºæŸäº›å€¼çš„ç»“æœæ˜ å°„<ul><li>åµŒå¥—ç»“æœæ˜ å°„ â€“ <code>case</code> ä¹Ÿæ˜¯ä¸€ä¸ªç»“æœæ˜ å°„ï¼Œå› æ­¤å…·æœ‰ç›¸åŒçš„ç»“æ„å’Œå…ƒç´ ï¼›æˆ–è€…å¼•ç”¨å…¶å®ƒçš„ç»“æœæ˜ å°„</li></ul></li></ul></li></ul><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>id</code></td><td align="left">å½“å‰å‘½åç©ºé—´ä¸­çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªç»“æœæ˜ å°„ã€‚</td></tr><tr><td align="left"><code>type</code></td><td align="left">ç±»çš„å®Œå…¨é™å®šå, æˆ–è€…ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚</td></tr><tr><td align="left"><code>autoMapping</code></td><td align="left">å¦‚æœè®¾ç½®è¿™ä¸ªå±æ€§ï¼ŒMyBatis å°†ä¼šä¸ºæœ¬ç»“æœæ˜ å°„å¼€å¯æˆ–è€…å…³é—­è‡ªåŠ¨æ˜ å°„ã€‚ è¿™ä¸ªå±æ€§ä¼šè¦†ç›–å…¨å±€çš„å±æ€§ autoMappingBehaviorã€‚é»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚</td></tr></tbody></table><p><strong>æœ€ä½³å®è·µ</strong> æœ€å¥½é€æ­¥å»ºç«‹ç»“æœæ˜ å°„ã€‚å•å…ƒæµ‹è¯•å¯ä»¥åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­èµ·åˆ°å¾ˆå¤§å¸®åŠ©ã€‚ å¦‚æœä½ å°è¯•ä¸€æ¬¡æ€§åˆ›å»ºåƒä¸Šé¢ç¤ºä¾‹é‚£ä¹ˆå·¨å¤§çš„ç»“æœæ˜ å°„ï¼Œä¸ä»…å®¹æ˜“å‡ºé”™ï¼Œéš¾åº¦ä¹Ÿä¼šç›´çº¿ä¸Šå‡ã€‚ æ‰€ä»¥ï¼Œä»æœ€ç®€å•çš„å½¢æ€å¼€å§‹ï¼Œé€æ­¥è¿­ä»£ã€‚è€Œä¸”åˆ«å¿˜äº†å•å…ƒæµ‹è¯•ï¼ æœ‰æ—¶å€™ï¼Œæ¡†æ¶çš„è¡Œä¸ºåƒæ˜¯ä¸€ä¸ªé»‘ç›’å­ï¼ˆæ— è®ºæ˜¯å¦å¼€æºï¼‰ã€‚å› æ­¤ï¼Œä¸ºäº†ç¡®ä¿å®ç°çš„è¡Œä¸ºä¸ä½ çš„æœŸæœ›ç›¸ä¸€è‡´ï¼Œæœ€å¥½ç¼–å†™å•å…ƒæµ‹è¯•ã€‚ å¹¶ä¸”å•å…ƒæµ‹è¯•åœ¨æäº¤ bug æ—¶ä¹Ÿèƒ½èµ·åˆ°å¾ˆå¤§çš„ä½œç”¨ã€‚</p><p>ä¸‹ä¸€éƒ¨åˆ†å°†è¯¦ç»†è¯´æ˜æ¯ä¸ªå…ƒç´ ã€‚</p><h4 id="id-amp-result"><a href="#id-amp-result" class="headerlink" title="id &amp; result"></a>id &amp; result</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_subject&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™äº›å…ƒç´ æ˜¯ç»“æœæ˜ å°„çš„åŸºç¡€ã€‚<em>id</em> å’Œ <em>result</em> å…ƒç´ éƒ½å°†ä¸€ä¸ªåˆ—çš„å€¼æ˜ å°„åˆ°ä¸€ä¸ªç®€å•æ•°æ®ç±»å‹ï¼ˆString, int, double, Date ç­‰ï¼‰çš„å±æ€§æˆ–å­—æ®µã€‚</p><p>è¿™ä¸¤è€…ä¹‹é—´çš„å”¯ä¸€ä¸åŒæ˜¯ï¼Œ<em>id</em> å…ƒç´ å¯¹åº”çš„å±æ€§ä¼šè¢«æ ‡è®°ä¸ºå¯¹è±¡çš„æ ‡è¯†ç¬¦ï¼Œåœ¨æ¯”è¾ƒå¯¹è±¡å®ä¾‹æ—¶ä½¿ç”¨ã€‚ è¿™æ ·å¯ä»¥æé«˜æ•´ä½“çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯è¿›è¡Œç¼“å­˜å’ŒåµŒå¥—ç»“æœæ˜ å°„ï¼ˆä¹Ÿå°±æ˜¯è¿æ¥æ˜ å°„ï¼‰çš„æ—¶å€™ã€‚</p><p>ä¸¤ä¸ªå…ƒç´ éƒ½æœ‰ä¸€äº›å±æ€§ï¼š</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>property</code></td><td align="left">æ˜ å°„åˆ°åˆ—ç»“æœçš„å­—æ®µæˆ–å±æ€§ã€‚å¦‚æœ JavaBean æœ‰è¿™ä¸ªåå­—çš„å±æ€§ï¼ˆpropertyï¼‰ï¼Œä¼šå…ˆä½¿ç”¨è¯¥å±æ€§ã€‚å¦åˆ™ MyBatis å°†ä¼šå¯»æ‰¾ç»™å®šåç§°çš„å­—æ®µï¼ˆfieldï¼‰ã€‚ æ— è®ºæ˜¯å“ªä¸€ç§æƒ…å½¢ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨å¸¸è§çš„ç‚¹å¼åˆ†éš”å½¢å¼è¿›è¡Œå¤æ‚å±æ€§å¯¼èˆªã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·æ˜ å°„ä¸€äº›ç®€å•çš„ä¸œè¥¿ï¼šâ€œusernameâ€ï¼Œæˆ–è€…æ˜ å°„åˆ°ä¸€äº›å¤æ‚çš„ä¸œè¥¿ä¸Šï¼šâ€œaddress.street.numberâ€ã€‚</td></tr><tr><td align="left"><code>column</code></td><td align="left">æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™å’Œä¼ é€’ç»™ <code>resultSet.getString(columnName)</code> æ–¹æ³•çš„å‚æ•°ä¸€æ ·ã€‚</td></tr><tr><td align="left"><code>javaType</code></td><td align="left">ä¸€ä¸ª Java ç±»çš„å…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚</td></tr><tr><td align="left"><code>jdbcType</code></td><td align="left">JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹åçš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯ä»¥ä¸ºç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚</td></tr><tr><td align="left"><code>typeHandler</code></td><td align="left">æˆ‘ä»¬åœ¨å‰é¢è®¨è®ºè¿‡é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥è¦†ç›–é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ è¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ç°ç±»çš„å…¨é™å®šåï¼Œæˆ–è€…æ˜¯ç±»å‹åˆ«åã€‚</td></tr></tbody></table><h4 id="æ”¯æŒçš„-JDBC-ç±»å‹"><a href="#æ”¯æŒçš„-JDBC-ç±»å‹" class="headerlink" title="æ”¯æŒçš„ JDBC ç±»å‹"></a>æ”¯æŒçš„ JDBC ç±»å‹</h4><p>ä¸ºäº†ä»¥åå¯èƒ½çš„ä½¿ç”¨åœºæ™¯ï¼ŒMyBatis é€šè¿‡å†…ç½®çš„ jdbcType æšä¸¾ç±»å‹æ”¯æŒä¸‹é¢çš„ JDBC ç±»å‹ã€‚</p><table><thead><tr><th><code>BIT</code></th><th><code>FLOAT</code></th><th><code>CHAR</code></th><th><code>TIMESTAMP</code></th><th><code>OTHER</code></th><th><code>UNDEFINED</code></th></tr></thead><tbody><tr><td><code>TINYINT</code></td><td><code>REAL</code></td><td><code>VARCHAR</code></td><td><code>BINARY</code></td><td><code>BLOB</code></td><td><code>NVARCHAR</code></td></tr><tr><td><code>SMALLINT</code></td><td><code>DOUBLE</code></td><td><code>LONGVARCHAR</code></td><td><code>VARBINARY</code></td><td><code>CLOB</code></td><td><code>NCHAR</code></td></tr><tr><td><code>INTEGER</code></td><td><code>NUMERIC</code></td><td><code>DATE</code></td><td><code>LONGVARBINARY</code></td><td><code>BOOLEAN</code></td><td><code>NCLOB</code></td></tr><tr><td><code>BIGINT</code></td><td><code>DECIMAL</code></td><td><code>TIME</code></td><td><code>NULL</code></td><td><code>CURSOR</code></td><td><code>ARRAY</code></td></tr></tbody></table><h4 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h4><p>é€šè¿‡ä¿®æ”¹å¯¹è±¡å±æ€§çš„æ–¹å¼ï¼Œå¯ä»¥æ»¡è¶³å¤§å¤šæ•°çš„æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆData Transfer Object, DTOï¼‰ä»¥åŠç»å¤§éƒ¨åˆ†é¢†åŸŸæ¨¡å‹çš„è¦æ±‚ã€‚ä½†æœ‰äº›æƒ…å†µä¸‹ä½ æƒ³ä½¿ç”¨ä¸å¯å˜ç±»ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¾ˆå°‘æ”¹å˜æˆ–åŸºæœ¬ä¸å˜çš„åŒ…å«å¼•ç”¨æˆ–æ•°æ®çš„è¡¨ï¼Œå¾ˆé€‚åˆä½¿ç”¨ä¸å¯å˜ç±»ã€‚ æ„é€ æ–¹æ³•æ³¨å…¥å…è®¸ä½ åœ¨åˆå§‹åŒ–æ—¶ä¸ºç±»è®¾ç½®å±æ€§çš„å€¼ï¼Œè€Œä¸ç”¨æš´éœ²å‡ºå…¬æœ‰æ–¹æ³•ã€‚MyBatis ä¹Ÿæ”¯æŒç§æœ‰å±æ€§å’Œç§æœ‰ JavaBean å±æ€§æ¥å®Œæˆæ³¨å…¥ï¼Œä½†æœ‰ä¸€äº›äººæ›´é’çäºé€šè¿‡æ„é€ æ–¹æ³•è¿›è¡Œæ³¨å…¥ã€‚ <em>constructor</em> å…ƒç´ å°±æ˜¯ä¸ºæ­¤è€Œç”Ÿçš„ã€‚</p><p>çœ‹çœ‹ä¸‹é¢è¿™ä¸ªæ„é€ æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">   <span class="comment">//...</span></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Integer id, String username, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">     <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†å°†ç»“æœæ³¨å…¥æ„é€ æ–¹æ³•ï¼ŒMyBatis éœ€è¦é€šè¿‡æŸç§æ–¹å¼å®šä½ç›¸åº”çš„æ„é€ æ–¹æ³•ã€‚ åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒMyBatis æœç´¢ä¸€ä¸ªå£°æ˜äº†ä¸‰ä¸ªå½¢å‚çš„æ„é€ æ–¹æ³•ï¼Œå‚æ•°ç±»å‹ä»¥ <code>java.lang.Integer</code>, <code>java.lang.String</code> å’Œ <code>int</code> çš„é¡ºåºç»™å‡ºã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">constructor</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">idArg</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">arg</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">arg</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;_int&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">constructor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“ä½ åœ¨å¤„ç†ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªå½¢å‚çš„æ„é€ æ–¹æ³•æ—¶ï¼Œå¾ˆå®¹æ˜“æä¹± arg å…ƒç´ çš„é¡ºåºã€‚ ä»ç‰ˆæœ¬ 3.4.3 å¼€å§‹ï¼Œå¯ä»¥åœ¨æŒ‡å®šå‚æ•°åç§°çš„å‰æä¸‹ï¼Œä»¥ä»»æ„é¡ºåºç¼–å†™ arg å…ƒç´ ã€‚ ä¸ºäº†é€šè¿‡åç§°æ¥å¼•ç”¨æ„é€ æ–¹æ³•å‚æ•°ï¼Œä½ å¯ä»¥æ·»åŠ  <code>@Param</code> æ³¨è§£ï¼Œæˆ–è€…ä½¿ç”¨ â€˜-parametersâ€™ ç¼–è¯‘é€‰é¡¹å¹¶å¯ç”¨ <code>useActualParamName</code> é€‰é¡¹ï¼ˆé»˜è®¤å¼€å¯ï¼‰æ¥ç¼–è¯‘é¡¹ç›®ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç­‰ä»·çš„ä¾‹å­ï¼Œå°½ç®¡å‡½æ•°ç­¾åä¸­ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªå½¢å‚çš„é¡ºåºä¸ constructor å…ƒç´ ä¸­å‚æ•°å£°æ˜çš„é¡ºåºä¸åŒ¹é…ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">constructor</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">idArg</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">arg</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;_int&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">arg</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">constructor</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå­˜åœ¨åç§°å’Œç±»å‹ç›¸åŒçš„å±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ <code>javaType</code> ã€‚</p><p>å‰©ä½™çš„å±æ€§å’Œè§„åˆ™å’Œæ™®é€šçš„ id å’Œ result å…ƒç´ æ˜¯ä¸€æ ·çš„ã€‚</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>column</code></td><td align="left">æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™å’Œä¼ é€’ç»™ <code>resultSet.getString(columnName)</code> æ–¹æ³•çš„å‚æ•°ä¸€æ ·ã€‚</td></tr><tr><td align="left"><code>javaType</code></td><td align="left">ä¸€ä¸ª Java ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚</td></tr><tr><td align="left"><code>jdbcType</code></td><td align="left">JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹å‰çš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯èƒ½å­˜åœ¨ç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚</td></tr><tr><td align="left"><code>typeHandler</code></td><td align="left">æˆ‘ä»¬åœ¨å‰é¢è®¨è®ºè¿‡é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥è¦†ç›–é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ è¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ç°ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–è€…æ˜¯ç±»å‹åˆ«åã€‚</td></tr><tr><td align="left"><code>select</code></td><td align="left">ç”¨äºåŠ è½½å¤æ‚ç±»å‹å±æ€§çš„æ˜ å°„è¯­å¥çš„ IDï¼Œå®ƒä¼šä» column å±æ€§ä¸­æŒ‡å®šçš„åˆ—æ£€ç´¢æ•°æ®ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™æ­¤ select è¯­å¥ã€‚å…·ä½“è¯·å‚è€ƒå…³è”å…ƒç´ ã€‚</td></tr><tr><td align="left"><code>resultMap</code></td><td align="left">ç»“æœæ˜ å°„çš„ IDï¼Œå¯ä»¥å°†åµŒå¥—çš„ç»“æœé›†æ˜ å°„åˆ°ä¸€ä¸ªåˆé€‚çš„å¯¹è±¡æ ‘ä¸­ã€‚ å®ƒå¯ä»¥ä½œä¸ºä½¿ç”¨é¢å¤– select è¯­å¥çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒå¯ä»¥å°†å¤šè¡¨è¿æ¥æ“ä½œçš„ç»“æœæ˜ å°„æˆä¸€ä¸ªå•ä¸€çš„ <code>ResultSet</code>ã€‚è¿™æ ·çš„ <code>ResultSet</code> å°†ä¼šå°†åŒ…å«é‡å¤æˆ–éƒ¨åˆ†æ•°æ®é‡å¤çš„ç»“æœé›†ã€‚ä¸ºäº†å°†ç»“æœé›†æ­£ç¡®åœ°æ˜ å°„åˆ°åµŒå¥—çš„å¯¹è±¡æ ‘ä¸­ï¼ŒMyBatis å…è®¸ä½  â€œä¸²è”â€ç»“æœæ˜ å°„ï¼Œä»¥ä¾¿è§£å†³åµŒå¥—ç»“æœé›†çš„é—®é¢˜ã€‚æƒ³äº†è§£æ›´å¤šå†…å®¹ï¼Œè¯·å‚è€ƒä¸‹é¢çš„å…³è”å…ƒç´ ã€‚</td></tr><tr><td align="left"><code>name</code></td><td align="left">æ„é€ æ–¹æ³•å½¢å‚çš„åå­—ã€‚ä» 3.4.3 ç‰ˆæœ¬å¼€å§‹ï¼Œé€šè¿‡æŒ‡å®šå…·ä½“çš„å‚æ•°åï¼Œä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºå†™å…¥ arg å…ƒç´ ã€‚å‚çœ‹ä¸Šé¢çš„è§£é‡Šã€‚</td></tr></tbody></table><h4 id="å…³è”"><a href="#å…³è”" class="headerlink" title="å…³è”"></a>å…³è”</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_author_id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_id&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_username&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…³è”ï¼ˆassociationï¼‰å…ƒç´ å¤„ç†â€œæœ‰ä¸€ä¸ªâ€ç±»å‹çš„å…³ç³»ã€‚ æ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œä¸€ä¸ªåšå®¢æœ‰ä¸€ä¸ªç”¨æˆ·ã€‚å…³è”ç»“æœæ˜ å°„å’Œå…¶å®ƒç±»å‹çš„æ˜ å°„å·¥ä½œæ–¹å¼å·®ä¸å¤šã€‚ ä½ éœ€è¦æŒ‡å®šç›®æ ‡å±æ€§åä»¥åŠå±æ€§çš„<code>javaType</code>ï¼ˆå¾ˆå¤šæ—¶å€™ MyBatis å¯ä»¥è‡ªå·±æ¨æ–­å‡ºæ¥ï¼‰ï¼Œåœ¨å¿…è¦çš„æƒ…å†µä¸‹ä½ è¿˜å¯ä»¥è®¾ç½® JDBC ç±»å‹ï¼Œå¦‚æœä½ æƒ³è¦†ç›–è·å–ç»“æœå€¼çš„è¿‡ç¨‹ï¼Œè¿˜å¯ä»¥è®¾ç½®ç±»å‹å¤„ç†å™¨ã€‚</p><p>å…³è”çš„ä¸åŒä¹‹å¤„æ˜¯ï¼Œä½ éœ€è¦å‘Šè¯‰ MyBatis å¦‚ä½•åŠ è½½å…³è”ã€‚MyBatis æœ‰ä¸¤ç§ä¸åŒçš„æ–¹å¼åŠ è½½å…³è”ï¼š</p><ul><li>åµŒå¥— Select æŸ¥è¯¢ï¼šé€šè¿‡æ‰§è¡Œå¦å¤–ä¸€ä¸ª SQL æ˜ å°„è¯­å¥æ¥åŠ è½½æœŸæœ›çš„å¤æ‚ç±»å‹ã€‚</li><li>åµŒå¥—ç»“æœæ˜ å°„ï¼šä½¿ç”¨åµŒå¥—çš„ç»“æœæ˜ å°„æ¥å¤„ç†è¿æ¥ç»“æœçš„é‡å¤å­é›†ã€‚</li></ul><p>é¦–å…ˆï¼Œå…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªå…ƒç´ çš„å±æ€§ã€‚ä½ å°†ä¼šå‘ç°ï¼Œå’Œæ™®é€šçš„ç»“æœæ˜ å°„ç›¸æ¯”ï¼Œå®ƒåªåœ¨ select å’Œ resultMap å±æ€§ä¸Šæœ‰æ‰€ä¸åŒã€‚</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>property</code></td><td align="left">æ˜ å°„åˆ°åˆ—ç»“æœçš„å­—æ®µæˆ–å±æ€§ã€‚å¦‚æœç”¨æ¥åŒ¹é…çš„ JavaBean å­˜åœ¨ç»™å®šåå­—çš„å±æ€§ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«ä½¿ç”¨ã€‚å¦åˆ™ MyBatis å°†ä¼šå¯»æ‰¾ç»™å®šåç§°çš„å­—æ®µã€‚ æ— è®ºæ˜¯å“ªä¸€ç§æƒ…å½¢ï¼Œä½ éƒ½å¯ä»¥ä½¿ç”¨é€šå¸¸çš„ç‚¹å¼åˆ†éš”å½¢å¼è¿›è¡Œå¤æ‚å±æ€§å¯¼èˆªã€‚ æ¯”å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·æ˜ å°„ä¸€äº›ç®€å•çš„ä¸œè¥¿ï¼šâ€œusernameâ€ï¼Œæˆ–è€…æ˜ å°„åˆ°ä¸€äº›å¤æ‚çš„ä¸œè¥¿ä¸Šï¼šâ€œaddress.street.numberâ€ã€‚</td></tr><tr><td align="left"><code>javaType</code></td><td align="left">ä¸€ä¸ª Java ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–ä¸€ä¸ªç±»å‹åˆ«åï¼ˆå…³äºå†…ç½®çš„ç±»å‹åˆ«åï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„è¡¨æ ¼ï¼‰ã€‚ å¦‚æœä½ æ˜ å°„åˆ°ä¸€ä¸ª JavaBeanï¼ŒMyBatis é€šå¸¸å¯ä»¥æ¨æ–­ç±»å‹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æ˜ å°„åˆ°çš„æ˜¯ HashMapï¼Œé‚£ä¹ˆä½ åº”è¯¥æ˜ç¡®åœ°æŒ‡å®š javaType æ¥ä¿è¯è¡Œä¸ºä¸æœŸæœ›çš„ç›¸ä¸€è‡´ã€‚</td></tr><tr><td align="left"><code>jdbcType</code></td><td align="left">JDBC ç±»å‹ï¼Œæ‰€æ”¯æŒçš„ JDBC ç±»å‹å‚è§è¿™ä¸ªè¡¨æ ¼ä¹‹å‰çš„â€œæ”¯æŒçš„ JDBC ç±»å‹â€ã€‚ åªéœ€è¦åœ¨å¯èƒ½æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤çš„ä¸”å…è®¸ç©ºå€¼çš„åˆ—ä¸ŠæŒ‡å®š JDBC ç±»å‹ã€‚è¿™æ˜¯ JDBC çš„è¦æ±‚è€Œé MyBatis çš„è¦æ±‚ã€‚å¦‚æœä½ ç›´æ¥é¢å‘ JDBC ç¼–ç¨‹ï¼Œä½ éœ€è¦å¯¹å¯èƒ½å­˜åœ¨ç©ºå€¼çš„åˆ—æŒ‡å®šè¿™ä¸ªç±»å‹ã€‚</td></tr><tr><td align="left"><code>typeHandler</code></td><td align="left">æˆ‘ä»¬åœ¨å‰é¢è®¨è®ºè¿‡é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä½ å¯ä»¥è¦†ç›–é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚ è¿™ä¸ªå±æ€§å€¼æ˜¯ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ç°ç±»çš„å®Œå…¨é™å®šåï¼Œæˆ–è€…æ˜¯ç±»å‹åˆ«åã€‚</td></tr></tbody></table><h4 id="å…³è”çš„åµŒå¥—-Select-æŸ¥è¯¢"><a href="#å…³è”çš„åµŒå¥—-Select-æŸ¥è¯¢" class="headerlink" title="å…³è”çš„åµŒå¥— Select æŸ¥è¯¢"></a>å…³è”çš„åµŒå¥— Select æŸ¥è¯¢</h4><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>column</code></td><td align="left">æ•°æ®åº“ä¸­çš„åˆ—åï¼Œæˆ–è€…æ˜¯åˆ—çš„åˆ«åã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™å’Œä¼ é€’ç»™ <code>resultSet.getString(columnName)</code> æ–¹æ³•çš„å‚æ•°ä¸€æ ·ã€‚ æ³¨æ„ï¼šåœ¨ä½¿ç”¨å¤åˆä¸»é”®çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>column=&quot;&#123;prop1=col1,prop2=col2&#125;&quot;</code> è¿™æ ·çš„è¯­æ³•æ¥æŒ‡å®šå¤šä¸ªä¼ é€’ç»™åµŒå¥— Select æŸ¥è¯¢è¯­å¥çš„åˆ—åã€‚è¿™ä¼šä½¿å¾— <code>prop1</code> å’Œ <code>prop2</code> ä½œä¸ºå‚æ•°å¯¹è±¡ï¼Œè¢«è®¾ç½®ä¸ºå¯¹åº”åµŒå¥— Select è¯­å¥çš„å‚æ•°ã€‚</td></tr><tr><td align="left"><code>select</code></td><td align="left">ç”¨äºåŠ è½½å¤æ‚ç±»å‹å±æ€§çš„æ˜ å°„è¯­å¥çš„ IDï¼Œå®ƒä¼šä» column å±æ€§æŒ‡å®šçš„åˆ—ä¸­æ£€ç´¢æ•°æ®ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™ç›®æ ‡ select è¯­å¥ã€‚ å…·ä½“è¯·å‚è€ƒä¸‹é¢çš„ä¾‹å­ã€‚æ³¨æ„ï¼šåœ¨ä½¿ç”¨å¤åˆä¸»é”®çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>column=&quot;&#123;prop1=col1,prop2=col2&#125;&quot;</code> è¿™æ ·çš„è¯­æ³•æ¥æŒ‡å®šå¤šä¸ªä¼ é€’ç»™åµŒå¥— Select æŸ¥è¯¢è¯­å¥çš„åˆ—åã€‚è¿™ä¼šä½¿å¾— <code>prop1</code> å’Œ <code>prop2</code> ä½œä¸ºå‚æ•°å¯¹è±¡ï¼Œè¢«è®¾ç½®ä¸ºå¯¹åº”åµŒå¥— Select è¯­å¥çš„å‚æ•°ã€‚</td></tr><tr><td align="left"><code>fetchType</code></td><td align="left">å¯é€‰çš„ã€‚æœ‰æ•ˆå€¼ä¸º <code>lazy</code> å’Œ <code>eager</code>ã€‚ æŒ‡å®šå±æ€§åï¼Œå°†åœ¨æ˜ å°„ä¸­å¿½ç•¥å…¨å±€é…ç½®å‚æ•° <code>lazyLoadingEnabled</code>ï¼Œä½¿ç”¨å±æ€§çš„å€¼ã€‚</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id=&quot;blogResult&quot; type=&quot;Blog&quot;&gt;</span><br><span class="line">  &lt;association property=&quot;author&quot; column=&quot;author_id&quot; javaType=&quot;Author&quot; select=&quot;selectAuthor&quot;/&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;selectBlog&quot; resultMap=&quot;blogResult&quot;&gt;</span><br><span class="line">  SELECT * FROM BLOG WHERE ID = #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;selectAuthor&quot; resultType=&quot;Author&quot;&gt;</span><br><span class="line">  SELECT * FROM AUTHOR WHERE ID = #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚æˆ‘ä»¬æœ‰ä¸¤ä¸ª select æŸ¥è¯¢è¯­å¥ï¼šä¸€ä¸ªç”¨æ¥åŠ è½½åšå®¢ï¼ˆBlogï¼‰ï¼Œå¦å¤–ä¸€ä¸ªç”¨æ¥åŠ è½½ä½œè€…ï¼ˆAuthorï¼‰ï¼Œè€Œä¸”åšå®¢çš„ç»“æœæ˜ å°„æè¿°äº†åº”è¯¥ä½¿ç”¨ <code>selectAuthor</code> è¯­å¥åŠ è½½å®ƒçš„ author å±æ€§ã€‚</p><p>å…¶å®ƒæ‰€æœ‰çš„å±æ€§å°†ä¼šè¢«è‡ªåŠ¨åŠ è½½ï¼Œåªè¦å®ƒä»¬çš„åˆ—åå’Œå±æ€§åç›¸åŒ¹é…ã€‚</p><p>è¿™ç§æ–¹å¼è™½ç„¶å¾ˆç®€å•ï¼Œä½†åœ¨å¤§å‹æ•°æ®é›†æˆ–å¤§å‹æ•°æ®è¡¨ä¸Šè¡¨ç°ä¸ä½³ã€‚è¿™ä¸ªé—®é¢˜è¢«ç§°ä¸ºâ€œN+1 æŸ¥è¯¢é—®é¢˜â€ã€‚ æ¦‚æ‹¬åœ°è®²ï¼ŒN+1 æŸ¥è¯¢é—®é¢˜æ˜¯è¿™æ ·å­çš„ï¼š</p><ul><li>ä½ æ‰§è¡Œäº†ä¸€ä¸ªå•ç‹¬çš„ SQL è¯­å¥æ¥è·å–ç»“æœçš„ä¸€ä¸ªåˆ—è¡¨ï¼ˆå°±æ˜¯â€œ+1â€ï¼‰ã€‚</li><li>å¯¹åˆ—è¡¨è¿”å›çš„æ¯æ¡è®°å½•ï¼Œä½ æ‰§è¡Œä¸€ä¸ª select æŸ¥è¯¢è¯­å¥æ¥ä¸ºæ¯æ¡è®°å½•åŠ è½½è¯¦ç»†ä¿¡æ¯ï¼ˆå°±æ˜¯â€œNâ€ï¼‰ã€‚</li></ul><p>è¿™ä¸ªé—®é¢˜ä¼šå¯¼è‡´æˆç™¾ä¸Šåƒçš„ SQL è¯­å¥è¢«æ‰§è¡Œã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›äº§ç”Ÿè¿™æ ·çš„åæœã€‚</p><p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒMyBatis èƒ½å¤Ÿå¯¹è¿™æ ·çš„æŸ¥è¯¢è¿›è¡Œå»¶è¿ŸåŠ è½½ï¼Œå› æ­¤å¯ä»¥å°†å¤§é‡è¯­å¥åŒæ—¶è¿è¡Œçš„å¼€é”€åˆ†æ•£å¼€æ¥ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ åŠ è½½è®°å½•åˆ—è¡¨ä¹‹åç«‹åˆ»å°±éå†åˆ—è¡¨ä»¥è·å–åµŒå¥—çš„æ•°æ®ï¼Œå°±ä¼šè§¦å‘æ‰€æœ‰çš„å»¶è¿ŸåŠ è½½æŸ¥è¯¢ï¼Œæ€§èƒ½å¯èƒ½ä¼šå˜å¾—å¾ˆç³Ÿç³•ã€‚</p><p>æ‰€ä»¥è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ³•ã€‚</p><h4 id="å…³è”çš„åµŒå¥—ç»“æœæ˜ å°„"><a href="#å…³è”çš„åµŒå¥—ç»“æœæ˜ å°„" class="headerlink" title="å…³è”çš„åµŒå¥—ç»“æœæ˜ å°„"></a>å…³è”çš„åµŒå¥—ç»“æœæ˜ å°„</h4><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>resultMap</code></td><td align="left">ç»“æœæ˜ å°„çš„ IDï¼Œå¯ä»¥å°†æ­¤å…³è”çš„åµŒå¥—ç»“æœé›†æ˜ å°„åˆ°ä¸€ä¸ªåˆé€‚çš„å¯¹è±¡æ ‘ä¸­ã€‚ å®ƒå¯ä»¥ä½œä¸ºä½¿ç”¨é¢å¤– select è¯­å¥çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒå¯ä»¥å°†å¤šè¡¨è¿æ¥æ“ä½œçš„ç»“æœæ˜ å°„æˆä¸€ä¸ªå•ä¸€çš„ <code>ResultSet</code>ã€‚è¿™æ ·çš„ <code>ResultSet</code> æœ‰éƒ¨åˆ†æ•°æ®æ˜¯é‡å¤çš„ã€‚ ä¸ºäº†å°†ç»“æœé›†æ­£ç¡®åœ°æ˜ å°„åˆ°åµŒå¥—çš„å¯¹è±¡æ ‘ä¸­, MyBatis å…è®¸ä½ â€œä¸²è”â€ç»“æœæ˜ å°„ï¼Œä»¥ä¾¿è§£å†³åµŒå¥—ç»“æœé›†çš„é—®é¢˜ã€‚ä½¿ç”¨åµŒå¥—ç»“æœæ˜ å°„çš„ä¸€ä¸ªä¾‹å­åœ¨è¡¨æ ¼ä»¥åã€‚</td></tr><tr><td align="left"><code>columnPrefix</code></td><td align="left">å½“è¿æ¥å¤šä¸ªè¡¨æ—¶ï¼Œä½ å¯èƒ½ä¼šä¸å¾—ä¸ä½¿ç”¨åˆ—åˆ«åæ¥é¿å…åœ¨ <code>ResultSet</code> ä¸­äº§ç”Ÿé‡å¤çš„åˆ—åã€‚æŒ‡å®š columnPrefix åˆ—åå‰ç¼€å…è®¸ä½ å°†å¸¦æœ‰è¿™äº›å‰ç¼€çš„åˆ—æ˜ å°„åˆ°ä¸€ä¸ªå¤–éƒ¨çš„ç»“æœæ˜ å°„ä¸­ã€‚ è¯¦ç»†è¯´æ˜è¯·å‚è€ƒåé¢çš„ä¾‹å­ã€‚</td></tr><tr><td align="left"><code>notNullColumn</code></td><td align="left">é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨è‡³å°‘ä¸€ä¸ªè¢«æ˜ å°„åˆ°å±æ€§çš„åˆ—ä¸ä¸ºç©ºæ—¶ï¼Œå­å¯¹è±¡æ‰ä¼šè¢«åˆ›å»ºã€‚ ä½ å¯ä»¥åœ¨è¿™ä¸ªå±æ€§ä¸ŠæŒ‡å®šéç©ºçš„åˆ—æ¥æ”¹å˜é»˜è®¤è¡Œä¸ºï¼ŒæŒ‡å®šåï¼ŒMybatis å°†åªåœ¨è¿™äº›åˆ—éç©ºæ—¶æ‰åˆ›å»ºä¸€ä¸ªå­å¯¹è±¡ã€‚å¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”æ¥æŒ‡å®šå¤šä¸ªåˆ—ã€‚é»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚</td></tr><tr><td align="left"><code>autoMapping</code></td><td align="left">å¦‚æœè®¾ç½®è¿™ä¸ªå±æ€§ï¼ŒMyBatis å°†ä¼šä¸ºæœ¬ç»“æœæ˜ å°„å¼€å¯æˆ–è€…å…³é—­è‡ªåŠ¨æ˜ å°„ã€‚ è¿™ä¸ªå±æ€§ä¼šè¦†ç›–å…¨å±€çš„å±æ€§ autoMappingBehaviorã€‚æ³¨æ„ï¼Œæœ¬å±æ€§å¯¹å¤–éƒ¨çš„ç»“æœæ˜ å°„æ— æ•ˆï¼Œæ‰€ä»¥ä¸èƒ½æ­é… <code>select</code> æˆ– <code>resultMap</code> å…ƒç´ ä½¿ç”¨ã€‚é»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚</td></tr></tbody></table><p>ä¹‹å‰ï¼Œä½ å·²ç»çœ‹åˆ°äº†ä¸€ä¸ªéå¸¸å¤æ‚çš„åµŒå¥—å…³è”çš„ä¾‹å­ã€‚ ä¸‹é¢çš„ä¾‹å­åˆ™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œç”¨äºæ¼”ç¤ºåµŒå¥—ç»“æœæ˜ å°„å¦‚ä½•å·¥ä½œã€‚ ç°åœ¨æˆ‘ä»¬å°†åšå®¢è¡¨å’Œä½œè€…è¡¨è¿æ¥åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯æ‰§è¡Œä¸€ä¸ªç‹¬ç«‹çš„æŸ¥è¯¢è¯­å¥ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    B.id            as blog_id,</span><br><span class="line">    B.title         as blog_title,</span><br><span class="line">    B.author_id     as blog_author_id,</span><br><span class="line">    A.id            as author_id,</span><br><span class="line">    A.username      as author_username,</span><br><span class="line">    A.password      as author_password,</span><br><span class="line">    A.email         as author_email,</span><br><span class="line">    A.bio           as author_bio</span><br><span class="line">  from Blog B left outer join Author A on B.author_id = A.id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„æŸ¥è¯¢ä¸­çš„è¿æ¥ï¼Œä»¥åŠä¸ºç¡®ä¿ç»“æœèƒ½å¤Ÿæ‹¥æœ‰å”¯ä¸€ä¸”æ¸…æ™°çš„åå­—ï¼Œæˆ‘ä»¬è®¾ç½®çš„åˆ«åã€‚ è¿™ä½¿å¾—è¿›è¡Œæ˜ å°„éå¸¸ç®€å•ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æ˜ å°„è¿™ä¸ªç»“æœï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_author_id&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Author&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;authorResult&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;authorResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_id&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_username&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_password&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_email&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_bio&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œåšå®¢ï¼ˆBlogï¼‰ä½œè€…ï¼ˆauthorï¼‰çš„å…³è”å…ƒç´ å§”æ‰˜åä¸º â€œauthorResultâ€ çš„ç»“æœæ˜ å°„æ¥åŠ è½½ä½œè€…å¯¹è±¡çš„å®ä¾‹ã€‚</p><p>éå¸¸é‡è¦ï¼š id å…ƒç´ åœ¨åµŒå¥—ç»“æœæ˜ å°„ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ã€‚ä½ åº”è¯¥æ€»æ˜¯æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†ç»“æœçš„å±æ€§ã€‚ è™½ç„¶ï¼Œå³ä½¿ä¸æŒ‡å®šè¿™ä¸ªå±æ€§ï¼ŒMyBatis ä»ç„¶å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯ä¼šäº§ç”Ÿä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚ åªéœ€è¦æŒ‡å®šå¯ä»¥å”¯ä¸€æ ‡è¯†ç»“æœçš„æœ€å°‘å±æ€§ã€‚æ˜¾ç„¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸»é”®ï¼ˆå¤åˆä¸»é”®ä¹Ÿå¯ä»¥ï¼‰ã€‚</p><p>ç°åœ¨ï¼Œä¸Šé¢çš„ç¤ºä¾‹ä½¿ç”¨äº†å¤–éƒ¨çš„ç»“æœæ˜ å°„å…ƒç´ æ¥æ˜ å°„å…³è”ã€‚è¿™ä½¿å¾— Author çš„ç»“æœæ˜ å°„å¯ä»¥è¢«é‡ç”¨ã€‚ ç„¶è€Œï¼Œå¦‚æœä½ ä¸æ‰“ç®—é‡ç”¨å®ƒï¼Œæˆ–è€…ä½ æ›´å–œæ¬¢å°†ä½ æ‰€æœ‰çš„ç»“æœæ˜ å°„æ”¾åœ¨ä¸€ä¸ªå…·æœ‰æè¿°æ€§çš„ç»“æœæ˜ å°„å…ƒç´ ä¸­ã€‚ ä½ å¯ä»¥ç›´æ¥å°†ç»“æœæ˜ å°„ä½œä¸ºå­å…ƒç´ åµŒå¥—åœ¨å†…ã€‚è¿™é‡Œç»™å‡ºä½¿ç”¨è¿™ç§æ–¹å¼çš„ç­‰æ•ˆä¾‹å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_username&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_password&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_email&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_bio&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‚£å¦‚æœåšå®¢ï¼ˆblogï¼‰æœ‰ä¸€ä¸ªå…±åŒä½œè€…ï¼ˆco-authorï¼‰è¯¥æ€ä¹ˆåŠï¼Ÿselect è¯­å¥çœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    B.id            as blog_id,</span><br><span class="line">    B.title         as blog_title,</span><br><span class="line">    A.id            as author_id,</span><br><span class="line">    A.username      as author_username,</span><br><span class="line">    A.password      as author_password,</span><br><span class="line">    A.email         as author_email,</span><br><span class="line">    A.bio           as author_bio,</span><br><span class="line">    CA.id           as co_author_id,</span><br><span class="line">    CA.username     as co_author_username,</span><br><span class="line">    CA.password     as co_author_password,</span><br><span class="line">    CA.email        as co_author_email,</span><br><span class="line">    CA.bio          as co_author_bio</span><br><span class="line">  from Blog B</span><br><span class="line">  left outer join Author A on B.author_id = A.id</span><br><span class="line">  left outer join Author CA on B.co_author_id = CA.id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å›å¿†ä¸€ä¸‹ï¼ŒAuthor çš„ç»“æœæ˜ å°„å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;authorResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Author&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_id&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_username&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_password&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_email&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_bio&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç”±äºç»“æœä¸­çš„åˆ—åä¸ç»“æœæ˜ å°„ä¸­çš„åˆ—åä¸åŒã€‚ä½ éœ€è¦æŒ‡å®š <code>columnPrefix</code> ä»¥ä¾¿é‡å¤ä½¿ç”¨è¯¥ç»“æœæ˜ å°„æ¥æ˜ å°„ co-author çš„ç»“æœã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">resultMap</span>=<span class="string">&quot;authorResult&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;coAuthor&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">resultMap</span>=<span class="string">&quot;authorResult&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">columnPrefix</span>=<span class="string">&quot;co_&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å…³è”çš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰"><a href="#å…³è”çš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰" class="headerlink" title="å…³è”çš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰"></a>å…³è”çš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰</h4><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>column</code></td><td align="left">å½“ä½¿ç”¨å¤šä¸ªç»“æœé›†æ—¶ï¼Œè¯¥å±æ€§æŒ‡å®šç»“æœé›†ä¸­ç”¨äºä¸ <code>foreignColumn</code> åŒ¹é…çš„åˆ—ï¼ˆå¤šä¸ªåˆ—åä»¥é€—å·éš”å¼€ï¼‰ï¼Œä»¥è¯†åˆ«å…³ç³»ä¸­çš„çˆ¶ç±»å‹ä¸å­ç±»å‹ã€‚</td></tr><tr><td align="left"><code>foreignColumn</code></td><td align="left">æŒ‡å®šå¤–é”®å¯¹åº”çš„åˆ—åï¼ŒæŒ‡å®šçš„åˆ—å°†ä¸çˆ¶ç±»å‹ä¸­ <code>column</code> çš„ç»™å‡ºçš„åˆ—è¿›è¡ŒåŒ¹é…ã€‚</td></tr><tr><td align="left"><code>resultSet</code></td><td align="left">æŒ‡å®šç”¨äºåŠ è½½å¤æ‚ç±»å‹çš„ç»“æœé›†åå­—ã€‚</td></tr></tbody></table><p>ä»ç‰ˆæœ¬ 3.2.3 å¼€å§‹ï¼ŒMyBatis æä¾›äº†å¦ä¸€ç§è§£å†³ N+1 æŸ¥è¯¢é—®é¢˜çš„æ–¹æ³•ã€‚</p><p>æŸäº›æ•°æ®åº“å…è®¸å­˜å‚¨è¿‡ç¨‹è¿”å›å¤šä¸ªç»“æœé›†ï¼Œæˆ–ä¸€æ¬¡æ€§æ‰§è¡Œå¤šä¸ªè¯­å¥ï¼Œæ¯ä¸ªè¯­å¥è¿”å›ä¸€ä¸ªç»“æœé›†ã€‚ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨ä¸ä½¿ç”¨è¿æ¥çš„æƒ…å†µä¸‹ï¼Œåªè®¿é—®æ•°æ®åº“ä¸€æ¬¡å°±èƒ½è·å¾—ç›¸å…³æ•°æ®ã€‚</p><p>åœ¨ä¾‹å­ä¸­ï¼Œå­˜å‚¨è¿‡ç¨‹æ‰§è¡Œä¸‹é¢çš„æŸ¥è¯¢å¹¶è¿”å›ä¸¤ä¸ªç»“æœé›†ã€‚ç¬¬ä¸€ä¸ªç»“æœé›†ä¼šè¿”å›åšå®¢ï¼ˆBlogï¼‰çš„ç»“æœï¼Œç¬¬äºŒä¸ªåˆ™è¿”å›ä½œè€…ï¼ˆAuthorï¼‰çš„ç»“æœã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM BLOG WHERE ID = #&#123;id&#125;</span><br><span class="line"></span><br><span class="line">SELECT * FROM AUTHOR WHERE ID = #&#123;id&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ˜ å°„è¯­å¥ä¸­ï¼Œå¿…é¡»é€šè¿‡ <code>resultSets</code> å±æ€§ä¸ºæ¯ä¸ªç»“æœé›†æŒ‡å®šä¸€ä¸ªåå­—ï¼Œå¤šä¸ªåå­—ä½¿ç”¨é€—å·éš”å¼€ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultSets</span>=<span class="string">&quot;blogs,authors&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">statementType</span>=<span class="string">&quot;CALLABLE&quot;</span>&gt;</span></span><br><span class="line">  &#123;call getBlogsAndAuthors(#&#123;id,jdbcType=INTEGER,mode=IN&#125;)&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æŒ‡å®šä½¿ç”¨ â€œauthorsâ€ ç»“æœé›†çš„æ•°æ®æ¥å¡«å…… â€œauthorâ€ å…³è”ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;author&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Author&quot;</span> <span class="attr">resultSet</span>=<span class="string">&quot;authors&quot;</span> <span class="attr">column</span>=<span class="string">&quot;author_id&quot;</span> <span class="attr">foreignColumn</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;bio&quot;</span> <span class="attr">column</span>=<span class="string">&quot;bio&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½ å·²ç»åœ¨ä¸Šé¢çœ‹åˆ°äº†å¦‚ä½•å¤„ç†â€œæœ‰ä¸€ä¸ªâ€ç±»å‹çš„å…³è”ã€‚ä½†æ˜¯è¯¥æ€ä¹ˆå¤„ç†â€œæœ‰å¾ˆå¤šä¸ªâ€ç±»å‹çš„å…³è”å‘¢ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦ä»‹ç»çš„ã€‚</p><h4 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;domain.blog.Post&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_id&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_subject&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;body&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_body&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é›†åˆå…ƒç´ å’Œå…³è”å…ƒç´ å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬ç›¸ä¼¼çš„ç¨‹åº¦ä¹‹é«˜ï¼Œä»¥è‡´äºæ²¡æœ‰å¿…è¦å†ä»‹ç»é›†åˆå…ƒç´ çš„ç›¸ä¼¼éƒ¨åˆ†ã€‚ æ‰€ä»¥è®©æˆ‘ä»¬æ¥å…³æ³¨å®ƒä»¬çš„ä¸åŒä¹‹å¤„å§ã€‚</p><p>æˆ‘ä»¬æ¥ç»§ç»­ä¸Šé¢çš„ç¤ºä¾‹ï¼Œä¸€ä¸ªåšå®¢ï¼ˆBlogï¼‰åªæœ‰ä¸€ä¸ªä½œè€…ï¼ˆAuthor)ã€‚ä½†ä¸€ä¸ªåšå®¢æœ‰å¾ˆå¤šæ–‡ç« ï¼ˆPost)ã€‚ åœ¨åšå®¢ç±»ä¸­ï¼Œè¿™å¯ä»¥ç”¨ä¸‹é¢çš„å†™æ³•æ¥è¡¨ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;Post&gt; posts;</span><br></pre></td></tr></table></figure><p>è¦åƒä¸Šé¢è¿™æ ·ï¼Œæ˜ å°„åµŒå¥—ç»“æœé›†åˆåˆ°ä¸€ä¸ª List ä¸­ï¼Œå¯ä»¥ä½¿ç”¨é›†åˆå…ƒç´ ã€‚ å’Œå…³è”å…ƒç´ ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åµŒå¥— Select æŸ¥è¯¢ï¼Œæˆ–åŸºäºè¿æ¥çš„åµŒå¥—ç»“æœæ˜ å°„é›†åˆã€‚</p><h4 id="é›†åˆçš„åµŒå¥—-Select-æŸ¥è¯¢"><a href="#é›†åˆçš„åµŒå¥—-Select-æŸ¥è¯¢" class="headerlink" title="é›†åˆçš„åµŒå¥— Select æŸ¥è¯¢"></a>é›†åˆçš„åµŒå¥— Select æŸ¥è¯¢</h4><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨åµŒå¥— Select æŸ¥è¯¢æ¥ä¸ºåšå®¢åŠ è½½æ–‡ç« ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">select</span>=<span class="string">&quot;selectPostsForBlog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM BLOG WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPostsForBlog&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Post&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM POST WHERE BLOG_ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½ä¼šç«‹åˆ»æ³¨æ„åˆ°å‡ ä¸ªä¸åŒï¼Œä½†å¤§éƒ¨åˆ†éƒ½å’Œæˆ‘ä»¬ä¸Šé¢å­¦ä¹ è¿‡çš„å…³è”å…ƒç´ éå¸¸ç›¸ä¼¼ã€‚ é¦–å…ˆï¼Œä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯é›†åˆå…ƒç´ ã€‚ æ¥ä¸‹æ¥ä½ ä¼šæ³¨æ„åˆ°æœ‰ä¸€ä¸ªæ–°çš„ â€œofTypeâ€ å±æ€§ã€‚è¿™ä¸ªå±æ€§éå¸¸é‡è¦ï¼Œå®ƒç”¨æ¥å°† JavaBeanï¼ˆæˆ–å­—æ®µï¼‰å±æ€§çš„ç±»å‹å’Œé›†åˆå­˜å‚¨çš„ç±»å‹åŒºåˆ†å¼€æ¥ã€‚ æ‰€ä»¥ä½ å¯ä»¥æŒ‰ç…§ä¸‹é¢è¿™æ ·æ¥é˜…è¯»æ˜ å°„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">select</span>=<span class="string">&quot;selectPostsForBlog&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>è¯»ä½œï¼š â€œposts æ˜¯ä¸€ä¸ªå­˜å‚¨ Post çš„ ArrayList é›†åˆâ€</p><p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒMyBatis å¯ä»¥æ¨æ–­ javaType å±æ€§ï¼Œå› æ­¤å¹¶ä¸éœ€è¦å¡«å†™ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™ä½ å¯ä»¥ç®€ç•¥æˆï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">select</span>=<span class="string">&quot;selectPostsForBlog&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é›†åˆçš„åµŒå¥—ç»“æœæ˜ å°„"><a href="#é›†åˆçš„åµŒå¥—ç»“æœæ˜ å°„" class="headerlink" title="é›†åˆçš„åµŒå¥—ç»“æœæ˜ å°„"></a>é›†åˆçš„åµŒå¥—ç»“æœæ˜ å°„</h4><p>ç°åœ¨ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†é›†åˆçš„åµŒå¥—ç»“æœæ˜ å°„æ˜¯æ€æ ·å·¥ä½œçš„â€”â€”é™¤äº†æ–°å¢çš„ â€œofTypeâ€ å±æ€§ï¼Œå®ƒå’Œå…³è”çš„å®Œå…¨ç›¸åŒã€‚</p><p>é¦–å…ˆ, è®©æˆ‘ä»¬çœ‹çœ‹å¯¹åº”çš„ SQL è¯­å¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">  B.id as blog_id,</span><br><span class="line">  B.title as blog_title,</span><br><span class="line">  B.author_id as blog_author_id,</span><br><span class="line">  P.id as post_id,</span><br><span class="line">  P.subject as post_subject,</span><br><span class="line">  P.body as post_body,</span><br><span class="line">  from Blog B</span><br><span class="line">  left outer join Post P on B.id = P.blog_id</span><br><span class="line">  where B.id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†æ¬¡è¿æ¥äº†åšå®¢è¡¨å’Œæ–‡ç« è¡¨ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸€åˆ—éƒ½èµ‹äºˆäº†ä¸€ä¸ªæœ‰æ„ä¹‰çš„åˆ«åï¼Œä»¥ä¾¿æ˜ å°„ä¿æŒç®€å•ã€‚ è¦æ˜ å°„åšå®¢é‡Œé¢çš„æ–‡ç« é›†åˆï¼Œå°±è¿™ä¹ˆç®€å•ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_subject&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;body&quot;</span> <span class="attr">column</span>=<span class="string">&quot;post_body&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†æé†’ä¸€æ¬¡ï¼Œè¦è®°å¾—ä¸Šé¢ id å…ƒç´ çš„é‡è¦æ€§ï¼Œå¦‚æœä½ ä¸è®°å¾—äº†ï¼Œè¯·é˜…è¯»å…³è”éƒ¨åˆ†çš„ç›¸å…³éƒ¨åˆ†ã€‚</p><p>å¦‚æœä½ å–œæ¬¢æ›´è¯¦ç•¥çš„ã€å¯é‡ç”¨çš„ç»“æœæ˜ å°„ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç­‰ä»·å½¢å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;blog_title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogPostResult&quot;</span> <span class="attr">columnPrefix</span>=<span class="string">&quot;post_&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogPostResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Post&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;subject&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;body&quot;</span> <span class="attr">column</span>=<span class="string">&quot;body&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é›†åˆçš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰"><a href="#é›†åˆçš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰" class="headerlink" title="é›†åˆçš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰"></a>é›†åˆçš„å¤šç»“æœé›†ï¼ˆResultSetï¼‰</h4><p>åƒå…³è”å…ƒç´ é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹å®ç°ï¼Œå®ƒä¼šæ‰§è¡Œä¸¤ä¸ªæŸ¥è¯¢å¹¶è¿”å›ä¸¤ä¸ªç»“æœé›†ï¼Œä¸€ä¸ªæ˜¯åšå®¢çš„ç»“æœé›†ï¼Œå¦ä¸€ä¸ªæ˜¯æ–‡ç« çš„ç»“æœé›†ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM BLOG WHERE ID = #&#123;id&#125;</span><br><span class="line"></span><br><span class="line">SELECT * FROM POST WHERE BLOG_ID = #&#123;id&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ˜ å°„è¯­å¥ä¸­ï¼Œå¿…é¡»é€šè¿‡ <code>resultSets</code> å±æ€§ä¸ºæ¯ä¸ªç»“æœé›†æŒ‡å®šä¸€ä¸ªåå­—ï¼Œå¤šä¸ªåå­—ä½¿ç”¨é€—å·éš”å¼€ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultSets</span>=<span class="string">&quot;blogs,posts&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;blogResult&quot;</span>&gt;</span></span><br><span class="line">  &#123;call getBlogsAndPosts(#&#123;id,jdbcType=INTEGER,mode=IN&#125;)&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æŒ‡å®š â€œpostsâ€ é›†åˆå°†ä¼šä½¿ç”¨å­˜å‚¨åœ¨ â€œpostsâ€ ç»“æœé›†ä¸­çš„æ•°æ®è¿›è¡Œå¡«å……ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;blogResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;title&quot;</span> <span class="attr">column</span>=<span class="string">&quot;title&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">resultSet</span>=<span class="string">&quot;posts&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">foreignColumn</span>=<span class="string">&quot;blog_id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;subject&quot;</span> <span class="attr">column</span>=<span class="string">&quot;subject&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;body&quot;</span> <span class="attr">column</span>=<span class="string">&quot;body&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong> å¯¹å…³è”æˆ–é›†åˆçš„æ˜ å°„ï¼Œå¹¶æ²¡æœ‰æ·±åº¦ã€å¹¿åº¦æˆ–ç»„åˆä¸Šçš„è¦æ±‚ã€‚ä½†åœ¨æ˜ å°„æ—¶è¦ç•™æ„æ€§èƒ½é—®é¢˜ã€‚ åœ¨æ¢ç´¢æœ€ä½³å®è·µçš„è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨çš„å•å…ƒæµ‹è¯•å’Œæ€§èƒ½æµ‹è¯•ä¼šæ˜¯ä½ çš„å¥½å¸®æ‰‹ã€‚ è€Œ MyBatis çš„å¥½å¤„åœ¨äºï¼Œå¯ä»¥åœ¨ä¸å¯¹ä½ çš„ä»£ç å¼•å…¥é‡å¤§å˜æ›´ï¼ˆå¦‚æœæœ‰ï¼‰çš„æƒ…å†µä¸‹ï¼Œå…è®¸ä½ ä¹‹åæ”¹å˜ä½ çš„æƒ³æ³•ã€‚</p><p>é«˜çº§å…³è”å’Œé›†åˆæ˜ å°„æ˜¯ä¸€ä¸ªæ·±åº¦è¯é¢˜ã€‚æ–‡æ¡£çš„ä»‹ç»åªèƒ½åˆ°æ­¤ä¸ºæ­¢ã€‚é…åˆå°‘è®¸çš„å®è·µï¼Œä½ ä¼šå¾ˆå¿«äº†è§£å…¨éƒ¨çš„ç”¨æ³•ã€‚</p><h4 id="é‰´åˆ«å™¨"><a href="#é‰´åˆ«å™¨" class="headerlink" title="é‰´åˆ«å™¨"></a>é‰´åˆ«å™¨</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">column</span>=<span class="string">&quot;draft&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;DraftPost&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ‰æ—¶å€™ï¼Œä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢å¯èƒ½ä¼šè¿”å›å¤šä¸ªä¸åŒçš„ç»“æœé›†ï¼ˆä½†æ€»ä½“ä¸Šè¿˜æ˜¯æœ‰ä¸€å®šçš„è”ç³»çš„ï¼‰ã€‚ é‰´åˆ«å™¨ï¼ˆdiscriminatorï¼‰å…ƒç´ å°±æ˜¯è¢«è®¾è®¡æ¥åº”å¯¹è¿™ç§æƒ…å†µçš„ï¼Œå¦å¤–ä¹Ÿèƒ½å¤„ç†å…¶å®ƒæƒ…å†µï¼Œä¾‹å¦‚ç±»çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„ã€‚ é‰´åˆ«å™¨çš„æ¦‚å¿µå¾ˆå¥½ç†è§£â€”â€”å®ƒå¾ˆåƒ Java è¯­è¨€ä¸­çš„ switch è¯­å¥ã€‚</p><p>ä¸€ä¸ªé‰´åˆ«å™¨çš„å®šä¹‰éœ€è¦æŒ‡å®š column å’Œ javaType å±æ€§ã€‚column æŒ‡å®šäº† MyBatis æŸ¥è¯¢è¢«æ¯”è¾ƒå€¼çš„åœ°æ–¹ã€‚ è€Œ javaType ç”¨æ¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç›¸ç­‰æµ‹è¯•ï¼ˆè™½ç„¶å¾ˆå¤šæƒ…å†µä¸‹å­—ç¬¦ä¸²çš„ç›¸ç­‰æµ‹è¯•éƒ½å¯ä»¥å·¥ä½œï¼‰ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;vehicleResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Vehicle&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;vin&quot;</span> <span class="attr">column</span>=<span class="string">&quot;vin&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;year&quot;</span> <span class="attr">column</span>=<span class="string">&quot;year&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;make&quot;</span> <span class="attr">column</span>=<span class="string">&quot;make&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;model&quot;</span> <span class="attr">column</span>=<span class="string">&quot;model&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;color&quot;</span> <span class="attr">column</span>=<span class="string">&quot;color&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">column</span>=<span class="string">&quot;vehicle_type&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;carResult&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;truckResult&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;vanResult&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;suvResult&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒMyBatis ä¼šä»ç»“æœé›†ä¸­å¾—åˆ°æ¯æ¡è®°å½•ï¼Œç„¶åæ¯”è¾ƒå®ƒçš„ vehicle type å€¼ã€‚ å¦‚æœå®ƒåŒ¹é…ä»»æ„ä¸€ä¸ªé‰´åˆ«å™¨çš„ caseï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ª case æŒ‡å®šçš„ç»“æœæ˜ å°„ã€‚ è¿™ä¸ªè¿‡ç¨‹æ˜¯äº’æ–¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‰©ä½™çš„ç»“æœæ˜ å°„å°†è¢«å¿½ç•¥ï¼ˆé™¤éå®ƒæ˜¯æ‰©å±•çš„ï¼Œæˆ‘ä»¬å°†åœ¨ç¨åè®¨è®ºå®ƒï¼‰ã€‚ å¦‚æœä¸èƒ½åŒ¹é…ä»»ä½•ä¸€ä¸ª caseï¼ŒMyBatis å°±åªä¼šä½¿ç”¨é‰´åˆ«å™¨å—å¤–å®šä¹‰çš„ç»“æœæ˜ å°„ã€‚ æ‰€ä»¥ï¼Œå¦‚æœ carResult çš„å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;carResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Car&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;doorCount&quot;</span> <span class="attr">column</span>=<span class="string">&quot;door_count&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆåªæœ‰ doorCount å±æ€§ä¼šè¢«åŠ è½½ã€‚è¿™æ˜¯ä¸ºäº†å³ä½¿é‰´åˆ«å™¨çš„ case ä¹‹é—´éƒ½èƒ½åˆ†ä¸ºå®Œå…¨ç‹¬ç«‹çš„ä¸€ç»„ï¼Œå°½ç®¡å’Œçˆ¶ç»“æœæ˜ å°„å¯èƒ½æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å½“ç„¶çŸ¥é“ cars å’Œ vehicles ä¹‹é—´æœ‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯ Car æ˜¯ä¸€ä¸ª Vehicleã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›å‰©ä½™çš„å±æ€§ä¹Ÿèƒ½è¢«åŠ è½½ã€‚è€Œè¿™åªéœ€è¦ä¸€ä¸ªå°ä¿®æ”¹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;carResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Car&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;vehicleResult&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;doorCount&quot;</span> <span class="attr">column</span>=<span class="string">&quot;door_count&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ vehicleResult å’Œ carResult çš„å±æ€§éƒ½ä¼šè¢«åŠ è½½äº†ã€‚</p><p>å¯èƒ½æœ‰äººåˆä¼šè§‰å¾—æ˜ å°„çš„å¤–éƒ¨å®šä¹‰æœ‰ç‚¹å¤ªå†—é•¿äº†ã€‚ å› æ­¤ï¼Œå¯¹äºé‚£äº›æ›´å–œæ¬¢ç®€æ´çš„æ˜ å°„é£æ ¼çš„äººæ¥è¯´ï¼Œè¿˜æœ‰å¦ä¸€ç§è¯­æ³•å¯ä»¥é€‰æ‹©ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;vehicleResult&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Vehicle&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;vin&quot;</span> <span class="attr">column</span>=<span class="string">&quot;vin&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;year&quot;</span> <span class="attr">column</span>=<span class="string">&quot;year&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;make&quot;</span> <span class="attr">column</span>=<span class="string">&quot;make&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;model&quot;</span> <span class="attr">column</span>=<span class="string">&quot;model&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;color&quot;</span> <span class="attr">column</span>=<span class="string">&quot;color&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">discriminator</span> <span class="attr">javaType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">column</span>=<span class="string">&quot;vehicle_type&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;carResult&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;doorCount&quot;</span> <span class="attr">column</span>=<span class="string">&quot;door_count&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;truckResult&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;boxSize&quot;</span> <span class="attr">column</span>=<span class="string">&quot;box_size&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;extendedCab&quot;</span> <span class="attr">column</span>=<span class="string">&quot;extended_cab&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;vanResult&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;powerSlidingDoor&quot;</span> <span class="attr">column</span>=<span class="string">&quot;power_sliding_door&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">case</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;suvResult&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;allWheelDrive&quot;</span> <span class="attr">column</span>=<span class="string">&quot;all_wheel_drive&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">case</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">discriminator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure><p>â—â—â—<strong>æç¤º</strong> è¯·æ³¨æ„ï¼Œè¿™äº›éƒ½æ˜¯ç»“æœæ˜ å°„ï¼Œå¦‚æœä½ å®Œå…¨ä¸è®¾ç½®ä»»ä½•çš„ result å…ƒç´ ï¼ŒMyBatis å°†ä¸ºä½ è‡ªåŠ¨åŒ¹é…åˆ—å’Œå±æ€§ã€‚æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­å¤§å¤šéƒ½è¦æ¯”å®é™…çš„æ›´å¤æ‚ã€‚ è¿™ä¹Ÿè¡¨æ˜ï¼Œå¤§å¤šæ•°æ•°æ®åº“çš„å¤æ‚åº¦éƒ½æ¯”è¾ƒé«˜ï¼Œæˆ‘ä»¬ä¸å¤ªå¯èƒ½ä¸€ç›´ä¾èµ–äºè¿™ç§æœºåˆ¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”å­—ç¬¦ä¸²æ›¿æ¢#{}å’Œ${}</title>
      <link href="/2021/07/30/MyBatis_16/"/>
      <url>/2021/07/30/MyBatis_16/</url>
      
        <content type="html"><![CDATA[<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>#&#123;&#125;</code> å‚æ•°è¯­æ³•æ—¶ï¼ŒMyBatis ä¼šåˆ›å»º <code>PreparedStatement</code> å‚æ•°å ä½ç¬¦ï¼Œå¹¶é€šè¿‡å ä½ç¬¦å®‰å…¨åœ°è®¾ç½®å‚æ•°ï¼ˆå°±åƒä½¿ç”¨ ? ä¸€æ ·ï¼‰ã€‚ è¿™æ ·åšæ›´å®‰å…¨ï¼Œæ›´è¿…é€Ÿï¼Œé€šå¸¸ä¹Ÿæ˜¯é¦–é€‰åšæ³•ï¼Œä¸è¿‡æœ‰æ—¶ä½ å°±æ˜¯æƒ³ç›´æ¥åœ¨ SQL è¯­å¥ä¸­ç›´æ¥æ’å…¥ä¸€ä¸ªä¸è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚ æ¯”å¦‚ ORDER BY å­å¥ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORDER BY $&#123;columnName&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼ŒMyBatis å°±ä¸ä¼šä¿®æ”¹æˆ–è½¬ä¹‰è¯¥å­—ç¬¦ä¸²äº†ã€‚</p><span id="more"></span><p>å½“ SQL è¯­å¥ä¸­çš„å…ƒæ•°æ®ï¼ˆå¦‚è¡¨åæˆ–åˆ—åï¼‰æ˜¯åŠ¨æ€ç”Ÿæˆçš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²æ›¿æ¢å°†ä¼šéå¸¸æœ‰ç”¨ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³ <code>select</code> ä¸€ä¸ªè¡¨ä»»æ„ä¸€åˆ—çš„æ•°æ®æ—¶ï¼Œä¸éœ€è¦è¿™æ ·å†™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">User <span class="title function_">findById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">long</span> id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Select(&quot;select * from user where name = #&#123;name&#125;&quot;)</span></span><br><span class="line">User <span class="title function_">findByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Select(&quot;select * from user where email = #&#123;email&#125;&quot;)</span></span><br><span class="line">User <span class="title function_">findByEmail</span><span class="params">(<span class="meta">@Param(&quot;email&quot;)</span> String email)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¶å®ƒçš„ &quot;findByXxx&quot; æ–¹æ³•</span></span><br></pre></td></tr></table></figure><p>è€Œæ˜¯å¯ä»¥åªå†™è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user where $&#123;column&#125; = #&#123;value&#125;&quot;)</span></span><br><span class="line">User <span class="title function_">findByColumn</span><span class="params">(<span class="meta">@Param(&quot;column&quot;)</span> String column, <span class="meta">@Param(&quot;value&quot;)</span> String value)</span>;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>$&#123;column&#125;</code> ä¼šè¢«ç›´æ¥æ›¿æ¢ï¼Œè€Œ <code>#&#123;value&#125;</code> ä¼šä½¿ç”¨ <code>?</code> é¢„å¤„ç†ã€‚ è¿™æ ·ï¼Œå°±èƒ½å®ŒæˆåŒæ ·çš„ä»»åŠ¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">userOfId1</span> <span class="operator">=</span> userMapper.findByColumn(<span class="string">&quot;id&quot;</span>, <span class="number">1L</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">userOfNameKid</span> <span class="operator">=</span> userMapper.findByColumn(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;kid&quot;</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">userOfEmail</span> <span class="operator">=</span> userMapper.findByColumn(<span class="string">&quot;email&quot;</span>, <span class="string">&quot;noone@nowhere.com&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¹ŸåŒæ ·é€‚ç”¨äºæ›¿æ¢è¡¨åçš„æƒ…å†µã€‚</p><p>â—â—â—<strong>æç¤º</strong> ç”¨è¿™ç§æ–¹å¼æ¥å—ç”¨æˆ·çš„è¾“å…¥ï¼Œå¹¶ç”¨ä½œè¯­å¥å‚æ•°æ˜¯ä¸å®‰å…¨çš„ï¼Œä¼šå¯¼è‡´æ½œåœ¨çš„ SQL æ³¨å…¥æ”»å‡»ã€‚å› æ­¤ï¼Œè¦ä¹ˆä¸å…è®¸ç”¨æˆ·è¾“å…¥è¿™äº›å­—æ®µï¼Œè¦ä¹ˆè‡ªè¡Œè½¬ä¹‰å¹¶æ£€éªŒè¿™äº›å‚æ•°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”â€”å‚æ•°</title>
      <link href="/2021/07/30/MyBatis_15_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E5%8F%82%E6%95%B0/"/>
      <url>/2021/07/30/MyBatis_15_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94%E5%8F%82%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰è§åˆ°çš„æ‰€æœ‰è¯­å¥éƒ½ä½¿ç”¨äº†ç®€å•çš„å‚æ•°å½¢å¼ã€‚ä½†å®é™…ä¸Šï¼Œå‚æ•°æ˜¯ MyBatis éå¸¸å¼ºå¤§çš„å…ƒç´ ã€‚å¯¹äºå¤§å¤šæ•°ç®€å•çš„ä½¿ç”¨åœºæ™¯ï¼Œä½ éƒ½ä¸éœ€è¦ä½¿ç”¨å¤æ‚çš„å‚æ•°ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  select id, username, password</span><br><span class="line">  from users</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>ä¸Šé¢çš„è¿™ä¸ªç¤ºä¾‹è¯´æ˜äº†ä¸€ä¸ªéå¸¸ç®€å•çš„å‘½åå‚æ•°æ˜ å°„ã€‚é‰´äºå‚æ•°ç±»å‹ï¼ˆparameterTypeï¼‰ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸º <code>int</code>ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥éšæ„å‘½åã€‚åŸå§‹ç±»å‹æˆ–ç®€å•æ•°æ®ç±»å‹ï¼ˆæ¯”å¦‚ <code>Integer</code> å’Œ <code>String</code>ï¼‰å› ä¸ºæ²¡æœ‰å…¶å®ƒå±æ€§ï¼Œä¼šç”¨å®ƒä»¬çš„å€¼æ¥ä½œä¸ºå‚æ•°ã€‚ ç„¶è€Œï¼Œå¦‚æœä¼ å…¥ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œè¡Œä¸ºå°±ä¼šæœ‰ç‚¹ä¸ä¸€æ ·äº†ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">  insert into users (id, username, password)</span><br><span class="line">  values (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ User ç±»å‹çš„å‚æ•°å¯¹è±¡ä¼ é€’åˆ°äº†è¯­å¥ä¸­ï¼Œä¼šæŸ¥æ‰¾ idã€username å’Œ password å±æ€§ï¼Œç„¶åå°†å®ƒä»¬çš„å€¼ä¼ å…¥é¢„å¤„ç†è¯­å¥çš„å‚æ•°ä¸­ã€‚</p><p>å¯¹ä¼ é€’è¯­å¥å‚æ•°æ¥è¯´ï¼Œè¿™ç§æ–¹å¼çœŸæ˜¯å¹²è„†åˆ©è½ã€‚ä¸è¿‡å‚æ•°æ˜ å°„çš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ã€‚</p><p>é¦–å…ˆï¼Œå’Œ MyBatis çš„å…¶å®ƒéƒ¨åˆ†ä¸€æ ·ï¼Œå‚æ•°ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ç±»å‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#123;property,javaType=int,jdbcType=NUMERIC&#125;</span><br></pre></td></tr></table></figure><p>å’Œ MyBatis çš„å…¶å®ƒéƒ¨åˆ†ä¸€æ ·ï¼Œå‡ ä¹æ€»æ˜¯å¯ä»¥æ ¹æ®å‚æ•°å¯¹è±¡çš„ç±»å‹ç¡®å®š javaTypeï¼Œé™¤éè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ª <code>HashMap</code>ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ éœ€è¦æ˜¾å¼æŒ‡å®š <code>javaType</code> æ¥ç¡®ä¿æ­£ç¡®çš„ç±»å‹å¤„ç†å™¨ï¼ˆ<code>TypeHandler</code>ï¼‰è¢«ä½¿ç”¨ã€‚</p><p>â—<strong>æç¤º</strong> JDBC è¦æ±‚ï¼Œå¦‚æœä¸€ä¸ªåˆ—å…è®¸ä½¿ç”¨ null å€¼ï¼Œå¹¶ä¸”ä¼šä½¿ç”¨å€¼ä¸º null çš„å‚æ•°ï¼Œå°±å¿…é¡»è¦æŒ‡å®š JDBC ç±»å‹ï¼ˆjdbcTypeï¼‰ã€‚é˜…è¯» <code>PreparedStatement.setNull()</code>çš„ JavaDoc æ¥è·å–æ›´å¤šä¿¡æ¯ã€‚</p><p>è¦æ›´è¿›ä¸€æ­¥åœ°è‡ªå®šä¹‰ç±»å‹å¤„ç†æ–¹å¼ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹å¤„ç†å™¨ç±»ï¼ˆæˆ–åˆ«åï¼‰ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#123;age,javaType=int,jdbcType=NUMERIC,typeHandler=MyTypeHandler&#125;</span><br></pre></td></tr></table></figure><p>å‚æ•°çš„é…ç½®å¥½åƒè¶Šæ¥è¶Šç¹çäº†ï¼Œä½†å®é™…ä¸Šï¼Œå¾ˆå°‘éœ€è¦å¦‚æ­¤ç¹ççš„é…ç½®ã€‚</p><p>å¯¹äºæ•°å€¼ç±»å‹ï¼Œè¿˜å¯ä»¥è®¾ç½® <code>numericScale</code> æŒ‡å®šå°æ•°ç‚¹åä¿ç•™çš„ä½æ•°ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#123;height,javaType=double,jdbcType=NUMERIC,numericScale=2&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œmode å±æ€§å…è®¸ä½ æŒ‡å®š <code>IN</code>ï¼Œ<code>OUT</code> æˆ– <code>INOUT</code> å‚æ•°ã€‚å¦‚æœå‚æ•°çš„ <code>mode</code> ä¸º <code>OUT</code> æˆ– <code>INOUT</code>ï¼Œå°†ä¼šä¿®æ”¹å‚æ•°å¯¹è±¡çš„å±æ€§å€¼ï¼Œä»¥ä¾¿ä½œä¸ºè¾“å‡ºå‚æ•°è¿”å›ã€‚ å¦‚æœ <code>mode</code> ä¸º <code>OUT</code>ï¼ˆæˆ– <code>INOUT</code>ï¼‰ï¼Œè€Œä¸” <code>jdbcType</code> ä¸º <code>CURSOR</code>ï¼ˆä¹Ÿå°±æ˜¯ Oracle çš„ REFCURSORï¼‰ï¼Œä½ å¿…é¡»æŒ‡å®šä¸€ä¸ª <code>resultMap</code> å¼•ç”¨æ¥å°†ç»“æœé›† <code>ResultMap</code> æ˜ å°„åˆ°å‚æ•°çš„ç±»å‹ä¸Šã€‚è¦æ³¨æ„è¿™é‡Œçš„ <code>javaType</code> å±æ€§æ˜¯å¯é€‰çš„ï¼Œå¦‚æœç•™ç©ºå¹¶ä¸” jdbcType æ˜¯ <code>CURSOR</code>ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨åœ°è¢«è®¾ä¸º <code>ResultMap</code>ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#123;department, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=departmentResultMap&#125;</span><br></pre></td></tr></table></figure><p>MyBatis ä¹Ÿæ”¯æŒå¾ˆå¤šé«˜çº§çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ç»“æ„ä½“ï¼ˆstructsï¼‰ï¼Œä½†æ˜¯å½“ä½¿ç”¨ out å‚æ•°æ—¶ï¼Œä½ å¿…é¡»æ˜¾å¼è®¾ç½®ç±»å‹çš„åç§°ã€‚æ¯”å¦‚ï¼ˆå†æ¬¡æç¤ºï¼Œåœ¨å®é™…ä¸­è¦åƒè¿™æ ·ä¸èƒ½æ¢è¡Œï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#123;middleInitial, mode=OUT, jdbcType=STRUCT, jdbcTypeName=MY_TYPE, resultMap=departmentResultMap&#125;</span><br></pre></td></tr></table></figure><p>å°½ç®¡ä¸Šé¢è¿™äº›é€‰é¡¹å¾ˆå¼ºå¤§ï¼Œä½†å¤§å¤šæ—¶å€™ï¼Œä½ åªé¡»ç®€å•æŒ‡å®šå±æ€§åï¼Œé¡¶å¤šè¦ä¸ºå¯èƒ½ä¸ºç©ºçš„åˆ—æŒ‡å®š <code>jdbcType</code>ï¼Œå…¶ä»–çš„äº‹æƒ…äº¤ç»™ MyBatis è‡ªå·±å»æ¨æ–­å°±è¡Œäº†ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#&#123;firstName&#125;</span><br><span class="line">#&#123;middleInitial,jdbcType=VARCHAR&#125;</span><br><span class="line">#&#123;lastName&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”â€”insert, update å’Œ delete</title>
      <link href="/2021/07/29/MyBatis_13_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94insert,%20update%20%E5%92%8C%20delete/"/>
      <url>/2021/07/29/MyBatis_13_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94insert,%20update%20%E5%92%8C%20delete/</url>
      
        <content type="html"><![CDATA[<p>æ•°æ®å˜æ›´è¯­å¥ insertï¼Œupdate å’Œ delete çš„å®ç°éå¸¸æ¥è¿‘ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">&quot;domain.blog.Author&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">&quot;PREPARED&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">keyProperty</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">keyColumn</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;updateAuthor&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">&quot;domain.blog.Author&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">&quot;PREPARED&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;deleteAuthor&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">&quot;domain.blog.Author&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">&quot;PREPARED&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>id</code></td><td align="left">åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚</td></tr><tr><td align="left"><code>parameterType</code></td><td align="left">å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚</td></tr><tr><td align="left"><del><code>parameterMap</code></del></td><td align="left"><del>ç”¨äºå¼•ç”¨å¤–éƒ¨ parameterMap çš„å±æ€§ï¼Œç›®å‰å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„å’Œ parameterType å±æ€§ã€‚</del></td></tr><tr><td align="left"><code>flushCache</code></td><td align="left">å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šï¼ˆå¯¹ insertã€update å’Œ delete è¯­å¥ï¼‰trueã€‚</td></tr><tr><td align="left"><code>timeout</code></td><td align="left">è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚</td></tr><tr><td align="left"><code>statementType</code></td><td align="left">å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚</td></tr><tr><td align="left"><code>useGeneratedKeys</code></td><td align="left">ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰è¿™ä¼šä»¤ MyBatis ä½¿ç”¨ JDBC çš„ getGeneratedKeys æ–¹æ³•æ¥å–å‡ºç”±æ•°æ®åº“å†…éƒ¨ç”Ÿæˆçš„ä¸»é”®ï¼ˆæ¯”å¦‚ï¼šåƒ MySQL å’Œ SQL Server è¿™æ ·çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è‡ªåŠ¨é€’å¢å­—æ®µï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚</td></tr><tr><td align="left"><code>keyProperty</code></td><td align="left">ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰æŒ‡å®šèƒ½å¤Ÿå”¯ä¸€è¯†åˆ«å¯¹è±¡çš„å±æ€§ï¼ŒMyBatis ä¼šä½¿ç”¨ getGeneratedKeys çš„è¿”å›å€¼æˆ– insert è¯­å¥çš„ selectKey å­å…ƒç´ è®¾ç½®å®ƒçš„å€¼ï¼Œé»˜è®¤å€¼ï¼šæœªè®¾ç½®ï¼ˆ<code>unset</code>ï¼‰ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚</td></tr><tr><td align="left"><code>keyColumn</code></td><td align="left">ï¼ˆä»…é€‚ç”¨äº insert å’Œ updateï¼‰è®¾ç½®ç”Ÿæˆé”®å€¼åœ¨è¡¨ä¸­çš„åˆ—åï¼Œåœ¨æŸäº›æ•°æ®åº“ï¼ˆåƒ PostgreSQLï¼‰ä¸­ï¼Œå½“ä¸»é”®åˆ—ä¸æ˜¯è¡¨ä¸­çš„ç¬¬ä¸€åˆ—çš„æ—¶å€™ï¼Œæ˜¯å¿…é¡»è®¾ç½®çš„ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚</td></tr><tr><td align="left"><code>databaseId</code></td><td align="left">å¦‚æœé…ç½®äº†æ•°æ®åº“å‚å•†æ ‡è¯†ï¼ˆdatabaseIdProviderï¼‰ï¼ŒMyBatis ä¼šåŠ è½½æ‰€æœ‰ä¸å¸¦ databaseId æˆ–åŒ¹é…å½“å‰ databaseId çš„è¯­å¥ï¼›å¦‚æœå¸¦å’Œä¸å¸¦çš„è¯­å¥éƒ½æœ‰ï¼Œåˆ™ä¸å¸¦çš„ä¼šè¢«å¿½ç•¥ã€‚</td></tr></tbody></table><p>ä¸‹é¢æ˜¯ insertï¼Œupdate å’Œ delete è¯­å¥çš„ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span>&gt;</span></span><br><span class="line">  insert into Author (id,username,password,email,bio)</span><br><span class="line">  values (#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;bio&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateAuthor&quot;</span>&gt;</span></span><br><span class="line">  update Author set</span><br><span class="line">    username = #&#123;username&#125;,</span><br><span class="line">    password = #&#123;password&#125;,</span><br><span class="line">    email = #&#123;email&#125;,</span><br><span class="line">    bio = #&#123;bio&#125;</span><br><span class="line">  where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteAuthor&quot;</span>&gt;</span></span><br><span class="line">  delete from Author where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚å‰æ‰€è¿°ï¼Œæ’å…¥è¯­å¥çš„é…ç½®è§„åˆ™æ›´åŠ ä¸°å¯Œï¼Œåœ¨æ’å…¥è¯­å¥é‡Œé¢æœ‰ä¸€äº›é¢å¤–çš„å±æ€§å’Œå­å…ƒç´ ç”¨æ¥å¤„ç†ä¸»é”®çš„ç”Ÿæˆï¼Œå¹¶ä¸”æä¾›äº†å¤šç§ç”Ÿæˆæ–¹å¼ã€‚</p><p>é¦–å…ˆï¼Œå¦‚æœä½ çš„æ•°æ®åº“æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®çš„å­—æ®µï¼ˆæ¯”å¦‚ MySQL å’Œ SQL Serverï¼‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥è®¾ç½® useGeneratedKeys&#x3D;â€trueâ€ï¼Œç„¶åå†æŠŠ keyProperty è®¾ç½®ä¸ºç›®æ ‡å±æ€§å°± OK äº†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸Šé¢çš„ Author è¡¨å·²ç»åœ¨ id åˆ—ä¸Šä½¿ç”¨äº†è‡ªåŠ¨ç”Ÿæˆï¼Œé‚£ä¹ˆè¯­å¥å¯ä»¥ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">  insert into Author (username,password,email,bio)</span><br><span class="line">  values (#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;bio&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„æ•°æ®åº“è¿˜æ”¯æŒå¤šè¡Œæ’å…¥, ä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ª <code>Author</code> æ•°ç»„æˆ–é›†åˆï¼Œå¹¶è¿”å›è‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span> <span class="attr">useGeneratedKeys</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">  insert into Author (username, password, email, bio) values</span><br><span class="line">  <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">    (#&#123;item.username&#125;, #&#123;item.password&#125;, #&#123;item.email&#125;, #&#123;item.bio&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®åˆ—çš„æ•°æ®åº“å’Œå¯èƒ½ä¸æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®çš„ JDBC é©±åŠ¨ï¼ŒMyBatis æœ‰å¦å¤–ä¸€ç§æ–¹æ³•æ¥ç”Ÿæˆä¸»é”®ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•ï¼ˆä¹Ÿå¾ˆå‚»ï¼‰çš„ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥ç”Ÿæˆä¸€ä¸ªéšæœº IDï¼ˆä¸å»ºè®®å®é™…ä½¿ç”¨ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†å±•ç¤º MyBatis å¤„ç†é—®é¢˜çš„çµæ´»æ€§å’Œå®½å®¹åº¦ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertAuthor&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span>&gt;</span></span><br><span class="line">    select CAST(RANDOM()*1000000 as INTEGER) a from SYSIBM.SYSDUMMY1</span><br><span class="line">  <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">  insert into Author</span><br><span class="line">    (id, username, password, email,bio, favourite_section)</span><br><span class="line">  values</span><br><span class="line">    (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;, #&#123;email&#125;, #&#123;bio&#125;, #&#123;favouriteSection,jdbcType=VARCHAR&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œé¦–å…ˆä¼šè¿è¡Œ selectKey å…ƒç´ ä¸­çš„è¯­å¥ï¼Œå¹¶è®¾ç½® Author çš„ idï¼Œç„¶åæ‰ä¼šè°ƒç”¨æ’å…¥è¯­å¥ã€‚è¿™æ ·å°±å®ç°äº†æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆä¸»é”®ç±»ä¼¼çš„è¡Œä¸ºï¼ŒåŒæ—¶ä¿æŒäº† Java ä»£ç çš„ç®€æ´ã€‚</p><p>selectKey å…ƒç´ æè¿°å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">selectKey</span></span></span><br><span class="line"><span class="tag">  <span class="attr">keyProperty</span>=<span class="string">&quot;id&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">order</span>=<span class="string">&quot;BEFORE&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">&quot;PREPARED&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>keyProperty</code></td><td align="left"><code>selectKey</code> è¯­å¥ç»“æœåº”è¯¥è¢«è®¾ç½®åˆ°çš„ç›®æ ‡å±æ€§ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚</td></tr><tr><td align="left"><code>keyColumn</code></td><td align="left">è¿”å›ç»“æœé›†ä¸­ç”Ÿæˆåˆ—å±æ€§çš„åˆ—åã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”å¤šä¸ªå±æ€§åç§°ã€‚</td></tr><tr><td align="left"><code>resultType</code></td><td align="left">ç»“æœçš„ç±»å‹ã€‚é€šå¸¸ MyBatis å¯ä»¥æ¨æ–­å‡ºæ¥ï¼Œä½†æ˜¯ä¸ºäº†æ›´åŠ å‡†ç¡®ï¼Œå†™ä¸Šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚MyBatis å…è®¸å°†ä»»ä½•ç®€å•ç±»å‹ç”¨ä½œä¸»é”®çš„ç±»å‹ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€‚å¦‚æœç”Ÿæˆåˆ—ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŒ…å«æœŸæœ›å±æ€§çš„ Object æˆ– Mapã€‚</td></tr><tr><td align="left"><code>order</code></td><td align="left">å¯ä»¥è®¾ç½®ä¸º <code>BEFORE</code> æˆ– <code>AFTER</code>ã€‚å¦‚æœè®¾ç½®ä¸º <code>BEFORE</code>ï¼Œé‚£ä¹ˆå®ƒé¦–å…ˆä¼šç”Ÿæˆä¸»é”®ï¼Œè®¾ç½® <code>keyProperty</code> å†æ‰§è¡Œæ’å…¥è¯­å¥ã€‚å¦‚æœè®¾ç½®ä¸º <code>AFTER</code>ï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œæ’å…¥è¯­å¥ï¼Œç„¶åæ˜¯ <code>selectKey</code> ä¸­çš„è¯­å¥ - è¿™å’Œ Oracle æ•°æ®åº“çš„è¡Œä¸ºç›¸ä¼¼ï¼Œåœ¨æ’å…¥è¯­å¥å†…éƒ¨å¯èƒ½æœ‰åµŒå…¥ç´¢å¼•è°ƒç”¨ã€‚</td></tr><tr><td align="left"><code>statementType</code></td><td align="left">å’Œå‰é¢ä¸€æ ·ï¼ŒMyBatis æ”¯æŒ <code>STATEMENT</code>ï¼Œ<code>PREPARED</code> å’Œ <code>CALLABLE</code> ç±»å‹çš„æ˜ å°„è¯­å¥ï¼Œåˆ†åˆ«ä»£è¡¨ <code>Statement</code>, <code>PreparedStatement</code> å’Œ <code>CallableStatement</code> ç±»å‹ã€‚</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”â€”sql</title>
      <link href="/2021/07/29/MyBatis_14_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94sql/"/>
      <url>/2021/07/29/MyBatis_14_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94sql/</url>
      
        <content type="html"><![CDATA[<p>è¿™ä¸ªå…ƒç´ å¯ä»¥ç”¨æ¥å®šä¹‰å¯é‡ç”¨çš„ SQL ä»£ç ç‰‡æ®µï¼Œä»¥ä¾¿åœ¨å…¶å®ƒè¯­å¥ä¸­ä½¿ç”¨ã€‚ å‚æ•°å¯ä»¥é™æ€åœ°ï¼ˆåœ¨åŠ è½½çš„æ—¶å€™ï¼‰ç¡®å®šä¸‹æ¥ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸åŒçš„ include å…ƒç´ ä¸­å®šä¹‰ä¸åŒçš„å‚æ•°å€¼ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;userColumns&quot;</span>&gt;</span> $&#123;alias&#125;.id,$&#123;alias&#125;.username,$&#123;alias&#125;.password <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>è¿™ä¸ª SQL ç‰‡æ®µå¯ä»¥åœ¨å…¶å®ƒè¯­å¥ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUsers&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;userColumns&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;alias&quot;</span> <span class="attr">value</span>=<span class="string">&quot;t1&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span>,</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;userColumns&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;alias&quot;</span> <span class="attr">value</span>=<span class="string">&quot;t2&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">  from some_table t1</span><br><span class="line">    cross join some_table t2</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åœ¨ include å…ƒç´ çš„ refid å±æ€§æˆ–å†…éƒ¨è¯­å¥ä¸­ä½¿ç”¨å±æ€§å€¼ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;sometable&quot;</span>&gt;</span></span><br><span class="line">  $&#123;prefix&#125;Table</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;someinclude&quot;</span>&gt;</span></span><br><span class="line">  from</span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;$&#123;include_target&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;select&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">  select</span><br><span class="line">    field1, field2, field3</span><br><span class="line">  <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;someinclude&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Some&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;include_target&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sometable&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisæ˜ å°„å™¨â€”â€”select</title>
      <link href="/2021/07/28/MyBatis_12_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94select/"/>
      <url>/2021/07/28/MyBatis_12_MyBatis%E6%98%A0%E5%B0%84%E5%99%A8%E2%80%94select/</url>
      
        <content type="html"><![CDATA[<p>SQL æ˜ å°„æ–‡ä»¶åªæœ‰å¾ˆå°‘çš„å‡ ä¸ªé¡¶çº§å…ƒç´ ï¼ˆæŒ‰ç…§åº”è¢«å®šä¹‰çš„é¡ºåºåˆ—å‡ºï¼‰ï¼š</p><ul><li><code>cache</code> â€“ è¯¥å‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚</li><li><code>cache-ref</code> â€“ å¼•ç”¨å…¶å®ƒå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚</li><li><code>resultMap</code> â€“ æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­åŠ è½½å¯¹è±¡ï¼Œæ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ã€‚</li><li><del><code>parameterMap</code> â€“ è€å¼é£æ ¼çš„å‚æ•°æ˜ å°„ã€‚æ­¤å…ƒç´ å·²è¢«åºŸå¼ƒï¼Œå¹¶å¯èƒ½åœ¨å°†æ¥è¢«ç§»é™¤ï¼è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„ã€‚æ–‡æ¡£ä¸­ä¸ä¼šä»‹ç»æ­¤å…ƒç´ ã€‚</del></li><li><code>sql</code> â€“ å¯è¢«å…¶å®ƒè¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚</li><li><code>insert</code> â€“ æ˜ å°„æ’å…¥è¯­å¥ã€‚</li><li><code>update</code> â€“ æ˜ å°„æ›´æ–°è¯­å¥ã€‚</li><li><code>delete</code> â€“ æ˜ å°„åˆ é™¤è¯­å¥ã€‚</li><li><code>select</code> â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥ã€‚</li></ul><p>ä¸‹ä¸€éƒ¨åˆ†å°†ä»è¯­å¥æœ¬èº«å¼€å§‹æ¥æè¿°æ¯ä¸ªå…ƒç´ çš„ç»†èŠ‚ã€‚</p><span id="more"></span><p>æŸ¥è¯¢è¯­å¥æ˜¯ MyBatis ä¸­æœ€å¸¸ç”¨çš„å…ƒç´ ä¹‹ä¸€â€”â€”å…‰èƒ½æŠŠæ•°æ®å­˜åˆ°æ•°æ®åº“ä¸­ä»·å€¼å¹¶ä¸å¤§ï¼Œè¿˜è¦èƒ½é‡æ–°å–å‡ºæ¥æ‰æœ‰ç”¨ï¼Œå¤šæ•°åº”ç”¨ä¹Ÿéƒ½æ˜¯æŸ¥è¯¢æ¯”ä¿®æ”¹è¦é¢‘ç¹ã€‚ MyBatis çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€æ˜¯ï¼šåœ¨æ¯ä¸ªæ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤æ“ä½œä¹‹é—´ï¼Œé€šå¸¸ä¼šæ‰§è¡Œå¤šä¸ªæŸ¥è¯¢æ“ä½œã€‚å› æ­¤ï¼ŒMyBatis åœ¨æŸ¥è¯¢å’Œç»“æœæ˜ å°„åšäº†ç›¸å½“å¤šçš„æ”¹è¿›ã€‚ä¸€ä¸ªç®€å•æŸ¥è¯¢çš„ select å…ƒç´ æ˜¯éå¸¸ç®€å•çš„ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectPerson&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;hashmap&quot;</span>&gt;</span></span><br><span class="line">  SELECT * FROM PERSON WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¯­å¥åä¸º selectPersonï¼Œæ¥å—ä¸€ä¸ª intï¼ˆæˆ– Integerï¼‰ç±»å‹çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª HashMap ç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­çš„é”®æ˜¯åˆ—åï¼Œå€¼ä¾¿æ˜¯ç»“æœè¡Œä¸­çš„å¯¹åº”å€¼ã€‚</p><p>æ³¨æ„å‚æ•°ç¬¦å·ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#&#123;id&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°±å‘Šè¯‰ MyBatis åˆ›å»ºä¸€ä¸ªé¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰å‚æ•°ï¼Œåœ¨ JDBC ä¸­ï¼Œè¿™æ ·çš„ä¸€ä¸ªå‚æ•°åœ¨ SQL ä¸­ä¼šç”±ä¸€ä¸ªâ€œ?â€æ¥æ ‡è¯†ï¼Œå¹¶è¢«ä¼ é€’åˆ°ä¸€ä¸ªæ–°çš„é¢„å¤„ç†è¯­å¥ä¸­ï¼Œå°±åƒè¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿‘ä¼¼çš„ JDBC ä»£ç ï¼Œé MyBatis ä»£ç ...</span></span><br><span class="line"><span class="type">String</span> <span class="variable">selectPerson</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM PERSON WHERE ID=?&quot;</span>;</span><br><span class="line"><span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> conn.prepareStatement(selectPerson);</span><br><span class="line">ps.setInt(<span class="number">1</span>,id);</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä½¿ç”¨ JDBC å°±æ„å‘³ç€ä½¿ç”¨æ›´å¤šçš„ä»£ç ï¼Œä»¥ä¾¿æå–ç»“æœå¹¶å°†å®ƒä»¬æ˜ å°„åˆ°å¯¹è±¡å®ä¾‹ä¸­ï¼Œè€Œè¿™å°±æ˜¯ MyBatis çš„æ‹¿æ‰‹å¥½æˆã€‚å‚æ•°å’Œç»“æœæ˜ å°„çš„è¯¦ç»†ç»†èŠ‚ä¼šåˆ†åˆ«åœ¨åé¢å•ç‹¬çš„å°èŠ‚ä¸­è¯´æ˜ã€‚</p><p>select å…ƒç´ å…è®¸ä½ é…ç½®å¾ˆå¤šå±æ€§æ¥é…ç½®æ¯æ¡è¯­å¥çš„è¡Œä¸ºç»†èŠ‚ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">&quot;selectPerson&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">parameterMap</span>=<span class="string">&quot;deprecated&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultType</span>=<span class="string">&quot;hashmap&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultMap</span>=<span class="string">&quot;personResultMap&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">flushCache</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">useCache</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">timeout</span>=<span class="string">&quot;10&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">fetchSize</span>=<span class="string">&quot;256&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">statementType</span>=<span class="string">&quot;PREPARED&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">resultSetType</span>=<span class="string">&quot;FORWARD_ONLY&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">å±æ€§</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>id</code></td><td align="left">åœ¨å‘½åç©ºé—´ä¸­å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥è¢«ç”¨æ¥å¼•ç”¨è¿™æ¡è¯­å¥ã€‚</td></tr><tr><td align="left"><code>parameterType</code></td><td align="left">å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°çš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ç±»å‹å¤„ç†å™¨ï¼ˆTypeHandlerï¼‰æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ã€‚</td></tr><tr><td align="left"><del>parameterMap</del></td><td align="left"><del>ç”¨äºå¼•ç”¨å¤–éƒ¨ parameterMap çš„å±æ€§ï¼Œç›®å‰å·²è¢«åºŸå¼ƒã€‚è¯·ä½¿ç”¨è¡Œå†…å‚æ•°æ˜ å°„å’Œ parameterType å±æ€§ã€‚</del></td></tr><tr><td align="left"><code>resultType</code></td><td align="left">æœŸæœ›ä»è¿™æ¡è¯­å¥ä¸­è¿”å›ç»“æœçš„ç±»å…¨é™å®šåæˆ–åˆ«åã€‚ æ³¨æ„ï¼Œå¦‚æœè¿”å›çš„æ˜¯é›†åˆï¼Œé‚£åº”è¯¥è®¾ç½®ä¸ºé›†åˆåŒ…å«çš„ç±»å‹ï¼Œè€Œä¸æ˜¯é›†åˆæœ¬èº«çš„ç±»å‹ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚</td></tr><tr><td align="left"><code>resultMap</code></td><td align="left">å¯¹å¤–éƒ¨ resultMap çš„å‘½åå¼•ç”¨ã€‚ç»“æœæ˜ å°„æ˜¯ MyBatis æœ€å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¦‚æœä½ å¯¹å…¶ç†è§£é€å½»ï¼Œè®¸å¤šå¤æ‚çš„æ˜ å°„é—®é¢˜éƒ½èƒ½è¿åˆƒè€Œè§£ã€‚ resultType å’Œ resultMap ä¹‹é—´åªèƒ½åŒæ—¶ä½¿ç”¨ä¸€ä¸ªã€‚</td></tr><tr><td align="left"><code>flushCache</code></td><td align="left">å°†å…¶è®¾ç½®ä¸º true åï¼Œåªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜è¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šfalseã€‚</td></tr><tr><td align="left"><code>useCache</code></td><td align="left">å°†å…¶è®¾ç½®ä¸º true åï¼Œå°†ä¼šå¯¼è‡´æœ¬æ¡è¯­å¥çš„ç»“æœè¢«äºŒçº§ç¼“å­˜ç¼“å­˜èµ·æ¥ï¼Œé»˜è®¤å€¼ï¼šå¯¹ select å…ƒç´ ä¸º trueã€‚</td></tr><tr><td align="left"><code>timeout</code></td><td align="left">è¿™ä¸ªè®¾ç½®æ˜¯åœ¨æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œé©±åŠ¨ç¨‹åºç­‰å¾…æ•°æ®åº“è¿”å›è¯·æ±‚ç»“æœçš„ç§’æ•°ã€‚é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚</td></tr><tr><td align="left"><code>fetchSize</code></td><td align="left">è¿™æ˜¯ä¸€ä¸ªç»™é©±åŠ¨çš„å»ºè®®å€¼ï¼Œå°è¯•è®©é©±åŠ¨ç¨‹åºæ¯æ¬¡æ‰¹é‡è¿”å›çš„ç»“æœè¡Œæ•°ç­‰äºè¿™ä¸ªè®¾ç½®å€¼ã€‚ é»˜è®¤å€¼ä¸ºæœªè®¾ç½®ï¼ˆunsetï¼‰ï¼ˆä¾èµ–é©±åŠ¨ï¼‰ã€‚</td></tr><tr><td align="left"><code>statementType</code></td><td align="left">å¯é€‰ STATEMENTï¼ŒPREPARED æˆ– CALLABLEã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPAREDã€‚</td></tr><tr><td align="left"><code>resultSetType</code></td><td align="left">FORWARD_ONLYï¼ŒSCROLL_SENSITIVE, SCROLL_INSENSITIVE æˆ– DEFAULTï¼ˆç­‰ä»·äº unsetï¼‰ ä¸­çš„ä¸€ä¸ªï¼Œé»˜è®¤å€¼ä¸º unset ï¼ˆä¾èµ–æ•°æ®åº“é©±åŠ¨ï¼‰ã€‚</td></tr><tr><td align="left"><code>databaseId</code></td><td align="left">å¦‚æœé…ç½®äº†æ•°æ®åº“å‚å•†æ ‡è¯†ï¼ˆdatabaseIdProviderï¼‰ï¼ŒMyBatis ä¼šåŠ è½½æ‰€æœ‰ä¸å¸¦ databaseId æˆ–åŒ¹é…å½“å‰ databaseId çš„è¯­å¥ï¼›å¦‚æœå¸¦å’Œä¸å¸¦çš„è¯­å¥éƒ½æœ‰ï¼Œåˆ™ä¸å¸¦çš„ä¼šè¢«å¿½ç•¥ã€‚</td></tr><tr><td align="left"><code>resultOrdered</code></td><td align="left">è¿™ä¸ªè®¾ç½®ä»…é’ˆå¯¹åµŒå¥—ç»“æœ select è¯­å¥ï¼šå¦‚æœä¸º trueï¼Œå°†ä¼šå‡è®¾åŒ…å«äº†åµŒå¥—ç»“æœé›†æˆ–æ˜¯åˆ†ç»„ï¼Œå½“è¿”å›ä¸€ä¸ªä¸»ç»“æœè¡Œæ—¶ï¼Œå°±ä¸ä¼šäº§ç”Ÿå¯¹å‰é¢ç»“æœé›†çš„å¼•ç”¨ã€‚ è¿™å°±ä½¿å¾—åœ¨è·å–åµŒå¥—ç»“æœé›†çš„æ—¶å€™ä¸è‡³äºå†…å­˜ä¸å¤Ÿç”¨ã€‚é»˜è®¤å€¼ï¼š<code>false</code>ã€‚</td></tr><tr><td align="left"><code>resultSets</code></td><td align="left">è¿™ä¸ªè®¾ç½®ä»…é€‚ç”¨äºå¤šç»“æœé›†çš„æƒ…å†µã€‚å®ƒå°†åˆ—å‡ºè¯­å¥æ‰§è¡Œåè¿”å›çš„ç»“æœé›†å¹¶èµ‹äºˆæ¯ä¸ªç»“æœé›†ä¸€ä¸ªåç§°ï¼Œå¤šä¸ªåç§°ä¹‹é—´ä»¥é€—å·åˆ†éš”ã€‚</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”æ˜ å°„å™¨ï¼ˆmappersï¼‰</title>
      <link href="/2021/07/27/MyBatis_11_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E6%98%A0%E5%B0%84%E5%99%A8%EF%BC%88mappers%EF%BC%89/"/>
      <url>/2021/07/27/MyBatis_11_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E6%98%A0%E5%B0%84%E5%99%A8%EF%BC%88mappers%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>æ—¢ç„¶ MyBatis çš„è¡Œä¸ºå·²ç»ç”±ä¸Šè¿°å…ƒç´ é…ç½®å®Œäº†ï¼Œæˆ‘ä»¬ç°åœ¨å°±è¦æ¥å®šä¹‰ SQL æ˜ å°„è¯­å¥äº†ã€‚ ä½†é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾åˆ°è¿™äº›è¯­å¥ã€‚ åœ¨è‡ªåŠ¨æŸ¥æ‰¾èµ„æºæ–¹é¢ï¼ŒJava å¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥æœ€å¥½çš„åŠæ³•æ˜¯ç›´æ¥å‘Šè¯‰ MyBatis åˆ°å“ªé‡Œå»æ‰¾æ˜ å°„æ–‡ä»¶ã€‚ ä½ å¯ä»¥ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ï¼Œæˆ–å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆåŒ…æ‹¬ <code>file:///</code> å½¢å¼çš„ URLï¼‰ï¼Œæˆ–ç±»åå’ŒåŒ…åç­‰ã€‚</p><span id="more"></span><p>ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºå¼•ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/builder/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨å®Œå…¨é™å®šèµ„æºå®šä½ç¬¦ï¼ˆURLï¼‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/AuthorMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">url</span>=<span class="string">&quot;file:///var/mappers/PostMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨æ˜ å°„å™¨æ¥å£å®ç°ç±»çš„å®Œå…¨é™å®šç±»å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.AuthorMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.BlogMapper&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.builder.PostMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å°†åŒ…å†…çš„æ˜ å°„å™¨æ¥å£å®ç°å…¨éƒ¨æ³¨å†Œä¸ºæ˜ å°„å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;org.mybatis.builder&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™äº›é…ç½®ä¼šå‘Šè¯‰ MyBatis å»å“ªé‡Œæ‰¾æ˜ å°„æ–‡ä»¶ï¼Œå‰©ä¸‹çš„ç»†èŠ‚å°±åº”è¯¥æ˜¯æ¯ä¸ª SQL æ˜ å°„æ–‡ä»¶äº†ï¼Œä¹Ÿå°±æ˜¯æ¥ä¸‹æ¥æˆ‘ä»¬è¦è®¨è®ºçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”æ•°æ®åº“å‚å•†æ ‡è¯†ï¼ˆdatabaseIdProviderï¼‰</title>
      <link href="/2021/07/26/MyBatis_10_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%82%E5%95%86%E6%A0%87%E8%AF%86%EF%BC%88databaseIdProvider%EF%BC%89/"/>
      <url>/2021/07/26/MyBatis_10_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%82%E5%95%86%E6%A0%87%E8%AF%86%EF%BC%88databaseIdProvider%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>MyBatis å¯ä»¥æ ¹æ®ä¸åŒçš„æ•°æ®åº“å‚å•†æ‰§è¡Œä¸åŒçš„è¯­å¥ï¼Œè¿™ç§å¤šå‚å•†çš„æ”¯æŒæ˜¯åŸºäºæ˜ å°„è¯­å¥ä¸­çš„ <code>databaseId</code> å±æ€§ã€‚ MyBatis ä¼šåŠ è½½å¸¦æœ‰åŒ¹é…å½“å‰æ•°æ®åº“ <code>databaseId</code> å±æ€§å’Œæ‰€æœ‰ä¸å¸¦ <code>databaseId</code> å±æ€§çš„è¯­å¥ã€‚ å¦‚æœåŒæ—¶æ‰¾åˆ°å¸¦æœ‰ <code>databaseId</code> å’Œä¸å¸¦ <code>databaseId</code> çš„ç›¸åŒè¯­å¥ï¼Œåˆ™åè€…ä¼šè¢«èˆå¼ƒã€‚ ä¸ºæ”¯æŒå¤šå‚å•†ç‰¹æ€§ï¼Œåªè¦åƒä¸‹é¢è¿™æ ·åœ¨ mybatis-config.xml æ–‡ä»¶ä¸­åŠ å…¥ <code>databaseIdProvider</code> å³å¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">&quot;DB_VENDOR&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>databaseIdProvider å¯¹åº”çš„ DB_VENDOR å®ç°ä¼šå°† databaseId è®¾ç½®ä¸º <code>DatabaseMetaData#getDatabaseProductName()</code> è¿”å›çš„å­—ç¬¦ä¸²ã€‚ ç”±äºé€šå¸¸æƒ…å†µä¸‹è¿™äº›å­—ç¬¦ä¸²éƒ½éå¸¸é•¿ï¼Œè€Œä¸”ç›¸åŒäº§å“çš„ä¸åŒç‰ˆæœ¬ä¼šè¿”å›ä¸åŒçš„å€¼ï¼Œä½ å¯èƒ½æƒ³é€šè¿‡è®¾ç½®å±æ€§åˆ«åæ¥ä½¿å…¶å˜çŸ­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">databaseIdProvider</span> <span class="attr">type</span>=<span class="string">&quot;DB_VENDOR&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;SQL Server&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlserver&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;DB2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;db2&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;Oracle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;oracle&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">databaseIdProvider</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨æä¾›äº†å±æ€§åˆ«åæ—¶ï¼ŒdatabaseIdProvider çš„ DB_VENDOR å®ç°ä¼šå°† databaseId è®¾ç½®ä¸ºæ•°æ®åº“äº§å“åä¸å±æ€§ä¸­çš„åç§°ç¬¬ä¸€ä¸ªç›¸åŒ¹é…çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…çš„å±æ€§ï¼Œå°†ä¼šè®¾ç½®ä¸º â€œnullâ€ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ <code>getDatabaseProductName()</code> è¿”å›â€œOracle (DataDirect)â€ï¼ŒdatabaseId å°†è¢«è®¾ç½®ä¸ºâ€œoracleâ€ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡å®ç°æ¥å£ <code>org.apache.ibatis.mapping.DatabaseIdProvider</code> å¹¶åœ¨ mybatis-config.xml ä¸­æ³¨å†Œæ¥æ„å»ºè‡ªå·±çš„ DatabaseIdProviderï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DatabaseIdProvider</span> &#123;</span><br><span class="line">  <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties p)</span> &#123; <span class="comment">// ä» 3.5.2 å¼€å§‹ï¼Œè¯¥æ–¹æ³•ä¸ºé»˜è®¤æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// ç©ºå®ç°</span></span><br><span class="line">  &#125;</span><br><span class="line">  String <span class="title function_">getDatabaseId</span><span class="params">(DataSource dataSource)</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰</title>
      <link href="/2021/07/25/MyBatis_9_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%EF%BC%88environments%EF%BC%89/"/>
      <url>/2021/07/25/MyBatis_9_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%EF%BC%88environments%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒï¼Œè¿™ç§æœºåˆ¶æœ‰åŠ©äºå°† SQL æ˜ å°„åº”ç”¨äºå¤šç§æ•°æ®åº“ä¹‹ä¸­ï¼Œ ç°å®æƒ…å†µä¸‹æœ‰å¤šç§ç†ç”±éœ€è¦è¿™ä¹ˆåšã€‚ä¾‹å¦‚ï¼Œå¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒéœ€è¦æœ‰ä¸åŒçš„é…ç½®ï¼›æˆ–è€…æƒ³åœ¨å…·æœ‰ç›¸åŒ Schema çš„å¤šä¸ªç”Ÿäº§æ•°æ®åº“ä¸­ä½¿ç”¨ç›¸åŒçš„ SQL æ˜ å°„ã€‚è¿˜æœ‰è®¸å¤šç±»ä¼¼çš„ä½¿ç”¨åœºæ™¯ã€‚</p><p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p><span id="more"></span><p>æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³è¿æ¥ä¸¤ä¸ªæ•°æ®åº“ï¼Œå°±éœ€è¦åˆ›å»ºä¸¤ä¸ª SqlSessionFactory å®ä¾‹ï¼Œæ¯ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ªã€‚è€Œå¦‚æœæ˜¯ä¸‰ä¸ªæ•°æ®åº“ï¼Œå°±éœ€è¦ä¸‰ä¸ªå®ä¾‹ï¼Œä¾æ­¤ç±»æ¨ï¼Œè®°èµ·æ¥å¾ˆç®€å•ï¼š</p><ul><li><strong>æ¯ä¸ªæ•°æ®åº“å¯¹åº”ä¸€ä¸ª SqlSessionFactory å®ä¾‹</strong></li></ul><p>ä¸ºäº†æŒ‡å®šåˆ›å»ºå“ªç§ç¯å¢ƒï¼Œåªè¦å°†å®ƒä½œä¸ºå¯é€‰çš„å‚æ•°ä¼ é€’ç»™ SqlSessionFactoryBuilder å³å¯ã€‚å¯ä»¥æ¥å—ç¯å¢ƒé…ç½®çš„ä¸¤ä¸ªæ–¹æ³•ç­¾åæ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader, environment);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader, environment, properties);</span><br></pre></td></tr></table></figure><p>å¦‚æœå¿½ç•¥äº†ç¯å¢ƒå‚æ•°ï¼Œé‚£ä¹ˆå°†ä¼šåŠ è½½é»˜è®¤ç¯å¢ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(reader, properties);</span><br></pre></td></tr></table></figure><p>environments å…ƒç´ å®šä¹‰äº†å¦‚ä½•é…ç½®ç¯å¢ƒã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;...&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸€äº›å…³é”®ç‚¹:</p><ul><li>é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šdefault&#x3D;â€developmentâ€ï¼‰ã€‚</li><li>æ¯ä¸ª environment å…ƒç´ å®šä¹‰çš„ç¯å¢ƒ IDï¼ˆæ¯”å¦‚ï¼šid&#x3D;â€developmentâ€ï¼‰ã€‚</li><li>äº‹åŠ¡ç®¡ç†å™¨çš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype&#x3D;â€JDBCâ€ï¼‰ã€‚</li><li>æ•°æ®æºçš„é…ç½®ï¼ˆæ¯”å¦‚ï¼štype&#x3D;â€POOLEDâ€ï¼‰ã€‚</li></ul><p>é»˜è®¤ç¯å¢ƒå’Œç¯å¢ƒ ID é¡¾åæ€ä¹‰ã€‚ ç¯å¢ƒå¯ä»¥éšæ„å‘½åï¼Œä½†åŠ¡å¿…ä¿è¯é»˜è®¤çš„ç¯å¢ƒ ID è¦åŒ¹é…å…¶ä¸­ä¸€ä¸ªç¯å¢ƒ IDã€‚</p><p><strong>äº‹åŠ¡ç®¡ç†å™¨ï¼ˆtransactionManagerï¼‰</strong></p><p>åœ¨ MyBatis ä¸­æœ‰ä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆä¹Ÿå°±æ˜¯ type&#x3D;â€[JDBC|MANAGED]â€ï¼‰ï¼š</p><ul><li><p>JDBC â€“ è¿™ä¸ªé…ç½®ç›´æ¥ä½¿ç”¨äº† JDBC çš„æäº¤å’Œå›æ»šè®¾æ–½ï¼Œå®ƒä¾èµ–ä»æ•°æ®æºè·å¾—çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡ä½œç”¨åŸŸã€‚</p></li><li><p>MANAGED â€“ è¿™ä¸ªé…ç½®å‡ ä¹æ²¡åšä»€ä¹ˆã€‚å®ƒä»ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ˆæ¯”å¦‚ JEE åº”ç”¨æœåŠ¡å™¨çš„ä¸Šä¸‹æ–‡ï¼‰ã€‚ é»˜è®¤æƒ…å†µä¸‹å®ƒä¼šå…³é—­è¿æ¥ã€‚ç„¶è€Œä¸€äº›å®¹å™¨å¹¶ä¸å¸Œæœ›è¿æ¥è¢«å…³é—­ï¼Œå› æ­¤éœ€è¦å°† closeConnection å±æ€§è®¾ç½®ä¸º false æ¥é˜»æ­¢é»˜è®¤çš„å…³é—­è¡Œä¸ºã€‚ä¾‹å¦‚:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;MANAGED&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;closeConnection&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>â—<strong>æç¤º</strong> å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Spring + MyBatisï¼Œåˆ™æ²¡æœ‰å¿…è¦é…ç½®äº‹åŠ¡ç®¡ç†å™¨ï¼Œå› ä¸º Spring æ¨¡å—ä¼šä½¿ç”¨è‡ªå¸¦çš„ç®¡ç†å™¨æ¥è¦†ç›–å‰é¢çš„é…ç½®ã€‚</p><p>è¿™ä¸¤ç§äº‹åŠ¡ç®¡ç†å™¨ç±»å‹éƒ½ä¸éœ€è¦è®¾ç½®ä»»ä½•å±æ€§ã€‚å®ƒä»¬å…¶å®æ˜¯ç±»å‹åˆ«åï¼Œæ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ç”¨ TransactionFactory æ¥å£å®ç°ç±»çš„å…¨é™å®šåæˆ–ç±»å‹åˆ«åä»£æ›¿å®ƒä»¬ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TransactionFactory</span> &#123;</span><br><span class="line">  <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties props)</span> &#123; <span class="comment">// ä» 3.5.2 å¼€å§‹ï¼Œè¯¥æ–¹æ³•ä¸ºé»˜è®¤æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// ç©ºå®ç°</span></span><br><span class="line">  &#125;</span><br><span class="line">  Transaction <span class="title function_">newTransaction</span><span class="params">(Connection conn)</span>;</span><br><span class="line">  Transaction <span class="title function_">newTransaction</span><span class="params">(DataSource dataSource, TransactionIsolationLevel level, <span class="type">boolean</span> autoCommit)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨äº‹åŠ¡ç®¡ç†å™¨å®ä¾‹åŒ–åï¼Œæ‰€æœ‰åœ¨ XML ä¸­é…ç½®çš„å±æ€§å°†ä¼šè¢«ä¼ é€’ç»™ setProperties() æ–¹æ³•ã€‚ä½ çš„å®ç°è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ª Transaction æ¥å£çš„å®ç°ç±»ï¼Œè¿™ä¸ªæ¥å£ä¹Ÿå¾ˆç®€å•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Transaction</span> &#123;</span><br><span class="line">  Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">commit</span><span class="params">()</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">rollback</span><span class="params">()</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">  Integer <span class="title function_">getTimeout</span><span class="params">()</span> <span class="keyword">throws</span> SQLException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™ä¸¤ä¸ªæ¥å£ï¼Œä½ å¯ä»¥å®Œå…¨è‡ªå®šä¹‰ MyBatis å¯¹äº‹åŠ¡çš„å¤„ç†ã€‚</p><p><strong>æ•°æ®æºï¼ˆdataSourceï¼‰</strong></p><p>dataSource å…ƒç´ ä½¿ç”¨æ ‡å‡†çš„ JDBC æ•°æ®æºæ¥å£æ¥é…ç½® JDBC è¿æ¥å¯¹è±¡çš„èµ„æºã€‚</p><ul><li>å¤§å¤šæ•° MyBatis åº”ç”¨ç¨‹åºä¼šæŒ‰ç¤ºä¾‹ä¸­çš„ä¾‹å­æ¥é…ç½®æ•°æ®æºã€‚è™½ç„¶æ•°æ®æºé…ç½®æ˜¯å¯é€‰çš„ï¼Œä½†å¦‚æœè¦å¯ç”¨å»¶è¿ŸåŠ è½½ç‰¹æ€§ï¼Œå°±å¿…é¡»é…ç½®æ•°æ®æºã€‚</li></ul><p>æœ‰ä¸‰ç§å†…å»ºçš„æ•°æ®æºç±»å‹ï¼ˆä¹Ÿå°±æ˜¯ type&#x3D;â€[UNPOOLED|POOLED|JNDI]â€ï¼‰ï¼š</p><p><strong>UNPOOLED</strong>â€“ è¿™ä¸ªæ•°æ®æºçš„å®ç°ä¼šæ¯æ¬¡è¯·æ±‚æ—¶æ‰“å¼€å’Œå…³é—­è¿æ¥ã€‚è™½ç„¶æœ‰ç‚¹æ…¢ï¼Œä½†å¯¹é‚£äº›æ•°æ®åº“è¿æ¥å¯ç”¨æ€§è¦æ±‚ä¸é«˜çš„ç®€å•åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ æ€§èƒ½è¡¨ç°åˆ™ä¾èµ–äºä½¿ç”¨çš„æ•°æ®åº“ï¼Œå¯¹æŸäº›æ•°æ®åº“æ¥è¯´ï¼Œä½¿ç”¨è¿æ¥æ± å¹¶ä¸é‡è¦ï¼Œè¿™ä¸ªé…ç½®å°±å¾ˆé€‚åˆè¿™ç§æƒ…å½¢ã€‚UNPOOLED ç±»å‹çš„æ•°æ®æºä»…ä»…éœ€è¦é…ç½®ä»¥ä¸‹ 5 ç§å±æ€§ï¼š</p><ul><li><code>driver</code> â€“ è¿™æ˜¯ JDBC é©±åŠ¨çš„ Java ç±»å…¨é™å®šåï¼ˆå¹¶ä¸æ˜¯ JDBC é©±åŠ¨ä¸­å¯èƒ½åŒ…å«çš„æ•°æ®æºç±»ï¼‰ã€‚</li><li><code>url</code> â€“ è¿™æ˜¯æ•°æ®åº“çš„ JDBC URL åœ°å€ã€‚</li><li><code>username</code> â€“ ç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åã€‚</li><li><code>password</code> â€“ ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚</li><li><code>defaultTransactionIsolationLevel</code> â€“ é»˜è®¤çš„è¿æ¥äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚</li><li><code>defaultNetworkTimeout</code> â€“ ç­‰å¾…æ•°æ®åº“æ“ä½œå®Œæˆçš„é»˜è®¤ç½‘ç»œè¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼‰ã€‚æŸ¥çœ‹ <code>java.sql.Connection#setNetworkTimeout()</code> çš„ API æ–‡æ¡£ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚</li></ul><p>ä½œä¸ºå¯é€‰é¡¹ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ é€’å±æ€§ç»™æ•°æ®åº“é©±åŠ¨ã€‚åªéœ€åœ¨å±æ€§ååŠ ä¸Šâ€œdriver.â€å‰ç¼€å³å¯ï¼Œä¾‹å¦‚ï¼š</p><ul><li><code>driver.encoding=UTF8</code></li></ul><p>è¿™å°†é€šè¿‡ DriverManager.getConnection(url, driverProperties) æ–¹æ³•ä¼ é€’å€¼ä¸º <code>UTF8</code> çš„ <code>encoding</code> å±æ€§ç»™æ•°æ®åº“é©±åŠ¨ã€‚</p><p><strong>POOLED</strong>â€“ è¿™ç§æ•°æ®æºçš„å®ç°åˆ©ç”¨â€œæ± â€çš„æ¦‚å¿µå°† JDBC è¿æ¥å¯¹è±¡ç»„ç»‡èµ·æ¥ï¼Œé¿å…äº†åˆ›å»ºæ–°çš„è¿æ¥å®ä¾‹æ—¶æ‰€å¿…éœ€çš„åˆå§‹åŒ–å’Œè®¤è¯æ—¶é—´ã€‚ è¿™ç§å¤„ç†æ–¹å¼å¾ˆæµè¡Œï¼Œèƒ½ä½¿å¹¶å‘ Web åº”ç”¨å¿«é€Ÿå“åº”è¯·æ±‚ã€‚</p><p>é™¤äº†ä¸Šè¿°æåˆ° UNPOOLED ä¸‹çš„å±æ€§å¤–ï¼Œè¿˜æœ‰æ›´å¤šå±æ€§ç”¨æ¥é…ç½® POOLED çš„æ•°æ®æºï¼š</p><ul><li><code>poolMaximumActiveConnections</code> â€“ åœ¨ä»»æ„æ—¶é—´å¯å­˜åœ¨çš„æ´»åŠ¨ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰è¿æ¥æ•°é‡ï¼Œé»˜è®¤å€¼ï¼š10</li><li><code>poolMaximumIdleConnections</code> â€“ ä»»æ„æ—¶é—´å¯èƒ½å­˜åœ¨çš„ç©ºé—²è¿æ¥æ•°ã€‚</li><li><code>poolMaximumCheckoutTime</code> â€“ åœ¨è¢«å¼ºåˆ¶è¿”å›ä¹‹å‰ï¼Œæ± ä¸­è¿æ¥è¢«æ£€å‡ºï¼ˆchecked outï¼‰æ—¶é—´ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰</li><li><code>poolTimeToWait</code> â€“ è¿™æ˜¯ä¸€ä¸ªåº•å±‚è®¾ç½®ï¼Œå¦‚æœè·å–è¿æ¥èŠ±è´¹äº†ç›¸å½“é•¿çš„æ—¶é—´ï¼Œè¿æ¥æ± ä¼šæ‰“å°çŠ¶æ€æ—¥å¿—å¹¶é‡æ–°å°è¯•è·å–ä¸€ä¸ªè¿æ¥ï¼ˆé¿å…åœ¨è¯¯é…ç½®çš„æƒ…å†µä¸‹ä¸€ç›´å¤±è´¥ä¸”ä¸æ‰“å°æ—¥å¿—ï¼‰ï¼Œé»˜è®¤å€¼ï¼š20000 æ¯«ç§’ï¼ˆå³ 20 ç§’ï¼‰ã€‚</li><li><code>poolMaximumLocalBadConnectionTolerance</code> â€“ è¿™æ˜¯ä¸€ä¸ªå…³äºåè¿æ¥å®¹å¿åº¦çš„åº•å±‚è®¾ç½®ï¼Œ ä½œç”¨äºæ¯ä¸€ä¸ªå°è¯•ä»ç¼“å­˜æ± è·å–è¿æ¥çš„çº¿ç¨‹ã€‚ å¦‚æœè¿™ä¸ªçº¿ç¨‹è·å–åˆ°çš„æ˜¯ä¸€ä¸ªåçš„è¿æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®æºå…è®¸è¿™ä¸ªçº¿ç¨‹å°è¯•é‡æ–°è·å–ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œä½†æ˜¯è¿™ä¸ªé‡æ–°å°è¯•çš„æ¬¡æ•°ä¸åº”è¯¥è¶…è¿‡ <code>poolMaximumIdleConnections</code> ä¸ <code>poolMaximumLocalBadConnectionTolerance</code> ä¹‹å’Œã€‚ é»˜è®¤å€¼ï¼š3ï¼ˆæ–°å¢äº 3.4.5ï¼‰</li><li><code>poolPingQuery</code> â€“ å‘é€åˆ°æ•°æ®åº“çš„ä¾¦æµ‹æŸ¥è¯¢ï¼Œç”¨æ¥æ£€éªŒè¿æ¥æ˜¯å¦æ­£å¸¸å·¥ä½œå¹¶å‡†å¤‡æ¥å—è¯·æ±‚ã€‚é»˜è®¤æ˜¯â€œNO PING QUERY SETâ€ï¼Œè¿™ä¼šå¯¼è‡´å¤šæ•°æ•°æ®åº“é©±åŠ¨å‡ºé”™æ—¶è¿”å›æ°å½“çš„é”™è¯¯æ¶ˆæ¯ã€‚</li><li><code>poolPingEnabled</code> â€“ æ˜¯å¦å¯ç”¨ä¾¦æµ‹æŸ¥è¯¢ã€‚è‹¥å¼€å¯ï¼Œéœ€è¦è®¾ç½® <code>poolPingQuery</code> å±æ€§ä¸ºä¸€ä¸ªå¯æ‰§è¡Œçš„ SQL è¯­å¥ï¼ˆæœ€å¥½æ˜¯ä¸€ä¸ªé€Ÿåº¦éå¸¸å¿«çš„ SQL è¯­å¥ï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalseã€‚</li><li><code>poolPingConnectionsNotUsedFor</code> â€“ é…ç½® poolPingQuery çš„é¢‘ç‡ã€‚å¯ä»¥è¢«è®¾ç½®ä¸ºå’Œæ•°æ®åº“è¿æ¥è¶…æ—¶æ—¶é—´ä¸€æ ·ï¼Œæ¥é¿å…ä¸å¿…è¦çš„ä¾¦æµ‹ï¼Œé»˜è®¤å€¼ï¼š0ï¼ˆå³æ‰€æœ‰è¿æ¥æ¯ä¸€æ—¶åˆ»éƒ½è¢«ä¾¦æµ‹ â€” å½“ç„¶ä»…å½“ poolPingEnabled ä¸º true æ—¶é€‚ç”¨ï¼‰ã€‚</li></ul><p><strong>JNDI</strong> â€“ è¿™ä¸ªæ•°æ®æºå®ç°æ˜¯ä¸ºäº†èƒ½åœ¨å¦‚ EJB æˆ–åº”ç”¨æœåŠ¡å™¨è¿™ç±»å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå®¹å™¨å¯ä»¥é›†ä¸­æˆ–åœ¨å¤–éƒ¨é…ç½®æ•°æ®æºï¼Œç„¶åæ”¾ç½®ä¸€ä¸ª JNDI ä¸Šä¸‹æ–‡çš„æ•°æ®æºå¼•ç”¨ã€‚è¿™ç§æ•°æ®æºé…ç½®åªéœ€è¦ä¸¤ä¸ªå±æ€§ï¼š</p><ul><li><code>initial_context</code> â€“ è¿™ä¸ªå±æ€§ç”¨æ¥åœ¨ InitialContext ä¸­å¯»æ‰¾ä¸Šä¸‹æ–‡ï¼ˆå³ï¼ŒinitialContext.lookup(initial_context)ï¼‰ã€‚è¿™æ˜¯ä¸ªå¯é€‰å±æ€§ï¼Œå¦‚æœå¿½ç•¥ï¼Œé‚£ä¹ˆå°†ä¼šç›´æ¥ä» InitialContext ä¸­å¯»æ‰¾ data_source å±æ€§ã€‚</li><li><code>data_source</code> â€“ è¿™æ˜¯å¼•ç”¨æ•°æ®æºå®ä¾‹ä½ç½®çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚æä¾›äº† initial_context é…ç½®æ—¶ä¼šåœ¨å…¶è¿”å›çš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ²¡æœ‰æä¾›æ—¶åˆ™ç›´æ¥åœ¨ InitialContext ä¸­æŸ¥æ‰¾ã€‚</li></ul><p>å’Œå…¶ä»–æ•°æ®æºé…ç½®ç±»ä¼¼ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å‰ç¼€â€œenv.â€ç›´æ¥æŠŠå±æ€§ä¼ é€’ç»™ InitialContextã€‚æ¯”å¦‚ï¼š</p><ul><li><code>env.encoding=UTF8</code></li></ul><p>è¿™å°±ä¼šåœ¨ InitialContext å®ä¾‹åŒ–æ—¶å¾€å®ƒçš„æ„é€ æ–¹æ³•ä¼ é€’å€¼ä¸º <code>UTF8</code> çš„ <code>encoding</code> å±æ€§ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡å®ç°æ¥å£ <code>org.apache.ibatis.datasource.DataSourceFactory</code> æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ•°æ®æºå®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DataSourceFactory</span> &#123;</span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties props)</span>;</span><br><span class="line">  DataSource <span class="title function_">getDataSource</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory</code> å¯è¢«ç”¨ä½œçˆ¶ç±»æ¥æ„å»ºæ–°çš„æ•°æ®æºé€‚é…å™¨ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µæ’å…¥ C3P0 æ•°æ®æºæ‰€å¿…éœ€çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory;</span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">C3P0DataSourceFactory</span> <span class="keyword">extends</span> <span class="title class_">UnpooledDataSourceFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">C3P0DataSourceFactory</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.dataSource = <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä»¤å…¶å·¥ä½œï¼Œè®°å¾—åœ¨é…ç½®æ–‡ä»¶ä¸­ä¸ºæ¯ä¸ªå¸Œæœ› MyBatis è°ƒç”¨çš„ setter æ–¹æ³•å¢åŠ å¯¹åº”çš„å±æ€§ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ä»¥è¿æ¥è‡³ PostgreSQL æ•°æ®åº“çš„ä¾‹å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;org.myproject.C3P0DataSourceFactory&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;org.postgresql.Driver&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:postgresql:mydb&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;postgres&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”æ’ä»¶ï¼ˆpluginsï¼‰</title>
      <link href="/2021/07/23/MyBatis_8_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E6%8F%92%E4%BB%B6%EF%BC%88plugins%EF%BC%89/"/>
      <url>/2021/07/23/MyBatis_8_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E6%8F%92%E4%BB%B6%EF%BC%88plugins%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>MyBatis å…è®¸ä½ åœ¨æ˜ å°„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸€ç‚¹è¿›è¡Œæ‹¦æˆªè°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis å…è®¸ä½¿ç”¨æ’ä»¶æ¥æ‹¦æˆªçš„æ–¹æ³•è°ƒç”¨åŒ…æ‹¬ï¼š</p><ul><li><p>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</p></li><li><p>ParameterHandler (getParameterObject, setParameters)</p></li><li><p>ResultSetHandler (handleResultSets, handleOutputParameters)</p></li><li><p>StatementHandler (prepare, parameterize, batch, update, query)</p></li></ul><span id="more"></span><p>è¿™äº›ç±»ä¸­æ–¹æ³•çš„ç»†èŠ‚å¯ä»¥é€šè¿‡æŸ¥çœ‹æ¯ä¸ªæ–¹æ³•çš„ç­¾åæ¥å‘ç°ï¼Œæˆ–è€…ç›´æ¥æŸ¥çœ‹ MyBatis å‘è¡ŒåŒ…ä¸­çš„æºä»£ç ã€‚ å¦‚æœä½ æƒ³åšçš„ä¸ä»…ä»…æ˜¯ç›‘æ§æ–¹æ³•çš„è°ƒç”¨ï¼Œé‚£ä¹ˆä½ æœ€å¥½ç›¸å½“äº†è§£è¦é‡å†™çš„æ–¹æ³•çš„è¡Œä¸ºã€‚ å› ä¸ºåœ¨è¯•å›¾ä¿®æ”¹æˆ–é‡å†™å·²æœ‰æ–¹æ³•çš„è¡Œä¸ºæ—¶ï¼Œå¾ˆå¯èƒ½ä¼šç ´å MyBatis çš„æ ¸å¿ƒæ¨¡å—ã€‚ è¿™äº›éƒ½æ˜¯æ›´åº•å±‚çš„ç±»å’Œæ–¹æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨æ’ä»¶çš„æ—¶å€™è¦ç‰¹åˆ«å½“å¿ƒã€‚</p><p>é€šè¿‡ MyBatis æä¾›çš„å¼ºå¤§æœºåˆ¶ï¼Œä½¿ç”¨æ’ä»¶æ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€å®ç° Interceptor æ¥å£ï¼Œå¹¶æŒ‡å®šæƒ³è¦æ‹¦æˆªçš„æ–¹æ³•ç­¾åå³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ExamplePlugin.java</span></span><br><span class="line"><span class="meta">@Intercepts(&#123;@Signature(</span></span><br><span class="line"><span class="meta">  type= Executor.class,</span></span><br><span class="line"><span class="meta">  method = &quot;update&quot;,</span></span><br><span class="line"><span class="meta">  args = &#123;MappedStatement.class,Object.class&#125;)&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExamplePlugin</span> <span class="keyword">implements</span> <span class="title class_">Interceptor</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Invocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">    <span class="comment">// implement pre processing if need</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">returnObject</span> <span class="operator">=</span> invocation.proceed();</span><br><span class="line">    <span class="comment">// implement post processing if need</span></span><br><span class="line">    <span class="keyword">return</span> returnObject;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties properties)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.properties = properties;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-config.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;org.mybatis.example.ExamplePlugin&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;someProperty&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„æ’ä»¶å°†ä¼šæ‹¦æˆªåœ¨ Executor å®ä¾‹ä¸­æ‰€æœ‰çš„ â€œupdateâ€ æ–¹æ³•è°ƒç”¨ï¼Œ è¿™é‡Œçš„ Executor æ˜¯è´Ÿè´£æ‰§è¡Œåº•å±‚æ˜ å°„è¯­å¥çš„å†…éƒ¨å¯¹è±¡ã€‚</p><p>â—<strong>æç¤º</strong> <strong>è¦†ç›–é…ç½®ç±»</strong></p><p>é™¤äº†ç”¨æ’ä»¶æ¥ä¿®æ”¹ MyBatis æ ¸å¿ƒè¡Œä¸ºä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å®Œå…¨è¦†ç›–é…ç½®ç±»æ¥è¾¾åˆ°ç›®çš„ã€‚åªéœ€ç»§æ‰¿é…ç½®ç±»åè¦†ç›–å…¶ä¸­çš„æŸä¸ªæ–¹æ³•ï¼Œå†æŠŠå®ƒä¼ é€’åˆ° SqlSessionFactoryBuilder.build(myConfig) æ–¹æ³•å³å¯ã€‚å†æ¬¡é‡ç”³ï¼Œè¿™å¯èƒ½ä¼šæå¤§å½±å“ MyBatis çš„è¡Œä¸ºï¼ŒåŠ¡è¯·æ…ä¹‹åˆæ…ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”å¯¹è±¡å·¥å‚ï¼ˆobjectFactoryï¼‰</title>
      <link href="/2021/07/22/MyBatis_7_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E5%AF%B9%E8%B1%A1%E5%B7%A5%E5%8E%82%EF%BC%88objectFactory%EF%BC%89/"/>
      <url>/2021/07/22/MyBatis_7_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E5%AF%B9%E8%B1%A1%E5%B7%A5%E5%8E%82%EF%BC%88objectFactory%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>æ¯æ¬¡ MyBatis åˆ›å»ºç»“æœå¯¹è±¡çš„æ–°å®ä¾‹æ—¶ï¼Œå®ƒéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å·¥å‚ï¼ˆObjectFactoryï¼‰å®ä¾‹æ¥å®Œæˆå®ä¾‹åŒ–å·¥ä½œã€‚ é»˜è®¤çš„å¯¹è±¡å·¥å‚éœ€è¦åšçš„ä»…ä»…æ˜¯å®ä¾‹åŒ–ç›®æ ‡ç±»ï¼Œè¦ä¹ˆé€šè¿‡é»˜è®¤æ— å‚æ„é€ æ–¹æ³•ï¼Œè¦ä¹ˆé€šè¿‡å­˜åœ¨çš„å‚æ•°æ˜ å°„æ¥è°ƒç”¨å¸¦æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ã€‚ å¦‚æœæƒ³è¦†ç›–å¯¹è±¡å·¥å‚çš„é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºè‡ªå·±çš„å¯¹è±¡å·¥å‚æ¥å®ç°ã€‚</p><span id="more"></span><p>æ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ExampleObjectFactory.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleObjectFactory</span> <span class="keyword">extends</span> <span class="title class_">DefaultObjectFactory</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">create</span><span class="params">(Class type)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.create(type);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">create</span><span class="params">(Class type, List&lt;Class&gt; constructorArgTypes, List&lt;Object&gt; constructorArgs)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.create(type, constructorArgTypes, constructorArgs);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProperties</span><span class="params">(Properties properties)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.setProperties(properties);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> &lt;T&gt; <span class="type">boolean</span> <span class="title function_">isCollection</span><span class="params">(Class&lt;T&gt; type)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Collection.class.isAssignableFrom(type);</span><br><span class="line">  &#125;&#125;</span><br><span class="line">&lt;!-- mybatis-config.xml --&gt;</span><br><span class="line">&lt;objectFactory type=<span class="string">&quot;org.mybatis.example.ExampleObjectFactory&quot;</span>&gt;</span><br><span class="line">  &lt;property name=<span class="string">&quot;someProperty&quot;</span> value=<span class="string">&quot;100&quot;</span>/&gt;</span><br><span class="line">&lt;/objectFactory&gt;</span><br></pre></td></tr></table></figure><p>ObjectFactory æ¥å£å¾ˆç®€å•ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªåˆ›å»ºå®ä¾‹ç”¨çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å¤„ç†é»˜è®¤æ— å‚æ„é€ æ–¹æ³•çš„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å¤„ç†å¸¦å‚æ•°çš„æ„é€ æ–¹æ³•çš„ã€‚ å¦å¤–ï¼ŒsetProperties æ–¹æ³•å¯ä»¥è¢«ç”¨æ¥é…ç½® ObjectFactoryï¼Œåœ¨åˆå§‹åŒ–ä½ çš„ ObjectFactory å®ä¾‹åï¼Œ objectFactory å…ƒç´ ä½“ä¸­å®šä¹‰çš„å±æ€§ä¼šè¢«ä¼ é€’ç»™ setProperties æ–¹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”å¤„ç†æšä¸¾ç±»å‹</title>
      <link href="/2021/07/21/MyBatis_6_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E5%A4%84%E7%90%86%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B/"/>
      <url>/2021/07/21/MyBatis_6_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E5%A4%84%E7%90%86%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>è‹¥æƒ³æ˜ å°„æšä¸¾ç±»å‹ <code>Enum</code>ï¼Œåˆ™éœ€è¦ä» <code>EnumTypeHandler</code> æˆ–è€… <code>EnumOrdinalTypeHandler</code> ä¸­é€‰æ‹©ä¸€ä¸ªæ¥ä½¿ç”¨ã€‚</p><p>æ¯”å¦‚è¯´æˆ‘ä»¬æƒ³å­˜å‚¨å–è¿‘ä¼¼å€¼æ—¶ç”¨åˆ°çš„èˆå…¥æ¨¡å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis ä¼šåˆ©ç”¨ <code>EnumTypeHandler</code> æ¥æŠŠ <code>Enum</code> å€¼è½¬æ¢æˆå¯¹åº”çš„åå­—ã€‚</p><p><strong>æ³¨æ„ <code>EnumTypeHandler</code> åœ¨æŸç§æ„ä¹‰ä¸Šæ¥è¯´æ˜¯æ¯”è¾ƒç‰¹åˆ«çš„ï¼Œå…¶å®ƒçš„å¤„ç†å™¨åªé’ˆå¯¹æŸä¸ªç‰¹å®šçš„ç±»ï¼Œè€Œå®ƒä¸åŒï¼Œå®ƒä¼šå¤„ç†ä»»æ„ç»§æ‰¿äº† <code>Enum</code> çš„ç±»ã€‚</strong></p><span id="more"></span><p>ä¸è¿‡ï¼Œæˆ‘ä»¬å¯èƒ½ä¸æƒ³å­˜å‚¨åå­—ï¼Œç›¸åæˆ‘ä»¬çš„ DBA ä¼šåšæŒä½¿ç”¨æ•´å½¢å€¼ä»£ç ã€‚é‚£ä¹Ÿä¸€æ ·ç®€å•ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æŠŠ <code>EnumOrdinalTypeHandler</code> åŠ åˆ° <code>typeHandlers</code> ä¸­å³å¯ï¼Œ è¿™æ ·æ¯ä¸ª <code>RoundingMode</code> å°†é€šè¿‡ä»–ä»¬çš„åºæ•°å€¼æ¥æ˜ å°„æˆå¯¹åº”çš„æ•´å½¢æ•°å€¼ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatis-config.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeHandlers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeHandler</span> <span class="attr">handler</span>=<span class="string">&quot;org.apache.ibatis.type.EnumOrdinalTypeHandler&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;java.math.RoundingMode&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeHandlers</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½†è¦æ˜¯ä½ æƒ³åœ¨ä¸€ä¸ªåœ°æ–¹å°† <code>Enum</code> æ˜ å°„æˆå­—ç¬¦ä¸²ï¼Œåœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹æ˜ å°„æˆæ•´å½¢å€¼å‘¢ï¼Ÿ</p><p>è‡ªåŠ¨æ˜ å°„å™¨ï¼ˆauto-mapperï¼‰ä¼šè‡ªåŠ¨åœ°é€‰ç”¨ <code>EnumOrdinalTypeHandler</code> æ¥å¤„ç†æšä¸¾ç±»å‹ï¼Œ æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³ç”¨æ™®é€šçš„ <code>EnumTypeHandler</code>ï¼Œå°±å¿…é¡»è¦æ˜¾å¼åœ°ä¸ºé‚£äº› SQL è¯­å¥è®¾ç½®è¦ä½¿ç”¨çš„ç±»å‹å¤„ç†å™¨ã€‚</p><p>ï¼ˆä¸‹ä¸€èŠ‚æ‰å¼€å§‹ä»‹ç»æ˜ å°„å™¨æ–‡ä»¶ï¼Œå¦‚æœä½ æ˜¯é¦–æ¬¡é˜…è¯»è¯¥æ–‡æ¡£ï¼Œä½ å¯èƒ½éœ€è¦å…ˆè·³è¿‡è¿™é‡Œï¼Œè¿‡ä¼šå†æ¥çœ‹ã€‚ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">    PUBLIC <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="line">    <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;org.apache.ibatis.submitted.rounding.Mapper&quot;</span>&gt;</span><br><span class="line">&lt;resultMap type=<span class="string">&quot;org.apache.ibatis.submitted.rounding.User&quot;</span> id=<span class="string">&quot;usermap&quot;</span>&gt;</span><br><span class="line">&lt;id column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">&lt;result column=<span class="string">&quot;name&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">&lt;result column=<span class="string">&quot;funkyNumber&quot;</span> property=<span class="string">&quot;funkyNumber&quot;</span>/&gt;</span><br><span class="line">&lt;result column=<span class="string">&quot;roundingMode&quot;</span> property=<span class="string">&quot;roundingMode&quot;</span>/&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=<span class="string">&quot;getUser&quot;</span> resultMap=<span class="string">&quot;usermap&quot;</span>&gt;</span><br><span class="line">select * from users</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;insert id=<span class="string">&quot;insert&quot;</span>&gt;</span><br><span class="line">    insert into <span class="title function_">users</span> <span class="params">(id, name, funkyNumber, roundingMode)</span> values (</span><br><span class="line">    #&#123;id&#125;, #&#123;name&#125;, #&#123;funkyNumber&#125;, #&#123;roundingMode&#125;</span><br><span class="line">    )</span><br><span class="line">&lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">&lt;resultMap type=<span class="string">&quot;org.apache.ibatis.submitted.rounding.User&quot;</span> id=<span class="string">&quot;usermap2&quot;</span>&gt;</span><br><span class="line">&lt;id column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">&lt;result column=<span class="string">&quot;name&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">&lt;result column=<span class="string">&quot;funkyNumber&quot;</span> property=<span class="string">&quot;funkyNumber&quot;</span>/&gt;</span><br><span class="line">&lt;result column=<span class="string">&quot;roundingMode&quot;</span> property=<span class="string">&quot;roundingMode&quot;</span> typeHandler=<span class="string">&quot;org.apache.ibatis.type.EnumTypeHandler&quot;</span>/&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUser2&quot;</span> resultMap=<span class="string">&quot;usermap2&quot;</span>&gt;</span><br><span class="line">select * from users2</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;insert id=<span class="string">&quot;insert2&quot;</span>&gt;</span><br><span class="line">    insert into <span class="title function_">users2</span> <span class="params">(id, name, funkyNumber, roundingMode)</span> values (</span><br><span class="line">    #&#123;id&#125;, #&#123;name&#125;, #&#123;funkyNumber&#125;, #&#123;roundingMode, typeHandler=org.apache.ibatis.type.EnumTypeHandler&#125;</span><br><span class="line">    )</span><br><span class="line">&lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™é‡Œçš„ select è¯­å¥å¿…é¡»æŒ‡å®š <code>resultMap</code> è€Œä¸æ˜¯ <code>resultType</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”ç±»å‹å¤„ç†å™¨ï¼ˆtypeHandlersï¼‰</title>
      <link href="/2021/07/20/MyBatis_5_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E7%B1%BB%E5%9E%8B%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%88typeHandlers%EF%BC%89/"/>
      <url>/2021/07/20/MyBatis_5_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E7%B1%BB%E5%9E%8B%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%88typeHandlers%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>MyBatis åœ¨è®¾ç½®é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ä¸­çš„å‚æ•°æˆ–ä»ç»“æœé›†ä¸­å–å‡ºä¸€ä¸ªå€¼æ—¶ï¼Œ éƒ½ä¼šç”¨ç±»å‹å¤„ç†å™¨å°†è·å–åˆ°çš„å€¼ä»¥åˆé€‚çš„æ–¹å¼è½¬æ¢æˆ Java ç±»å‹ã€‚ä¸‹è¡¨æè¿°äº†ä¸€äº›é»˜è®¤çš„ç±»å‹å¤„ç†å™¨ã€‚</p><p>â—<strong>æç¤º</strong> ä» 3.4.5 å¼€å§‹ï¼ŒMyBatis é»˜è®¤æ”¯æŒ JSR-310ï¼ˆæ—¥æœŸå’Œæ—¶é—´ APIï¼‰ ã€‚</p><span id="more"></span><table><thead><tr><th align="left">ç±»å‹å¤„ç†å™¨</th><th align="left">Java ç±»å‹</th><th align="left">JDBC ç±»å‹</th></tr></thead><tbody><tr><td align="left"><code>BooleanTypeHandler</code></td><td align="left"><code>java.lang.Boolean</code>, <code>boolean</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>BOOLEAN</code></td></tr><tr><td align="left"><code>ByteTypeHandler</code></td><td align="left"><code>java.lang.Byte</code>, <code>byte</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>BYTE</code></td></tr><tr><td align="left"><code>ShortTypeHandler</code></td><td align="left"><code>java.lang.Short</code>, <code>short</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>SMALLINT</code></td></tr><tr><td align="left"><code>IntegerTypeHandler</code></td><td align="left"><code>java.lang.Integer</code>, <code>int</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>INTEGER</code></td></tr><tr><td align="left"><code>LongTypeHandler</code></td><td align="left"><code>java.lang.Long</code>, <code>long</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>BIGINT</code></td></tr><tr><td align="left"><code>FloatTypeHandler</code></td><td align="left"><code>java.lang.Float</code>, <code>float</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>FLOAT</code></td></tr><tr><td align="left"><code>DoubleTypeHandler</code></td><td align="left"><code>java.lang.Double</code>, <code>double</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>DOUBLE</code></td></tr><tr><td align="left"><code>BigDecimalTypeHandler</code></td><td align="left"><code>java.math.BigDecimal</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>DECIMAL</code></td></tr><tr><td align="left"><code>StringTypeHandler</code></td><td align="left"><code>java.lang.String</code></td><td align="left"><code>CHAR</code>, <code>VARCHAR</code></td></tr><tr><td align="left"><code>ClobReaderTypeHandler</code></td><td align="left"><code>java.io.Reader</code></td><td align="left">-</td></tr><tr><td align="left"><code>ClobTypeHandler</code></td><td align="left"><code>java.lang.String</code></td><td align="left"><code>CLOB</code>, <code>LONGVARCHAR</code></td></tr><tr><td align="left"><code>NStringTypeHandler</code></td><td align="left"><code>java.lang.String</code></td><td align="left"><code>NVARCHAR</code>, <code>NCHAR</code></td></tr><tr><td align="left"><code>NClobTypeHandler</code></td><td align="left"><code>java.lang.String</code></td><td align="left"><code>NCLOB</code></td></tr><tr><td align="left"><code>BlobInputStreamTypeHandler</code></td><td align="left"><code>java.io.InputStream</code></td><td align="left">-</td></tr><tr><td align="left"><code>ByteArrayTypeHandler</code></td><td align="left"><code>byte[]</code></td><td align="left">æ•°æ®åº“å…¼å®¹çš„å­—èŠ‚æµç±»å‹</td></tr><tr><td align="left"><code>BlobTypeHandler</code></td><td align="left"><code>byte[]</code></td><td align="left"><code>BLOB</code>, <code>LONGVARBINARY</code></td></tr><tr><td align="left"><code>DateTypeHandler</code></td><td align="left"><code>java.util.Date</code></td><td align="left"><code>TIMESTAMP</code></td></tr><tr><td align="left"><code>DateOnlyTypeHandler</code></td><td align="left"><code>java.util.Date</code></td><td align="left"><code>DATE</code></td></tr><tr><td align="left"><code>TimeOnlyTypeHandler</code></td><td align="left"><code>java.util.Date</code></td><td align="left"><code>TIME</code></td></tr><tr><td align="left"><code>SqlTimestampTypeHandler</code></td><td align="left"><code>java.sql.Timestamp</code></td><td align="left"><code>TIMESTAMP</code></td></tr><tr><td align="left"><code>SqlDateTypeHandler</code></td><td align="left"><code>java.sql.Date</code></td><td align="left"><code>DATE</code></td></tr><tr><td align="left"><code>SqlTimeTypeHandler</code></td><td align="left"><code>java.sql.Time</code></td><td align="left"><code>TIME</code></td></tr><tr><td align="left"><code>ObjectTypeHandler</code></td><td align="left">Any</td><td align="left"><code>OTHER</code> æˆ–æœªæŒ‡å®šç±»å‹</td></tr><tr><td align="left"><code>EnumTypeHandler</code></td><td align="left">Enumeration Type</td><td align="left">VARCHAR æˆ–ä»»ä½•å…¼å®¹çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œç”¨æ¥å­˜å‚¨æšä¸¾çš„åç§°ï¼ˆè€Œä¸æ˜¯ç´¢å¼•åºæ•°å€¼ï¼‰</td></tr><tr><td align="left"><code>EnumOrdinalTypeHandler</code></td><td align="left">Enumeration Type</td><td align="left">ä»»ä½•å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>DOUBLE</code> ç±»å‹ï¼Œç”¨æ¥å­˜å‚¨æšä¸¾çš„åºæ•°å€¼ï¼ˆè€Œä¸æ˜¯åç§°ï¼‰ã€‚</td></tr><tr><td align="left"><code>SqlxmlTypeHandler</code></td><td align="left"><code>java.lang.String</code></td><td align="left"><code>SQLXML</code></td></tr><tr><td align="left"><code>InstantTypeHandler</code></td><td align="left"><code>java.time.Instant</code></td><td align="left"><code>TIMESTAMP</code></td></tr><tr><td align="left"><code>LocalDateTimeTypeHandler</code></td><td align="left"><code>java.time.LocalDateTime</code></td><td align="left"><code>TIMESTAMP</code></td></tr><tr><td align="left"><code>LocalDateTypeHandler</code></td><td align="left"><code>java.time.LocalDate</code></td><td align="left"><code>DATE</code></td></tr><tr><td align="left"><code>LocalTimeTypeHandler</code></td><td align="left"><code>java.time.LocalTime</code></td><td align="left"><code>TIME</code></td></tr><tr><td align="left"><code>OffsetDateTimeTypeHandler</code></td><td align="left"><code>java.time.OffsetDateTime</code></td><td align="left"><code>TIMESTAMP</code></td></tr><tr><td align="left"><code>OffsetTimeTypeHandler</code></td><td align="left"><code>java.time.OffsetTime</code></td><td align="left"><code>TIME</code></td></tr><tr><td align="left"><code>ZonedDateTimeTypeHandler</code></td><td align="left"><code>java.time.ZonedDateTime</code></td><td align="left"><code>TIMESTAMP</code></td></tr><tr><td align="left"><code>YearTypeHandler</code></td><td align="left"><code>java.time.Year</code></td><td align="left"><code>INTEGER</code></td></tr><tr><td align="left"><code>MonthTypeHandler</code></td><td align="left"><code>java.time.Month</code></td><td align="left"><code>INTEGER</code></td></tr><tr><td align="left"><code>YearMonthTypeHandler</code></td><td align="left"><code>java.time.YearMonth</code></td><td align="left"><code>VARCHAR</code> æˆ– <code>LONGVARCHAR</code></td></tr><tr><td align="left"><code>JapaneseDateTypeHandler</code></td><td align="left"><code>java.time.chrono.JapaneseDate</code></td><td align="left"><code>DATE</code></td></tr></tbody></table><p>ä½ å¯ä»¥é‡å†™å·²æœ‰çš„ç±»å‹å¤„ç†å™¨æˆ–åˆ›å»ºä½ è‡ªå·±çš„ç±»å‹å¤„ç†å™¨æ¥å¤„ç†ä¸æ”¯æŒçš„æˆ–éæ ‡å‡†çš„ç±»å‹ã€‚ å…·ä½“åšæ³•ä¸ºï¼šå®ç° <code>org.apache.ibatis.type.TypeHandler</code> æ¥å£ï¼Œ æˆ–ç»§æ‰¿ä¸€ä¸ªå¾ˆä¾¿åˆ©çš„ç±» <code>org.apache.ibatis.type.BaseTypeHandler</code>ï¼Œ å¹¶ä¸”å¯ä»¥ï¼ˆå¯é€‰åœ°ï¼‰å°†å®ƒæ˜ å°„åˆ°ä¸€ä¸ª JDBC ç±»å‹ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ExampleTypeHandler.java</span></span><br><span class="line"><span class="meta">@MappedJdbcTypes(JdbcType.VARCHAR)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExampleTypeHandler</span> <span class="keyword">extends</span> <span class="title class_">BaseTypeHandler</span>&lt;String&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNonNullParameter</span><span class="params">(PreparedStatement ps, <span class="type">int</span> i, String parameter, JdbcType jdbcType)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    ps.setString(i, parameter);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getNullableResult</span><span class="params">(ResultSet rs, String columnName)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">return</span> rs.getString(columnName);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getNullableResult</span><span class="params">(ResultSet rs, <span class="type">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">return</span> rs.getString(columnIndex);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getNullableResult</span><span class="params">(CallableStatement cs, <span class="type">int</span> columnIndex)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">    <span class="keyword">return</span> cs.getString(columnIndex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!-- mybatis-config.xml --&gt;</span><br><span class="line">&lt;typeHandlers&gt;</span><br><span class="line">  &lt;typeHandler handler=<span class="string">&quot;org.mybatis.example.ExampleTypeHandler&quot;</span>/&gt;</span><br><span class="line">&lt;/typeHandlers&gt;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°çš„ç±»å‹å¤„ç†å™¨å°†ä¼šè¦†ç›–å·²æœ‰çš„å¤„ç† Java String ç±»å‹çš„å±æ€§ä»¥åŠ VARCHAR ç±»å‹çš„å‚æ•°å’Œç»“æœçš„ç±»å‹å¤„ç†å™¨ã€‚ è¦æ³¨æ„ MyBatis ä¸ä¼šé€šè¿‡æ£€æµ‹æ•°æ®åº“å…ƒä¿¡æ¯æ¥å†³å®šä½¿ç”¨å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä½ å¿…é¡»åœ¨å‚æ•°å’Œç»“æœæ˜ å°„ä¸­æŒ‡æ˜å­—æ®µæ˜¯ VARCHAR ç±»å‹ï¼Œ ä»¥ä½¿å…¶èƒ½å¤Ÿç»‘å®šåˆ°æ­£ç¡®çš„ç±»å‹å¤„ç†å™¨ä¸Šã€‚è¿™æ˜¯å› ä¸º MyBatis ç›´åˆ°è¯­å¥è¢«æ‰§è¡Œæ—¶æ‰æ¸…æ¥šæ•°æ®ç±»å‹ã€‚</p><p>é€šè¿‡ç±»å‹å¤„ç†å™¨çš„æ³›å‹ï¼ŒMyBatis å¯ä»¥å¾—çŸ¥è¯¥ç±»å‹å¤„ç†å™¨å¤„ç†çš„ Java ç±»å‹ï¼Œä¸è¿‡è¿™ç§è¡Œä¸ºå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹æ³•æ”¹å˜ï¼š</p><ul><li>åœ¨ç±»å‹å¤„ç†å™¨çš„é…ç½®å…ƒç´ ï¼ˆtypeHandler å…ƒç´ ï¼‰ä¸Šå¢åŠ ä¸€ä¸ª <code>javaType</code> å±æ€§ï¼ˆæ¯”å¦‚ï¼š<code>javaType=&quot;String&quot;</code>ï¼‰ï¼›</li><li>åœ¨ç±»å‹å¤„ç†å™¨çš„ç±»ä¸Šå¢åŠ ä¸€ä¸ª <code>@MappedTypes</code> æ³¨è§£æŒ‡å®šä¸å…¶å…³è”çš„ Java ç±»å‹åˆ—è¡¨ã€‚ å¦‚æœåœ¨ <code>javaType</code> å±æ€§ä¸­ä¹ŸåŒæ—¶æŒ‡å®šï¼Œåˆ™æ³¨è§£ä¸Šçš„é…ç½®å°†è¢«å¿½ç•¥ã€‚</li></ul><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šå…³è”çš„ JDBC ç±»å‹ï¼š</p><ul><li>åœ¨ç±»å‹å¤„ç†å™¨çš„é…ç½®å…ƒç´ ä¸Šå¢åŠ ä¸€ä¸ª <code>jdbcType</code> å±æ€§ï¼ˆæ¯”å¦‚ï¼š<code>jdbcType=&quot;VARCHAR&quot;</code>ï¼‰ï¼›</li><li>åœ¨ç±»å‹å¤„ç†å™¨çš„ç±»ä¸Šå¢åŠ ä¸€ä¸ª <code>@MappedJdbcTypes</code> æ³¨è§£æŒ‡å®šä¸å…¶å…³è”çš„ JDBC ç±»å‹åˆ—è¡¨ã€‚ å¦‚æœåœ¨ <code>jdbcType</code> å±æ€§ä¸­ä¹ŸåŒæ—¶æŒ‡å®šï¼Œåˆ™æ³¨è§£ä¸Šçš„é…ç½®å°†è¢«å¿½ç•¥ã€‚</li></ul><p>å½“åœ¨ <code>ResultMap</code> ä¸­å†³å®šä½¿ç”¨å“ªç§ç±»å‹å¤„ç†å™¨æ—¶ï¼Œæ­¤æ—¶ Java ç±»å‹æ˜¯å·²çŸ¥çš„ï¼ˆä»ç»“æœç±»å‹ä¸­è·å¾—ï¼‰ï¼Œä½†æ˜¯ JDBC ç±»å‹æ˜¯æœªçŸ¥çš„ã€‚ å› æ­¤ Mybatis ä½¿ç”¨ <code>javaType=[Java ç±»å‹], jdbcType=null</code> çš„ç»„åˆæ¥é€‰æ‹©ä¸€ä¸ªç±»å‹å¤„ç†å™¨ã€‚ è¿™æ„å‘³ç€ä½¿ç”¨ <code>@MappedJdbcTypes</code> æ³¨è§£å¯ä»¥<em>é™åˆ¶</em>ç±»å‹å¤„ç†å™¨çš„ä½œç”¨èŒƒå›´ï¼Œå¹¶ä¸”å¯ä»¥ç¡®ä¿ï¼Œé™¤éæ˜¾å¼åœ°è®¾ç½®ï¼Œå¦åˆ™ç±»å‹å¤„ç†å™¨åœ¨ <code>ResultMap</code> ä¸­å°†ä¸ä¼šç”Ÿæ•ˆã€‚ å¦‚æœå¸Œæœ›èƒ½åœ¨ <code>ResultMap</code> ä¸­éšå¼åœ°ä½¿ç”¨ç±»å‹å¤„ç†å™¨ï¼Œé‚£ä¹ˆè®¾ç½® <code>@MappedJdbcTypes</code> æ³¨è§£çš„ <code>includeNullJdbcType=true</code> å³å¯ã€‚ ç„¶è€Œä» Mybatis 3.4.0 å¼€å§‹ï¼Œå¦‚æœæŸä¸ª Java ç±»å‹<strong>åªæœ‰ä¸€ä¸ª</strong>æ³¨å†Œçš„ç±»å‹å¤„ç†å™¨ï¼Œå³ä½¿æ²¡æœ‰è®¾ç½® <code>includeNullJdbcType=true</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹å¤„ç†å™¨ä¹Ÿä¼šæ˜¯ <code>ResultMap</code> ä½¿ç”¨ Java ç±»å‹æ—¶çš„é»˜è®¤å¤„ç†å™¨ã€‚</p><p>æœ€åï¼Œå¯ä»¥è®© MyBatis å¸®ä½ æŸ¥æ‰¾ç±»å‹å¤„ç†å™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- mybatis-config.xml --&gt;</span><br><span class="line">&lt;typeHandlers&gt;</span><br><span class="line">  &lt;<span class="keyword">package</span> name=<span class="string">&quot;org.mybatis.example&quot;</span>/&gt;</span><br><span class="line">&lt;/typeHandlers&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„åœ¨ä½¿ç”¨è‡ªåŠ¨å‘ç°åŠŸèƒ½çš„æ—¶å€™ï¼Œåªèƒ½é€šè¿‡æ³¨è§£æ–¹å¼æ¥æŒ‡å®š JDBC çš„ç±»å‹ã€‚</p><p>ä½ å¯ä»¥åˆ›å»ºèƒ½å¤Ÿå¤„ç†å¤šä¸ªç±»çš„æ³›å‹ç±»å‹å¤„ç†å™¨ã€‚ä¸ºäº†ä½¿ç”¨æ³›å‹ç±»å‹å¤„ç†å™¨ï¼Œ éœ€è¦å¢åŠ ä¸€ä¸ªæ¥å—è¯¥ç±»çš„ class ä½œä¸ºå‚æ•°çš„æ„é€ å™¨ï¼Œè¿™æ · MyBatis ä¼šåœ¨æ„é€ ä¸€ä¸ªç±»å‹å¤„ç†å™¨å®ä¾‹çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªå…·ä½“çš„ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GenericTypeHandler.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericTypeHandler</span>&lt;E <span class="keyword">extends</span> <span class="title class_">MyObject</span>&gt; <span class="keyword">extends</span> <span class="title class_">BaseTypeHandler</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Class&lt;E&gt; type;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">GenericTypeHandler</span><span class="params">(Class&lt;E&gt; type)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="literal">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Type argument cannot be null&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.type = type;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><p><code>EnumTypeHandler</code> å’Œ <code>EnumOrdinalTypeHandler</code> éƒ½æ˜¯æ³›å‹ç±»å‹å¤„ç†å™¨ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†è¯¦ç»†æ¢è®¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰</title>
      <link href="/2021/07/12/MyBatis_4_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D%EF%BC%88typeAliases%EF%BC%89/"/>
      <url>/2021/07/12/MyBatis_4_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D%EF%BC%88typeAliases%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>ç±»å‹åˆ«åå¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªç¼©å†™åå­—ã€‚ å®ƒä»…ç”¨äº XML é…ç½®ï¼Œæ„åœ¨é™ä½å†—ä½™çš„å…¨é™å®šç±»åä¹¦å†™ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Author&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Author&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Blog&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Blog&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Comment&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Comment&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Post&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Post&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Section&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Section&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">alias</span>=<span class="string">&quot;Tag&quot;</span> <span class="attr">type</span>=<span class="string">&quot;domain.blog.Tag&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>å½“è¿™æ ·é…ç½®æ—¶ï¼Œ<code>Blog</code> å¯ä»¥ç”¨åœ¨ä»»ä½•ä½¿ç”¨ <code>domain.blog.Blog</code> çš„åœ°æ–¹ã€‚</p><p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;domain.blog&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªåœ¨åŒ… <code>domain.blog</code> ä¸­çš„ Java Beanï¼Œåœ¨æ²¡æœ‰æ³¨è§£çš„æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ Bean çš„é¦–å­—æ¯å°å†™çš„éé™å®šç±»åæ¥ä½œä¸ºå®ƒçš„åˆ«åã€‚ æ¯”å¦‚ <code>domain.blog.Author</code> çš„åˆ«åä¸º <code>author</code>ï¼›è‹¥æœ‰æ³¨è§£ï¼Œåˆ™åˆ«åä¸ºå…¶æ³¨è§£å€¼ã€‚è§ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;author&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Author</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€äº›ä¸ºå¸¸è§çš„ Java ç±»å‹å†…å»ºçš„ç±»å‹åˆ«åã€‚å®ƒä»¬éƒ½æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œæ³¨æ„ï¼Œä¸ºäº†åº”å¯¹åŸå§‹ç±»å‹çš„å‘½åé‡å¤ï¼Œé‡‡å–äº†ç‰¹æ®Šçš„å‘½åé£æ ¼ã€‚</p><table><thead><tr><th align="left">åˆ«å</th><th align="left">æ˜ å°„çš„ç±»å‹</th></tr></thead><tbody><tr><td align="left">_byte</td><td align="left">byte</td></tr><tr><td align="left">_long</td><td align="left">long</td></tr><tr><td align="left">_short</td><td align="left">short</td></tr><tr><td align="left">_int</td><td align="left">int</td></tr><tr><td align="left">_integer</td><td align="left">int</td></tr><tr><td align="left">_double</td><td align="left">double</td></tr><tr><td align="left">_float</td><td align="left">float</td></tr><tr><td align="left">_boolean</td><td align="left">boolean</td></tr><tr><td align="left">string</td><td align="left">String</td></tr><tr><td align="left">byte</td><td align="left">Byte</td></tr><tr><td align="left">long</td><td align="left">Long</td></tr><tr><td align="left">short</td><td align="left">Short</td></tr><tr><td align="left">int</td><td align="left">Integer</td></tr><tr><td align="left">integer</td><td align="left">Integer</td></tr><tr><td align="left">double</td><td align="left">Double</td></tr><tr><td align="left">float</td><td align="left">Float</td></tr><tr><td align="left">boolean</td><td align="left">Boolean</td></tr><tr><td align="left">date</td><td align="left">Date</td></tr><tr><td align="left">decimal</td><td align="left">BigDecimal</td></tr><tr><td align="left">bigdecimal</td><td align="left">BigDecimal</td></tr><tr><td align="left">object</td><td align="left">Object</td></tr><tr><td align="left">map</td><td align="left">Map</td></tr><tr><td align="left">hashmap</td><td align="left">HashMap</td></tr><tr><td align="left">list</td><td align="left">List</td></tr><tr><td align="left">arraylist</td><td align="left">ArrayList</td></tr><tr><td align="left">collection</td><td align="left">Collection</td></tr><tr><td align="left">iterator</td><td align="left">Iterator</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”è®¾ç½®ï¼ˆsettingsï¼‰</title>
      <link href="/2021/07/10/MyBatis_3_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E8%AE%BE%E7%BD%AE%EF%BC%88settings%EF%BC%89/"/>
      <url>/2021/07/10/MyBatis_3_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E8%AE%BE%E7%BD%AE%EF%BC%88settings%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚ ä¸‹è¡¨æè¿°äº†è®¾ç½®ä¸­å„é¡¹è®¾ç½®çš„å«ä¹‰ã€é»˜è®¤å€¼ç­‰ã€‚</p><span id="more"></span><table><thead><tr><th align="left">è®¾ç½®å</th><th align="left">æè¿°</th><th align="left">æœ‰æ•ˆå€¼</th><th align="left">é»˜è®¤å€¼</th></tr></thead><tbody><tr><td align="left">cacheEnabled</td><td align="left">å…¨å±€æ€§åœ°å¼€å¯æˆ–å…³é—­æ‰€æœ‰æ˜ å°„å™¨é…ç½®æ–‡ä»¶ä¸­å·²é…ç½®çš„ä»»ä½•ç¼“å­˜ã€‚</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">lazyLoadingEnabled</td><td align="left">å»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½® <code>fetchType</code> å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">aggressiveLazyLoading</td><td align="left">å¼€å¯æ—¶ï¼Œä»»ä¸€æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å»¶è¿ŸåŠ è½½å±æ€§ã€‚ å¦åˆ™ï¼Œæ¯ä¸ªå»¶è¿ŸåŠ è½½å±æ€§ä¼šæŒ‰éœ€åŠ è½½ï¼ˆå‚è€ƒ <code>lazyLoadTriggerMethods</code>)ã€‚</td><td align="left">true | false</td><td align="left">false ï¼ˆåœ¨ 3.4.1 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­é»˜è®¤ä¸º trueï¼‰</td></tr><tr><td align="left">multipleResultSetsEnabled</td><td align="left">æ˜¯å¦å…è®¸å•ä¸ªè¯­å¥è¿”å›å¤šç»“æœé›†ï¼ˆéœ€è¦æ•°æ®åº“é©±åŠ¨æ”¯æŒï¼‰ã€‚</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">useColumnLabel</td><td align="left">ä½¿ç”¨åˆ—æ ‡ç­¾ä»£æ›¿åˆ—åã€‚å®é™…è¡¨ç°ä¾èµ–äºæ•°æ®åº“é©±åŠ¨ï¼Œå…·ä½“å¯å‚è€ƒæ•°æ®åº“é©±åŠ¨çš„ç›¸å…³æ–‡æ¡£ï¼Œæˆ–é€šè¿‡å¯¹æ¯”æµ‹è¯•æ¥è§‚å¯Ÿã€‚</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">useGeneratedKeys</td><td align="left">å…è®¸ JDBC æ”¯æŒè‡ªåŠ¨ç”Ÿæˆä¸»é”®ï¼Œéœ€è¦æ•°æ®åº“é©±åŠ¨æ”¯æŒã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œå°†å¼ºåˆ¶ä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆä¸»é”®ã€‚å°½ç®¡ä¸€äº›æ•°æ®åº“é©±åŠ¨ä¸æ”¯æŒæ­¤ç‰¹æ€§ï¼Œä½†ä»å¯æ­£å¸¸å·¥ä½œï¼ˆå¦‚ Derbyï¼‰ã€‚</td><td align="left">true | false</td><td align="left">False</td></tr><tr><td align="left">autoMappingBehavior</td><td align="left">æŒ‡å®š MyBatis åº”å¦‚ä½•è‡ªåŠ¨æ˜ å°„åˆ—åˆ°å­—æ®µæˆ–å±æ€§ã€‚ NONE è¡¨ç¤ºå…³é—­è‡ªåŠ¨æ˜ å°„ï¼›PARTIAL åªä¼šè‡ªåŠ¨æ˜ å°„æ²¡æœ‰å®šä¹‰åµŒå¥—ç»“æœæ˜ å°„çš„å­—æ®µã€‚ FULL ä¼šè‡ªåŠ¨æ˜ å°„ä»»ä½•å¤æ‚çš„ç»“æœé›†ï¼ˆæ— è®ºæ˜¯å¦åµŒå¥—ï¼‰ã€‚</td><td align="left">NONE, PARTIAL, FULL</td><td align="left">PARTIAL</td></tr><tr><td align="left">autoMappingUnknownColumnBehavior</td><td align="left">æŒ‡å®šå‘ç°è‡ªåŠ¨æ˜ å°„ç›®æ ‡æœªçŸ¥åˆ—ï¼ˆæˆ–æœªçŸ¥å±æ€§ç±»å‹ï¼‰çš„è¡Œä¸ºã€‚<code>NONE</code>: ä¸åšä»»ä½•ååº”<code>WARNING</code>: è¾“å‡ºè­¦å‘Šæ—¥å¿—ï¼ˆ<code>&#39;org.apache.ibatis.session.AutoMappingUnknownColumnBehavior&#39;</code> çš„æ—¥å¿—ç­‰çº§å¿…é¡»è®¾ç½®ä¸º <code>WARN</code>ï¼‰<code>FAILING</code>: æ˜ å°„å¤±è´¥ (æŠ›å‡º <code>SqlSessionException</code>)</td><td align="left">NONE, WARNING, FAILING</td><td align="left">NONE</td></tr><tr><td align="left">defaultExecutorType</td><td align="left">é…ç½®é»˜è®¤çš„æ‰§è¡Œå™¨ã€‚SIMPLE å°±æ˜¯æ™®é€šçš„æ‰§è¡Œå™¨ï¼›REUSE æ‰§è¡Œå™¨ä¼šé‡ç”¨é¢„å¤„ç†è¯­å¥ï¼ˆPreparedStatementï¼‰ï¼› BATCH æ‰§è¡Œå™¨ä¸ä»…é‡ç”¨è¯­å¥è¿˜ä¼šæ‰§è¡Œæ‰¹é‡æ›´æ–°ã€‚</td><td align="left">SIMPLE REUSE BATCH</td><td align="left">SIMPLE</td></tr><tr><td align="left">defaultStatementTimeout</td><td align="left">è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå®ƒå†³å®šæ•°æ®åº“é©±åŠ¨ç­‰å¾…æ•°æ®åº“å“åº”çš„ç§’æ•°ã€‚</td><td align="left">ä»»æ„æ­£æ•´æ•°</td><td align="left">æœªè®¾ç½® (null)</td></tr><tr><td align="left">defaultFetchSize</td><td align="left">ä¸ºé©±åŠ¨çš„ç»“æœé›†è·å–æ•°é‡ï¼ˆfetchSizeï¼‰è®¾ç½®ä¸€ä¸ªå»ºè®®å€¼ã€‚æ­¤å‚æ•°åªå¯ä»¥åœ¨æŸ¥è¯¢è®¾ç½®ä¸­è¢«è¦†ç›–ã€‚</td><td align="left">ä»»æ„æ­£æ•´æ•°</td><td align="left">æœªè®¾ç½® (null)</td></tr><tr><td align="left">defaultResultSetType</td><td align="left">æŒ‡å®šè¯­å¥é»˜è®¤çš„æ»šåŠ¨ç­–ç•¥ã€‚ï¼ˆæ–°å¢äº 3.5.2ï¼‰</td><td align="left">FORWARD_ONLY | SCROLL_SENSITIVE | SCROLL_INSENSITIVE | DEFAULTï¼ˆç­‰åŒäºæœªè®¾ç½®ï¼‰</td><td align="left">æœªè®¾ç½® (null)</td></tr><tr><td align="left">safeRowBoundsEnabled</td><td align="left">æ˜¯å¦å…è®¸åœ¨åµŒå¥—è¯­å¥ä¸­ä½¿ç”¨åˆ†é¡µï¼ˆRowBoundsï¼‰ã€‚å¦‚æœå…è®¸ä½¿ç”¨åˆ™è®¾ç½®ä¸º falseã€‚</td><td align="left">true | false</td><td align="left">False</td></tr><tr><td align="left">safeResultHandlerEnabled</td><td align="left">æ˜¯å¦å…è®¸åœ¨åµŒå¥—è¯­å¥ä¸­ä½¿ç”¨ç»“æœå¤„ç†å™¨ï¼ˆResultHandlerï¼‰ã€‚å¦‚æœå…è®¸ä½¿ç”¨åˆ™è®¾ç½®ä¸º falseã€‚</td><td align="left">true | false</td><td align="left">True</td></tr><tr><td align="left">mapUnderscoreToCamelCase</td><td align="left">æ˜¯å¦å¼€å¯é©¼å³°å‘½åè‡ªåŠ¨æ˜ å°„ï¼Œå³ä»ç»å…¸æ•°æ®åº“åˆ—å A_COLUMN æ˜ å°„åˆ°ç»å…¸ Java å±æ€§å aColumnã€‚</td><td align="left">true | false</td><td align="left">False</td></tr><tr><td align="left">localCacheScope</td><td align="left">MyBatis åˆ©ç”¨æœ¬åœ°ç¼“å­˜æœºåˆ¶ï¼ˆLocal Cacheï¼‰é˜²æ­¢å¾ªç¯å¼•ç”¨å’ŒåŠ é€Ÿé‡å¤çš„åµŒå¥—æŸ¥è¯¢ã€‚ é»˜è®¤å€¼ä¸º SESSIONï¼Œä¼šç¼“å­˜ä¸€ä¸ªä¼šè¯ä¸­æ‰§è¡Œçš„æ‰€æœ‰æŸ¥è¯¢ã€‚ è‹¥è®¾ç½®å€¼ä¸º STATEMENTï¼Œæœ¬åœ°ç¼“å­˜å°†ä»…ç”¨äºæ‰§è¡Œè¯­å¥ï¼Œå¯¹ç›¸åŒ SqlSession çš„ä¸åŒæŸ¥è¯¢å°†ä¸ä¼šè¿›è¡Œç¼“å­˜ã€‚</td><td align="left">SESSION | STATEMENT</td><td align="left">SESSION</td></tr><tr><td align="left">jdbcTypeForNull</td><td align="left">å½“æ²¡æœ‰ä¸ºå‚æ•°æŒ‡å®šç‰¹å®šçš„ JDBC ç±»å‹æ—¶ï¼Œç©ºå€¼çš„é»˜è®¤ JDBC ç±»å‹ã€‚ æŸäº›æ•°æ®åº“é©±åŠ¨éœ€è¦æŒ‡å®šåˆ—çš„ JDBC ç±»å‹ï¼Œå¤šæ•°æƒ…å†µç›´æ¥ç”¨ä¸€èˆ¬ç±»å‹å³å¯ï¼Œæ¯”å¦‚ NULLã€VARCHAR æˆ– OTHERã€‚</td><td align="left">JdbcType å¸¸é‡ï¼Œå¸¸ç”¨å€¼ï¼šNULLã€VARCHAR æˆ– OTHERã€‚</td><td align="left">OTHER</td></tr><tr><td align="left">lazyLoadTriggerMethods</td><td align="left">æŒ‡å®šå¯¹è±¡çš„å“ªäº›æ–¹æ³•è§¦å‘ä¸€æ¬¡å»¶è¿ŸåŠ è½½ã€‚</td><td align="left">ç”¨é€—å·åˆ†éš”çš„æ–¹æ³•åˆ—è¡¨ã€‚</td><td align="left">equals,clone,hashCode,toString</td></tr><tr><td align="left">defaultScriptingLanguage</td><td align="left">æŒ‡å®šåŠ¨æ€ SQL ç”Ÿæˆä½¿ç”¨çš„é»˜è®¤è„šæœ¬è¯­è¨€ã€‚</td><td align="left">ä¸€ä¸ªç±»å‹åˆ«åæˆ–å…¨é™å®šç±»åã€‚</td><td align="left">org.apache.ibatis.scripting.xmltags.XMLLanguageDriver</td></tr><tr><td align="left">defaultEnumTypeHandler</td><td align="left">æŒ‡å®š Enum ä½¿ç”¨çš„é»˜è®¤ <code>TypeHandler</code> ã€‚ï¼ˆæ–°å¢äº 3.4.5ï¼‰</td><td align="left">ä¸€ä¸ªç±»å‹åˆ«åæˆ–å…¨é™å®šç±»åã€‚</td><td align="left">org.apache.ibatis.type.EnumTypeHandler</td></tr><tr><td align="left">callSettersOnNulls</td><td align="left">æŒ‡å®šå½“ç»“æœé›†ä¸­å€¼ä¸º null çš„æ—¶å€™æ˜¯å¦è°ƒç”¨æ˜ å°„å¯¹è±¡çš„ setterï¼ˆmap å¯¹è±¡æ—¶ä¸º putï¼‰æ–¹æ³•ï¼Œè¿™åœ¨ä¾èµ–äº Map.keySet() æˆ– null å€¼è¿›è¡Œåˆå§‹åŒ–æ—¶æ¯”è¾ƒæœ‰ç”¨ã€‚æ³¨æ„åŸºæœ¬ç±»å‹ï¼ˆintã€boolean ç­‰ï¼‰æ˜¯ä¸èƒ½è®¾ç½®æˆ null çš„ã€‚</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">returnInstanceForEmptyRow</td><td align="left">å½“è¿”å›è¡Œçš„æ‰€æœ‰åˆ—éƒ½æ˜¯ç©ºæ—¶ï¼ŒMyBatisé»˜è®¤è¿”å› <code>null</code>ã€‚ å½“å¼€å¯è¿™ä¸ªè®¾ç½®æ—¶ï¼ŒMyBatisä¼šè¿”å›ä¸€ä¸ªç©ºå®ä¾‹ã€‚ è¯·æ³¨æ„ï¼Œå®ƒä¹Ÿé€‚ç”¨äºåµŒå¥—çš„ç»“æœé›†ï¼ˆå¦‚é›†åˆæˆ–å…³è”ï¼‰ã€‚ï¼ˆæ–°å¢äº 3.4.2ï¼‰</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">logPrefix</td><td align="left">æŒ‡å®š MyBatis å¢åŠ åˆ°æ—¥å¿—åç§°çš„å‰ç¼€ã€‚</td><td align="left">ä»»ä½•å­—ç¬¦ä¸²</td><td align="left">æœªè®¾ç½®</td></tr><tr><td align="left">logImpl</td><td align="left">æŒ‡å®š MyBatis æ‰€ç”¨æ—¥å¿—çš„å…·ä½“å®ç°ï¼ŒæœªæŒ‡å®šæ—¶å°†è‡ªåŠ¨æŸ¥æ‰¾ã€‚</td><td align="left">SLF4J | LOG4J(deprecated since 3.5.9) | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</td><td align="left">æœªè®¾ç½®</td></tr><tr><td align="left">proxyFactory</td><td align="left">æŒ‡å®š Mybatis åˆ›å»ºå¯å»¶è¿ŸåŠ è½½å¯¹è±¡æ‰€ç”¨åˆ°çš„ä»£ç†å·¥å…·ã€‚</td><td align="left">CGLIB | JAVASSIST</td><td align="left">JAVASSIST ï¼ˆMyBatis 3.3 ä»¥ä¸Šï¼‰</td></tr><tr><td align="left">vfsImpl</td><td align="left">æŒ‡å®š VFS çš„å®ç°</td><td align="left">è‡ªå®šä¹‰ VFS çš„å®ç°çš„ç±»å…¨é™å®šåï¼Œä»¥é€—å·åˆ†éš”ã€‚</td><td align="left">æœªè®¾ç½®</td></tr><tr><td align="left">useActualParamName</td><td align="left">å…è®¸ä½¿ç”¨æ–¹æ³•ç­¾åä¸­çš„åç§°ä½œä¸ºè¯­å¥å‚æ•°åç§°ã€‚ ä¸ºäº†ä½¿ç”¨è¯¥ç‰¹æ€§ï¼Œä½ çš„é¡¹ç›®å¿…é¡»é‡‡ç”¨ Java 8 ç¼–è¯‘ï¼Œå¹¶ä¸”åŠ ä¸Š <code>-parameters</code> é€‰é¡¹ã€‚ï¼ˆæ–°å¢äº 3.4.1ï¼‰</td><td align="left">true | false</td><td align="left">true</td></tr><tr><td align="left">configurationFactory</td><td align="left">æŒ‡å®šä¸€ä¸ªæä¾› <code>Configuration</code> å®ä¾‹çš„ç±»ã€‚ è¿™ä¸ªè¢«è¿”å›çš„ Configuration å®ä¾‹ç”¨æ¥åŠ è½½è¢«ååºåˆ—åŒ–å¯¹è±¡çš„å»¶è¿ŸåŠ è½½å±æ€§å€¼ã€‚ è¿™ä¸ªç±»å¿…é¡»åŒ…å«ä¸€ä¸ªç­¾åä¸º<code>static Configuration getConfiguration()</code> çš„æ–¹æ³•ã€‚ï¼ˆæ–°å¢äº 3.2.3ï¼‰</td><td align="left">ä¸€ä¸ªç±»å‹åˆ«åæˆ–å®Œå…¨é™å®šç±»åã€‚</td><td align="left">æœªè®¾ç½®</td></tr><tr><td align="left">shrinkWhitespacesInSql</td><td align="left">ä»SQLä¸­åˆ é™¤å¤šä½™çš„ç©ºæ ¼å­—ç¬¦ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¹Ÿä¼šå½±å“SQLä¸­çš„æ–‡å­—å­—ç¬¦ä¸²ã€‚ (æ–°å¢äº 3.5.5)</td><td align="left">true | false</td><td align="left">false</td></tr><tr><td align="left">defaultSqlProviderType</td><td align="left">Specifies an sql provider class that holds provider method (Since 3.5.6). This class apply to the <code>type</code>(or <code>value</code>) attribute on sql provider annotation(e.g. <code>@SelectProvider</code>), when these attribute was omitted.</td><td align="left">A type alias or fully qualified class name</td><td align="left">Not set</td></tr><tr><td align="left">nullableOnForEach</td><td align="left">Specifies the default value of â€˜nullableâ€™ attribute on â€˜foreachâ€™ tag. (Since 3.5.9)</td><td align="left">true | false</td><td align="left">false</td></tr></tbody></table><p>ä¸€ä¸ªé…ç½®å®Œæ•´çš„ settings å…ƒç´ çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;multipleResultSetsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useColumnLabel&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;useGeneratedKeys&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PARTIAL&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;autoMappingUnknownColumnBehavior&quot;</span> <span class="attr">value</span>=<span class="string">&quot;WARNING&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultExecutorType&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SIMPLE&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultStatementTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;25&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;defaultFetchSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;safeRowBoundsEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;mapUnderscoreToCamelCase&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;localCacheScope&quot;</span> <span class="attr">value</span>=<span class="string">&quot;SESSION&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;jdbcTypeForNull&quot;</span> <span class="attr">value</span>=<span class="string">&quot;OTHER&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadTriggerMethods&quot;</span> <span class="attr">value</span>=<span class="string">&quot;equals,clone,hashCode,toString&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisé…ç½®â€”å±æ€§ï¼ˆpropertiesï¼‰</title>
      <link href="/2021/07/09/MyBatis_2_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E5%B1%9E%E6%80%A7%EF%BC%88properties%EF%BC%89/"/>
      <url>/2021/07/09/MyBatis_2_MyBatis%E9%85%8D%E7%BD%AE%E2%80%94%E5%B1%9E%E6%80%A7%EF%BC%88properties%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¿›è¡Œé…ç½®ï¼Œå¹¶å¯ä»¥è¿›è¡ŒåŠ¨æ€æ›¿æ¢ã€‚ä½ æ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®è¿™äº›å±æ€§ï¼Œä¹Ÿå¯ä»¥åœ¨ properties å…ƒç´ çš„å­å…ƒç´ ä¸­è®¾ç½®ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/config.properties&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dev_user&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;F2Fa3!33TYyg&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>è®¾ç½®å¥½çš„å±æ€§å¯ä»¥åœ¨æ•´ä¸ªé…ç½®æ–‡ä»¶ä¸­ç”¨æ¥æ›¿æ¢éœ€è¦åŠ¨æ€é…ç½®çš„å±æ€§å€¼ã€‚æ¯”å¦‚:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­çš„ username å’Œ password å°†ä¼šç”± properties å…ƒç´ ä¸­è®¾ç½®çš„ç›¸åº”å€¼æ¥æ›¿æ¢ã€‚ driver å’Œ url å±æ€§å°†ä¼šç”± config.properties æ–‡ä»¶ä¸­å¯¹åº”çš„å€¼æ¥æ›¿æ¢ã€‚è¿™æ ·å°±ä¸ºé…ç½®æä¾›äº†è¯¸å¤šçµæ´»é€‰æ‹©ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨ SqlSessionFactoryBuilder.build() æ–¹æ³•ä¸­ä¼ å…¥å±æ€§å€¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, props);</span><br><span class="line"></span><br><span class="line">// ... æˆ–è€… ...</span><br><span class="line"></span><br><span class="line">SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(reader, environment, props);</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªå±æ€§åœ¨ä¸åªä¸€ä¸ªåœ°æ–¹è¿›è¡Œäº†é…ç½®ï¼Œé‚£ä¹ˆï¼ŒMyBatis å°†æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ¥åŠ è½½ï¼š</p><ul><li>é¦–å…ˆè¯»å–åœ¨ properties å…ƒç´ ä½“å†…æŒ‡å®šçš„å±æ€§ã€‚</li><li>ç„¶åæ ¹æ® properties å…ƒç´ ä¸­çš„ resource å±æ€§è¯»å–ç±»è·¯å¾„ä¸‹å±æ€§æ–‡ä»¶ï¼Œæˆ–æ ¹æ® url å±æ€§æŒ‡å®šçš„è·¯å¾„è¯»å–å±æ€§æ–‡ä»¶ï¼Œå¹¶è¦†ç›–ä¹‹å‰è¯»å–è¿‡çš„åŒåå±æ€§ã€‚</li><li>æœ€åè¯»å–ä½œä¸ºæ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§ï¼Œå¹¶è¦†ç›–ä¹‹å‰è¯»å–è¿‡çš„åŒåå±æ€§ã€‚</li></ul><p>å› æ­¤ï¼Œé€šè¿‡æ–¹æ³•å‚æ•°ä¼ é€’çš„å±æ€§å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œresource&#x2F;url å±æ€§ä¸­æŒ‡å®šçš„é…ç½®æ–‡ä»¶æ¬¡ä¹‹ï¼Œæœ€ä½ä¼˜å…ˆçº§çš„åˆ™æ˜¯ properties å…ƒç´ ä¸­æŒ‡å®šçš„å±æ€§ã€‚</p><p>ä» MyBatis 3.4.2 å¼€å§‹ï¼Œä½ å¯ä»¥ä¸ºå ä½ç¬¦æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username:ut_user&#125;&quot;</span>/&gt;</span> <span class="comment">&lt;!-- å¦‚æœå±æ€§ &#x27;username&#x27; æ²¡æœ‰è¢«é…ç½®ï¼Œ&#x27;username&#x27; å±æ€§çš„å€¼å°†ä¸º &#x27;ut_user&#x27; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç‰¹æ€§é»˜è®¤æ˜¯å…³é—­çš„ã€‚è¦å¯ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªç‰¹å®šçš„å±æ€§æ¥å¼€å¯è¿™ä¸ªç‰¹æ€§ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/config.properties&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis.parsing.PropertyParser.enable-default-value&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span> <span class="comment">&lt;!-- å¯ç”¨é»˜è®¤å€¼ç‰¹æ€§ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æç¤º</strong> å¦‚æœä½ åœ¨å±æ€§åä¸­ä½¿ç”¨äº† <code>&quot;:&quot;</code> å­—ç¬¦ï¼ˆå¦‚ï¼š<code>db:username</code>ï¼‰ï¼Œæˆ–è€…åœ¨ SQL æ˜ å°„ä¸­ä½¿ç”¨äº† OGNL è¡¨è¾¾å¼çš„ä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆå¦‚ï¼š <code>$&#123;tableName != null ? tableName : &#39;global_constants&#39;&#125;</code>ï¼‰ï¼Œå°±éœ€è¦è®¾ç½®ç‰¹å®šçš„å±æ€§æ¥ä¿®æ”¹åˆ†éš”å±æ€§åå’Œé»˜è®¤å€¼çš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/config.properties&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;org.apache.ibatis.parsing.PropertyParser.default-value-separator&quot;</span> <span class="attr">value</span>=<span class="string">&quot;?:&quot;</span>/&gt;</span> <span class="comment">&lt;!-- ä¿®æ”¹é»˜è®¤å€¼çš„åˆ†éš”ç¬¦ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;db:username?:ut_user&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatiså¿«é€Ÿå…¥é—¨</title>
      <link href="/2021/07/08/MyBatis_1_MyBatis%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
      <url>/2021/07/08/MyBatis_1_MyBatis%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-MyBatisï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-MyBatisï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ MyBatisï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ MyBatisï¼Ÿ</h3><p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰ SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis å…é™¤äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œã€‚MyBatis å¯ä»¥é€šè¿‡ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸå§‹ç±»å‹ã€æ¥å£å’Œ Java POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p><span id="more"></span><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>è¦ä½¿ç”¨ MyBatisï¼Œ åªéœ€å°† <a href="https://github.com/mybatis/mybatis-3/releases">mybatis-x.x.x.jar</a> æ–‡ä»¶ç½®äºç±»è·¯å¾„ï¼ˆclasspathï¼‰ä¸­å³å¯ã€‚</p><p>å¦‚æœä½¿ç”¨ Maven æ¥æ„å»ºé¡¹ç›®ï¼Œåˆ™éœ€å°†ä¸‹é¢çš„ä¾èµ–ä»£ç ç½®äº pom.xml æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>x.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä»-XML-ä¸­æ„å»º-SqlSessionFactory"><a href="#ä»-XML-ä¸­æ„å»º-SqlSessionFactory" class="headerlink" title="ä» XML ä¸­æ„å»º SqlSessionFactory"></a>ä» XML ä¸­æ„å»º SqlSessionFactory</h3><p>æ¯ä¸ªåŸºäº MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª SqlSessionFactory çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ã€‚SqlSessionFactory çš„å®ä¾‹å¯ä»¥é€šè¿‡ SqlSessionFactoryBuilder è·å¾—ã€‚è€Œ SqlSessionFactoryBuilder åˆ™å¯ä»¥ä» XML é…ç½®æ–‡ä»¶æˆ–ä¸€ä¸ªé¢„å…ˆé…ç½®çš„ Configuration å®ä¾‹æ¥æ„å»ºå‡º SqlSessionFactory å®ä¾‹ã€‚</p><p>ä» XML æ–‡ä»¶ä¸­æ„å»º SqlSessionFactory çš„å®ä¾‹éå¸¸ç®€å•ï¼Œå»ºè®®ä½¿ç”¨ç±»è·¯å¾„ä¸‹çš„èµ„æºæ–‡ä»¶è¿›è¡Œé…ç½®ã€‚ ä½†ä¹Ÿå¯ä»¥ä½¿ç”¨ä»»æ„çš„è¾“å…¥æµï¼ˆInputStreamï¼‰å®ä¾‹ï¼Œæ¯”å¦‚ç”¨æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²æˆ– file:&#x2F;&#x2F; URL æ„é€ çš„è¾“å…¥æµã€‚MyBatis åŒ…å«ä¸€ä¸ªåå« Resources çš„å·¥å…·ç±»ï¼Œå®ƒåŒ…å«ä¸€äº›å®ç”¨æ–¹æ³•ï¼Œä½¿å¾—ä»ç±»è·¯å¾„æˆ–å…¶å®ƒä½ç½®åŠ è½½èµ„æºæ–‡ä»¶æ›´åŠ å®¹æ˜“ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;org/mybatis/example/mybatis-config.xml&quot;</span>;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br></pre></td></tr></table></figure><p>XML é…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å¯¹ MyBatis ç³»ç»Ÿçš„æ ¸å¿ƒè®¾ç½®ï¼ŒåŒ…æ‹¬è·å–æ•°æ®åº“è¿æ¥å®ä¾‹çš„æ•°æ®æºï¼ˆDataSourceï¼‰ä»¥åŠå†³å®šäº‹åŠ¡ä½œç”¨åŸŸå’Œæ§åˆ¶æ–¹å¼çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆTransactionManagerï¼‰ã€‚åé¢ä¼šå†æ¢è®¨ XML é…ç½®æ–‡ä»¶çš„è¯¦ç»†å†…å®¹ï¼Œè¿™é‡Œå…ˆç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šå¯ä»¥åœ¨ XML æ–‡ä»¶ä¸­é…ç½®çš„é€‰é¡¹ï¼Œä¸Šé¢çš„ç¤ºä¾‹ä»…ç½—åˆ—äº†æœ€å…³é”®çš„éƒ¨åˆ†ã€‚ æ³¨æ„ XML å¤´éƒ¨çš„å£°æ˜ï¼Œå®ƒç”¨æ¥éªŒè¯ XML æ–‡æ¡£çš„æ­£ç¡®æ€§ã€‚environment å…ƒç´ ä½“ä¸­åŒ…å«äº†äº‹åŠ¡ç®¡ç†å’Œè¿æ¥æ± çš„é…ç½®ã€‚mappers å…ƒç´ åˆ™åŒ…å«äº†ä¸€ç»„æ˜ å°„å™¨ï¼ˆmapperï¼‰ï¼Œè¿™äº›æ˜ å°„å™¨çš„ XML æ˜ å°„æ–‡ä»¶åŒ…å«äº† SQL ä»£ç å’Œæ˜ å°„å®šä¹‰ä¿¡æ¯ã€‚</p><h3 id="ä¸ä½¿ç”¨-XML-æ„å»º-SqlSessionFactory"><a href="#ä¸ä½¿ç”¨-XML-æ„å»º-SqlSessionFactory" class="headerlink" title="ä¸ä½¿ç”¨ XML æ„å»º SqlSessionFactory"></a>ä¸ä½¿ç”¨ XML æ„å»º SqlSessionFactory</h3><p>å¦‚æœä½ æ›´æ„¿æ„ç›´æ¥ä» Java ä»£ç è€Œä¸æ˜¯ XML æ–‡ä»¶ä¸­åˆ›å»ºé…ç½®ï¼Œæˆ–è€…æƒ³è¦åˆ›å»ºä½ è‡ªå·±çš„é…ç½®å»ºé€ å™¨ï¼ŒMyBatis ä¹Ÿæä¾›äº†å®Œæ•´çš„é…ç½®ç±»ï¼Œæä¾›äº†æ‰€æœ‰ä¸ XML æ–‡ä»¶ç­‰ä»·çš„é…ç½®é¡¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> BlogDataSourceFactory.getBlogDataSource();</span><br><span class="line"><span class="type">TransactionFactory</span> <span class="variable">transactionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTransactionFactory</span>();</span><br><span class="line"><span class="type">Environment</span> <span class="variable">environment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Environment</span>(<span class="string">&quot;development&quot;</span>, transactionFactory, dataSource);</span><br><span class="line"><span class="type">Configuration</span> <span class="variable">configuration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Configuration</span>(environment);</span><br><span class="line">configuration.addMapper(BlogMapper.class);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(configuration);</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¯¥ä¾‹ä¸­ï¼Œconfiguration æ·»åŠ äº†ä¸€ä¸ªæ˜ å°„å™¨ç±»ï¼ˆmapper classï¼‰ã€‚æ˜ å°„å™¨ç±»æ˜¯ Java ç±»ï¼Œå®ƒä»¬åŒ…å« SQL æ˜ å°„æ³¨è§£ä»è€Œé¿å…ä¾èµ– XML æ–‡ä»¶ã€‚ä¸è¿‡ï¼Œç”±äº Java æ³¨è§£çš„ä¸€äº›é™åˆ¶ä»¥åŠæŸäº› MyBatis æ˜ å°„çš„å¤æ‚æ€§ï¼Œè¦ä½¿ç”¨å¤§å¤šæ•°é«˜çº§æ˜ å°„ï¼ˆæ¯”å¦‚ï¼šåµŒå¥—è”åˆæ˜ å°„ï¼‰ï¼Œä»ç„¶éœ€è¦ä½¿ç”¨ XML é…ç½®ã€‚æœ‰é‰´äºæ­¤ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªåŒå XML é…ç½®æ–‡ä»¶ï¼ŒMyBatis ä¼šè‡ªåŠ¨æŸ¥æ‰¾å¹¶åŠ è½½å®ƒï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŸºäºç±»è·¯å¾„å’Œ BlogMapper.class çš„ç±»åï¼Œä¼šåŠ è½½ BlogMapper.xmlï¼‰ã€‚å…·ä½“ç»†èŠ‚ç¨åè®¨è®ºã€‚</p><h3 id="ä»-SqlSessionFactory-ä¸­è·å–-SqlSession"><a href="#ä»-SqlSessionFactory-ä¸­è·å–-SqlSession" class="headerlink" title="ä» SqlSessionFactory ä¸­è·å– SqlSession"></a>ä» SqlSessionFactory ä¸­è·å– SqlSession</h3><p>æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹ã€‚SqlSession æä¾›äº†åœ¨æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡ SqlSession å®ä¾‹æ¥ç›´æ¥æ‰§è¡Œå·²æ˜ å°„çš„ SQL è¯­å¥ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  <span class="type">Blog</span> <span class="variable">blog</span> <span class="operator">=</span> (Blog) session.selectOne(<span class="string">&quot;org.mybatis.example.BlogMapper.selectBlog&quot;</span>, <span class="number">101</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯šç„¶ï¼Œè¿™ç§æ–¹å¼èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå¯¹ä½¿ç”¨æ—§ç‰ˆæœ¬ MyBatis çš„ç”¨æˆ·æ¥è¯´ä¹Ÿæ¯”è¾ƒç†Ÿæ‚‰ã€‚ä½†ç°åœ¨æœ‰äº†ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼â€”â€”ä½¿ç”¨å’ŒæŒ‡å®šè¯­å¥çš„å‚æ•°å’Œè¿”å›å€¼ç›¸åŒ¹é…çš„æ¥å£ï¼ˆæ¯”å¦‚ BlogMapper.classï¼‰ï¼Œç°åœ¨ä½ çš„ä»£ç ä¸ä»…æ›´æ¸…æ™°ï¼Œæ›´åŠ ç±»å‹å®‰å…¨ï¼Œè¿˜ä¸ç”¨æ‹…å¿ƒå¯èƒ½å‡ºé”™çš„å­—ç¬¦ä¸²å­—é¢å€¼ä»¥åŠå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(BlogMapper.class);</span><br><span class="line">  <span class="type">Blog</span> <span class="variable">blog</span> <span class="operator">=</span> mapper.selectBlog(<span class="number">101</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬æ¥æ¢ç©¶ä¸€ä¸‹è¿™æ®µä»£ç ç©¶ç«Ÿåšäº†äº›ä»€ä¹ˆã€‚</p><h3 id="æ¢ç©¶å·²æ˜ å°„çš„-SQL-è¯­å¥"><a href="#æ¢ç©¶å·²æ˜ å°„çš„-SQL-è¯­å¥" class="headerlink" title="æ¢ç©¶å·²æ˜ å°„çš„ SQL è¯­å¥"></a>æ¢ç©¶å·²æ˜ å°„çš„ SQL è¯­å¥</h3><p>ç°åœ¨ä½ å¯èƒ½å¾ˆæƒ³çŸ¥é“ SqlSession å’Œ Mapper åˆ°åº•å…·ä½“æ‰§è¡Œäº†äº›ä»€ä¹ˆæ“ä½œï¼Œä½† SQL è¯­å¥æ˜ å°„æ˜¯ä¸ªç›¸å½“å¹¿æ³›çš„è¯é¢˜ï¼Œå¯èƒ½ä¼šå å»æ–‡æ¡£çš„å¤§éƒ¨åˆ†ç¯‡å¹…ã€‚ ä½†ä¸ºäº†è®©ä½ èƒ½å¤Ÿäº†è§£ä¸ªå¤§æ¦‚ï¼Œè¿™é‡Œä¼šç»™å‡ºå‡ ä¸ªä¾‹å­ã€‚</p><p>åœ¨ä¸Šé¢æåˆ°çš„ä¾‹å­ä¸­ï¼Œä¸€ä¸ªè¯­å¥æ—¢å¯ä»¥é€šè¿‡ XML å®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ³¨è§£å®šä¹‰ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹ XML å®šä¹‰è¯­å¥çš„æ–¹å¼ï¼Œäº‹å®ä¸Š MyBatis æä¾›çš„æ‰€æœ‰ç‰¹æ€§éƒ½å¯ä»¥åˆ©ç”¨åŸºäº XML çš„æ˜ å°„è¯­è¨€æ¥å®ç°ï¼Œè¿™ä½¿å¾— MyBatis åœ¨è¿‡å»çš„æ•°å¹´é—´å¾—ä»¥æµè¡Œã€‚å¦‚æœä½ ç”¨è¿‡æ—§ç‰ˆæœ¬çš„ MyBatisï¼Œä½ åº”è¯¥å¯¹è¿™ä¸ªæ¦‚å¿µæ¯”è¾ƒç†Ÿæ‚‰ã€‚ ä½†ç›¸æ¯”äºä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬æ”¹è¿›äº†è®¸å¤š XML çš„é…ç½®ï¼Œåé¢æˆ‘ä»¬ä¼šæåˆ°è¿™äº›æ”¹è¿›ã€‚è¿™é‡Œç»™å‡ºä¸€ä¸ªåŸºäº XML æ˜ å°„è¯­å¥çš„ç¤ºä¾‹ï¼Œå®ƒåº”è¯¥å¯ä»¥æ»¡è¶³ä¸Šä¸ªç¤ºä¾‹ä¸­ SqlSession çš„è°ƒç”¨ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;org.mybatis.example.BlogMapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">    select * from Blog where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¼¼ä¹å†™äº†ä¸å°‘é…ç½®ï¼Œä½†å…¶å®å¹¶ä¸å¤šã€‚åœ¨ä¸€ä¸ª XML æ˜ å°„æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å®šä¹‰æ— æ•°ä¸ªæ˜ å°„è¯­å¥ï¼Œè¿™æ ·ä¸€æ¥ï¼ŒXML å¤´éƒ¨å’Œæ–‡æ¡£ç±»å‹å£°æ˜éƒ¨åˆ†å°±æ˜¾å¾—å¾®ä¸è¶³é“äº†ã€‚æ–‡æ¡£çš„å…¶å®ƒéƒ¨åˆ†å¾ˆç›´ç™½ï¼Œå®¹æ˜“ç†è§£ã€‚ å®ƒåœ¨å‘½åç©ºé—´ â€œorg.mybatis.example.BlogMapperâ€ ä¸­å®šä¹‰äº†ä¸€ä¸ªåä¸º â€œselectBlogâ€ çš„æ˜ å°„è¯­å¥ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨å…¨é™å®šå â€œorg.mybatis.example.BlogMapper.selectBlogâ€ æ¥è°ƒç”¨æ˜ å°„è¯­å¥äº†ï¼Œå°±åƒä¸Šé¢ä¾‹å­ä¸­é‚£æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Blog blog = (Blog) session.selectOne(&quot;org.mybatis.example.BlogMapper.selectBlog&quot;, 101);</span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè¿™ç§æ–¹å¼å’Œç”¨å…¨é™å®šåè°ƒç”¨ Java å¯¹è±¡çš„æ–¹æ³•ç±»ä¼¼ã€‚è¿™æ ·ï¼Œè¯¥å‘½åå°±å¯ä»¥ç›´æ¥æ˜ å°„åˆ°åœ¨å‘½åç©ºé—´ä¸­åŒåçš„æ˜ å°„å™¨ç±»ï¼Œå¹¶å°†å·²æ˜ å°„çš„ select è¯­å¥åŒ¹é…åˆ°å¯¹åº”åç§°ã€å‚æ•°å’Œè¿”å›ç±»å‹çš„æ–¹æ³•ã€‚å› æ­¤ä½ å°±å¯ä»¥åƒä¸Šé¢é‚£æ ·ï¼Œä¸è´¹å¹ç°ä¹‹åŠ›åœ°åœ¨å¯¹åº”çš„æ˜ å°„å™¨æ¥å£è°ƒç”¨æ–¹æ³•ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BlogMapper mapper = session.getMapper(BlogMapper.class);</span><br><span class="line">Blog blog = mapper.selectBlog(101);</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æœ‰å¾ˆå¤šä¼˜åŠ¿ï¼Œé¦–å…ˆå®ƒä¸ä¾èµ–äºå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œä¼šæ›´å®‰å…¨ä¸€ç‚¹ï¼›å…¶æ¬¡ï¼Œå¦‚æœä½ çš„ IDE æœ‰ä»£ç è¡¥å…¨åŠŸèƒ½ï¼Œé‚£ä¹ˆä»£ç è¡¥å…¨å¯ä»¥å¸®ä½ å¿«é€Ÿé€‰æ‹©åˆ°æ˜ å°„å¥½çš„ SQL è¯­å¥ã€‚</p><hr><p><strong>æç¤º</strong> <strong>å¯¹å‘½åç©ºé—´çš„ä¸€ç‚¹è¡¥å……</strong></p><p>åœ¨ä¹‹å‰ç‰ˆæœ¬çš„ MyBatis ä¸­ï¼Œ<strong>å‘½åç©ºé—´ï¼ˆNamespacesï¼‰</strong>çš„ä½œç”¨å¹¶ä¸å¤§ï¼Œæ˜¯å¯é€‰çš„ã€‚ ä½†ç°åœ¨ï¼Œéšç€å‘½åç©ºé—´è¶Šå‘é‡è¦ï¼Œä½ å¿…é¡»æŒ‡å®šå‘½åç©ºé—´ã€‚</p><p><strong>å‘½åç©ºé—´çš„ä½œç”¨æœ‰ä¸¤ä¸ª</strong>ï¼Œä¸€ä¸ªæ˜¯åˆ©ç”¨æ›´é•¿çš„å…¨é™å®šåæ¥å°†ä¸åŒçš„è¯­å¥éš”ç¦»å¼€æ¥ï¼ŒåŒæ—¶ä¹Ÿå®ç°äº†ä½ ä¸Šé¢è§åˆ°çš„æ¥å£ç»‘å®šã€‚å°±ç®—ä½ è§‰å¾—æš‚æ—¶ç”¨ä¸åˆ°æ¥å£ç»‘å®šï¼Œä½ ä¹Ÿåº”è¯¥éµå¾ªè¿™é‡Œçš„è§„å®šï¼Œä»¥é˜²å“ªå¤©ä½ æ”¹å˜äº†ä¸»æ„ã€‚ é•¿è¿œæ¥çœ‹ï¼Œåªè¦å°†å‘½åç©ºé—´ç½®äºåˆé€‚çš„ Java åŒ…å‘½åç©ºé—´ä¹‹ä¸­ï¼Œä½ çš„ä»£ç ä¼šå˜å¾—æ›´åŠ æ•´æ´ï¼Œä¹Ÿæœ‰åˆ©äºä½ æ›´æ–¹ä¾¿åœ°ä½¿ç”¨ MyBatisã€‚</p><p><strong>å‘½åè§£æï¼š</strong>ä¸ºäº†å‡å°‘è¾“å…¥é‡ï¼ŒMyBatis å¯¹æ‰€æœ‰å…·æœ‰åç§°çš„é…ç½®å…ƒç´ ï¼ˆåŒ…æ‹¬è¯­å¥ï¼Œç»“æœæ˜ å°„ï¼Œç¼“å­˜ç­‰ï¼‰ä½¿ç”¨äº†å¦‚ä¸‹çš„å‘½åè§£æè§„åˆ™ã€‚</p><ul><li>å…¨é™å®šåï¼ˆæ¯”å¦‚ â€œcom.mypackage.MyMapper.selectAllThingsï¼‰å°†è¢«ç›´æ¥ç”¨äºæŸ¥æ‰¾åŠä½¿ç”¨ã€‚</li><li>çŸ­åç§°ï¼ˆæ¯”å¦‚ â€œselectAllThingsâ€ï¼‰å¦‚æœå…¨å±€å”¯ä¸€ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„å¼•ç”¨ã€‚ å¦‚æœä¸å”¯ä¸€ï¼Œæœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„ç›¸åŒåç§°ï¼ˆæ¯”å¦‚ â€œcom.foo.selectAllThingsâ€ å’Œ â€œcom.bar.selectAllThingsâ€ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨æ—¶å°±ä¼šäº§ç”Ÿâ€œçŸ­åç§°ä¸å”¯ä¸€â€çš„é”™è¯¯ï¼Œè¿™ç§æƒ…å†µä¸‹å°±å¿…é¡»ä½¿ç”¨å…¨é™å®šåã€‚</li></ul><hr><p>å¯¹äºåƒ BlogMapper è¿™æ ·çš„æ˜ å°„å™¨ç±»æ¥è¯´ï¼Œè¿˜æœ‰å¦ä¸€ç§æ–¹æ³•æ¥å®Œæˆè¯­å¥æ˜ å°„ã€‚ å®ƒä»¬æ˜ å°„çš„è¯­å¥å¯ä»¥ä¸ç”¨ XML æ¥é…ç½®ï¼Œè€Œå¯ä»¥ä½¿ç”¨ Java æ³¨è§£æ¥é…ç½®ã€‚æ¯”å¦‚ï¼Œä¸Šé¢çš„ XML ç¤ºä¾‹å¯ä»¥è¢«æ›¿æ¢æˆå¦‚ä¸‹çš„é…ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.mybatis.example;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BlogMapper</span> &#123;</span><br><span class="line">  <span class="meta">@Select(&quot;SELECT * FROM blog WHERE id = #&#123;id&#125;&quot;)</span></span><br><span class="line">  Blog <span class="title function_">selectBlog</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ³¨è§£æ¥æ˜ å°„ç®€å•è¯­å¥ä¼šä½¿ä»£ç æ˜¾å¾—æ›´åŠ ç®€æ´ï¼Œä½†å¯¹äºç¨å¾®å¤æ‚ä¸€ç‚¹çš„è¯­å¥ï¼ŒJava æ³¨è§£ä¸ä»…åŠ›ä¸ä»å¿ƒï¼Œè¿˜ä¼šè®©ä½ æœ¬å°±å¤æ‚çš„ SQL è¯­å¥æ›´åŠ æ··ä¹±ä¸å ªã€‚ å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦åšä¸€äº›å¾ˆå¤æ‚çš„æ“ä½œï¼Œæœ€å¥½ç”¨ XML æ¥æ˜ å°„è¯­å¥ã€‚</p><p>é€‰æ‹©ä½•ç§æ–¹å¼æ¥é…ç½®æ˜ å°„ï¼Œä»¥åŠè®¤ä¸ºæ˜¯å¦åº”è¯¥è¦ç»Ÿä¸€æ˜ å°„è¯­å¥å®šä¹‰çš„å½¢å¼ï¼Œå®Œå…¨å–å†³äºä½ å’Œä½ çš„å›¢é˜Ÿã€‚ æ¢å¥è¯è¯´ï¼Œæ°¸è¿œä¸è¦æ‹˜æ³¥äºä¸€ç§æ–¹å¼ï¼Œä½ å¯ä»¥å¾ˆè½»æ¾çš„åœ¨åŸºäºæ³¨è§£å’Œ XML çš„è¯­å¥æ˜ å°„æ–¹å¼é—´è‡ªç”±ç§»æ¤å’Œåˆ‡æ¢ã€‚</p><h3 id="ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ"><a href="#ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ"></a>ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ</h3><p>ç†è§£æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„ä¸åŒä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸç±»åˆ«æ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜ã€‚</p><hr><p><strong>æç¤º</strong> <strong>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–æ³¨å…¥æ¡†æ¶</strong></p><p>ä¾èµ–æ³¨å…¥æ¡†æ¶å¯ä»¥åˆ›å»ºçº¿ç¨‹å®‰å…¨çš„ã€åŸºäºäº‹åŠ¡çš„ SqlSession å’Œæ˜ å°„å™¨ï¼Œå¹¶å°†å®ƒä»¬ç›´æ¥æ³¨å…¥åˆ°ä½ çš„ bean ä¸­ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å¿½ç•¥å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸã€‚ å¦‚æœå¯¹å¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥æ¡†æ¶ä½¿ç”¨ MyBatis æ„Ÿå…´è¶£ï¼Œå¯ä»¥ç ”ç©¶ä¸€ä¸‹ MyBatis-Spring æˆ– MyBatis-Guice ä¸¤ä¸ªå­é¡¹ç›®ã€‚</p><hr><h4 id="SqlSessionFactoryBuilder"><a href="#SqlSessionFactoryBuilder" class="headerlink" title="SqlSessionFactoryBuilder"></a>SqlSessionFactoryBuilder</h4><p>è¿™ä¸ªç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€ä½¿ç”¨å’Œä¸¢å¼ƒï¼Œä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†ã€‚ å› æ­¤ SqlSessionFactoryBuilder å®ä¾‹çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯æ–¹æ³•ä½œç”¨åŸŸï¼ˆä¹Ÿå°±æ˜¯å±€éƒ¨æ–¹æ³•å˜é‡ï¼‰ã€‚ ä½ å¯ä»¥é‡ç”¨ SqlSessionFactoryBuilder æ¥åˆ›å»ºå¤šä¸ª SqlSessionFactory å®ä¾‹ï¼Œä½†æœ€å¥½è¿˜æ˜¯ä¸è¦ä¸€ç›´ä¿ç•™ç€å®ƒï¼Œä»¥ä¿è¯æ‰€æœ‰çš„ XML è§£æèµ„æºå¯ä»¥è¢«é‡Šæ”¾ç»™æ›´é‡è¦çš„äº‹æƒ…ã€‚</p><h4 id="SqlSessionFactory"><a href="#SqlSessionFactory" class="headerlink" title="SqlSessionFactory"></a>SqlSessionFactory</h4><p>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚ ä½¿ç”¨ SqlSessionFactory çš„æœ€ä½³å®è·µæ˜¯åœ¨åº”ç”¨è¿è¡ŒæœŸé—´ä¸è¦é‡å¤åˆ›å»ºå¤šæ¬¡ï¼Œå¤šæ¬¡é‡å»º SqlSessionFactory è¢«è§†ä¸ºä¸€ç§ä»£ç â€œåä¹ æƒ¯â€ã€‚å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥åšåˆ°ï¼Œæœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</p><h4 id="SqlSession"><a href="#SqlSession" class="headerlink" title="SqlSession"></a>SqlSession</h4><p>æ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç»å¯¹ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€åŸŸï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹å˜é‡ä¹Ÿä¸è¡Œã€‚ ä¹Ÿç»ä¸èƒ½å°† SqlSession å®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä»»ä½•ç±»å‹çš„æ‰˜ç®¡ä½œç”¨åŸŸä¸­ï¼Œæ¯”å¦‚ Servlet æ¡†æ¶ä¸­çš„ HttpSessionã€‚ å¦‚æœä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨ä¸€ç§ Web æ¡†æ¶ï¼Œè€ƒè™‘å°† SqlSession æ”¾åœ¨ä¸€ä¸ªå’Œ HTTP è¯·æ±‚ç›¸ä¼¼çš„ä½œç”¨åŸŸä¸­ã€‚ æ¢å¥è¯è¯´ï¼Œæ¯æ¬¡æ”¶åˆ° HTTP è¯·æ±‚ï¼Œå°±å¯ä»¥æ‰“å¼€ä¸€ä¸ª SqlSessionï¼Œè¿”å›ä¸€ä¸ªå“åº”åï¼Œå°±å…³é—­å®ƒã€‚ è¿™ä¸ªå…³é—­æ“ä½œå¾ˆé‡è¦ï¼Œä¸ºäº†ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­æ“ä½œï¼Œä½ åº”è¯¥æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å°±æ˜¯ä¸€ä¸ªç¡®ä¿ SqlSession å…³é—­çš„æ ‡å‡†æ¨¡å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  <span class="comment">// ä½ çš„åº”ç”¨é€»è¾‘ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ‰€æœ‰ä»£ç ä¸­éƒ½éµå¾ªè¿™ç§ä½¿ç”¨æ¨¡å¼ï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰æ•°æ®åº“èµ„æºéƒ½èƒ½è¢«æ­£ç¡®åœ°å…³é—­ã€‚</p><h4 id="æ˜ å°„å™¨å®ä¾‹"><a href="#æ˜ å°„å™¨å®ä¾‹" class="headerlink" title="æ˜ å°„å™¨å®ä¾‹"></a>æ˜ å°„å™¨å®ä¾‹</h4><p>æ˜ å°„å™¨æ˜¯ä¸€äº›ç»‘å®šæ˜ å°„è¯­å¥çš„æ¥å£ã€‚æ˜ å°„å™¨æ¥å£çš„å®ä¾‹æ˜¯ä» SqlSession ä¸­è·å¾—çš„ã€‚è™½ç„¶ä»æŠ€æœ¯å±‚é¢ä¸Šæ¥è®²ï¼Œä»»ä½•æ˜ å°„å™¨å®ä¾‹çš„æœ€å¤§ä½œç”¨åŸŸä¸è¯·æ±‚å®ƒä»¬çš„ SqlSession ç›¸åŒã€‚ä½†æ–¹æ³•ä½œç”¨åŸŸæ‰æ˜¯æ˜ å°„å™¨å®ä¾‹çš„æœ€åˆé€‚çš„ä½œç”¨åŸŸã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜ å°„å™¨å®ä¾‹åº”è¯¥åœ¨è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ä¸­è¢«è·å–ï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åå³å¯ä¸¢å¼ƒã€‚ æ˜ å°„å™¨å®ä¾‹å¹¶ä¸éœ€è¦è¢«æ˜¾å¼åœ°å…³é—­ã€‚å°½ç®¡åœ¨æ•´ä¸ªè¯·æ±‚ä½œç”¨åŸŸä¿ç•™æ˜ å°„å™¨å®ä¾‹ä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½ å¾ˆå¿«ä¼šå‘ç°ï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸä¸Šç®¡ç†å¤ªå¤šåƒ SqlSession çš„èµ„æºä¼šè®©ä½ å¿™ä¸è¿‡æ¥ã€‚ å› æ­¤ï¼Œæœ€å¥½å°†æ˜ å°„å™¨æ”¾åœ¨æ–¹æ³•ä½œç”¨åŸŸå†…ã€‚å°±åƒä¸‹é¢çš„ä¾‹å­ä¸€æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession()) &#123;</span><br><span class="line">  <span class="type">BlogMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> session.getMapper(BlogMapper.class);</span><br><span class="line">  <span class="comment">// ä½ çš„åº”ç”¨é€»è¾‘ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyBatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†æ”¯ç®¡ç†</title>
      <link href="/2021/06/22/git_2_%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/"/>
      <url>/2021/06/22/git_2_%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<ul><li>åˆ†æ”¯<ul><li><p>ç”±æ¯æ¬¡æäº¤çš„ä»£ç ï¼Œä¸²æˆçš„ä¸€æ¡æ—¶é—´çº¿</p></li><li><p>ä½¿ç”¨åˆ†æ”¯æ„å‘³ç€ä½ å¯ä»¥æŠŠä½ çš„å·¥ä½œä»å¼€å‘ä¸»çº¿ä¸Šåˆ†ç¦»å¼€æ¥ï¼Œä»¥å…å½±å“å¼€å‘ä¸»çº¿</p></li></ul></li></ul><span id="more"></span><ul><li><p>åˆ†æ”¯çš„ä½¿ç”¨åœºæ™¯</p><ol><li>å‘¨æœŸè¾ƒé•¿çš„æ¨¡å—å¼€å‘<br>å‡è®¾ä½ å‡†å¤‡å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦ä¸€ä¸ªæœˆæ‰èƒ½å®Œæˆ<br>ç¬¬ä¸€å‘¨å†™äº†20%çš„ä»£ç ï¼Œçªç„¶å‘ç°åŸæ¥å·²ç»å†™å¥½çš„åŠŸèƒ½å‡ºç°äº†ä¸€ä¸ªä¸¥é‡çš„Bug<br>é‚£ç°åœ¨å°±éœ€è¦æ”¾ä¸‹æ‰‹ä¸­çš„æ–°åŠŸèƒ½ï¼Œå»ä¿®å¤Bug<br>ä½†è¿™20%çš„ä»£ç ä¸èƒ½èˆå¼ƒï¼Œå¹¶ä¸”ä¹Ÿæ‹…å¿ƒä¸¢å¤±ï¼Œè¿™å°±éœ€è¦å¼€å¯ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬æ§åˆ¶ã€‚</li><li>å°è¯•æ€§çš„æ¨¡å—å¼€å‘<br>ä¸šåŠ¡äººå‘˜ç»™æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªéœ€æ±‚ï¼Œç»è¿‡æˆ‘ä»¬çš„æ€è€ƒå’Œåˆ†æ<br>è¯¥éœ€æ±‚åº”è¯¥å¯ä»¥ä½¿ç”¨æŠ€æœ¯æ‰‹æ®µè¿›è¡Œå®ç°ã€‚<br>ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸æ•¢ç¡®å®šï¼Œæˆ‘ä»¬å°±å¯ä»¥å»åˆ›å»ºä¸€ä¸ªåˆ†æ”¯åŸºäºåˆ†æ”¯è¿›è¡Œå°è¯•æ€§å¼€å‘ã€‚</li></ol></li><li><p>åˆ†æ”¯å·¥ä½œæµç¨‹</p><ul><li><p>Master: æŒ‡å‘æäº¤çš„ä»£ç ç‰ˆæœ¬</p></li><li><p>Header: æŒ‡å‘å½“å‰æ‰€ä½¿ç”¨çš„çš„åˆ†æ”¯</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/git2_1.png"></p></li></ul></li><li><pre><code>+ åˆ›å»ºå’Œåˆ‡æ¢  åˆ›å»ºå‘½ä»¤ï¼šgit branch åˆ†æ”¯å  åˆ‡æ¢å‘½ä»¤ï¼šgit checkout åˆ†æ”¯å+ æ–°åˆ†æ”¯æ·»åŠ æ–‡ä»¶  æŸ¥çœ‹æ–‡ä»¶å‘½ä»¤ï¼šls  æ€»ç»“ï¼šä¸åŒåˆ†æ”¯ä¹‹é—´çš„å…³ç³»æ˜¯å¹³è¡Œçš„å…³ç³»ï¼Œä¸ä¼šç›¸äº’å½±å“+ åˆå¹¶åˆ†æ”¯  åˆå¹¶å‘½ä»¤ï¼šgit merge åˆ†æ”¯å+ åˆ é™¤åˆ†æ”¯  åˆ é™¤å‘½ä»¤ï¼šgit branch -d åˆ†æ”¯å+ æŸ¥çœ‹åˆ†æ”¯åˆ—è¡¨  æŸ¥çœ‹å‘½ä»¤ï¼šgit branch</code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Githubçš„.gitignoreå¿½ç•¥æ–‡ä»¶</title>
      <link href="/2021/06/21/git_1_gitignore/"/>
      <url>/2021/06/21/git_1_gitignore/</url>
      
        <content type="html"><![CDATA[<p>ä¸€å®šè¦å…»æˆåœ¨é¡¹ç›®å¼€å§‹å°±åˆ›å»º.gitignoreæ–‡ä»¶çš„ä¹ æƒ¯ï¼Œå¦åˆ™ä¸€æ—¦pushï¼Œå¤„ç†èµ·æ¥ä¼šéå¸¸éº»çƒ¦ã€‚</p><p>å½“ç„¶å¦‚æœå·²ç»pushäº†æ€ä¹ˆåŠ ï¼Ÿ</p><p>å½“ç„¶ä¹Ÿæœ‰è§£å†³æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><span id="more"></span><p>æœ‰æ—¶å€™åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œçªç„¶å¿ƒè¡€æ¥æ½®æƒ³æŠŠæŸäº›ç›®å½•æˆ–æ–‡ä»¶åŠ å…¥å¿½ç•¥è§„åˆ™ï¼ŒæŒ‰ç…§ä¸Šè¿°æ–¹æ³•å®šä¹‰åå‘ç°å¹¶æœªç”Ÿæ•ˆï¼ŒåŸå› æ˜¯.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŸæ¥æ²¡æœ‰è¢«trackçš„æ–‡ä»¶ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„ã€‚é‚£ä¹ˆè§£å†³æ–¹æ³•å°±æ˜¯å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼ˆæ”¹å˜æˆæœªtrackçŠ¶æ€ï¼‰ï¼Œç„¶åå†æäº¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> -r --cached .</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">&#x27;update .gitignore&#x27;</span></span><br></pre></td></tr></table></figure><hr><p><strong>æ¨èï¼š</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">rm</span> --cached ignore_file //æ–‡ä»¶å</span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">&#x27;update .gitignore&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLæ¨¡ç³ŠæŸ¥è¯¢like</title>
      <link href="/2021/06/11/MySQL_7_MySQL%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2like/"/>
      <url>/2021/06/11/MySQL_7_MySQL%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2like/</url>
      
        <content type="html"><![CDATA[<h3 id="ï¼š"><a href="#ï¼š" class="headerlink" title="%ï¼š"></a>%ï¼š</h3><p> % è¡¨ç¤ºä»»æ„0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚</p><p>å¯åŒ¹é…ä»»æ„ç±»å‹å’Œé•¿åº¦çš„å­—ç¬¦ã€‚æ¯”å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;%ä¸‰%&#x27;</span></span><br></pre></td></tr></table></figure><p>å°†ä¼šæŠŠu_nameä¸ºâ€œå¼ ä¸‰â€ï¼Œâ€œå¼ çŒ«ä¸‰â€ã€â€œä¸‰è„šçŒ«â€ï¼Œâ€œå”ä¸‰è—â€ç­‰ç­‰æœ‰â€œä¸‰â€çš„è®°å½•å…¨æ‰¾å‡ºæ¥ã€‚</p><span id="more"></span><p>å¦å¤–ï¼Œå¦‚æœéœ€è¦æ‰¾å‡ºu_nameä¸­æ—¢æœ‰â€œä¸‰â€åˆæœ‰â€œçŒ«â€çš„è®°å½•ï¼Œä½¿ç”¨andæ¡ä»¶:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;%ä¸‰%&#x27;</span> <span class="keyword">AND</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;%çŒ«%&#x27;</span></span><br></pre></td></tr></table></figure><p>è‹¥ä½¿ç”¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;%ä¸‰%çŒ«%&#x27;</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶èƒ½æœç´¢å‡ºâ€œä¸‰è„šçŒ«â€ï¼Œä½†ä¸èƒ½æœç´¢å‡ºç¬¦åˆæ¡ä»¶çš„â€œå¼ çŒ«ä¸‰â€ã€‚</p><h3 id="ï¼š-1"><a href="#ï¼š-1" class="headerlink" title="_ï¼š"></a>_ï¼š</h3><p>_ è¡¨ç¤ºä»»æ„å•ä¸ªå­—ç¬¦ã€‚</p><p>åŒ¹é…å•ä¸ªä»»æ„å­—ç¬¦ï¼Œå®ƒå¸¸ç”¨æ¥é™åˆ¶è¡¨è¾¾å¼çš„å­—ç¬¦é•¿åº¦è¯­å¥ï¼š</p><p>æ¯”å¦‚ :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;_ä¸‰_&#x27;</span></span><br></pre></td></tr></table></figure><p>åªæ‰¾å‡ºâ€œå”ä¸‰è—â€è¿™æ ·u_nameä¸ºä¸‰ä¸ªå­—ä¸”ä¸­é—´ä¸€ä¸ªå­—æ˜¯â€œä¸‰â€çš„ï¼›</p><p>å†æ¯”å¦‚ :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;ä¸‰__&#x27;</span>;</span><br></pre></td></tr></table></figure><p>åªæ‰¾å‡ºâ€œä¸‰è„šçŒ«â€è¿™æ ·nameä¸ºä¸‰ä¸ªå­—ä¸”ç¬¬ä¸€ä¸ªå­—æ˜¯â€œä¸‰â€çš„ï¼›</p><h3 id="ï¼š-2"><a href="#ï¼š-2" class="headerlink" title="[ ]ï¼š"></a>[ ]ï¼š</h3><p>[] è¡¨ç¤ºæ‹¬å·å†…æ‰€åˆ—å­—ç¬¦ä¸­çš„ä¸€ä¸ªï¼ˆç±»ä¼¼æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚</p><p>æŒ‡å®šä¸€ä¸ªå­—ç¬¦ã€å­—ç¬¦ä¸²æˆ–èŒƒå›´ï¼Œè¦æ±‚æ‰€åŒ¹é…å¯¹è±¡ä¸ºå®ƒä»¬ä¸­çš„ä»»ä¸€ä¸ªã€‚</p><p>æ¯”å¦‚:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;[å¼ æç‹]ä¸‰&#x27;</span> </span><br></pre></td></tr></table></figure><p>å°†æ‰¾å‡ºâ€œå¼ ä¸‰â€ã€â€œæä¸‰â€ã€â€œç‹ä¸‰â€ï¼ˆè€Œä¸æ˜¯â€œå¼ æç‹ä¸‰â€ï¼‰ï¼›</p><p>å¦‚ [ ] å†…æœ‰ä¸€ç³»åˆ—å­—ç¬¦ï¼ˆ01234ã€abcdeä¹‹ç±»çš„ï¼‰åˆ™å¯ç•¥å†™ä¸ºâ€œ0-4â€ã€â€œa-eâ€ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;è€[1-9]&#x27;</span> </span><br></pre></td></tr></table></figure><p>å°†æ‰¾å‡ºâ€œè€1â€ã€â€œè€2â€ã€â€¦â€¦ã€â€œè€9â€ã€‚</p><h3 id="ï¼š-3"><a href="#ï¼š-3" class="headerlink" title="[^ ] ï¼š"></a>[^ ] ï¼š</h3><p>è¡¨ç¤ºä¸åœ¨æ‹¬å·æ‰€åˆ—ä¹‹å†…çš„å•ä¸ªå­—ç¬¦ã€‚å…¶å–å€¼å’Œ [] ç›¸åŒï¼Œä½†å®ƒè¦æ±‚æ‰€åŒ¹é…å¯¹è±¡ä¸ºæŒ‡å®šå­—ç¬¦ä»¥å¤–çš„ä»»ä¸€ä¸ªå­—ç¬¦ã€‚</p><p>æ¯”å¦‚ :</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> [<span class="keyword">user</span>] <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;[^å¼ æç‹]ä¸‰&#x27;</span> </span><br></pre></td></tr></table></figure><p>å°†æ‰¾å‡ºä¸å§“â€œå¼ â€ã€â€œæâ€ã€â€œç‹â€çš„â€œèµµä¸‰â€ã€â€œå­™ä¸‰â€ç­‰ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> u_name <span class="keyword">LIKE</span> <span class="string">&#x27;è€[^1-4]&#x27;</span></span><br></pre></td></tr></table></figure><p> å°†æ’é™¤â€œè€1â€åˆ°â€œè€4â€ï¼Œå¯»æ‰¾â€œè€5â€ã€â€œè€6â€ã€â€¦â€¦ã€‚</p><h3 id="æŸ¥è¯¢å†…å®¹åŒ…å«é€šé…ç¬¦æ—¶"><a href="#æŸ¥è¯¢å†…å®¹åŒ…å«é€šé…ç¬¦æ—¶" class="headerlink" title="æŸ¥è¯¢å†…å®¹åŒ…å«é€šé…ç¬¦æ—¶:"></a>æŸ¥è¯¢å†…å®¹åŒ…å«é€šé…ç¬¦æ—¶:</h3><p>ç”±äºé€šé…ç¬¦çš„ç¼˜æ•…ï¼Œå¯¼è‡´æˆ‘ä»¬æŸ¥è¯¢ç‰¹æ®Šå­—ç¬¦â€œ%â€ã€â€œ_â€ã€â€œ[â€çš„è¯­å¥æ— æ³•æ­£å¸¸å®ç°ï¼Œè€ŒæŠŠç‰¹æ®Šå­—ç¬¦ç”¨â€œ[ ]â€æ‹¬èµ·ä¾¿å¯æ­£å¸¸æŸ¥è¯¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLé”</title>
      <link href="/2021/05/29/MySQL_6_MySQL%E9%94%81/"/>
      <url>/2021/05/29/MySQL_6_MySQL%E9%94%81/</url>
      
        <content type="html"><![CDATA[<h3 id="1-é”çš„æ¦‚å¿µ"><a href="#1-é”çš„æ¦‚å¿µ" class="headerlink" title="1.é”çš„æ¦‚å¿µ"></a>1.é”çš„æ¦‚å¿µ</h3><ul><li>å¤šçº¿ç¨‹å½“ä¸­å¦‚æœæƒ³ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿæ²¡é”™ï¼Œé€šè¿‡åŒæ­¥å®ç°ã€‚åŒæ­¥å°±ç›¸å½“äºæ˜¯åŠ é”ã€‚åŠ äº†é”ä»¥åæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå½“ä¸€ä¸ªçº¿ç¨‹çœŸæ­£åœ¨æ“ä½œæ•°æ®çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…ã€‚å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œé‡Šæ”¾é”ã€‚å…¶ä»–çº¿ç¨‹æ‰èƒ½è¿›è¡Œæ“ä½œï¼</li></ul><span id="more"></span><ul><li><p>é‚£ä¹ˆMySQLæ•°æ®åº“ä¸­çš„é”çš„åŠŸèƒ½ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚åœ¨å­¦ä¹ äº‹åŠ¡çš„æ—¶å€™ï¼Œè®²è§£è¿‡äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œå¯èƒ½ä¼šå‡ºç°è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ï¼Œå½“æ—¶æˆ‘ä»¬çš„è§£å†³æ–¹å¼æ˜¯é€šè¿‡ä¿®æ”¹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ¥æ§åˆ¶ï¼Œä½†æ˜¯æ•°æ®åº“çš„éš”ç¦»çº§åˆ«å‘¢æˆ‘ä»¬å¹¶ä¸æ¨èä¿®æ”¹ã€‚æ‰€ä»¥ï¼Œé”çš„ä½œç”¨ä¹Ÿå¯ä»¥è§£å†³æ‰ä¹‹å‰çš„é—®é¢˜ï¼</p></li><li><p>é”æœºåˆ¶ : æ•°æ®åº“ä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè€Œä½¿ç”¨å„ç§å…±äº«çš„èµ„æºåœ¨è¢«å¹¶å‘è®¿é—®æ—¶å˜å¾—æœ‰åºæ‰€è®¾è®¡çš„ä¸€ç§è§„åˆ™ã€‚</p></li><li><p>ä¸¾ä¾‹ï¼Œåœ¨ç”µå•†ç½‘ç«™è´­ä¹°å•†å“æ—¶ï¼Œå•†å“è¡¨ä¸­åªå­˜æœ‰1ä¸ªå•†å“ï¼Œè€Œæ­¤æ—¶åˆæœ‰ä¸¤ä¸ªäººåŒæ—¶è´­ä¹°ï¼Œé‚£ä¹ˆè°èƒ½ä¹°åˆ°å°±æ˜¯ä¸€ä¸ªå…³é”®çš„é—®é¢˜ã€‚</p><p>è¿™é‡Œä¼šç”¨åˆ°äº‹åŠ¡è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼š</p><ol><li>å…ˆä»å•†å“è¡¨ä¸­å–å‡ºç‰©å“çš„æ•°æ®</li><li>ç„¶åæ’å…¥è®¢å•</li><li>ä»˜æ¬¾åï¼Œå†æ’å…¥ä»˜æ¬¾è¡¨ä¿¡æ¯</li><li>æ›´æ–°å•†å“è¡¨ä¸­å•†å“çš„æ•°é‡</li></ol><p>ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨é”å¯ä»¥å¯¹å•†å“æ•°é‡æ•°æ®ä¿¡æ¯è¿›è¡Œä¿æŠ¤ï¼Œå®ç°éš”ç¦»ï¼Œå³åªå…è®¸ç¬¬ä¸€ä½ç”¨æˆ·å®Œæˆæ•´å¥—è´­ä¹°æµç¨‹ï¼Œè€Œå…¶ä»–ç”¨æˆ·åªèƒ½ç­‰å¾…ï¼Œè¿™æ ·å°±è§£å†³äº†å¹¶å‘ä¸­çš„çŸ›ç›¾é—®é¢˜ã€‚</p></li><li><p>åœ¨æ•°æ®åº“ä¸­ï¼Œæ•°æ®æ˜¯ä¸€ç§ä¾›è®¸å¤šç”¨æˆ·å…±äº«è®¿é—®çš„èµ„æºï¼Œå¦‚ä½•ä¿è¯æ•°æ®å¹¶å‘è®¿é—®çš„ä¸€è‡´æ€§ã€æœ‰æ•ˆæ€§ï¼Œæ˜¯æ‰€æœ‰æ•°æ®åº“å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼ŒMySQLç”±äºè‡ªèº«æ¶æ„çš„ç‰¹ç‚¹ï¼Œåœ¨ä¸åŒçš„å­˜å‚¨å¼•æ“ä¸­ï¼Œéƒ½è®¾è®¡äº†é¢å¯¹ç‰¹å®šåœºæ™¯çš„é”å®šæœºåˆ¶ï¼Œæ‰€ä»¥å¼•æ“çš„å·®åˆ«ï¼Œå¯¼è‡´é”æœºåˆ¶ä¹Ÿæ˜¯æœ‰å¾ˆå¤§å·®åˆ«çš„ã€‚</p></li></ul><h3 id="2-é”çš„åˆ†ç±»"><a href="#2-é”çš„åˆ†ç±»" class="headerlink" title="2.é”çš„åˆ†ç±»"></a>2.é”çš„åˆ†ç±»</h3><ul><li>æŒ‰æ“ä½œåˆ†ç±»ï¼š<ul><li>å…±äº«é”ï¼šä¹Ÿå«è¯»é”ã€‚é’ˆå¯¹åŒä¸€ä»½æ•°æ®ï¼Œå¤šä¸ªäº‹åŠ¡è¯»å–æ“ä½œå¯ä»¥åŒæ—¶åŠ é”è€Œä¸äº’ç›¸å½±å“ ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹æ•°æ®è®°å½•ã€‚</li><li>æ’ä»–é”ï¼šä¹Ÿå«å†™é”ã€‚å½“å‰çš„æ“ä½œæ²¡æœ‰å®Œæˆå‰,ä¼šé˜»æ–­å…¶ä»–æ“ä½œçš„è¯»å–å’Œå†™å…¥</li></ul></li><li>æŒ‰ç²’åº¦åˆ†ç±»ï¼š<ul><li>è¡¨çº§é”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šæ•´ä¸ªè¡¨ã€‚å¼€é”€å°ï¼ŒåŠ é”å¿«ï¼›ä¸ä¼šå‡ºç°æ­»é”ï¼›é”å®šåŠ›åº¦å¤§ï¼Œå‘ç”Ÿé”å†²çªæ¦‚ç‡é«˜ï¼Œå¹¶å‘åº¦æœ€ä½ã€‚åå‘äºMyISAMå­˜å‚¨å¼•æ“ï¼</li><li>è¡Œçº§é”ï¼šæ“ä½œæ—¶ï¼Œä¼šé”å®šå½“å‰æ“ä½œè¡Œã€‚å¼€é”€å¤§ï¼ŒåŠ é”æ…¢ï¼›ä¼šå‡ºç°æ­»é”ï¼›é”å®šç²’åº¦å°ï¼Œå‘ç”Ÿé”å†²çªçš„æ¦‚ç‡ä½ï¼Œå¹¶å‘åº¦é«˜ã€‚åå‘äºInnoDBå­˜å‚¨å¼•æ“ï¼</li><li>é¡µçº§é”ï¼šé”çš„ç²’åº¦ã€å‘ç”Ÿå†²çªçš„æ¦‚ç‡å’ŒåŠ é”çš„å¼€é”€ä»‹äºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œä¼šå‡ºç°æ­»é”ï¼Œå¹¶å‘æ€§èƒ½ä¸€èˆ¬ã€‚</li></ul></li><li>æŒ‰ä½¿ç”¨æ–¹å¼åˆ†ç±»ï¼š<ul><li>æ‚²è§‚é”ï¼šæ¯æ¬¡æŸ¥è¯¢æ•°æ®æ—¶éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œå¾ˆæ‚²è§‚ï¼Œæ‰€ä»¥æŸ¥è¯¢æ—¶åŠ é”ã€‚</li><li>ä¹è§‚é”ï¼šæ¯æ¬¡æŸ¥è¯¢æ•°æ®æ—¶éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œå¾ˆä¹è§‚ï¼Œä½†æ˜¯æ›´æ–°æ—¶ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®</li></ul></li><li>ä¸åŒå­˜å‚¨å¼•æ“æ”¯æŒçš„é”</li></ul><table><thead><tr><th>å­˜å‚¨å¼•æ“</th><th>è¡¨çº§é”</th><th>è¡Œçº§é”</th><th>é¡µçº§é”</th></tr></thead><tbody><tr><td>MyISAM</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>InnoDB</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>MEMORY</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>BDB</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr></tbody></table><h3 id="3-æ¼”ç¤ºInnoDBé”"><a href="#3-æ¼”ç¤ºInnoDBé”" class="headerlink" title="3.æ¼”ç¤ºInnoDBé”"></a>3.æ¼”ç¤ºInnoDBé”</h3><ul><li>æ•°æ®å‡†å¤‡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºdb13æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db13;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨db13æ•°æ®åº“</span></span><br><span class="line">USE db13;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºstudentè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">age <span class="type">INT</span>,</span><br><span class="line">score <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="number">23</span>,<span class="number">99</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="number">24</span>,<span class="number">95</span>),</span><br><span class="line">(<span class="keyword">NULL</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="number">25</span>,<span class="number">98</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;èµµå…­&#x27;</span>,<span class="number">26</span>,<span class="number">97</span>);</span><br></pre></td></tr></table></figure><ul><li>å…±äº«é”</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SELECT</span>è¯­å¥ LOCK <span class="keyword">IN</span> SHARE MODE;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£1</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å…±äº«é”ï¼šæ•°æ®å¯ä»¥è¢«å¤šä¸ªäº‹åŠ¡æŸ¥è¯¢ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢idä¸º1çš„æ•°æ®è®°å½•ã€‚åŠ å…¥å…±äº«é”</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> LOCK <span class="keyword">IN</span> SHARE MODE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢åˆ†æ•°ä¸º99åˆ†çš„æ•°æ®è®°å½•ã€‚åŠ å…¥å…±äº«é”</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> score<span class="operator">=</span><span class="number">99</span> LOCK <span class="keyword">IN</span> SHARE MODE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£2</span></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢idä¸º1çš„æ•°æ®è®°å½•(æ™®é€šæŸ¥è¯¢ï¼Œå¯ä»¥æŸ¥è¯¢)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢idä¸º1çš„æ•°æ®è®°å½•ï¼Œå¹¶åŠ å…¥å…±äº«é”(å¯ä»¥æŸ¥è¯¢ã€‚å…±äº«é”å’Œå…±äº«é”å…¼å®¹)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> LOCK <span class="keyword">IN</span> SHARE MODE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹idä¸º1çš„å§“åä¸ºå¼ ä¸‰ä¸‰(ä¸èƒ½ä¿®æ”¹ï¼Œä¼šå‡ºç°é”çš„æƒ…å†µã€‚åªæœ‰çª—å£1æäº¤äº‹åŠ¡åï¼Œæ‰èƒ½ä¿®æ”¹æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> NAME<span class="operator">=</span><span class="string">&#x27;å¼ ä¸‰ä¸‰&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹idä¸º2çš„å§“åä¸ºæå››å››(ä¿®æ”¹æˆåŠŸï¼ŒInnoDBå¼•æ“é»˜è®¤æ˜¯è¡Œé”)</span></span><br><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> NAME<span class="operator">=</span><span class="string">&#x27;æå››å››&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹idä¸º3çš„å§“åä¸ºç‹äº”äº”(æ³¨æ„ï¼šInnoDBå¼•æ“å¦‚æœä¸é‡‡ç”¨å¸¦ç´¢å¼•çš„åˆ—ã€‚åˆ™ä¼šæå‡ä¸ºè¡¨é”)</span></span><br><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> NAME<span class="operator">=</span><span class="string">&#x27;ç‹äº”äº”&#x27;</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><ul><li>æ’ä»–é”</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SELECT</span>è¯­å¥ <span class="keyword">FOR</span> <span class="keyword">UPDATE</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£1</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ’ä»–é”ï¼šåŠ é”çš„æ•°æ®ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡åŠ é”æŸ¥è¯¢æˆ–ä¿®æ”¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢idä¸º1çš„æ•°æ®è®°å½•ï¼Œå¹¶åŠ å…¥æ’ä»–é”</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">FOR</span> <span class="keyword">UPDATE</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£2</span></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢idä¸º1çš„æ•°æ®è®°å½•(æ™®é€šæŸ¥è¯¢æ²¡é—®é¢˜)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢idä¸º1çš„æ•°æ®è®°å½•ï¼Œå¹¶åŠ å…¥å…±äº«é”(ä¸èƒ½æŸ¥è¯¢ã€‚å› ä¸ºæ’ä»–é”ä¸èƒ½å’Œå…¶ä»–é”å…±å­˜)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> LOCK <span class="keyword">IN</span> SHARE MODE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢idä¸º1çš„æ•°æ®è®°å½•ï¼Œå¹¶åŠ å…¥æ’ä»–é”(ä¸èƒ½æŸ¥è¯¢ã€‚å› ä¸ºæ’ä»–é”ä¸èƒ½å’Œå…¶ä»–é”å…±å­˜)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span> <span class="keyword">FOR</span> <span class="keyword">UPDATE</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹idä¸º1çš„å§“åä¸ºå¼ ä¸‰(ä¸èƒ½ä¿®æ”¹ï¼Œä¼šå‡ºç°é”çš„æƒ…å†µã€‚åªæœ‰çª—å£1æäº¤äº‹åŠ¡åï¼Œæ‰èƒ½ä¿®æ”¹æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">UPDATE</span> student <span class="keyword">SET</span> NAME<span class="operator">=</span><span class="string">&#x27;å¼ ä¸‰&#x27;</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼šé”çš„å…¼å®¹æ€§<ul><li>å…±äº«é”å’Œå…±äº«é”     å…¼å®¹</li><li>å…±äº«é”å’Œæ’ä»–é”     å†²çª</li><li>æ’ä»–é”å’Œæ’ä»–é”     å†²çª</li><li>æ’ä»–é”å’Œå…±äº«é”     å†²çª</li></ul></li></ul><h3 id="4-æ¼”ç¤ºMyISAMé”"><a href="#4-æ¼”ç¤ºMyISAMé”" class="headerlink" title="4.æ¼”ç¤ºMyISAMé”"></a>4.æ¼”ç¤ºMyISAMé”</h3><ul><li>æ•°æ®å‡†å¤‡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºproductè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> product(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">price <span class="type">INT</span></span><br><span class="line">)ENGINE <span class="operator">=</span> MYISAM;  <span class="comment">-- æŒ‡å®šå­˜å‚¨å¼•æ“ä¸ºMyISAM</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> product <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,<span class="string">&#x27;åä¸ºæ‰‹æœº&#x27;</span>,<span class="number">4999</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;å°ç±³æ‰‹æœº&#x27;</span>,<span class="number">2999</span>),</span><br><span class="line">(<span class="keyword">NULL</span>,<span class="string">&#x27;è‹¹æœ&#x27;</span>,<span class="number">8999</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;ä¸­å…´&#x27;</span>,<span class="number">1999</span>);</span><br></pre></td></tr></table></figure><ul><li>è¯»é”</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="comment">-- åŠ é”</span></span><br><span class="line">LOCK <span class="keyword">TABLE</span> è¡¨å READ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è§£é”(å°†å½“å‰ä¼šè¯æ‰€æœ‰çš„è¡¨è¿›è¡Œè§£é”)</span></span><br><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£1</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¯»é”ï¼šæ‰€æœ‰è¿æ¥åªèƒ½è¯»å–æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- ä¸ºproductè¡¨åŠ å…¥è¯»é”</span></span><br><span class="line">LOCK <span class="keyword">TABLE</span> product READ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢productè¡¨(æŸ¥è¯¢æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹åä¸ºæ‰‹æœºçš„ä»·æ ¼ä¸º5999(ä¿®æ”¹å¤±è´¥)</span></span><br><span class="line"><span class="keyword">UPDATE</span> product <span class="keyword">SET</span> price<span class="operator">=</span><span class="number">5999</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è§£é”</span></span><br><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£2</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢productè¡¨(æŸ¥è¯¢æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹åä¸ºæ‰‹æœºçš„ä»·æ ¼ä¸º5999(ä¸èƒ½ä¿®æ”¹ï¼Œçª—å£1è§£é”åæ‰èƒ½ä¿®æ”¹æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">UPDATE</span> product <span class="keyword">SET</span> price<span class="operator">=</span><span class="number">5999</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li>å†™é”</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="comment">-- åŠ é”</span></span><br><span class="line">LOCK <span class="keyword">TABLE</span> è¡¨å WRITE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è§£é”(å°†å½“å‰ä¼šè¯æ‰€æœ‰çš„è¡¨è¿›è¡Œè§£é”)</span></span><br><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£1</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å†™é”ï¼šå…¶ä»–è¿æ¥ä¸èƒ½æŸ¥è¯¢å’Œä¿®æ”¹æ•°æ®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- ä¸ºproductè¡¨æ·»åŠ å†™é”</span></span><br><span class="line">LOCK <span class="keyword">TABLE</span> product WRITE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢productè¡¨(æŸ¥è¯¢æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹å°ç±³æ‰‹æœºçš„é‡‘é¢ä¸º3999(ä¿®æ”¹æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">UPDATE</span> product <span class="keyword">SET</span> price<span class="operator">=</span><span class="number">3999</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è§£é”</span></span><br><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- çª—å£2</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢productè¡¨(ä¸èƒ½æŸ¥è¯¢ã€‚åªæœ‰çª—å£1è§£é”åæ‰èƒ½æŸ¥è¯¢æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹å°ç±³æ‰‹æœºçš„é‡‘é¢ä¸º2999(ä¸èƒ½ä¿®æ”¹ã€‚åªæœ‰çª—å£1è§£é”åæ‰èƒ½ä¿®æ”¹æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">UPDATE</span> product <span class="keyword">SET</span> price<span class="operator">=</span><span class="number">2999</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure><h3 id="5-æ¼”ç¤ºæ‚²è§‚é”å’Œä¹è§‚é”"><a href="#5-æ¼”ç¤ºæ‚²è§‚é”å’Œä¹è§‚é”" class="headerlink" title="5.æ¼”ç¤ºæ‚²è§‚é”å’Œä¹è§‚é”"></a>5.æ¼”ç¤ºæ‚²è§‚é”å’Œä¹è§‚é”</h3><ul><li><p>æ‚²è§‚é”çš„æ¦‚å¿µ</p><ul><li>å°±æ˜¯å¾ˆæ‚²è§‚ï¼Œå®ƒå¯¹äºæ•°æ®è¢«å¤–ç•Œä¿®æ”¹çš„æ“ä½œæŒä¿å®ˆæ€åº¦ï¼Œè®¤ä¸ºæ•°æ®éšæ—¶ä¼šä¿®æ”¹ã€‚</li><li>æ•´ä¸ªæ•°æ®å¤„ç†ä¸­éœ€è¦å°†æ•°æ®åŠ é”ã€‚æ‚²è§‚é”ä¸€èˆ¬éƒ½æ˜¯ä¾é å…³ç³»å‹æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ã€‚</li><li>æˆ‘ä»¬ä¹‹å‰æ‰€å­¦çš„è¡Œé”ï¼Œè¡¨é”ä¸è®ºæ˜¯è¯»å†™é”éƒ½æ˜¯æ‚²è§‚é”ã€‚</li></ul></li><li><p>ä¹è§‚é”çš„æ¦‚å¿µ</p><ul><li>å°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡è‡ªå·±æ“ä½œæ•°æ®çš„æ—¶å€™è®¤ä¸ºæ²¡æœ‰äººä¼šæ¥ä¿®æ”¹å®ƒï¼Œæ‰€ä»¥ä¸å»åŠ é”ã€‚</li><li>ä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šå»åˆ¤æ–­åœ¨æ­¤æœŸé—´æ•°æ®æœ‰æ²¡æœ‰è¢«ä¿®æ”¹ã€‚</li><li>éœ€è¦ç”¨æˆ·è‡ªå·±å»å®ç°ï¼Œä¸ä¼šå‘ç”Ÿå¹¶å‘æŠ¢å èµ„æºï¼Œåªæœ‰åœ¨æäº¤æ“ä½œçš„æ—¶å€™æ£€æŸ¥æ˜¯å¦è¿åæ•°æ®å®Œæ•´æ€§ã€‚</li></ul></li><li><p>æ‚²è§‚é”å’Œä¹è§‚é”ä½¿ç”¨å‰æ</p><ul><li>å¯¹äºè¯»çš„æ“ä½œè¿œå¤šäºå†™çš„æ“ä½œçš„æ—¶å€™ï¼Œè¿™æ—¶å€™ä¸€ä¸ªæ›´æ–°æ“ä½œåŠ é”ä¼šé˜»å¡æ‰€æœ‰çš„è¯»å–æ“ä½œï¼Œé™ä½äº†ååé‡ã€‚æœ€åè¿˜è¦é‡Šæ”¾é”ï¼Œé”æ˜¯éœ€è¦ä¸€äº›å¼€é”€çš„ï¼Œè¿™æ—¶å€™å¯ä»¥é€‰æ‹©ä¹è§‚é”ã€‚</li><li>å¦‚æœæ˜¯è¯»å†™æ¯”ä¾‹å·®è·ä¸æ˜¯éå¸¸å¤§æˆ–è€…ç³»ç»Ÿæ²¡æœ‰å“åº”ä¸åŠæ—¶ï¼Œååé‡ç“¶é¢ˆçš„é—®é¢˜ï¼Œé‚£å°±ä¸è¦å»ä½¿ç”¨ä¹è§‚é”ï¼Œå®ƒå¢åŠ äº†å¤æ‚åº¦ï¼Œä¹Ÿå¸¦æ¥äº†ä¸šåŠ¡é¢å¤–çš„é£é™©ã€‚è¿™æ—¶å€™å¯ä»¥é€‰æ‹©æ‚²è§‚é”ã€‚</li></ul></li><li><p>ä¹è§‚é”çš„å®ç°æ–¹å¼</p><ul><li><p>ç‰ˆæœ¬å·</p><ul><li>ç»™æ•°æ®è¡¨ä¸­æ·»åŠ ä¸€ä¸ªversionåˆ—ï¼Œæ¯æ¬¡æ›´æ–°åéƒ½å°†è¿™ä¸ªåˆ—çš„å€¼åŠ 1ã€‚</li><li>è¯»å–æ•°æ®æ—¶ï¼Œå°†ç‰ˆæœ¬å·è¯»å–å‡ºæ¥ï¼Œåœ¨æ‰§è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ¯”è¾ƒç‰ˆæœ¬å·ã€‚</li><li>å¦‚æœç›¸åŒåˆ™æ‰§è¡Œæ›´æ–°ï¼Œå¦‚æœä¸ç›¸åŒï¼Œè¯´æ˜æ­¤æ¡æ•°æ®å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</li><li>ç”¨æˆ·è‡ªè¡Œæ ¹æ®è¿™ä¸ªé€šçŸ¥æ¥å†³å®šæ€ä¹ˆå¤„ç†ï¼Œæ¯”å¦‚é‡æ–°å¼€å§‹ä¸€éï¼Œæˆ–è€…æ”¾å¼ƒæœ¬æ¬¡æ›´æ–°ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºcityè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> city(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,  <span class="comment">-- åŸå¸‚id</span></span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),                   <span class="comment">-- åŸå¸‚åç§°</span></span><br><span class="line">VERSION <span class="type">INT</span>                         <span class="comment">-- ç‰ˆæœ¬å·</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> city <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,<span class="string">&#x27;åŒ—äº¬&#x27;</span>,<span class="number">1</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;ä¸Šæµ·&#x27;</span>,<span class="number">1</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;å¹¿å·&#x27;</span>,<span class="number">1</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;æ·±åœ³&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹åŒ—äº¬ä¸ºåŒ—äº¬å¸‚</span></span><br><span class="line"><span class="comment">-- 1.æŸ¥è¯¢åŒ—äº¬çš„version</span></span><br><span class="line"><span class="keyword">SELECT</span> VERSION <span class="keyword">FROM</span> city <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;åŒ—äº¬&#x27;</span>;</span><br><span class="line"><span class="comment">-- 2.ä¿®æ”¹åŒ—äº¬ä¸ºåŒ—äº¬å¸‚ï¼Œç‰ˆæœ¬å·+1ã€‚å¹¶å¯¹æ¯”ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="keyword">UPDATE</span> city <span class="keyword">SET</span> NAME<span class="operator">=</span><span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>,VERSION<span class="operator">=</span>VERSION<span class="operator">+</span><span class="number">1</span> <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;åŒ—äº¬&#x27;</span> <span class="keyword">AND</span> VERSION<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure></li><li><p>æ—¶é—´æˆ³</p><ul><li>å’Œç‰ˆæœ¬å·æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œç»™æ•°æ®è¡¨ä¸­æ·»åŠ ä¸€ä¸ªåˆ—ï¼Œåç§°æ— æ‰€è°“ï¼Œæ•°æ®ç±»å‹éœ€è¦æ˜¯timestamp</li><li>æ¯æ¬¡æ›´æ–°åéƒ½å°†æœ€æ–°æ—¶é—´æ’å…¥åˆ°æ­¤åˆ—ã€‚</li><li>è¯»å–æ•°æ®æ—¶ï¼Œå°†æ—¶é—´è¯»å–å‡ºæ¥ï¼Œåœ¨æ‰§è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ¯”è¾ƒæ—¶é—´ã€‚</li><li>å¦‚æœç›¸åŒåˆ™æ‰§è¡Œæ›´æ–°ï¼Œå¦‚æœä¸ç›¸åŒï¼Œè¯´æ˜æ­¤æ¡æ•°æ®å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</li></ul></li></ul></li></ul><h3 id="6-é”çš„æ€»ç»“"><a href="#6-é”çš„æ€»ç»“" class="headerlink" title="6.é”çš„æ€»ç»“"></a>6.é”çš„æ€»ç»“</h3><ul><li><p>è¡¨é”å’Œè¡Œé”</p><ul><li>è¡Œé”ï¼šé”çš„ç²’åº¦æ›´ç»†ï¼ŒåŠ è¡Œé”çš„æ€§èƒ½æŸè€—è¾ƒå¤§ã€‚å¹¶å‘å¤„ç†èƒ½åŠ›è¾ƒé«˜ã€‚InnoDBå¼•æ“é»˜è®¤æ”¯æŒï¼</li><li>è¡¨é”ï¼šé”çš„ç²’åº¦è¾ƒç²—ï¼ŒåŠ è¡¨é”çš„æ€§èƒ½æŸè€—è¾ƒå°ã€‚å¹¶å‘å¤„ç†èƒ½åŠ›è¾ƒä½ã€‚InnoDBã€MyISAMå¼•æ“æ”¯æŒï¼</li></ul></li><li><p>InnoDBé”ä¼˜åŒ–å»ºè®®</p><ul><li><p>å°½é‡é€šè¿‡å¸¦ç´¢å¼•çš„åˆ—æ¥å®Œæˆæ•°æ®æŸ¥è¯¢ï¼Œä»è€Œé¿å…InnoDBæ— æ³•åŠ è¡Œé”è€Œå‡çº§ä¸ºè¡¨é”ã€‚</p></li><li><p>åˆç†è®¾è®¡ç´¢å¼•ï¼Œç´¢å¼•è¦å°½å¯èƒ½å‡†ç¡®ï¼Œå°½å¯èƒ½çš„ç¼©å°é”å®šèŒƒå›´ï¼Œé¿å…é€ æˆä¸å¿…è¦çš„é”å®šã€‚</p></li><li><p>å°½å¯èƒ½å‡å°‘åŸºäºèŒƒå›´çš„æ•°æ®æ£€ç´¢è¿‡æ»¤æ¡ä»¶ã€‚</p></li><li><p>å°½é‡æ§åˆ¶äº‹åŠ¡çš„å¤§å°ï¼Œå‡å°‘é”å®šçš„èµ„æºé‡å’Œé”å®šæ—¶é—´é•¿åº¦ã€‚</p></li><li><p>åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå°½å¯èƒ½åšåˆ°ä¸€æ¬¡é”å®šæ‰€éœ€è¦çš„æ‰€æœ‰èµ„æºï¼Œå‡å°‘æ­»é”äº§ç”Ÿæ¦‚ç‡ã€‚</p></li><li><p>å¯¹äºéå¸¸å®¹æ˜“äº§ç”Ÿæ­»é”çš„ä¸šåŠ¡éƒ¨åˆ†ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å‡çº§é”å®šé¢—ç²’åº¦ï¼Œé€šè¿‡è¡¨çº§é”å®šæ¥å‡å°‘æ­»é”çš„äº§ç”Ÿã€‚</p></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLç´¢å¼•</title>
      <link href="/2021/05/26/MySQL_5_MySQL%E7%B4%A2%E5%BC%95/"/>
      <url>/2021/05/26/MySQL_5_MySQL%E7%B4%A2%E5%BC%95/</url>
      
        <content type="html"><![CDATA[<h3 id="1-ç´¢å¼•çš„æ¦‚å¿µ"><a href="#1-ç´¢å¼•çš„æ¦‚å¿µ" class="headerlink" title="1.ç´¢å¼•çš„æ¦‚å¿µ"></a>1.ç´¢å¼•çš„æ¦‚å¿µ</h3><ul><li><p>MySQLæ•°æ®åº“ä¸­çš„ç´¢å¼•ï¼šæ˜¯å¸®åŠ©MySQLé«˜æ•ˆè·å–æ•°æ®çš„ä¸€ç§æ•°æ®ç»“æ„ï¼æ‰€ä»¥ï¼Œç´¢å¼•çš„æœ¬è´¨å°±æ˜¯æ•°æ®ç»“æ„ã€‚</p></li><li><p>åœ¨è¡¨æ•°æ®ä¹‹å¤–ï¼Œæ•°æ®åº“ç³»ç»Ÿè¿˜ç»´æŠ¤ç€æ»¡è¶³ç‰¹å®šæŸ¥æ‰¾ç®—æ³•çš„æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„ä»¥æŸç§æ–¹å¼æŒ‡å‘æ•°æ®ï¼Œ è¿™æ ·å°±å¯ä»¥åœ¨è¿™äº›æ•°æ®ç»“æ„ä¸Šå®ç°é«˜çº§æŸ¥æ‰¾ç®—æ³•ï¼Œè¿™ç§æ•°æ®ç»“æ„å°±æ˜¯ç´¢å¼•ã€‚</p></li></ul><span id="more"></span><ul><li><p>ä¸€å¼ æ•°æ®è¡¨ï¼Œç”¨äºä¿å­˜æ•°æ®ã€‚   ä¸€ä¸ªç´¢å¼•é…ç½®æ–‡ä»¶ï¼Œç”¨äºä¿å­˜ç´¢å¼•ï¼Œæ¯ä¸ªç´¢å¼•éƒ½å»æŒ‡å‘äº†æŸä¸€ä¸ªæ•°æ®(è¡¨æ ¼æ¼”ç¤º)</p></li><li><p>ä¸¾ä¾‹ï¼Œæ— ç´¢å¼•å’Œæœ‰ç´¢å¼•çš„æŸ¥æ‰¾åŸç†</p></li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/MySQL5_1.png" alt="04"></p><h3 id="2-ç´¢å¼•çš„åˆ†ç±»"><a href="#2-ç´¢å¼•çš„åˆ†ç±»" class="headerlink" title="2.ç´¢å¼•çš„åˆ†ç±»"></a>2.ç´¢å¼•çš„åˆ†ç±»</h3><ul><li>åŠŸèƒ½åˆ†ç±» <ul><li>æ™®é€šç´¢å¼•ï¼š æœ€åŸºæœ¬çš„ç´¢å¼•ï¼Œå®ƒæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚</li><li>å”¯ä¸€ç´¢å¼•ï¼šç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼ç»„åˆå¿…é¡»å”¯ä¸€ã€‚</li><li>ä¸»é”®ç´¢å¼•ï¼šä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ã€‚ä¸€èˆ¬åœ¨å»ºè¡¨æ—¶åŒæ—¶åˆ›å»ºä¸»é”®ç´¢å¼•ã€‚</li><li>ç»„åˆç´¢å¼•ï¼šé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å°†å•åˆ—ç´¢å¼•è¿›è¡Œç»„åˆã€‚</li><li>å¤–é”®ç´¢å¼•ï¼šåªæœ‰InnoDBå¼•æ“æ”¯æŒå¤–é”®ç´¢å¼•ï¼Œç”¨æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€å®Œæ•´æ€§å’Œå®ç°çº§è”æ“ä½œã€‚</li><li>å…¨æ–‡ç´¢å¼•ï¼šå¿«é€ŸåŒ¹é…å…¨éƒ¨æ–‡æ¡£çš„æ–¹å¼ã€‚InnoDBå¼•æ“5.6ç‰ˆæœ¬åæ‰æ”¯æŒå…¨æ–‡ç´¢å¼•ã€‚MEMORYå¼•æ“ä¸æ”¯æŒã€‚</li></ul></li><li>ç»“æ„åˆ†ç±»<ul><li>B+Treeç´¢å¼• ï¼šMySQLä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€ä¸ªç´¢å¼•æ•°æ®ç»“æ„ï¼Œæ˜¯InnoDBå’ŒMyISAMå­˜å‚¨å¼•æ“é»˜è®¤çš„ç´¢å¼•ç±»å‹ã€‚</li><li>Hashç´¢å¼• : MySQLä¸­Memoryå­˜å‚¨å¼•æ“é»˜è®¤æ”¯æŒçš„ç´¢å¼•ç±»å‹ã€‚</li></ul></li></ul><h3 id="3-ç´¢å¼•çš„æ“ä½œ"><a href="#3-ç´¢å¼•çš„æ“ä½œ" class="headerlink" title="3.ç´¢å¼•çš„æ“ä½œ"></a>3.ç´¢å¼•çš„æ“ä½œ</h3><ul><li>æ•°æ®å‡†å¤‡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºdb12æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db12;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨db12æ•°æ®åº“</span></span><br><span class="line">USE db12;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºstudentè¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">10</span>),</span><br><span class="line">age <span class="type">INT</span>,</span><br><span class="line">score <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="number">23</span>,<span class="number">98</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="number">24</span>,<span class="number">95</span>),</span><br><span class="line">(<span class="keyword">NULL</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="number">25</span>,<span class="number">96</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;èµµå…­&#x27;</span>,<span class="number">26</span>,<span class="number">94</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;å‘¨ä¸ƒ&#x27;</span>,<span class="number">27</span>,<span class="number">99</span>);</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºç´¢å¼•<ul><li>æ³¨æ„ï¼šå¦‚æœä¸€ä¸ªè¡¨ä¸­æœ‰ä¸€åˆ—æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆå°±ä¼šé»˜è®¤ä¸ºå…¶åˆ›å»ºä¸»é”®ç´¢å¼•ï¼(ä¸»é”®åˆ—ä¸éœ€è¦å•ç‹¬åˆ›å»ºç´¢å¼•)</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span><span class="operator">|</span>FULLTEXT] INDEX ç´¢å¼•åç§°</span><br><span class="line">[<span class="keyword">USING</span> ç´¢å¼•ç±»å‹]  <span class="comment">-- é»˜è®¤æ˜¯B+TREE</span></span><br><span class="line"><span class="keyword">ON</span> è¡¨å(åˆ—å...);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸ºstudentè¡¨ä¸­å§“ååˆ—åˆ›å»ºä¸€ä¸ªæ™®é€šç´¢å¼•</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_name <span class="keyword">ON</span> student(NAME);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸ºstudentè¡¨ä¸­å¹´é¾„åˆ—åˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX idx_age <span class="keyword">ON</span> student(age);</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹ç´¢å¼•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> è¡¨å;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹studentè¡¨ä¸­çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure><ul><li>alterè¯­å¥æ·»åŠ ç´¢å¼•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ™®é€šç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">ADD</span> INDEX ç´¢å¼•åç§°(åˆ—å);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç»„åˆç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">ADD</span> INDEX ç´¢å¼•åç§°(åˆ—å<span class="number">1</span>,åˆ—å<span class="number">2</span>,...);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸»é”®ç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(ä¸»é”®åˆ—å); </span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¤–é”®ç´¢å¼•(æ·»åŠ å¤–é”®çº¦æŸï¼Œå°±æ˜¯å¤–é”®ç´¢å¼•)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> å¤–é”®å <span class="keyword">FOREIGN</span> KEY (æœ¬è¡¨å¤–é”®åˆ—å) <span class="keyword">REFERENCES</span> ä¸»è¡¨å(ä¸»é”®åˆ—å);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å”¯ä¸€ç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> ç´¢å¼•åç§°(åˆ—å);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…¨æ–‡ç´¢å¼•(mysqlåªæ”¯æŒæ–‡æœ¬ç±»å‹)</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å <span class="keyword">ADD</span> FULLTEXT ç´¢å¼•åç§°(åˆ—å);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸ºstudentè¡¨ä¸­nameåˆ—æ·»åŠ å…¨æ–‡ç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> FULLTEXT idx_fulltext_name(name);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹studentè¡¨ä¸­çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤ç´¢å¼•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">DROP</span> INDEX ç´¢å¼•åç§° <span class="keyword">ON</span> è¡¨å;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ é™¤studentè¡¨ä¸­çš„idx_scoreç´¢å¼•</span></span><br><span class="line"><span class="keyword">DROP</span> INDEX idx_score <span class="keyword">ON</span> student;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹studentè¡¨ä¸­çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure><h3 id="4-ç´¢å¼•æ•ˆç‡çš„æµ‹è¯•"><a href="#4-ç´¢å¼•æ•ˆç‡çš„æµ‹è¯•" class="headerlink" title="4.ç´¢å¼•æ•ˆç‡çš„æµ‹è¯•"></a>4.ç´¢å¼•æ•ˆç‡çš„æµ‹è¯•</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºproductå•†å“è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> product(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,  <span class="comment">-- å•†å“id</span></span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">10</span>),    <span class="comment">-- å•†å“åç§°</span></span><br><span class="line">price <span class="type">INT</span>                           <span class="comment">-- å•†å“ä»·æ ¼</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®šä¹‰å­˜å‚¨å‡½æ•°ï¼Œç”Ÿæˆé•¿åº¦ä¸º10çš„éšæœºå­—ç¬¦ä¸²å¹¶è¿”å›</span></span><br><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> rand_string() </span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> big_str <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ&#x27;</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> small_str <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">WHILE i <span class="operator">&lt;=</span> <span class="number">10</span> DO</span><br><span class="line"><span class="keyword">SET</span> small_str <span class="operator">=</span>CONCAT(small_str,<span class="built_in">SUBSTRING</span>(big_str,<span class="built_in">FLOOR</span>(<span class="number">1</span><span class="operator">+</span>RAND()<span class="operator">*</span><span class="number">52</span>),<span class="number">1</span>));</span><br><span class="line"><span class="keyword">SET</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">RETURN</span> small_str;</span><br><span class="line"><span class="keyword">END</span>$</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®šä¹‰å­˜å‚¨è¿‡ç¨‹ï¼Œæ·»åŠ 100ä¸‡æ¡æ•°æ®åˆ°productè¡¨ä¸­</span></span><br><span class="line">DELIMITER $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_test()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> num <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">WHILE num <span class="operator">&lt;=</span> <span class="number">1000000</span> DO</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> product <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,rand_string(),num);</span><br><span class="line"><span class="keyword">SET</span> num <span class="operator">=</span> num <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span>$</span><br><span class="line"></span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line"><span class="keyword">CALL</span> pro_test();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢æ€»è®°å½•æ¡æ•°</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> product;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢productè¡¨çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> product;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢nameä¸ºOkIKDLVwtGçš„æ•°æ®   (0.049)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;OkIKDLVwtG&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- é€šè¿‡idåˆ—æŸ¥è¯¢OkIKDLVwtGçš„æ•°æ®  (1æ¯«ç§’)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">999998</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸ºnameåˆ—æ·»åŠ ç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> product <span class="keyword">ADD</span> INDEX idx_name(NAME);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢nameä¸ºOkIKDLVwtGçš„æ•°æ®   (0.001)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;OkIKDLVwtG&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">èŒƒå›´æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ä»·æ ¼ä¸º800~1000ä¹‹é—´çš„æ‰€æœ‰æ•°æ® (0.052)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">800</span> <span class="keyword">AND</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ’åºæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ä»·æ ¼ä¸º800~1000ä¹‹é—´çš„æ‰€æœ‰æ•°æ®,é™åºæ’åˆ—  (0.083)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">800</span> <span class="keyword">AND</span> <span class="number">1000</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> price <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸ºpriceåˆ—æ·»åŠ ç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> product <span class="keyword">ADD</span> INDEX idx_price(price);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ä»·æ ¼ä¸º800~1000ä¹‹é—´çš„æ‰€æœ‰æ•°æ® (0.011)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">800</span> <span class="keyword">AND</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢ä»·æ ¼ä¸º800~1000ä¹‹é—´çš„æ‰€æœ‰æ•°æ®,é™åºæ’åˆ—  (0.001)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> product <span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">800</span> <span class="keyword">AND</span> <span class="number">1000</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> price <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><h3 id="5-ç´¢å¼•çš„å®ç°åŸåˆ™"><a href="#5-ç´¢å¼•çš„å®ç°åŸåˆ™" class="headerlink" title="5.ç´¢å¼•çš„å®ç°åŸåˆ™"></a>5.ç´¢å¼•çš„å®ç°åŸåˆ™</h3><ul><li>ç´¢å¼•æ˜¯åœ¨MySQLçš„å­˜å‚¨å¼•æ“ä¸­å®ç°çš„ï¼Œæ‰€ä»¥æ¯ç§å­˜å‚¨å¼•æ“çš„ç´¢å¼•ä¸ä¸€å®šå®Œå…¨ç›¸åŒï¼Œä¹Ÿä¸æ˜¯æ‰€æœ‰çš„å¼•æ“æ”¯æŒæ‰€æœ‰çš„ç´¢å¼•ç±»å‹ã€‚è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç»InnoDBå¼•æ“çš„å®ç°çš„<strong>B+Treeç´¢å¼•</strong>ã€‚</li><li>B+Treeæ˜¯ä¸€ç§æ ‘å‹æ•°æ®ç»“æ„ï¼Œæ˜¯B-Treeçš„å˜ç§ã€‚é€šå¸¸ä½¿ç”¨åœ¨æ•°æ®åº“å’Œæ“ä½œç³»ç»Ÿä¸­çš„æ–‡ä»¶ç³»ç»Ÿï¼Œç‰¹ç‚¹æ˜¯èƒ½å¤Ÿä¿æŒæ•°æ®ç¨³å®šæœ‰åºã€‚æˆ‘ä»¬é€æ­¥çš„æ¥äº†è§£ä¸€ä¸‹ã€‚</li></ul><h4 id="5-1ç£ç›˜å­˜å‚¨"><a href="#5-1ç£ç›˜å­˜å‚¨" class="headerlink" title="5.1ç£ç›˜å­˜å‚¨"></a>5.1ç£ç›˜å­˜å‚¨</h4><ul><li>ç³»ç»Ÿä»ç£ç›˜è¯»å–æ•°æ®åˆ°å†…å­˜æ—¶æ˜¯ä»¥ç£ç›˜å—ï¼ˆblockï¼‰ä¸ºåŸºæœ¬å•ä½çš„</li><li>ä½äºåŒä¸€ä¸ªç£ç›˜å—ä¸­çš„æ•°æ®ä¼šè¢«ä¸€æ¬¡æ€§è¯»å–å‡ºæ¥ï¼Œè€Œä¸æ˜¯éœ€è¦ä»€ä¹ˆå–ä»€ä¹ˆã€‚</li><li>InnoDBå­˜å‚¨å¼•æ“ä¸­æœ‰é¡µï¼ˆPageï¼‰çš„æ¦‚å¿µï¼Œé¡µæ˜¯å…¶ç£ç›˜ç®¡ç†çš„æœ€å°å•ä½ã€‚InnoDBå­˜å‚¨å¼•æ“ä¸­é»˜è®¤æ¯ä¸ªé¡µçš„å¤§å°ä¸º16KBã€‚</li><li>InnoDBå¼•æ“å°†è‹¥å¹²ä¸ªåœ°å€è¿æ¥ç£ç›˜å—ï¼Œä»¥æ­¤æ¥è¾¾åˆ°é¡µçš„å¤§å°16KBï¼Œåœ¨æŸ¥è¯¢æ•°æ®æ—¶å¦‚æœä¸€ä¸ªé¡µä¸­çš„æ¯æ¡æ•°æ®éƒ½èƒ½æœ‰åŠ©äºå®šä½æ•°æ®è®°å½•çš„ä½ç½®ï¼Œè¿™å°†ä¼šå‡å°‘ç£ç›˜I&#x2F;Oæ¬¡æ•°ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</li></ul><h4 id="5-2BTree"><a href="#5-2BTree" class="headerlink" title="5.2BTree"></a>5.2BTree</h4><ul><li><p>BTreeç»“æ„çš„æ•°æ®å¯ä»¥è®©ç³»ç»Ÿé«˜æ•ˆçš„æ‰¾åˆ°æ•°æ®æ‰€åœ¨çš„ç£ç›˜å—ã€‚ä¸ºäº†æè¿°BTreeï¼Œé¦–å…ˆå®šä¹‰ä¸€æ¡è®°å½•ä¸ºä¸€ä¸ªäºŒå…ƒç»„[key, data] ï¼Œkeyä¸ºè®°å½•çš„é”®å€¼ï¼Œå¯¹åº”è¡¨ä¸­çš„ä¸»é”®å€¼ï¼Œdataä¸ºä¸€è¡Œè®°å½•ä¸­é™¤ä¸»é”®å¤–çš„æ•°æ®ã€‚å¯¹äºä¸åŒçš„è®°å½•ï¼Œkeyå€¼äº’ä¸ç›¸åŒã€‚BTreeä¸­çš„æ¯ä¸ªèŠ‚ç‚¹æ ¹æ®å®é™…æƒ…å†µå¯ä»¥åŒ…å«å¤§é‡çš„å…³é”®å­—ä¿¡æ¯å’Œåˆ†æ”¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºä¸ºä¸€ä¸ª3é˜¶çš„BTreeï¼š </p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/MySQL5_2.png" alt="05"></p></li><li><p>æ ¹æ®å›¾ä¸­ç»“æ„æ˜¾ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹å ç”¨ä¸€ä¸ªç›˜å—çš„ç£ç›˜ç©ºé—´ï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸Šæœ‰ä¸¤ä¸ªå‡åºæ’åºçš„å…³é”®å­—å’Œä¸‰ä¸ªæŒ‡å‘å­æ ‘æ ¹èŠ‚ç‚¹çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå­˜å‚¨çš„æ˜¯å­èŠ‚ç‚¹æ‰€åœ¨ç£ç›˜å—çš„åœ°å€ã€‚ä¸¤ä¸ªå…³é”®è¯åˆ’åˆ†æˆçš„ä¸‰ä¸ªèŒƒå›´åŸŸå¯¹åº”ä¸‰ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®çš„èŒƒå›´åŸŸã€‚ä»¥æ ¹èŠ‚ç‚¹ä¸ºä¾‹ï¼Œå…³é”®å­—ä¸º17å’Œ35ï¼ŒP1æŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®èŒƒå›´ä¸ºå°äº17ï¼ŒP2æŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®èŒƒå›´ä¸º17~35ï¼ŒP3æŒ‡é’ˆæŒ‡å‘çš„å­æ ‘çš„æ•°æ®èŒƒå›´ä¸ºå¤§äº35ã€‚</p></li></ul><p>æŸ¥æ‰¾é¡ºåºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ‹ŸæŸ¥æ‰¾<span class="number">15</span>çš„è¿‡ç¨‹ : </span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>æ ¹èŠ‚ç‚¹æ‰¾åˆ°ç£ç›˜å—<span class="number">1</span>ï¼Œè¯»å…¥å†…å­˜ã€‚ã€ç£ç›˜I<span class="operator">/</span>Oæ“ä½œç¬¬<span class="number">1</span>æ¬¡ã€‘</span><br><span class="line">æ¯”è¾ƒå…³é”®å­—<span class="number">15</span>åœ¨åŒºé—´ï¼ˆ<span class="operator">&lt;</span><span class="number">17</span>ï¼‰ï¼Œæ‰¾åˆ°ç£ç›˜å—<span class="number">1</span>çš„æŒ‡é’ˆP1ã€‚</span><br><span class="line"><span class="number">2.</span>P1æŒ‡é’ˆæ‰¾åˆ°ç£ç›˜å—<span class="number">2</span>ï¼Œè¯»å…¥å†…å­˜ã€‚ã€ç£ç›˜I<span class="operator">/</span>Oæ“ä½œç¬¬<span class="number">2</span>æ¬¡ã€‘</span><br><span class="line">æ¯”è¾ƒå…³é”®å­—<span class="number">15</span>åœ¨åŒºé—´ï¼ˆ<span class="operator">&gt;</span><span class="number">12</span>ï¼‰ï¼Œæ‰¾åˆ°ç£ç›˜å—<span class="number">2</span>çš„æŒ‡é’ˆP3ã€‚</span><br><span class="line"><span class="number">3.</span>P3æŒ‡é’ˆæ‰¾åˆ°ç£ç›˜å—<span class="number">7</span>ï¼Œè¯»å…¥å†…å­˜ã€‚ã€ç£ç›˜I<span class="operator">/</span>Oæ“ä½œç¬¬<span class="number">3</span>æ¬¡ã€‘</span><br><span class="line">åœ¨ç£ç›˜å—<span class="number">7</span>ä¸­æ‰¾åˆ°å…³é”®å­—<span class="number">15</span>ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ†æä¸Šé¢è¿‡ç¨‹ï¼Œå‘ç°éœ€è¦3æ¬¡ç£ç›˜I/Oæ“ä½œï¼Œå’Œ3æ¬¡å†…å­˜æŸ¥æ‰¾æ“ä½œã€‚</span></span><br><span class="line"><span class="comment">-- ç”±äºå†…å­˜ä¸­çš„å…³é”®å­—æ˜¯ä¸€ä¸ªæœ‰åºè¡¨ç»“æ„ï¼Œå¯ä»¥åˆ©ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾æé«˜æ•ˆç‡ã€‚è€Œ3æ¬¡ç£ç›˜I/Oæ“ä½œæ˜¯å½±å“æ•´ä¸ªBTreeæŸ¥æ‰¾æ•ˆç‡çš„å†³å®šå› ç´ ã€‚BTreeä½¿ç”¨è¾ƒå°‘çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œä½¿æ¯æ¬¡ç£ç›˜I/Oå–åˆ°å†…å­˜çš„æ•°æ®éƒ½å‘æŒ¥äº†ä½œç”¨ï¼Œä»è€Œæé«˜äº†æŸ¥è¯¢æ•ˆç‡ã€‚</span></span><br></pre></td></tr></table></figure><h4 id="5-3B-Tree"><a href="#5-3B-Tree" class="headerlink" title="5.3B+Tree"></a>5.3B+Tree</h4><ul><li>B+Treeæ˜¯åœ¨BTreeåŸºç¡€ä¸Šçš„ä¸€ç§ä¼˜åŒ–ï¼Œä½¿å…¶æ›´é€‚åˆå®ç°å¤–å­˜å‚¨ç´¢å¼•ç»“æ„ï¼ŒInnoDBå­˜å‚¨å¼•æ“å°±æ˜¯ç”¨B+Treeå®ç°å…¶ç´¢å¼•ç»“æ„ã€‚</li><li>ä»ä¸Šä¸€èŠ‚ä¸­çš„BTreeç»“æ„å›¾ä¸­å¯ä»¥çœ‹åˆ°æ¯ä¸ªèŠ‚ç‚¹ä¸­ä¸ä»…åŒ…å«æ•°æ®çš„keyå€¼ï¼Œè¿˜æœ‰dataå€¼ã€‚è€Œæ¯ä¸€ä¸ªé¡µçš„å­˜å‚¨ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå¦‚æœdataæ•°æ®è¾ƒå¤§æ—¶å°†ä¼šå¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹              ï¼ˆå³ä¸€ä¸ªé¡µï¼‰èƒ½å­˜å‚¨çš„keyçš„æ•°é‡å¾ˆå°ï¼Œå½“å­˜å‚¨çš„æ•°æ®é‡å¾ˆå¤§æ—¶åŒæ ·ä¼šå¯¼è‡´B-Treeçš„æ·±åº¦è¾ƒå¤§ï¼Œå¢å¤§æŸ¥è¯¢æ—¶çš„ç£ç›˜I&#x2F;Oæ¬¡æ•°ï¼Œè¿›è€Œå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚åœ¨B+Treeä¸­ï¼Œæ‰€æœ‰æ•°æ®è®°å½•èŠ‚ç‚¹éƒ½æ˜¯æŒ‰ç…§é”®å€¼å¤§å°é¡ºåºå­˜æ”¾åœ¨åŒä¸€å±‚çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œè€Œéå¶å­èŠ‚ç‚¹ä¸Šåªå­˜å‚¨keyå€¼ä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§åŠ å¤§æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„keyå€¼æ•°é‡ï¼Œé™ä½B+Treeçš„é«˜åº¦ã€‚</li><li>B+Treeç›¸å¯¹äºBTreeåŒºåˆ«ï¼š<ul><li>éå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ä¿¡æ¯ã€‚</li><li>æ‰€æœ‰å¶å­èŠ‚ç‚¹ä¹‹é—´éƒ½æœ‰ä¸€ä¸ªè¿æ¥æŒ‡é’ˆã€‚</li><li>æ•°æ®è®°å½•éƒ½å­˜æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸­ã€‚</li></ul></li><li>å°†ä¸Šä¸€èŠ‚ä¸­çš„BTreeä¼˜åŒ–ï¼Œç”±äºB+Treeçš„éå¶å­èŠ‚ç‚¹åªå­˜å‚¨é”®å€¼ä¿¡æ¯ï¼Œå‡è®¾æ¯ä¸ªç£ç›˜å—èƒ½å­˜å‚¨4ä¸ªé”®å€¼åŠæŒ‡é’ˆä¿¡æ¯ï¼Œåˆ™å˜æˆB+Treeåå…¶ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/MySQL5_3.png" alt="06"></p><p>é€šå¸¸åœ¨B+Treeä¸Šæœ‰ä¸¤ä¸ªå¤´æŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘æ ¹èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªæŒ‡å‘å…³é”®å­—æœ€å°çš„å¶å­èŠ‚ç‚¹ï¼Œè€Œä¸”æ‰€æœ‰å¶å­èŠ‚ç‚¹ï¼ˆå³æ•°æ®èŠ‚ç‚¹ï¼‰ä¹‹é—´æ˜¯ä¸€ç§é“¾å¼ç¯ç»“æ„ã€‚å› æ­¤å¯ä»¥å¯¹B+Treeè¿›è¡Œä¸¤ç§æŸ¥æ‰¾è¿ç®—ï¼š</p><ul><li>ã€æœ‰èŒƒå›´ã€‘å¯¹äºä¸»é”®çš„èŒƒå›´æŸ¥æ‰¾å’Œåˆ†é¡µæŸ¥æ‰¾</li><li>ã€æœ‰é¡ºåºã€‘ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè¿›è¡ŒéšæœºæŸ¥æ‰¾</li></ul><p>å®é™…æƒ…å†µä¸­æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½ä¸èƒ½å¡«å……æ»¡ï¼Œå› æ­¤åœ¨æ•°æ®åº“ä¸­ï¼ŒB+Treeçš„é«˜åº¦ä¸€èˆ¬éƒ½åœ¨2~4å±‚ã€‚MySQLçš„InnoDBå­˜å‚¨å¼•æ“åœ¨è®¾è®¡æ—¶æ˜¯å°†æ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥æ‰¾æŸä¸€é”®å€¼çš„è¡Œè®°å½•æ—¶æœ€å¤šåªéœ€è¦1~3æ¬¡ç£ç›˜I&#x2F;Oæ“ä½œã€‚</p><h3 id="6-æ€»ç»“ï¼šç´¢å¼•çš„è®¾è®¡åŸåˆ™"><a href="#6-æ€»ç»“ï¼šç´¢å¼•çš„è®¾è®¡åŸåˆ™" class="headerlink" title="6.æ€»ç»“ï¼šç´¢å¼•çš„è®¾è®¡åŸåˆ™"></a>6.æ€»ç»“ï¼šç´¢å¼•çš„è®¾è®¡åŸåˆ™</h3><p>ç´¢å¼•çš„è®¾è®¡å¯ä»¥éµå¾ªä¸€äº›å·²æœ‰çš„åŸåˆ™ï¼Œåˆ›å»ºç´¢å¼•çš„æ—¶å€™è¯·å°½é‡è€ƒè™‘ç¬¦åˆè¿™äº›åŸåˆ™ï¼Œä¾¿äºæå‡ç´¢å¼•çš„ä½¿ç”¨æ•ˆç‡ï¼Œæ›´é«˜æ•ˆçš„ä½¿ç”¨ç´¢å¼•ã€‚</p><ul><li>åˆ›å»ºç´¢å¼•æ—¶çš„åŸåˆ™<ul><li>å¯¹æŸ¥è¯¢é¢‘æ¬¡è¾ƒé«˜ï¼Œä¸”æ•°æ®é‡æ¯”è¾ƒå¤§çš„è¡¨å»ºç«‹ç´¢å¼•ã€‚</li><li>ä½¿ç”¨å”¯ä¸€ç´¢å¼•ï¼ŒåŒºåˆ†åº¦è¶Šé«˜ï¼Œä½¿ç”¨ç´¢å¼•çš„æ•ˆç‡è¶Šé«˜ã€‚</li><li>ç´¢å¼•å­—æ®µçš„é€‰æ‹©ï¼Œæœ€ä½³å€™é€‰åˆ—åº”å½“ä»whereå­å¥çš„æ¡ä»¶ä¸­æå–ï¼Œå¦‚æœwhereå­å¥ä¸­çš„ç»„åˆæ¯”è¾ƒå¤šï¼Œé‚£ä¹ˆåº”å½“æŒ‘é€‰æœ€å¸¸ç”¨ã€è¿‡æ»¤æ•ˆæœæœ€å¥½çš„åˆ—çš„ç»„åˆã€‚</li><li>ä½¿ç”¨çŸ­ç´¢å¼•ï¼Œç´¢å¼•åˆ›å»ºä¹‹åä¹Ÿæ˜¯ä½¿ç”¨ç¡¬ç›˜æ¥å­˜å‚¨çš„ï¼Œå› æ­¤æå‡ç´¢å¼•è®¿é—®çš„I&#x2F;Oæ•ˆç‡ï¼Œä¹Ÿå¯ä»¥æå‡æ€»ä½“çš„è®¿é—®æ•ˆç‡ã€‚å‡å¦‚æ„æˆç´¢å¼•çš„å­—æ®µæ€»é•¿åº¦æ¯”è¾ƒçŸ­ï¼Œé‚£ä¹ˆåœ¨ç»™å®šå¤§å°çš„å­˜å‚¨å—å†…å¯ä»¥å­˜å‚¨æ›´å¤šçš„ç´¢å¼•å€¼ï¼Œç›¸åº”çš„å¯ä»¥æœ‰æ•ˆçš„æå‡MySQLè®¿é—®ç´¢å¼•çš„I&#x2F;Oæ•ˆç‡ã€‚</li><li>ç´¢å¼•å¯ä»¥æœ‰æ•ˆçš„æå‡æŸ¥è¯¢æ•°æ®çš„æ•ˆç‡ï¼Œä½†ç´¢å¼•æ•°é‡ä¸æ˜¯å¤šå¤šç›Šå–„ï¼Œç´¢å¼•è¶Šå¤šï¼Œç»´æŠ¤ç´¢å¼•çš„ä»£ä»·è‡ªç„¶ä¹Ÿå°±æ°´æ¶¨èˆ¹é«˜ã€‚å¯¹äºæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ç­‰DMLæ“ä½œæ¯”è¾ƒé¢‘ç¹çš„è¡¨æ¥è¯´ï¼Œç´¢å¼•è¿‡å¤šï¼Œä¼šå¼•å…¥ç›¸å½“é«˜çš„ç»´æŠ¤ä»£ä»·ï¼Œé™ä½DMLæ“ä½œçš„æ•ˆç‡ï¼Œå¢åŠ ç›¸åº”æ“ä½œçš„æ—¶é—´æ¶ˆè€—ã€‚å¦å¤–ç´¢å¼•è¿‡å¤šçš„è¯ï¼ŒMySQLä¹Ÿä¼šçŠ¯é€‰æ‹©å›°éš¾ç—…ï¼Œè™½ç„¶æœ€ç»ˆä»ç„¶ä¼šæ‰¾åˆ°ä¸€ä¸ªå¯ç”¨çš„ç´¢å¼•ï¼Œä½†æ— ç–‘æé«˜äº†é€‰æ‹©çš„ä»£ä»·ã€‚</li></ul></li><li>è”åˆç´¢å¼•çš„ç‰¹ç‚¹</li></ul><p>åœ¨mysqlå»ºç«‹è”åˆç´¢å¼•æ—¶ä¼šéµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…çš„åŸåˆ™ï¼Œå³æœ€å·¦ä¼˜å…ˆï¼Œåœ¨æ£€ç´¢æ•°æ®æ—¶ä»è”åˆç´¢å¼•çš„æœ€å·¦è¾¹å¼€å§‹åŒ¹é…ï¼Œ<br>å¯¹åˆ—nameåˆ—ã€addresså’Œåˆ—phoneåˆ—å»ºä¸€ä¸ªè”åˆç´¢å¼•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">user</span> <span class="keyword">ADD</span> INDEX index_three(name,address,phone);</span><br></pre></td></tr></table></figure><p>è”åˆç´¢å¼•index_threeå®é™…å»ºç«‹äº†(name)ã€(name,address)ã€(name,address,phone)ä¸‰ä¸ªç´¢å¼•ã€‚æ‰€ä»¥ä¸‹é¢çš„ä¸‰ä¸ªSQLè¯­å¥éƒ½å¯ä»¥å‘½ä¸­ç´¢å¼•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> address <span class="operator">=</span> <span class="string">&#x27;åŒ—äº¬&#x27;</span> <span class="keyword">AND</span> phone <span class="operator">=</span> <span class="string">&#x27;12345&#x27;</span> <span class="keyword">AND</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span> <span class="keyword">AND</span> address <span class="operator">=</span> <span class="string">&#x27;åŒ—äº¬&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸‰ä¸ªæŸ¥è¯¢è¯­å¥æ‰§è¡Œæ—¶ä¼šä¾ç…§æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œæ£€ç´¢æ—¶åˆ†åˆ«ä¼šä½¿ç”¨ç´¢å¼•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(name,address,phone)</span><br><span class="line">(name,address)</span><br><span class="line">(name)</span><br></pre></td></tr></table></figure><p>è¿›è¡Œæ•°æ®åŒ¹é…ã€‚</p><p>ç´¢å¼•çš„å­—æ®µå¯ä»¥æ˜¯ä»»æ„é¡ºåºçš„ï¼Œå¦‚ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ä¼˜åŒ–å™¨ä¼šå¸®åŠ©æˆ‘ä»¬è°ƒæ•´é¡ºåºï¼Œä¸‹é¢çš„SQLè¯­å¥éƒ½å¯ä»¥å‘½ä¸­ç´¢å¼•</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> address <span class="operator">=</span> <span class="string">&#x27;åŒ—äº¬&#x27;</span> <span class="keyword">AND</span> phone <span class="operator">=</span> <span class="string">&#x27;12345&#x27;</span> <span class="keyword">AND</span> name <span class="operator">=</span> <span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br></pre></td></tr></table></figure><p>Mysqlçš„ä¼˜åŒ–å™¨ä¼šå¸®åŠ©æˆ‘ä»¬è°ƒæ•´whereæ¡ä»¶ä¸­çš„é¡ºåºï¼Œä»¥åŒ¹é…æˆ‘ä»¬å»ºç«‹çš„ç´¢å¼•ã€‚</p><p>è”åˆç´¢å¼•ä¸­æœ€å·¦è¾¹çš„åˆ—ä¸åŒ…å«åœ¨æ¡ä»¶æŸ¥è¯¢ä¸­ï¼Œæ‰€ä»¥æ ¹æ®ä¸Šé¢çš„åŸåˆ™ï¼Œä¸‹é¢çš„SQLè¯­å¥å°±ä¸ä¼šå‘½ä¸­ç´¢å¼•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è”åˆç´¢å¼•ä¸­æœ€å·¦è¾¹çš„åˆ—ä¸åŒ…å«åœ¨æ¡ä»¶æŸ¥è¯¢ä¸­ï¼Œä¸‹é¢çš„SQLè¯­å¥å°±ä¸ä¼šå‘½ä¸­ç´¢å¼•</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> address <span class="operator">=</span> <span class="string">&#x27;åŒ—äº¬&#x27;</span> <span class="keyword">AND</span> phone <span class="operator">=</span> <span class="string">&#x27;12345&#x27;</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå­˜å‚¨å¼•æ“</title>
      <link href="/2021/05/25/MySQL_4_MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/"/>
      <url>/2021/05/25/MySQL_4_MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/</url>
      
        <content type="html"><![CDATA[<h3 id="1-MySQLä½“ç³»ç»“æ„"><a href="#1-MySQLä½“ç³»ç»“æ„" class="headerlink" title="1.MySQLä½“ç³»ç»“æ„"></a>1.MySQLä½“ç³»ç»“æ„</h3><ul><li>MySQLçš„ä½“ç³»ç»“æ„</li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/MySQL4_1.png" alt="02"></p><span id="more"></span><ul><li>ä½“ç³»ç»“æ„è¯¦è§£<ul><li>å®¢æˆ·ç«¯è¿æ¥<ul><li>æ”¯æŒæ¥å£ï¼šæ”¯æŒçš„å®¢æˆ·ç«¯è¿æ¥ï¼Œä¾‹å¦‚Cã€Javaã€PHPç­‰è¯­è¨€æ¥è¿æ¥MySQLæ•°æ®åº“</li></ul></li><li>ç¬¬ä¸€å±‚ï¼šç½‘ç»œè¿æ¥å±‚<ul><li>è¿æ¥æ± ï¼šç®¡ç†ã€ç¼“å†²ç”¨æˆ·çš„è¿æ¥ï¼Œçº¿ç¨‹å¤„ç†ç­‰éœ€è¦ç¼“å­˜çš„éœ€æ±‚ã€‚</li><li>ä¾‹å¦‚ï¼šå½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚è¿æ¥ï¼Œä¼šä»è¿æ¥æ± ä¸­è·å–ä¸€ä¸ªè¿æ¥è¿›è¡Œä½¿ç”¨ã€‚</li></ul></li><li>ç¬¬äºŒå±‚ï¼šæ ¸å¿ƒæœåŠ¡å±‚<ul><li>ç®¡ç†æœåŠ¡å’Œå·¥å…·ï¼šç³»ç»Ÿçš„ç®¡ç†å’Œæ§åˆ¶å·¥å…·ï¼Œä¾‹å¦‚å¤‡ä»½æ¢å¤ã€å¤åˆ¶ã€é›†ç¾¤ç­‰ã€‚ </li><li>SQLæ¥å£ï¼šæ¥å—SQLå‘½ä»¤ï¼Œå¹¶ä¸”è¿”å›æŸ¥è¯¢ç»“æœã€‚</li><li>æŸ¥è¯¢è§£æå™¨ï¼šéªŒè¯å’Œè§£æSQLå‘½ä»¤ï¼Œä¾‹å¦‚è¿‡æ»¤æ¡ä»¶ã€è¯­æ³•ç»“æ„ç­‰ã€‚ </li><li>æŸ¥è¯¢ä¼˜åŒ–å™¨ï¼šåœ¨æ‰§è¡ŒæŸ¥è¯¢ä¹‹å‰ï¼Œä½¿ç”¨é»˜è®¤çš„ä¸€å¥—ä¼˜åŒ–æœºåˆ¶è¿›è¡Œä¼˜åŒ–sqlè¯­å¥</li><li>ç¼“å­˜ï¼šå¦‚æœç¼“å­˜å½“ä¸­æœ‰æƒ³æŸ¥è¯¢çš„æ•°æ®ï¼Œåˆ™ç›´æ¥å°†ç¼“å­˜ä¸­çš„æ•°æ®è¿”å›ã€‚æ²¡æœ‰çš„è¯å†é‡æ–°æŸ¥è¯¢ï¼</li></ul></li><li>ç¬¬ä¸‰å±‚ï¼šå­˜å‚¨å¼•æ“å±‚<ul><li>æ’ä»¶å¼å­˜å‚¨å¼•æ“ï¼šç®¡ç†å’Œæ“ä½œæ•°æ®çš„ä¸€ç§æœºåˆ¶ï¼ŒåŒ…æ‹¬(å­˜å‚¨æ•°æ®ã€å¦‚ä½•æ›´æ–°ã€æŸ¥è¯¢æ•°æ®ç­‰)</li></ul></li><li>ç¬¬å››å±‚ï¼šç³»ç»Ÿæ–‡ä»¶å±‚<ul><li>æ–‡ä»¶ç³»ç»Ÿï¼šé…ç½®æ–‡ä»¶ã€æ•°æ®æ–‡ä»¶ã€æ—¥å¿—æ–‡ä»¶ã€é”™è¯¯æ–‡ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶ç­‰ç­‰çš„ä¿å­˜</li></ul></li></ul></li></ul><h3 id="2-MySQLå­˜å‚¨å¼•æ“"><a href="#2-MySQLå­˜å‚¨å¼•æ“" class="headerlink" title="2.MySQLå­˜å‚¨å¼•æ“"></a>2.MySQLå­˜å‚¨å¼•æ“</h3><ul><li><p>å¼•æ“çš„æ¦‚å¿µ</p><ul><li>ç”Ÿæ´»ä¸­ï¼Œå¼•æ“å°±æ˜¯æ•´ä¸ªæœºå™¨è¿è¡Œçš„æ ¸å¿ƒï¼Œä¸åŒçš„å¼•æ“å…·å¤‡ä¸åŒçš„åŠŸèƒ½ã€‚</li></ul></li><li><p>MySQLå­˜å‚¨å¼•æ“çš„æ¦‚å¿µ</p><ul><li>MySQLæ•°æ®åº“ä½¿ç”¨ä¸åŒçš„æœºåˆ¶å­˜å–è¡¨æ–‡ä»¶ , æœºåˆ¶çš„å·®åˆ«åœ¨äºä¸åŒçš„å­˜å‚¨æ–¹å¼ã€ç´¢å¼•æŠ€å·§ã€é”å®šæ°´å¹³ä»¥åŠå¹¿æ³›çš„ä¸åŒçš„åŠŸèƒ½å’Œèƒ½åŠ›ï¼Œåœ¨MySQLä¸­ , å°†è¿™äº›ä¸åŒçš„æŠ€æœ¯åŠé…å¥—çš„åŠŸèƒ½ç§°ä¸º<strong>å­˜å‚¨å¼•æ“</strong></li><li>åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­æ•°æ®çš„å­˜å‚¨æ˜¯ä»¥è¡¨çš„å½¢å¼å­˜è¿›è¡Œå‚¨çš„ï¼Œæ‰€ä»¥å­˜å‚¨å¼•æ“ä¹Ÿå¯ä»¥ç§°ä¸º<strong>è¡¨ç±»å‹</strong>ï¼ˆå³å­˜å‚¨å’Œæ“ä½œæ­¤è¡¨çš„ç±»å‹ï¼‰ã€‚</li><li>Oracle , SqlServerç­‰æ•°æ®åº“åªæœ‰ä¸€ç§å­˜å‚¨å¼•æ“ , è€ŒMySQLé’ˆå¯¹ä¸åŒçš„éœ€æ±‚, é…ç½®MySQLçš„ä¸åŒçš„å­˜å‚¨å¼•æ“ , å°±ä¼šè®©æ•°æ®åº“é‡‡å–äº†ä¸åŒçš„å¤„ç†æ•°æ®çš„æ–¹å¼å’Œæ‰©å±•åŠŸèƒ½ã€‚</li><li>é€šè¿‡é€‰æ‹©ä¸åŒçš„å¼•æ“ ,èƒ½å¤Ÿè·å–æœ€ä½³çš„æ–¹æ¡ˆ ,  ä¹Ÿèƒ½å¤Ÿè·å¾—é¢å¤–çš„é€Ÿåº¦æˆ–è€…åŠŸèƒ½ï¼Œæé«˜ç¨‹åºçš„æ•´ä½“æ•ˆæœã€‚æ‰€ä»¥äº†è§£å¼•æ“çš„ç‰¹æ€§ , æ‰èƒ½è´´åˆæˆ‘ä»¬çš„éœ€æ±‚ , æ›´å¥½çš„å‘æŒ¥æ•°æ®åº“çš„æ€§èƒ½ã€‚</li></ul></li><li><p>MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“</p><ul><li>MySQL5.7æ”¯æŒçš„å¼•æ“åŒ…æ‹¬ï¼šInnoDBã€MyISAMã€MEMORYã€Archiveã€Federateã€CSVã€BLACKHOLEç­‰</li><li>å…¶ä¸­è¾ƒä¸ºå¸¸ç”¨çš„æœ‰ä¸‰ç§ï¼šInnoDBã€MyISAMã€MEMORY</li></ul></li></ul><h3 id="3-å¸¸ç”¨å¼•æ“çš„ç‰¹æ€§å¯¹æ¯”"><a href="#3-å¸¸ç”¨å¼•æ“çš„ç‰¹æ€§å¯¹æ¯”" class="headerlink" title="3.å¸¸ç”¨å¼•æ“çš„ç‰¹æ€§å¯¹æ¯”"></a>3.å¸¸ç”¨å¼•æ“çš„ç‰¹æ€§å¯¹æ¯”</h3><ul><li>å¸¸ç”¨çš„å­˜å‚¨å¼•æ“<ul><li>MyISAMå­˜å‚¨å¼•æ“<ul><li>è®¿é—®å¿«,ä¸æ”¯æŒäº‹åŠ¡å’Œå¤–é”®ã€‚è¡¨ç»“æ„ä¿å­˜åœ¨.frmæ–‡ä»¶ä¸­ï¼Œè¡¨æ•°æ®ä¿å­˜åœ¨.MYDæ–‡ä»¶ä¸­ï¼Œç´¢å¼•ä¿å­˜åœ¨.MYIæ–‡ä»¶ä¸­ã€‚</li></ul></li><li>InnoDBå­˜å‚¨å¼•æ“(MySQL5.5ç‰ˆæœ¬åé»˜è®¤çš„å­˜å‚¨å¼•æ“)<ul><li>æ”¯æŒäº‹åŠ¡ ,å ç”¨ç£ç›˜ç©ºé—´å¤§ ,æ”¯æŒå¹¶å‘æ§åˆ¶ã€‚è¡¨ç»“æ„ä¿å­˜åœ¨.frmæ–‡ä»¶ä¸­ï¼Œå¦‚æœæ˜¯å…±äº«è¡¨ç©ºé—´ï¼Œæ•°æ®å’Œç´¢å¼•ä¿å­˜åœ¨ innodb_data_home_dir å’Œ innodb_data_file_pathå®šä¹‰çš„è¡¨ç©ºé—´ä¸­ï¼Œå¯ä»¥æ˜¯å¤šä¸ªæ–‡ä»¶ã€‚å¦‚æœæ˜¯å¤šè¡¨ç©ºé—´å­˜å‚¨ï¼Œæ¯ä¸ªè¡¨çš„æ•°æ®å’Œç´¢å¼•å•ç‹¬ä¿å­˜åœ¨ .ibd ä¸­ã€‚</li></ul></li><li>MEMORYå­˜å‚¨å¼•æ“<ul><li>å†…å­˜å­˜å‚¨ , é€Ÿåº¦å¿« ,ä¸å®‰å…¨ ,é€‚åˆå°é‡å¿«é€Ÿè®¿é—®çš„æ•°æ®ã€‚è¡¨ç»“æ„ä¿å­˜åœ¨.frmä¸­ã€‚</li></ul></li></ul></li><li>ç‰¹æ€§å¯¹æ¯”</li></ul><table><thead><tr><th>ç‰¹æ€§</th><th>MyISAM</th><th>InnoDB</th><th>MEMORY</th></tr></thead><tbody><tr><td>å­˜å‚¨é™åˆ¶</td><td>æœ‰(å¹³å°å¯¹æ–‡ä»¶ç³»ç»Ÿå¤§å°çš„é™åˆ¶)</td><td>64TB</td><td>æœ‰(å¹³å°çš„å†…å­˜é™åˆ¶)</td></tr><tr><td><strong>äº‹åŠ¡å®‰å…¨</strong></td><td><strong>ä¸æ”¯æŒ</strong></td><td><strong>æ”¯æŒ</strong></td><td><strong>ä¸æ”¯æŒ</strong></td></tr><tr><td><strong>é”æœºåˆ¶</strong></td><td><strong>è¡¨é”</strong></td><td><strong>è¡¨é”&#x2F;è¡Œé”</strong></td><td><strong>è¡¨é”</strong></td></tr><tr><td>B+Treeç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å“ˆå¸Œç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td><strong>é›†ç¾¤ç´¢å¼•</strong></td><td><strong>ä¸æ”¯æŒ</strong></td><td><strong>æ”¯æŒ</strong></td><td><strong>ä¸æ”¯æŒ</strong></td></tr><tr><td>æ•°æ®ç´¢å¼•</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>æ•°æ®ç¼“å­˜</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td><td>N&#x2F;A</td></tr><tr><td>ç´¢å¼•ç¼“å­˜</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>N&#x2F;A</td></tr><tr><td>æ•°æ®å¯å‹ç¼©</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>ç©ºé—´ä½¿ç”¨</td><td>ä½</td><td>é«˜</td><td>N&#x2F;A</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>ä½</td><td>é«˜</td><td>ä¸­ç­‰</td></tr><tr><td>æ‰¹é‡æ’å…¥é€Ÿåº¦</td><td>é«˜</td><td>ä½</td><td>é«˜</td></tr><tr><td><strong>å¤–é”®</strong></td><td><strong>ä¸æ”¯æŒ</strong></td><td><strong>æ”¯æŒ</strong></td><td><strong>ä¸æ”¯æŒ</strong></td></tr></tbody></table><h3 id="4-å¼•æ“çš„æ“ä½œ"><a href="#4-å¼•æ“çš„æ“ä½œ" class="headerlink" title="4.å¼•æ“çš„æ“ä½œ"></a>4.å¼•æ“çš„æ“ä½œ</h3><ul><li>æŸ¥è¯¢æ•°æ®åº“æ”¯æŒçš„å¼•æ“</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SHOW</span> ENGINES;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢æ•°æ®åº“æ”¯æŒçš„å­˜å‚¨å¼•æ“</span></span><br><span class="line"><span class="keyword">SHOW</span> ENGINES;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è¡¨å«ä¹‰:</span></span><br><span class="line">  <span class="operator">-</span> support : æŒ‡æœåŠ¡å™¨æ˜¯å¦æ”¯æŒè¯¥å­˜å‚¨å¼•æ“</span><br><span class="line">  <span class="operator">-</span> transactions : æŒ‡å­˜å‚¨å¼•æ“æ˜¯å¦æ”¯æŒäº‹åŠ¡</span><br><span class="line">  <span class="operator">-</span> XA : æŒ‡å­˜å‚¨å¼•æ“æ˜¯å¦æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†</span><br><span class="line">  <span class="operator">-</span> Savepoints : æŒ‡å­˜å‚¨å¼•æ“æ˜¯å¦æ”¯æŒä¿å­˜ç‚¹</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢æŸä¸ªæ•°æ®åº“ä¸­æ‰€æœ‰æ•°æ®è¡¨çš„å¼•æ“</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">FROM</span> æ•°æ®åº“åç§°;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹db9æ•°æ®åº“æ‰€æœ‰è¡¨çš„å­˜å‚¨å¼•æ“</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">FROM</span> db9;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢æŸä¸ªæ•°æ®åº“ä¸­æŸä¸ªæ•°æ®è¡¨çš„å¼•æ“</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">FROM</span> æ•°æ®åº“åç§° <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;æ•°æ®è¡¨åç§°&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹db9æ•°æ®åº“ä¸­stu_scoreè¡¨çš„å­˜å‚¨å¼•æ“</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">FROM</span> db9 <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;stu_score&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºæ•°æ®è¡¨ï¼ŒæŒ‡å®šå­˜å‚¨å¼•æ“</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> è¡¨å(</span><br><span class="line">åˆ—å,æ•°æ®ç±»å‹,</span><br><span class="line">    ...</span><br><span class="line">)ENGINE <span class="operator">=</span> å¼•æ“åç§°;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºdb11æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db11;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨db11æ•°æ®åº“</span></span><br><span class="line">USE db11;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºengine_testè¡¨ï¼ŒæŒ‡å®šå­˜å‚¨å¼•æ“ä¸ºMyISAM</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> engine_test(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">10</span>)</span><br><span class="line">)ENGINE <span class="operator">=</span> MYISAM;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢engine_testè¡¨çš„å¼•æ“</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">FROM</span> db11 <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;engine_test&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹è¡¨çš„å­˜å‚¨å¼•æ“</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å ENGINE <span class="operator">=</span> å¼•æ“åç§°;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹engine_testè¡¨çš„å¼•æ“ä¸ºInnoDB</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> engine_test ENGINE <span class="operator">=</span> INNODB;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢engine_testè¡¨çš„å¼•æ“</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLE</span> STATUS <span class="keyword">FROM</span> db11 <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;engine_test&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="5-æ€»ç»“ï¼šå¼•æ“çš„é€‰æ‹©"><a href="#5-æ€»ç»“ï¼šå¼•æ“çš„é€‰æ‹©" class="headerlink" title="5.æ€»ç»“ï¼šå¼•æ“çš„é€‰æ‹©"></a>5.æ€»ç»“ï¼šå¼•æ“çš„é€‰æ‹©</h3><ul><li>MyISAM ï¼šç”±äºMyISAMä¸æ”¯æŒäº‹åŠ¡ã€ä¸æ”¯æŒå¤–é”®ã€æ”¯æŒå…¨æ–‡æ£€ç´¢å’Œè¡¨çº§é”å®šï¼Œè¯»å†™ç›¸äº’é˜»å¡ï¼Œè¯»å–é€Ÿåº¦å¿«ï¼ŒèŠ‚çº¦èµ„æºï¼Œæ‰€ä»¥å¦‚æœåº”ç”¨æ˜¯ä»¥<strong>æŸ¥è¯¢æ“ä½œ</strong>å’Œ<strong>æ’å…¥æ“ä½œ</strong>ä¸ºä¸»ï¼Œåªæœ‰å¾ˆå°‘çš„<strong>æ›´æ–°å’Œåˆ é™¤</strong>æ“ä½œï¼Œå¹¶ä¸”å¯¹äº‹åŠ¡çš„å®Œæ•´æ€§ã€å¹¶å‘æ€§è¦æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œé‚£ä¹ˆé€‰æ‹©è¿™ä¸ªå­˜å‚¨å¼•æ“æ˜¯éå¸¸åˆé€‚çš„ã€‚</li><li>InnoDB : æ˜¯MySQLçš„é»˜è®¤å­˜å‚¨å¼•æ“ï¼Œ ç”±äºInnoDBæ”¯æŒäº‹åŠ¡ã€æ”¯æŒå¤–é”®ã€è¡Œçº§é”å®š ï¼Œæ”¯æŒæ‰€æœ‰è¾…åŠ©ç´¢å¼•(5.5.5åä¸æ”¯æŒå…¨æ–‡æ£€ç´¢)ï¼Œé«˜ç¼“å­˜ï¼Œæ‰€ä»¥ç”¨äºå¯¹äº‹åŠ¡çš„å®Œæ•´æ€§æœ‰æ¯”è¾ƒé«˜çš„è¦æ±‚ï¼Œåœ¨å¹¶å‘æ¡ä»¶ä¸‹è¦æ±‚æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¯»å†™é¢‘ç¹çš„æ“ä½œï¼Œé‚£ä¹ˆInnoDBå­˜å‚¨å¼•æ“æ˜¯æ¯”è¾ƒåˆé€‚çš„é€‰æ‹©ï¼Œæ¯”å¦‚BBSã€è®¡è´¹ç³»ç»Ÿã€å……å€¼è½¬è´¦ç­‰</li><li>MEMORYï¼šå°†æ‰€æœ‰æ•°æ®ä¿å­˜åœ¨RAMä¸­ï¼Œåœ¨éœ€è¦å¿«é€Ÿå®šä½è®°å½•å’Œå…¶ä»–ç±»ä¼¼æ•°æ®ç¯å¢ƒä¸‹ï¼Œå¯ä»¥æä¾›æ›´å¿«çš„è®¿é—®ã€‚MEMORYçš„ç¼ºé™·å°±æ˜¯å¯¹è¡¨çš„å¤§å°æœ‰é™åˆ¶ï¼Œå¤ªå¤§çš„è¡¨æ— æ³•ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå…¶æ¬¡æ˜¯è¦ç¡®ä¿è¡¨çš„æ•°æ®å¯ä»¥æ¢å¤ï¼Œæ•°æ®åº“å¼‚å¸¸ç»ˆæ­¢åè¡¨ä¸­çš„æ•°æ®æ˜¯å¯ä»¥æ¢å¤çš„ã€‚MEMORYè¡¨é€šå¸¸ç”¨äºæ›´æ–°ä¸å¤ªé¢‘ç¹çš„å°è¡¨ï¼Œç”¨ä»¥å¿«é€Ÿå¾—åˆ°è®¿é—®ç»“æœã€‚</li><li>æ€»ç»“ï¼šé’ˆå¯¹ä¸åŒçš„éœ€æ±‚åœºæ™¯ï¼Œæ¥é€‰æ‹©æœ€é€‚åˆçš„å­˜å‚¨å¼•æ“å³å¯ï¼å¦‚æœä¸ç¡®å®šã€åˆ™ä½¿ç”¨æ•°æ®åº“é»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼</li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLäº‹åŠ¡</title>
      <link href="/2021/05/24/MySQL_3_MySQL%E4%BA%8B%E5%8A%A1/"/>
      <url>/2021/05/24/MySQL_3_MySQL%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="1-äº‹åŠ¡çš„æ¦‚å¿µ"><a href="#1-äº‹åŠ¡çš„æ¦‚å¿µ" class="headerlink" title="1.äº‹åŠ¡çš„æ¦‚å¿µ"></a>1.äº‹åŠ¡çš„æ¦‚å¿µ</h3><p> ä¸€æ¡æˆ–å¤šæ¡ SQL è¯­å¥ç»„æˆä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œå…¶ç‰¹ç‚¹æ˜¯è¿™ä¸ªå•å…ƒè¦ä¹ˆåŒæ—¶æˆåŠŸè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œå•å…ƒä¸­çš„æ¯æ¡ SQL è¯­å¥éƒ½ç›¸äº’ä¾èµ–ï¼Œå½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œå¦‚æœæŸæ¡ SQL è¯­å¥æ‰§è¡Œå¤±è´¥æˆ–è€…å‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆæ•´ä¸ªå•å…ƒå°±ä¼šå›æ»šï¼Œæ’¤å›åˆ°äº‹åŠ¡æœ€åˆçš„çŠ¶æ€ï¼Œå¦‚æœå•å…ƒä¸­æ‰€æœ‰çš„ SQL è¯­å¥éƒ½æ‰§è¡ŒæˆåŠŸï¼Œåˆ™äº‹åŠ¡å°±é¡ºåˆ©æ‰§è¡Œã€‚</p><span id="more"></span><h3 id="2-äº‹åŠ¡çš„æ•°æ®å‡†å¤‡"><a href="#2-äº‹åŠ¡çš„æ•°æ®å‡†å¤‡" class="headerlink" title="2.äº‹åŠ¡çš„æ•°æ®å‡†å¤‡"></a>2.äº‹åŠ¡çš„æ•°æ®å‡†å¤‡</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºdb10æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE db10;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä½¿ç”¨db10æ•°æ®åº“</span></span><br><span class="line">USE db10;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ›å»ºè´¦æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> account(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,<span class="comment">-- è´¦æˆ·id</span></span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">20</span>),<span class="comment">-- è´¦æˆ·åç§°</span></span><br><span class="line">money <span class="keyword">DOUBLE</span><span class="comment">-- è´¦æˆ·ä½™é¢</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account <span class="keyword">VALUES</span> (<span class="keyword">NULL</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="number">1000</span>),(<span class="keyword">NULL</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure><h3 id="3-æœªç®¡ç†äº‹åŠ¡æ¼”ç¤º"><a href="#3-æœªç®¡ç†äº‹åŠ¡æ¼”ç¤º" class="headerlink" title="3.æœªç®¡ç†äº‹åŠ¡æ¼”ç¤º"></a>3.æœªç®¡ç†äº‹åŠ¡æ¼”ç¤º</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å¼ ä¸‰ç»™æå››è½¬è´¦500å…ƒ</span></span><br><span class="line"><span class="comment">-- 1.å¼ ä¸‰è´¦æˆ·-500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">SET</span> money<span class="operator">=</span>money<span class="number">-500</span> <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="comment">-- 2.æå››è´¦æˆ·+500</span></span><br><span class="line">å‡ºé”™äº†...</span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">SET</span> money<span class="operator">=</span>money<span class="operator">+</span><span class="number">500</span> <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;æå››&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¯¥åœºæ™¯ä¸‹ï¼Œè¿™ä¸¤æ¡sqlè¯­å¥è¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚å°±éœ€è¦è¢«äº‹åŠ¡æ‰€ç®¡ç†ï¼</span></span><br></pre></td></tr></table></figure><h3 id="4-ç®¡ç†äº‹åŠ¡æ¼”ç¤º"><a href="#4-ç®¡ç†äº‹åŠ¡æ¼”ç¤º" class="headerlink" title="4.ç®¡ç†äº‹åŠ¡æ¼”ç¤º"></a>4.ç®¡ç†äº‹åŠ¡æ¼”ç¤º</h3><ul><li>æ“ä½œäº‹åŠ¡çš„ä¸‰ä¸ªæ­¥éª¤<ol><li>å¼€å¯äº‹åŠ¡ï¼šè®°å½•å›æ»šç‚¹ï¼Œå¹¶é€šçŸ¥æœåŠ¡å™¨ï¼Œå°†è¦æ‰§è¡Œä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆåŒæ—¶æˆåŠŸã€è¦ä¹ˆåŒæ—¶å¤±è´¥</li><li>æ‰§è¡Œsqlè¯­å¥ï¼šæ‰§è¡Œå…·ä½“çš„ä¸€æ¡æˆ–å¤šæ¡sqlè¯­å¥</li><li>ç»“æŸäº‹åŠ¡(æäº¤|å›æ»š)<ul><li>æäº¤ï¼šæ²¡å‡ºç°é—®é¢˜ï¼Œæ•°æ®è¿›è¡Œæ›´æ–°</li><li>å›æ»šï¼šå‡ºç°é—®é¢˜ï¼Œæ•°æ®æ¢å¤åˆ°å¼€å¯äº‹åŠ¡æ—¶çš„çŠ¶æ€</li></ul></li></ol></li><li>å¼€å¯äº‹åŠ¡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br></pre></td></tr></table></figure><ul><li>å›æ»šäº‹åŠ¡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure><ul><li>æäº¤äº‹åŠ¡</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><ul><li>ç®¡ç†äº‹åŠ¡æ¼”ç¤º</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼ ä¸‰ç»™æå››è½¬è´¦500å…ƒ</span></span><br><span class="line"><span class="comment">-- 1.å¼ ä¸‰è´¦æˆ·-500</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">SET</span> money<span class="operator">=</span>money<span class="number">-500</span> <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;å¼ ä¸‰&#x27;</span>;</span><br><span class="line"><span class="comment">-- 2.æå››è´¦æˆ·+500</span></span><br><span class="line"><span class="comment">-- å‡ºé”™äº†...</span></span><br><span class="line"><span class="keyword">UPDATE</span> account <span class="keyword">SET</span> money<span class="operator">=</span>money<span class="operator">+</span><span class="number">500</span> <span class="keyword">WHERE</span> NAME<span class="operator">=</span><span class="string">&#x27;æå››&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å›æ»šäº‹åŠ¡(å‡ºç°é—®é¢˜)</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡(æ²¡å‡ºç°é—®é¢˜)</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><h3 id="5-äº‹åŠ¡çš„æäº¤æ–¹å¼"><a href="#5-äº‹åŠ¡çš„æäº¤æ–¹å¼" class="headerlink" title="5.äº‹åŠ¡çš„æäº¤æ–¹å¼"></a>5.äº‹åŠ¡çš„æäº¤æ–¹å¼</h3><ul><li><p>æäº¤æ–¹å¼</p><ul><li>è‡ªåŠ¨æäº¤(MySQLé»˜è®¤ä¸ºè‡ªåŠ¨æäº¤)</li><li>æ‰‹åŠ¨æäº¤</li></ul></li><li><p>ä¿®æ”¹æäº¤æ–¹å¼</p><ul><li>æŸ¥çœ‹æäº¤æ–¹å¼</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>;  <span class="comment">-- 1ä»£è¡¨è‡ªåŠ¨æäº¤    0ä»£è¡¨æ‰‹åŠ¨æäº¤</span></span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹æäº¤æ–¹å¼</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span><span class="operator">=</span>æ•°å­—;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹ä¸ºæ‰‹åŠ¨æäº¤</span></span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@AUTOCOMMIT</span><span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹æäº¤æ–¹å¼</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@AUTOCOMMIT</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-äº‹åŠ¡çš„å››å¤§ç‰¹å¾-ACID"><a href="#6-äº‹åŠ¡çš„å››å¤§ç‰¹å¾-ACID" class="headerlink" title="6.äº‹åŠ¡çš„å››å¤§ç‰¹å¾(ACID)"></a>6.äº‹åŠ¡çš„å››å¤§ç‰¹å¾(ACID)</h3><ul><li>åŸå­æ€§(atomicity)<ul><li>åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡åŒ…å«çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œå› æ­¤äº‹åŠ¡çš„æ“ä½œå¦‚æœæˆåŠŸå°±å¿…é¡»è¦å®Œå…¨åº”ç”¨åˆ°æ•°æ®åº“ï¼Œå¦‚æœæ“ä½œå¤±è´¥åˆ™ä¸èƒ½å¯¹æ•°æ®åº“æœ‰ä»»ä½•å½±å“</li></ul></li><li>ä¸€è‡´æ€§(consistency)<ul><li>ä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åéƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€</li><li>æ‹¿è½¬è´¦æ¥è¯´ï¼Œå‡è®¾å¼ ä¸‰å’Œæå››ä¸¤è€…çš„é’±åŠ èµ·æ¥ä¸€å…±æ˜¯2000ï¼Œé‚£ä¹ˆä¸ç®¡Aå’ŒBä¹‹é—´å¦‚ä½•è½¬è´¦ï¼Œè½¬å‡ æ¬¡è´¦ï¼Œäº‹åŠ¡ç»“æŸåä¸¤ä¸ªç”¨æˆ·çš„é’±ç›¸åŠ èµ·æ¥åº”è¯¥è¿˜å¾—æ˜¯2000ï¼Œè¿™å°±æ˜¯äº‹åŠ¡çš„ä¸€è‡´æ€§</li></ul></li><li>éš”ç¦»æ€§(isolcation)<ul><li>éš”ç¦»æ€§æ˜¯å½“å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ¯”å¦‚æ“ä½œåŒä¸€å¼ è¡¨æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»</li></ul></li><li>æŒä¹…æ€§(durability)<ul><li>æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤äº†ï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä¾¿æ˜¯åœ¨æ•°æ®åº“ç³»ç»Ÿé‡åˆ°æ•…éšœçš„æƒ…å†µä¸‹ä¹Ÿä¸ä¼šä¸¢å¤±æäº¤äº‹åŠ¡çš„æ“ä½œ</li></ul></li></ul><h3 id="7-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"><a href="#7-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«" class="headerlink" title="7.äº‹åŠ¡çš„éš”ç¦»çº§åˆ«"></a>7.äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h3><ul><li>éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ<ul><li>å¤šä¸ªå®¢æˆ·ç«¯æ“ä½œæ—¶ ,å„ä¸ªå®¢æˆ·ç«¯çš„äº‹åŠ¡ä¹‹é—´åº”è¯¥æ˜¯éš”ç¦»çš„ï¼Œç›¸äº’ç‹¬ç«‹çš„ , ä¸å—å½±å“çš„ã€‚</li><li>è€Œå¦‚æœå¤šä¸ªäº‹åŠ¡æ“ä½œåŒä¸€æ‰¹æ•°æ®æ—¶ï¼Œåˆ™éœ€è¦è®¾ç½®ä¸åŒçš„éš”ç¦»çº§åˆ« , å¦åˆ™å°±ä¼šäº§ç”Ÿé—®é¢˜ ã€‚</li><li>æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹å››ç§éš”ç¦»çº§åˆ«çš„åç§° , å†æ¥çœ‹çœ‹å¯èƒ½å‡ºç°çš„é—®é¢˜</li></ul></li><li>å››ç§éš”ç¦»çº§åˆ«</li></ul><table><thead><tr><th>1</th><th>è¯»æœªæäº¤</th><th>read uncommitted</th></tr></thead><tbody><tr><td><strong>2</strong></td><td><strong>è¯»å·²æäº¤</strong></td><td><strong>read committed</strong></td></tr><tr><td><strong>3</strong></td><td><strong>å¯é‡å¤è¯»</strong></td><td><strong>repeatable read</strong></td></tr><tr><td><strong>4</strong></td><td><strong>ä¸²è¡ŒåŒ–</strong></td><td><strong>serializable</strong></td></tr></tbody></table><ul><li>å¯èƒ½å¼•å‘çš„é—®é¢˜</li></ul><table><thead><tr><th>é—®é¢˜</th><th>ç°è±¡</th></tr></thead><tbody><tr><td><strong>è„è¯»</strong></td><td><strong>æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å¤„ç†è¿‡ç¨‹ä¸­è¯»å–äº†å¦ä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡ä¸­çš„æ•°æ® , å¯¼è‡´ä¸¤æ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´</strong></td></tr><tr><td><strong>ä¸å¯é‡å¤è¯»</strong></td><td><strong>æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å¤„ç†è¿‡ç¨‹ä¸­è¯»å–äº†å¦ä¸€ä¸ªäº‹åŠ¡ä¸­ä¿®æ”¹å¹¶å·²æäº¤çš„æ•°æ®, å¯¼è‡´ä¸¤æ¬¡æŸ¥è¯¢ç»“æœä¸ä¸€è‡´</strong></td></tr><tr><td><strong>å¹»è¯»</strong></td><td><strong>select æŸè®°å½•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Œå‡†å¤‡æ’å…¥æ­¤è®°å½•ï¼Œä½†æ‰§è¡Œ insert æ—¶å‘ç°æ­¤è®°å½•å·²å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ã€‚æˆ–ä¸å­˜åœ¨æ‰§è¡Œdeleteåˆ é™¤ï¼Œå´å‘ç°åˆ é™¤æˆåŠŸ</strong></td></tr></tbody></table><ul><li>æŸ¥è¯¢æ•°æ®åº“éš”ç¦»çº§åˆ«</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@TX</span>_ISOLATION;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹æ•°æ®åº“éš”ç¦»çº§åˆ«</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ ‡å‡†è¯­æ³•</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> TRANSACTION ISOLATION LEVEL çº§åˆ«å­—ç¬¦ä¸²;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¿®æ”¹æ•°æ®åº“éš”ç¦»çº§åˆ«ä¸ºread uncommitted</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> TRANSACTION ISOLATION LEVEL read uncommitted;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥çœ‹éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@TX</span>_ISOLATION;   <span class="comment">-- ä¿®æ”¹åéœ€è¦æ–­å¼€è¿æ¥é‡æ–°å¼€</span></span><br></pre></td></tr></table></figure><h3 id="8-äº‹åŠ¡éš”ç¦»çº§åˆ«æ¼”ç¤º"><a href="#8-äº‹åŠ¡éš”ç¦»çº§åˆ«æ¼”ç¤º" class="headerlink" title="8.äº‹åŠ¡éš”ç¦»çº§åˆ«æ¼”ç¤º"></a>8.äº‹åŠ¡éš”ç¦»çº§åˆ«æ¼”ç¤º</h3><ul><li><p>è„è¯»çš„é—®é¢˜</p><ul><li>çª—å£1</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºread uncommitted</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read uncommitted;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è½¬è´¦</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- çª—å£2æŸ¥è¯¢è½¬è´¦ç»“æœ ,å‡ºç°è„è¯»(æŸ¥è¯¢åˆ°å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- çª—å£2æŸ¥çœ‹è½¬è´¦ç»“æœåï¼Œæ‰§è¡Œå›æ»š</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></table></figure><ul><li>çª—å£2</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></table></figure></li><li><p>è§£å†³è„è¯»çš„é—®é¢˜å’Œæ¼”ç¤ºä¸å¯é‡å¤è¯»çš„é—®é¢˜</p><ul><li>çª—å£1</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºread committed</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read committed;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è½¬è´¦</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- çª—å£2æŸ¥çœ‹è½¬è´¦ç»“æœï¼Œå¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–(è„è¯»é—®é¢˜è¢«è§£å†³äº†)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‰§è¡Œæäº¤äº‹åŠ¡ã€‚</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- çª—å£2æŸ¥çœ‹è½¬è´¦ç»“æœï¼Œæ•°æ®å‘ç”Ÿäº†å˜åŒ–(å‡ºç°äº†ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œè¯»å–åˆ°å…¶ä»–äº‹åŠ¡å·²æäº¤çš„æ•°æ®)</span></span><br></pre></td></tr></table></figure><ul><li>çª—å£2</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></table></figure></li><li><p>è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜</p><ul><li>çª—å£1</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºrepeatable read</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level repeatable read;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è½¬è´¦</span></span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">-</span> <span class="number">500</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> account <span class="keyword">set</span> money <span class="operator">=</span> money <span class="operator">+</span> <span class="number">500</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- çª—å£2æŸ¥çœ‹è½¬è´¦ç»“æœï¼Œå¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‰§è¡Œæäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿™ä¸ªæ—¶å€™çª—å£2åªè¦è¿˜åœ¨ä¸Šæ¬¡äº‹åŠ¡ä¸­ï¼Œçœ‹åˆ°çš„ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚åªæœ‰çª—å£2ç»“æŸäº‹åŠ¡ï¼Œæ‰èƒ½çœ‹åˆ°å˜åŒ–(ä¸å¯é‡å¤è¯»çš„é—®é¢˜è¢«è§£å†³)</span></span><br></pre></td></tr></table></figure><ul><li>çª—å£2</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></table></figure></li><li><p>å¹»è¯»çš„é—®é¢˜å’Œè§£å†³</p><ul><li>çª—å£1</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºrepeatable read</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level repeatable read;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>,<span class="number">1500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨ï¼Œæœ¬çª—å£å¯ä»¥æŸ¥çœ‹åˆ°idä¸º3çš„ç»“æœ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><ul><li>çª—å£2</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨ï¼ŒæŸ¥è¯¢ä¸åˆ°æ–°æ·»åŠ çš„idä¸º3çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ idä¸º3çš„ä¸€æ¡æ•°æ®ï¼Œå‘ç°æ·»åŠ å¤±è´¥ã€‚å‡ºç°äº†å¹»è¯»</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="string">&#x27;æµ‹è¯•&#x27;</span>,<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨ï¼ŒæŸ¥è¯¢åˆ°äº†æ–°æ·»åŠ çš„idä¸º3çš„è®°å½•</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br></pre></td></tr></table></figure><ul><li>è§£å†³å¹»è¯»çš„é—®é¢˜</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">çª—å£1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºserializable</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account <span class="keyword">VALUES</span> (<span class="number">4</span>,<span class="string">&#x27;èµµå…­&#x27;</span>,<span class="number">1600</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨ï¼Œæœ¬çª—å£å¯ä»¥æŸ¥çœ‹åˆ°idä¸º4çš„ç»“æœ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">çª—å£2</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢éš”ç¦»çº§åˆ«</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@tx</span>_isolation;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŸ¥è¯¢è´¦æˆ·è¡¨ï¼Œå‘ç°æŸ¥è¯¢è¯­å¥æ— æ³•æ‰§è¡Œï¼Œæ•°æ®è¡¨è¢«é”ä½ï¼åªæœ‰çª—å£1æäº¤äº‹åŠ¡åï¼Œæ‰å¯ä»¥ç»§ç»­æ“ä½œ</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> account;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ·»åŠ idä¸º4çš„ä¸€æ¡æ•°æ®ï¼Œå‘ç°å·²ç»å­˜åœ¨äº†ï¼Œå°±ä¸ä¼šå†æ·»åŠ äº†ï¼å¹»è¯»çš„é—®é¢˜è¢«è§£å†³</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account <span class="keyword">VALUES</span> (<span class="number">4</span>,<span class="string">&#x27;æµ‹è¯•&#x27;</span>,<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure></li></ul><h3 id="9-éš”ç¦»çº§åˆ«æ€»ç»“"><a href="#9-éš”ç¦»çº§åˆ«æ€»ç»“" class="headerlink" title="9.éš”ç¦»çº§åˆ«æ€»ç»“"></a>9.éš”ç¦»çº§åˆ«æ€»ç»“</h3><table><thead><tr><th></th><th>éš”ç¦»çº§åˆ«</th><th>åç§°</th><th>å‡ºç°è„è¯»</th><th>å‡ºç°ä¸å¯é‡å¤è¯»</th><th>å‡ºç°å¹»è¯»</th><th>æ•°æ®åº“é»˜è®¤éš”ç¦»çº§åˆ«</th></tr></thead><tbody><tr><td>1</td><td><strong>read uncommitted</strong></td><td>è¯»æœªæäº¤</td><td>æ˜¯</td><td>æ˜¯</td><td>æ˜¯</td><td></td></tr><tr><td>2</td><td><strong>read committed</strong></td><td>è¯»å·²æäº¤</td><td>å¦</td><td>æ˜¯</td><td>æ˜¯</td><td>Oracle &#x2F; SQL Server</td></tr><tr><td>3</td><td><strong>repeatable read</strong></td><td>å¯é‡å¤è¯»</td><td>å¦</td><td>å¦</td><td>æ˜¯</td><td>MySQL</td></tr><tr><td>4</td><td>**serializable **</td><td>ä¸²è¡ŒåŒ–</td><td>å¦</td><td>å¦</td><td>å¦</td><td></td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼šéš”ç¦»çº§åˆ«ä»å°åˆ°å¤§å®‰å…¨æ€§è¶Šæ¥è¶Šé«˜ï¼Œä½†æ˜¯æ•ˆç‡è¶Šæ¥è¶Šä½ , æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨READ UNCOMMITTED å’Œ SERIALIZABLE éš”ç¦»çº§åˆ«.</p></blockquote><h3 id="10-äº‹åŠ¡çš„æ€»ç»“"><a href="#10-äº‹åŠ¡çš„æ€»ç»“" class="headerlink" title="10.äº‹åŠ¡çš„æ€»ç»“"></a>10.äº‹åŠ¡çš„æ€»ç»“</h3><ul><li>ä¸€æ¡æˆ–å¤šæ¡ SQL è¯­å¥ç»„æˆä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œå…¶ç‰¹ç‚¹æ˜¯è¿™ä¸ªå•å…ƒè¦ä¹ˆåŒæ—¶æˆåŠŸè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚ä¾‹å¦‚è½¬è´¦æ“ä½œ</li><li>å¼€å¯äº‹åŠ¡ï¼šstart transaction;</li><li>å›æ»šäº‹åŠ¡ï¼šrollback;</li><li>æäº¤äº‹åŠ¡ï¼šcommit;</li><li>äº‹åŠ¡å››å¤§ç‰¹å¾<ul><li>åŸå­æ€§</li><li>æŒä¹…æ€§</li><li>éš”ç¦»æ€§</li><li>ä¸€è‡´æ€§</li></ul></li><li>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«<ul><li>read uncommitted(è¯»æœªæäº¤)</li><li>read committed (è¯»å·²æäº¤)</li><li>repeatable read (å¯é‡å¤è¯»)</li><li>serializable (ä¸²è¡ŒåŒ–)</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>updateè”åˆæ›´æ–°</title>
      <link href="/2021/05/18/MySQL_2_update%E8%81%94%E5%90%88%E6%9B%B4%E6%96%B0/"/>
      <url>/2021/05/18/MySQL_2_update%E8%81%94%E5%90%88%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<p>  æ›´æ–°å¤„ç†æ•°æ®æ—¶ï¼Œå•è¡¨è”åˆæ›´æ–°å‡ºç°é”™è¯¯ï¼š</p><blockquote><p>1093 - You canâ€™t specify target table â€˜aâ€™ for update in FROM clause</p></blockquote><span id="more"></span><p>å¤šè¡¨è”åˆæ›´æ–°æ­£å¸¸</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> mz_xzjg </span><br><span class="line"><span class="keyword">SET</span> DEFSTR11 <span class="operator">=</span> ( <span class="keyword">SELECT</span> åŒºåˆ’ç¼–ç  <span class="keyword">FROM</span> `sheet1` <span class="keyword">WHERE</span> sheet1.`åŒºåˆ’åç§°` <span class="operator">=</span> mz_xzjg.DEFSTR13 ) </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">NODE_LEVEL <span class="operator">&lt;</span> <span class="number">4</span></span><br></pre></td></tr></table></figure><p>å½“å•è¡¨è”åˆæ—¶æŠ¥é”™è¯¯æç¤ºï¼Œä¸èƒ½åœ¨FROMå­å¥ä¸­æŒ‡å®šæ›´æ–°çš„ç›®æ ‡è¡¨â€™aâ€™  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- é”™è¯¯ç”¨æ³•</span></span><br><span class="line"><span class="keyword">UPDATE</span> mz_xzjg a </span><br><span class="line"><span class="keyword">SET</span> a.DEFSTR11 <span class="operator">=</span> ( <span class="keyword">SELECT</span> b.DEFSTR11 <span class="keyword">FROM</span> `mz_xzjg` b <span class="keyword">WHERE</span> b.XZQH_ID <span class="operator">=</span> a.node_pid ) </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">NODE_LEVEL <span class="operator">=</span> <span class="number">4</span></span><br></pre></td></tr></table></figure><p>å¤åˆ¶äº†ä¸€å¼ <code>mz_xzjg</code>è¡¨<code>mz_xzjg_copy1</code>,æ²¡æœ‰æŠ¥é”™</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> mz_xzjg a </span><br><span class="line"><span class="keyword">SET</span> a.DEFSTR11 <span class="operator">=</span> ( <span class="keyword">SELECT</span> b.DEFSTR11 <span class="keyword">FROM</span> `mz_xzjg_copy1` b <span class="keyword">WHERE</span> b.XZQH_ID <span class="operator">=</span> a.node_pid ) </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">NODE_LEVEL <span class="operator">=</span> <span class="number">4</span></span><br></pre></td></tr></table></figure><p><code>mz_xzjg_copy1</code>ç›¸å½“äºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œç›´æ¥SELECT</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> mz_xzjg a </span><br><span class="line"><span class="keyword">SET</span> a.DEFSTR11 <span class="operator">=</span> ( <span class="keyword">SELECT</span> b.DEFSTR11 <span class="keyword">FROM</span> ( <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `mz_xzjg` ) b <span class="keyword">WHERE</span> b.XZQH_ID <span class="operator">=</span> a.node_pid ) </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">NODE_LEVEL <span class="operator">=</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>existså’Œinçš„åŒºåˆ«</title>
      <link href="/2021/05/17/MySQL_1_ExistsAndIn/"/>
      <url>/2021/05/17/MySQL_1_ExistsAndIn/</url>
      
        <content type="html"><![CDATA[<p>inæ˜¯æŠŠå¤–è¡¨å’Œå†…è¡¨ä½œhashè¿æ¥ï¼Œè€Œexistsæ˜¯å¯¹å¤–è¡¨ä½œloopå¾ªç¯ï¼Œæ¯æ¬¡loopå¾ªç¯å†å¯¹å†…è¡¨è¿›è¡ŒæŸ¥è¯¢ï¼Œä¸€ç›´ä»¥æ¥è®¤ä¸ºexistsæ¯”inæ•ˆç‡é«˜çš„è¯´æ³•æ˜¯ä¸å‡†ç¡®çš„ã€‚</p><span id="more"></span><h2 id="1ã€inå’Œexists"><a href="#1ã€inå’Œexists" class="headerlink" title="1ã€inå’Œexists"></a>1ã€inå’Œexists</h2><p>ã€€å¤–è¡¨å¤§ï¼Œç”¨INï¼›å†…è¡¨å¤§ï¼Œç”¨EXISTSï¼›</p><p>ã€€ã€€åŸç†ï¼š</p><p>ã€€ã€€ç”¨inï¼šå¤–è¡¨ä½¿ç”¨äº†ç´¢å¼•ï¼Œç›´æ¥ä½œhashè¿æ¥ï¼›</p><p>ã€€ã€€ç”¨existsï¼šå†…è¡¨ä½¿ç”¨äº†ç´¢å¼•ï¼Œå¤–è¡¨ä½œloopå¾ªç¯å†è¿›è¡ŒåŒ¹é…ï¼›</p><p>ä¾‹å¦‚ï¼šè¡¨A(å°è¡¨)ï¼Œè¡¨B(å¤§è¡¨)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">where</span> cc <span class="keyword">in</span>(<span class="keyword">select</span> cc <span class="keyword">from</span> B)ã€€ã€€<span class="comment">--&gt;æ•ˆç‡ä½ï¼Œç”¨åˆ°äº†Aè¡¨ä¸Šccåˆ—çš„ç´¢å¼•ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> A <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> cc <span class="keyword">from</span> B <span class="keyword">where</span> cc<span class="operator">=</span>A.cc)ã€€ã€€<span class="comment">--&gt;æ•ˆç‡é«˜ï¼Œç”¨åˆ°äº†Bè¡¨ä¸Šccåˆ—çš„ç´¢å¼•ã€‚</span></span><br></pre></td></tr></table></figure><p>ç›¸åçš„ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> B <span class="keyword">where</span> cc <span class="keyword">in</span>(<span class="keyword">select</span> cc <span class="keyword">from</span> A)ã€€ã€€<span class="comment">--&gt;æ•ˆç‡é«˜ï¼Œç”¨åˆ°äº†Bè¡¨ä¸Šccåˆ—çš„ç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> B <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> cc <span class="keyword">from</span> A <span class="keyword">where</span> cc<span class="operator">=</span>B.cc)ã€€ã€€<span class="comment">--&gt;æ•ˆç‡ä½ï¼Œç”¨åˆ°äº†Aè¡¨ä¸Šccåˆ—çš„ç´¢å¼•ã€‚</span></span><br></pre></td></tr></table></figure><h2 id="2ã€not-in-å’Œnot-exists"><a href="#2ã€not-in-å’Œnot-exists" class="headerlink" title="2ã€not in å’Œnot exists"></a>2ã€not in å’Œnot exists</h2><p>ã€€æ€§èƒ½ï¼šnot inä¸èµ°ç´¢å¼•ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½ç”¨not existsï¼›</p><p>â€‹    åŒºåˆ«ï¼šè¿˜æœ‰ä¸€ç‚¹åŒºåˆ«å°±æ˜¯ï¼Œnot inå­—æ®µä¸ºnullçš„ä¸è¿›è¡Œç­›é€‰å‡ºæ¥ï¼›è€Œä½¿ç”¨not existså³å¯ï¼›</p><p>ã€€è¿™ä¹Ÿå°±æ˜¯è¯´æœ‰æ—¶å®šä¹‰å­—æ®µï¼Œç”¨not nullæ¯”è¾ƒå¥½äº†ï¼Œè¿™æ ·ä¹Ÿèƒ½é¿å…not inæŸ¥è¯¢å‡ºé”™ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> #t1(c1 <span class="type">int</span>,c2 <span class="type">int</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> #t2(c1 <span class="type">int</span>,c2 <span class="type">int</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> #t1 <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> #t1 <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> #t2 <span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> #t2 <span class="keyword">values</span>(<span class="number">1</span>,<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> #t1 <span class="keyword">where</span> c2 <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">select</span> c2 <span class="keyword">from</span> #t2);ã€€ã€€<span class="comment">--&gt;æ‰§è¡Œç»“æœï¼šæ— </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> #t1 <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> #t2 <span class="keyword">where</span> #t2.c2<span class="operator">=</span>#t1.c2)ã€€ã€€<span class="comment">--&gt;æ‰§è¡Œç»“æœï¼š1ã€€ã€€3</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæŸ¥è¯¢è¯­å¥ä½¿ç”¨äº†not inï¼Œé‚£ä¹ˆå¯¹å†…å¤–è¡¨éƒ½è¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼›è€Œnot existsçš„å­æŸ¥è¯¢ä¾ç„¶èƒ½ç”¨åˆ°è¡¨ä¸Šçš„ç´¢å¼•ã€‚æ‰€ä»¥æ— è®ºå“ªä¸ªè¡¨å¤§ï¼Œç”¨not existséƒ½æ¯”not in è¦å¿«ã€‚</p><h2 id="3ã€in-ä¸-x3D-çš„åŒºåˆ«"><a href="#3ã€in-ä¸-x3D-çš„åŒºåˆ«" class="headerlink" title="3ã€in ä¸ &#x3D; çš„åŒºåˆ«"></a>3ã€in ä¸ &#x3D; çš„åŒºåˆ«</h2><p><code>select name from student where name in(&#39;zhang&#39;,&#39;wang&#39;,&#39;zhao&#39;);</code><br>ä¸</p><p><code>select name from student where name=&#39;zhang&#39; or name=&#39;wang&#39; or name=&#39;zhao&#39;</code><br>çš„ç»“æœæ˜¯ç›¸åŒçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹è±¡ã€æ•°ç»„ã€é›†åˆå·¥å…·ç±»</title>
      <link href="/2021/03/19/Spring_%E5%AF%B9%E8%B1%A1%E3%80%81%E6%95%B0%E7%BB%84%E3%80%81%E9%9B%86%E5%90%88%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2021/03/19/Spring_%E5%AF%B9%E8%B1%A1%E3%80%81%E6%95%B0%E7%BB%84%E3%80%81%E9%9B%86%E5%90%88%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h3 id="ObjectUtils"><a href="#ObjectUtils" class="headerlink" title="ObjectUtils"></a>ObjectUtils</h3><h4 id="1-è·å–å¯¹è±¡çš„åŸºæœ¬ä¿¡æ¯"><a href="#1-è·å–å¯¹è±¡çš„åŸºæœ¬ä¿¡æ¯" class="headerlink" title="1.è·å–å¯¹è±¡çš„åŸºæœ¬ä¿¡æ¯"></a>1.è·å–å¯¹è±¡çš„åŸºæœ¬ä¿¡æ¯</h4><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å¯¹è±¡çš„ç±»åã€‚å‚æ•°ä¸º null æ—¶ï¼Œè¿”å›å­—ç¬¦ä¸²ï¼š&quot;null&quot; </span></span><br><span class="line">String <span class="title function_">nullSafeClassName</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// å‚æ•°ä¸º null æ—¶ï¼Œè¿”å› 0</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">nullSafeHashCode</span><span class="params">(Object object)</span></span><br><span class="line"><span class="comment">// å‚æ•°ä¸º null æ—¶ï¼Œè¿”å›å­—ç¬¦ä¸²ï¼š&quot;null&quot;</span></span><br><span class="line">String <span class="title function_">nullSafeToString</span><span class="params">(<span class="type">boolean</span>[] array)</span></span><br><span class="line"><span class="comment">// è·å–å¯¹è±¡ HashCodeï¼ˆåå…­è¿›åˆ¶å½¢å¼å­—ç¬¦ä¸²ï¼‰ã€‚å‚æ•°ä¸º null æ—¶ï¼Œè¿”å› 0 </span></span><br><span class="line">String <span class="title function_">getIdentityHexString</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// è·å–å¯¹è±¡çš„ç±»åå’Œ HashCodeã€‚ å‚æ•°ä¸º null æ—¶ï¼Œè¿”å›å­—ç¬¦ä¸²ï¼š&quot;&quot; </span></span><br><span class="line">String <span class="title function_">identityToString</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// ç›¸å½“äº toString()æ–¹æ³•ï¼Œä½†å‚æ•°ä¸º null æ—¶ï¼Œè¿”å›å­—ç¬¦ä¸²ï¼š&quot;&quot;</span></span><br><span class="line">String <span class="title function_">getDisplayString</span><span class="params">(Object obj)</span></span><br></pre></td></tr></table></figure><h4 id="2-åˆ¤æ–­å·¥å…·"><a href="#2-åˆ¤æ–­å·¥å…·" class="headerlink" title="2.åˆ¤æ–­å·¥å…·"></a>2.åˆ¤æ–­å·¥å…·</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Object[] array)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å‚æ•°å¯¹è±¡æ˜¯å¦æ˜¯æ•°ç»„</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isArray</span><span class="params">(Object obj)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ </span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsElement</span><span class="params">(Object[] array, Object element)</span></span><br><span class="line"><span class="comment">// ç›¸ç­‰ï¼Œæˆ–åŒä¸º nullæ—¶ï¼Œè¿”å› true</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">nullSafeEquals</span><span class="params">(Object o1, Object o2)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">åˆ¤æ–­å‚æ•°å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼Œåˆ¤æ–­æ ‡å‡†ä¸ºï¼š</span></span><br><span class="line"><span class="comment">    Optional: Optional.empty()</span></span><br><span class="line"><span class="comment">       Array: length == 0</span></span><br><span class="line"><span class="comment">CharSequence: length == 0</span></span><br><span class="line"><span class="comment">  Collection: Collection.isEmpty()</span></span><br><span class="line"><span class="comment">         Map: Map.isEmpty()</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Object obj)</span></span><br></pre></td></tr></table></figure><h4 id="3-å…¶ä»–å·¥å…·æ–¹æ³•"><a href="#3-å…¶ä»–å·¥å…·æ–¹æ³•" class="headerlink" title="3.å…¶ä»–å·¥å…·æ–¹æ³•"></a>3.å…¶ä»–å·¥å…·æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘å‚æ•°æ•°ç»„çš„æœ«å°¾è¿½åŠ æ–°å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„</span></span><br><span class="line">&lt;A, O <span class="keyword">extends</span> <span class="title class_">A</span>&gt; A[] addObjectToArray(A[] array, O obj)</span><br><span class="line"><span class="comment">// åŸç”ŸåŸºç¡€ç±»å‹æ•°ç»„ --&gt; åŒ…è£…ç±»æ•°ç»„</span></span><br><span class="line">Object[] toObjectArray(Object source)</span><br></pre></td></tr></table></figure><h3 id="StringUtils"><a href="#StringUtils" class="headerlink" title="StringUtils"></a>StringUtils</h3><h4 id="1-å­—ç¬¦ä¸²åˆ¤æ–­å·¥å…·"><a href="#1-å­—ç¬¦ä¸²åˆ¤æ–­å·¥å…·" class="headerlink" title="1.å­—ç¬¦ä¸²åˆ¤æ–­å·¥å…·"></a>1.å­—ç¬¦ä¸²åˆ¤æ–­å·¥å…·</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸º nullï¼Œæˆ– &quot;&quot;ã€‚æ³¨æ„ï¼ŒåŒ…å«ç©ºç™½ç¬¦çš„å­—ç¬¦ä¸²ä¸ºéç©º</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Object str)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä»¥æŒ‡å®šå†…å®¹ç»“æŸã€‚å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">endsWithIgnoreCase</span><span class="params">(String str, String suffix)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å·²æŒ‡å®šå†…å®¹å¼€å¤´ã€‚å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">startsWithIgnoreCase</span><span class="params">(String str, String prefix)</span> </span><br><span class="line"><span class="comment">// æ˜¯å¦åŒ…å«ç©ºç™½ç¬¦</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²éç©ºä¸”é•¿åº¦ä¸ä¸º 0ï¼Œå³ï¼ŒNot Empty</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">hasLength</span><span class="params">(CharSequence str)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å®é™…å†…å®¹ï¼Œå³éä»…åŒ…å«ç©ºç™½ç¬¦ï¼Œä¹Ÿå°±æ˜¯ Not Blank</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">hasText</span><span class="params">(CharSequence str)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æŒ‡å®šç´¢å¼•å¤„æ˜¯å¦åŒ…å«ä¸€ä¸ªå­ä¸²ã€‚</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">substringMatch</span><span class="params">(CharSequence str, <span class="type">int</span> index, CharSequence substring)</span></span><br><span class="line"><span class="comment">// è®¡ç®—ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŒ‡å®šå­ä¸²çš„å‡ºç°æ¬¡æ•°</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">countOccurrencesOf</span><span class="params">(String str, String sub)</span></span><br></pre></td></tr></table></figure><h4 id="2-å­—ç¬¦ä¸²æ“ä½œå·¥å…·"><a href="#2-å­—ç¬¦ä¸²æ“ä½œå·¥å…·" class="headerlink" title="2.å­—ç¬¦ä¸²æ“ä½œå·¥å…·"></a>2.å­—ç¬¦ä¸²æ“ä½œå·¥å…·</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥æ‰¾å¹¶æ›¿æ¢æŒ‡å®šå­ä¸²</span></span><br><span class="line">String <span class="title function_">replace</span><span class="params">(String inString, String oldPattern, String newPattern)</span></span><br><span class="line"><span class="comment">// å»é™¤å°¾éƒ¨çš„ç‰¹å®šå­—ç¬¦</span></span><br><span class="line">String <span class="title function_">trimTrailingCharacter</span><span class="params">(String str, <span class="type">char</span> trailingCharacter)</span> </span><br><span class="line"><span class="comment">// å»é™¤å¤´éƒ¨çš„ç‰¹å®šå­—ç¬¦</span></span><br><span class="line">String <span class="title function_">trimLeadingCharacter</span><span class="params">(String str, <span class="type">char</span> leadingCharacter)</span></span><br><span class="line"><span class="comment">// å»é™¤å¤´éƒ¨çš„ç©ºç™½ç¬¦</span></span><br><span class="line">String <span class="title function_">trimLeadingWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// å»é™¤å¤´éƒ¨çš„ç©ºç™½ç¬¦</span></span><br><span class="line">String <span class="title function_">trimTrailingWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// å»é™¤å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºç™½ç¬¦</span></span><br><span class="line">String <span class="title function_">trimWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// åˆ é™¤å¼€å¤´ã€ç»“å°¾å’Œä¸­é—´çš„ç©ºç™½ç¬¦</span></span><br><span class="line">String <span class="title function_">trimAllWhitespace</span><span class="params">(String str)</span></span><br><span class="line"><span class="comment">// åˆ é™¤æŒ‡å®šå­ä¸²</span></span><br><span class="line">String <span class="title function_">delete</span><span class="params">(String inString, String pattern)</span></span><br><span class="line"><span class="comment">// åˆ é™¤æŒ‡å®šå­—ç¬¦ï¼ˆå¯ä»¥æ˜¯å¤šä¸ªï¼‰</span></span><br><span class="line">String <span class="title function_">deleteAny</span><span class="params">(String inString, String charsToDelete)</span></span><br><span class="line"><span class="comment">// å¯¹æ•°ç»„çš„æ¯ä¸€é¡¹æ‰§è¡Œ trim() æ–¹æ³•</span></span><br><span class="line">String[] trimArrayElements(String[] array)</span><br><span class="line"><span class="comment">// å°† URL å­—ç¬¦ä¸²è¿›è¡Œè§£ç </span></span><br><span class="line">String <span class="title function_">uriDecode</span><span class="params">(String source, Charset charset)</span></span><br></pre></td></tr></table></figure><h4 id="3-è·¯å¾„ç›¸å…³å·¥å…·æ–¹æ³•"><a href="#3-è·¯å¾„ç›¸å…³å·¥å…·æ–¹æ³•" class="headerlink" title="3.è·¯å¾„ç›¸å…³å·¥å…·æ–¹æ³•"></a>3.è·¯å¾„ç›¸å…³å·¥å…·æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£æè·¯å¾„å­—ç¬¦ä¸²ï¼Œä¼˜åŒ–å…¶ä¸­çš„ â€œ..â€ </span></span><br><span class="line">String <span class="title function_">cleanPath</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// è§£æè·¯å¾„å­—ç¬¦ä¸²ï¼Œè§£æå‡ºæ–‡ä»¶åéƒ¨åˆ†</span></span><br><span class="line">String <span class="title function_">getFilename</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// è§£æè·¯å¾„å­—ç¬¦ä¸²ï¼Œè§£æå‡ºæ–‡ä»¶åç¼€å</span></span><br><span class="line">String <span class="title function_">getFilenameExtension</span><span class="params">(String path)</span></span><br><span class="line"><span class="comment">// æ¯”è¾ƒä¸¤ä¸ªä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªè·¯å¾„ã€‚ä¼šè‡ªåŠ¨å¤„ç†è·¯å¾„ä¸­çš„ â€œ..â€ </span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">pathEquals</span><span class="params">(String path1, String path2)</span></span><br><span class="line"><span class="comment">// åˆ é™¤æ–‡ä»¶è·¯å¾„åä¸­çš„åç¼€éƒ¨åˆ†</span></span><br><span class="line">String <span class="title function_">stripFilenameExtension</span><span class="params">(String path)</span> </span><br><span class="line"><span class="comment">// ä»¥ â€œ. ä½œä¸ºåˆ†éš”ç¬¦ï¼Œè·å–å…¶æœ€åä¸€éƒ¨åˆ†</span></span><br><span class="line">String <span class="title function_">unqualify</span><span class="params">(String qualifiedName)</span></span><br><span class="line"><span class="comment">// ä»¥æŒ‡å®šå­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ï¼Œè·å–å…¶æœ€åä¸€éƒ¨åˆ†</span></span><br><span class="line">String <span class="title function_">unqualify</span><span class="params">(String qualifiedName, <span class="type">char</span> separator)</span></span><br></pre></td></tr></table></figure><h3 id="CollectionUtils"><a href="#CollectionUtils" class="headerlink" title="CollectionUtils"></a>CollectionUtils</h3><h4 id="1-é›†åˆåˆ¤æ–­å·¥å…·"><a href="#1-é›†åˆåˆ¤æ–­å·¥å…·" class="headerlink" title="1.é›†åˆåˆ¤æ–­å·¥å…·"></a>1.é›†åˆåˆ¤æ–­å·¥å…·</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­ List/Set æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Collection&lt;?&gt; collection)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­ Map æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">(Map&lt;?,?&gt; map)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­ List/Set ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsInstance</span><span class="params">(Collection&lt;?&gt; collection, Object element)</span></span><br><span class="line"><span class="comment">// ä»¥è¿­ä»£å™¨çš„æ–¹å¼ï¼Œåˆ¤æ–­ List/Set ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(Iterator&lt;?&gt; iterator, Object element)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­ List/Set æ˜¯å¦åŒ…å«æŸäº›å¯¹è±¡ä¸­çš„ä»»æ„ä¸€ä¸ª</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">containsAny</span><span class="params">(Collection&lt;?&gt; source, Collection&lt;?&gt; candidates)</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­ List/Set ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦å”¯ä¸€ã€‚å³ List/Set ä¸­ä¸å­˜åœ¨é‡å¤å…ƒç´ </span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">hasUniqueObject</span><span class="params">(Collection&lt;?&gt; collection)</span></span><br></pre></td></tr></table></figure><h4 id="2-é›†åˆæ“ä½œå·¥å…·"><a href="#2-é›†åˆæ“ä½œå·¥å…·" class="headerlink" title="2.é›†åˆæ“ä½œå·¥å…·"></a>2.é›†åˆæ“ä½œå·¥å…·</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°† Array ä¸­çš„å…ƒç´ éƒ½æ·»åŠ åˆ° List/Set ä¸­</span></span><br><span class="line">&lt;E&gt; <span class="keyword">void</span> <span class="title function_">mergeArrayIntoCollection</span><span class="params">(Object array, Collection&lt;E&gt; collection)</span>  </span><br><span class="line"><span class="comment">// å°† Properties ä¸­çš„é”®å€¼å¯¹éƒ½æ·»åŠ åˆ° Map ä¸­</span></span><br><span class="line">&lt;K,V&gt; <span class="keyword">void</span> <span class="title function_">mergePropertiesIntoMap</span><span class="params">(Properties props, Map&lt;K,V&gt; map)</span></span><br><span class="line"><span class="comment">// è¿”å› List ä¸­æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">&lt;T&gt; T <span class="title function_">lastElement</span><span class="params">(List&lt;T&gt; list)</span>  </span><br><span class="line"><span class="comment">// è¿”å› Set ä¸­æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">&lt;T&gt; T <span class="title function_">lastElement</span><span class="params">(Set&lt;T&gt; set)</span> </span><br><span class="line"><span class="comment">// è¿”å›å‚æ•° candidates ä¸­ç¬¬ä¸€ä¸ªå­˜åœ¨äºå‚æ•° source ä¸­çš„å…ƒç´ </span></span><br><span class="line">&lt;E&gt; E <span class="title function_">findFirstMatch</span><span class="params">(Collection&lt;?&gt; source, Collection&lt;E&gt; candidates)</span></span><br><span class="line"><span class="comment">// è¿”å› List/Set ä¸­æŒ‡å®šç±»å‹çš„å…ƒç´ ã€‚</span></span><br><span class="line">&lt;T&gt; T <span class="title function_">findValueOfType</span><span class="params">(Collection&lt;?&gt; collection, Class&lt;T&gt; type)</span></span><br><span class="line"><span class="comment">// è¿”å› List/Set ä¸­æŒ‡å®šç±»å‹çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ç§ç±»å‹æœªæ‰¾åˆ°ï¼Œåˆ™æŸ¥æ‰¾ç¬¬äºŒç§ç±»å‹ï¼Œä»¥æ­¤ç±»æ¨</span></span><br><span class="line">Object <span class="title function_">findValueOfType</span><span class="params">(Collection&lt;?&gt; collection, Class&lt;?&gt;[] types)</span></span><br><span class="line"><span class="comment">// è¿”å› List/Set ä¸­å…ƒç´ çš„ç±»å‹</span></span><br><span class="line">Class&lt;?&gt; findCommonElementType(Collection&lt;?&gt; collection)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ã€èµ„æºã€IO æµå·¥å…·ç±»</title>
      <link href="/2021/03/19/Spring_%E6%96%87%E4%BB%B6%E3%80%81%E8%B5%84%E6%BA%90%E3%80%81IO%20%E6%B5%81%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2021/03/19/Spring_%E6%96%87%E4%BB%B6%E3%80%81%E8%B5%84%E6%BA%90%E3%80%81IO%20%E6%B5%81%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h3 id="FileCopyUtils"><a href="#FileCopyUtils" class="headerlink" title="FileCopyUtils"></a>FileCopyUtils</h3><h4 id="1-è¾“å…¥"><a href="#1-è¾“å…¥" class="headerlink" title="1.è¾“å…¥"></a>1.è¾“å…¥</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»æ–‡ä»¶ä¸­è¯»å…¥åˆ°å­—èŠ‚æ•°ç»„ä¸­</span></span><br><span class="line"><span class="type">byte</span>[] copyToByteArray(File in)</span><br><span class="line"><span class="comment">// ä»è¾“å…¥æµä¸­è¯»å…¥åˆ°å­—èŠ‚æ•°ç»„ä¸­</span></span><br><span class="line"><span class="type">byte</span>[] copyToByteArray(InputStream in)</span><br><span class="line"><span class="comment">// ä»è¾“å…¥æµä¸­è¯»å…¥åˆ°å­—ç¬¦ä¸²ä¸­</span></span><br><span class="line">String <span class="title function_">copyToString</span><span class="params">(Reader in)</span></span><br></pre></td></tr></table></figure><span id="more"></span><h4 id="2-è¾“å‡º"><a href="#2-è¾“å‡º" class="headerlink" title="2.è¾“å‡º"></a>2.è¾“å‡º</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»å­—èŠ‚æ•°ç»„åˆ°æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(<span class="type">byte</span>[] in, File out)</span></span><br><span class="line"><span class="comment">// ä»æ–‡ä»¶åˆ°æ–‡ä»¶</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(File in, File out)</span></span><br><span class="line"><span class="comment">// ä»å­—èŠ‚æ•°ç»„åˆ°è¾“å‡ºæµ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(<span class="type">byte</span>[] in, OutputStream out)</span> </span><br><span class="line"><span class="comment">// ä»è¾“å…¥æµåˆ°è¾“å‡ºæµ</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(InputStream in, OutputStream out)</span> </span><br><span class="line"><span class="comment">// ä»è¾“å…¥æµåˆ°è¾“å‡ºæµ</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(Reader in, Writer out)</span></span><br><span class="line"><span class="comment">// ä»å­—ç¬¦ä¸²åˆ°è¾“å‡ºæµ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(String in, Writer out)</span></span><br></pre></td></tr></table></figure><h3 id="ResourceUtils"><a href="#ResourceUtils" class="headerlink" title="ResourceUtils"></a>ResourceUtils</h3><h4 id="1-ä»èµ„æºè·¯å¾„è·å–æ–‡ä»¶"><a href="#1-ä»èµ„æºè·¯å¾„è·å–æ–‡ä»¶" class="headerlink" title="1.ä»èµ„æºè·¯å¾„è·å–æ–‡ä»¶"></a>1.ä»èµ„æºè·¯å¾„è·å–æ–‡ä»¶</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªåˆæ³•çš„ URL å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isUrl</span><span class="params">(String resourceLocation)</span></span><br><span class="line"><span class="comment">// è·å– URL</span></span><br><span class="line"><span class="keyword">static</span> URL <span class="title function_">getURL</span><span class="params">(String resourceLocation)</span> </span><br><span class="line"><span class="comment">// è·å–æ–‡ä»¶ï¼ˆåœ¨ JAR åŒ…å†…æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œéœ€è¦æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="keyword">static</span> File <span class="title function_">getFile</span><span class="params">(String resourceLocation)</span></span><br></pre></td></tr></table></figure><h4 id="2-Resource"><a href="#2-Resource" class="headerlink" title="2.Resource"></a>2.Resource</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ç³»ç»Ÿèµ„æº D:\...</span></span><br><span class="line">FileSystemResource</span><br><span class="line"><span class="comment">// URL èµ„æºï¼Œå¦‚ file://... http://...</span></span><br><span class="line">UrlResource</span><br><span class="line"><span class="comment">// ç±»è·¯å¾„ä¸‹çš„èµ„æºï¼Œclasspth:...</span></span><br><span class="line">ClassPathResource</span><br><span class="line"><span class="comment">// Web å®¹å™¨ä¸Šä¸‹æ–‡ä¸­çš„èµ„æºï¼ˆjar åŒ…ã€war åŒ…ï¼‰</span></span><br><span class="line">ServletContextResource</span><br><span class="line"><span class="comment">// åˆ¤æ–­èµ„æºæ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">exists</span><span class="params">()</span></span><br><span class="line"><span class="comment">// ä»èµ„æºä¸­è·å¾— File å¯¹è±¡</span></span><br><span class="line">File <span class="title function_">getFile</span><span class="params">()</span></span><br><span class="line"><span class="comment">// ä»èµ„æºä¸­è·å¾— URI å¯¹è±¡</span></span><br><span class="line">URI <span class="title function_">getURI</span><span class="params">()</span></span><br><span class="line"><span class="comment">// ä»èµ„æºä¸­è·å¾— URI å¯¹è±¡</span></span><br><span class="line">URL <span class="title function_">getURL</span><span class="params">()</span></span><br><span class="line"><span class="comment">// è·å¾—èµ„æºçš„ InputStream</span></span><br><span class="line">InputStream <span class="title function_">getInputStream</span><span class="params">()</span></span><br><span class="line"><span class="comment">// è·å¾—èµ„æºçš„æè¿°ä¿¡æ¯</span></span><br><span class="line">String <span class="title function_">getDescription</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h3 id="StreamUtils"><a href="#StreamUtils" class="headerlink" title="StreamUtils"></a>StreamUtils</h3><h4 id="1-è¾“å…¥-1"><a href="#1-è¾“å…¥-1" class="headerlink" title="1.è¾“å…¥"></a>1.è¾“å…¥</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(<span class="type">byte</span>[] in, OutputStream out)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">copy</span><span class="params">(InputStream in, OutputStream out)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(String in, Charset charset, OutputStream out)</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">copyRange</span><span class="params">(InputStream in, OutputStream out, <span class="type">long</span> start, <span class="type">long</span> end)</span></span><br></pre></td></tr></table></figure><h4 id="2-è¾“å‡º-1"><a href="#2-è¾“å‡º-1" class="headerlink" title="2.è¾“å‡º"></a>2.è¾“å‡º</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span>[] copyToByteArray(InputStream in)</span><br><span class="line">String <span class="title function_">copyToString</span><span class="params">(InputStream in, Charset charset)</span></span><br><span class="line"><span class="comment">// èˆå¼ƒè¾“å…¥æµä¸­çš„å†…å®¹</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">drain</span><span class="params">(InputStream in)</span> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå°„ã€AOPå·¥å…·ç±»</title>
      <link href="/2021/03/11/Spring_%E5%8F%8D%E5%B0%84%E3%80%81AOP%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2021/03/11/Spring_%E5%8F%8D%E5%B0%84%E3%80%81AOP%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h3 id="ReflectionUtils"><a href="#ReflectionUtils" class="headerlink" title="ReflectionUtils"></a>ReflectionUtils</h3><h4 id="1-è·å–æ–¹æ³•"><a href="#1-è·å–æ–¹æ³•" class="headerlink" title="1.è·å–æ–¹æ³•"></a>1.è·å–æ–¹æ³•</h4><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ç±»ä¸­æŸ¥æ‰¾æŒ‡å®šæ–¹æ³•</span></span><br><span class="line">Method <span class="title function_">findMethod</span><span class="params">(Class&lt;?&gt; clazz, String name)</span> </span><br><span class="line"><span class="comment">// åŒä¸Šï¼Œé¢å¤–æä¾›æ–¹æ³•å‚æ•°ç±»å‹ä½œæŸ¥æ‰¾æ¡ä»¶</span></span><br><span class="line">Method <span class="title function_">findMethod</span><span class="params">(Class&lt;?&gt; clazz, String name, Class&lt;?&gt;... paramTypes)</span> </span><br><span class="line"><span class="comment">// è·å¾—ç±»ä¸­æ‰€æœ‰æ–¹æ³•ï¼ŒåŒ…æ‹¬ç»§æ‰¿è€Œæ¥çš„</span></span><br><span class="line">Method[] getAllDeclaredMethods(Class&lt;?&gt; leafClass) </span><br><span class="line"><span class="comment">// åœ¨ç±»ä¸­æŸ¥æ‰¾æŒ‡å®šæ„é€ æ–¹æ³•</span></span><br><span class="line">Constructor&lt;T&gt; <span class="title function_">accessibleConstructor</span><span class="params">(Class&lt;T&gt; clazz, Class&lt;?&gt;... parameterTypes)</span> </span><br><span class="line"><span class="comment">// æ˜¯å¦æ˜¯ equals() æ–¹æ³•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isEqualsMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// æ˜¯å¦æ˜¯ hashCode() æ–¹æ³• </span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isHashCodeMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// æ˜¯å¦æ˜¯ toString() æ–¹æ³•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isToStringMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// æ˜¯å¦æ˜¯ä» Object ç±»ç»§æ‰¿è€Œæ¥çš„æ–¹æ³•</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isObjectMethod</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// æ£€æŸ¥ä¸€ä¸ªæ–¹æ³•æ˜¯å¦å£°æ˜æŠ›å‡ºæŒ‡å®šå¼‚å¸¸</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">declaresException</span><span class="params">(Method method, Class&lt;?&gt; exceptionType)</span> </span><br></pre></td></tr></table></figure><h4 id="2-æ‰§è¡Œæ–¹æ³•"><a href="#2-æ‰§è¡Œæ–¹æ³•" class="headerlink" title="2.æ‰§è¡Œæ–¹æ³•"></a>2.æ‰§è¡Œæ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">Object <span class="title function_">invokeMethod</span><span class="params">(Method method, Object target)</span>  </span><br><span class="line"><span class="comment">// åŒä¸Šï¼Œæä¾›æ–¹æ³•å‚æ•°</span></span><br><span class="line">Object <span class="title function_">invokeMethod</span><span class="params">(Method method, Object target, Object... args)</span> </span><br><span class="line"><span class="comment">// å–æ¶ˆ Java æƒé™æ£€æŸ¥ã€‚ä»¥ä¾¿åç»­æ‰§è¡Œè¯¥ç§æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">makeAccessible</span><span class="params">(Method method)</span> </span><br><span class="line"><span class="comment">// å–æ¶ˆ Java æƒé™æ£€æŸ¥ã€‚ä»¥ä¾¿åç»­æ‰§è¡Œç§æœ‰æ„é€ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">makeAccessible</span><span class="params">(Constructor&lt;?&gt; ctor)</span> </span><br></pre></td></tr></table></figure><h4 id="3-è·å–å­—æ®µ"><a href="#3-è·å–å­—æ®µ" class="headerlink" title="3.è·å–å­—æ®µ"></a>3.è·å–å­—æ®µ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ç±»ä¸­æŸ¥æ‰¾æŒ‡å®šå±æ€§</span></span><br><span class="line">Field <span class="title function_">findField</span><span class="params">(Class&lt;?&gt; clazz, String name)</span> </span><br><span class="line"><span class="comment">// åŒä¸Šï¼Œå¤šæä¾›äº†å±æ€§çš„ç±»å‹</span></span><br><span class="line">Field <span class="title function_">findField</span><span class="params">(Class&lt;?&gt; clazz, String name, Class&lt;?&gt; type)</span> </span><br><span class="line"><span class="comment">// æ˜¯å¦ä¸ºä¸€ä¸ª &quot;public static final&quot; å±æ€§</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isPublicStaticFinal</span><span class="params">(Field field)</span> </span><br></pre></td></tr></table></figure><h4 id="4-è®¾ç½®å­—æ®µ"><a href="#4-è®¾ç½®å­—æ®µ" class="headerlink" title="4.è®¾ç½®å­—æ®µ"></a>4.è®¾ç½®å­—æ®µ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å– target å¯¹è±¡çš„ field å±æ€§å€¼</span></span><br><span class="line">Object <span class="title function_">getField</span><span class="params">(Field field, Object target)</span> </span><br><span class="line"><span class="comment">// è®¾ç½® target å¯¹è±¡çš„ field å±æ€§å€¼ï¼Œå€¼ä¸º value</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">setField</span><span class="params">(Field field, Object target, Object value)</span> </span><br><span class="line"><span class="comment">// åŒç±»å¯¹è±¡å±æ€§å¯¹ç­‰èµ‹å€¼</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">shallowCopyFieldState</span><span class="params">(Object src, Object dest)</span></span><br><span class="line"><span class="comment">// å–æ¶ˆ Java çš„æƒé™æ§åˆ¶æ£€æŸ¥ã€‚ä»¥ä¾¿åç»­è¯»å†™è¯¥ç§æœ‰å±æ€§</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">makeAccessible</span><span class="params">(Field field)</span> </span><br><span class="line"><span class="comment">// å¯¹ç±»çš„æ¯ä¸ªå±æ€§æ‰§è¡Œ callback</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">doWithFields</span><span class="params">(Class&lt;?&gt; clazz, ReflectionUtils.FieldCallback fc)</span> </span><br><span class="line"><span class="comment">// åŒä¸Šï¼Œå¤šäº†ä¸ªå±æ€§è¿‡æ»¤åŠŸèƒ½ã€‚</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">doWithFields</span><span class="params">(Class&lt;?&gt; clazz, ReflectionUtils.FieldCallback fc, </span></span><br><span class="line"><span class="params">                  ReflectionUtils.FieldFilter ff)</span> </span><br><span class="line"><span class="comment">// åŒä¸Šï¼Œä½†ä¸åŒ…æ‹¬ç»§æ‰¿è€Œæ¥çš„å±æ€§</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">doWithLocalFields</span><span class="params">(Class&lt;?&gt; clazz, ReflectionUtils.FieldCallback fc)</span> </span><br></pre></td></tr></table></figure><h3 id="AopUtils"><a href="#AopUtils" class="headerlink" title="AopUtils"></a>AopUtils</h3><h4 id="1-åˆ¤æ–­ä»£ç†ç±»å‹"><a href="#1-åˆ¤æ–­ä»£ç†ç±»å‹" class="headerlink" title="1.åˆ¤æ–­ä»£ç†ç±»å‹"></a>1.åˆ¤æ–­ä»£ç†ç±»å‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯ Spring ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isAopProxy</span><span class="params">()</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯ jdk åŠ¨æ€ä»£ç†å¯¹è±¡</span></span><br><span class="line">isJdkDynamicProxy()</span><br><span class="line"><span class="comment">// åˆ¤æ–­æ˜¯ä¸æ˜¯ CGLIB ä»£ç†å¯¹è±¡</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isCglibProxy</span><span class="params">()</span></span><br></pre></td></tr></table></figure><h4 id="2-è·å–è¢«ä»£ç†å¯¹è±¡çš„-class"><a href="#2-è·å–è¢«ä»£ç†å¯¹è±¡çš„-class" class="headerlink" title="2.è·å–è¢«ä»£ç†å¯¹è±¡çš„ class"></a>2.è·å–è¢«ä»£ç†å¯¹è±¡çš„ class</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–è¢«ä»£ç†çš„ç›®æ ‡ class</span></span><br><span class="line">Class&lt;?&gt; getTargetClass()</span><br></pre></td></tr></table></figure><h3 id="AopContext"><a href="#AopContext" class="headerlink" title="AopContext"></a>AopContext</h3><h4 id="1-è·å–å½“å‰å¯¹è±¡çš„ä»£ç†å¯¹è±¡"><a href="#1-è·å–å½“å‰å¯¹è±¡çš„ä»£ç†å¯¹è±¡" class="headerlink" title="1.è·å–å½“å‰å¯¹è±¡çš„ä»£ç†å¯¹è±¡"></a>1.è·å–å½“å‰å¯¹è±¡çš„ä»£ç†å¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object <span class="title function_">currentProxy</span><span class="params">()</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–­è¨€å·¥å…·ç±»</title>
      <link href="/2021/03/06/Spring_%E6%96%AD%E8%A8%80%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2021/03/06/Spring_%E6%96%AD%E8%A8%80%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<ol><li><p>æ–­è¨€æ˜¯ä¸€ä¸ªé€»è¾‘åˆ¤æ–­ï¼Œç”¨äºæ£€æŸ¥ä¸åº”è¯¥å‘ç”Ÿçš„æƒ…å†µ</p></li><li><p>Assert å…³é”®å­—åœ¨ JDK1.4 ä¸­å¼•å…¥ï¼Œå¯é€šè¿‡ JVM å‚æ•°<code>-enableassertions</code>å¼€å¯</p></li><li><p>SpringBoot ä¸­æä¾›äº† Assert æ–­è¨€å·¥å…·ç±»ï¼Œé€šå¸¸ç”¨äºæ•°æ®åˆæ³•æ€§æ£€æŸ¥</p></li></ol><span id="more"></span>   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¦æ±‚å‚æ•° object å¿…é¡»ä¸ºéç©ºï¼ˆNot Nullï¼‰ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆæ”¾è¡Œ</span></span><br><span class="line"><span class="comment">// å‚æ•° message å‚æ•°ç”¨äºå®šåˆ¶å¼‚å¸¸ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">notNull</span><span class="params">(Object object, String message)</span></span><br><span class="line"><span class="comment">// è¦æ±‚å‚æ•°å¿…é¡»ç©ºï¼ˆNullï¼‰ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆã€æ”¾è¡Œã€ã€‚</span></span><br><span class="line"><span class="comment">// å’Œ notNull() æ–¹æ³•æ–­è¨€è§„åˆ™ç›¸å</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isNull</span><span class="params">(Object object, String message)</span></span><br><span class="line"><span class="comment">// è¦æ±‚å‚æ•°å¿…é¡»ä¸ºçœŸï¼ˆTrueï¼‰ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆã€æ”¾è¡Œã€ã€‚</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isTrue</span><span class="params">(<span class="type">boolean</span> expression, String message)</span></span><br><span class="line"><span class="comment">// è¦æ±‚å‚æ•°ï¼ˆList/Setï¼‰å¿…é¡»éç©ºï¼ˆNot Emptyï¼‰ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆæ”¾è¡Œ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">notEmpty</span><span class="params">(Collection collection, String message)</span></span><br><span class="line"><span class="comment">// è¦æ±‚å‚æ•°ï¼ˆStringï¼‰å¿…é¡»æœ‰é•¿åº¦ï¼ˆå³ï¼ŒNot Emptyï¼‰ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆæ”¾è¡Œ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">hasLength</span><span class="params">(String text, String message)</span></span><br><span class="line"><span class="comment">// è¦æ±‚å‚æ•°ï¼ˆStringï¼‰å¿…é¡»æœ‰å†…å®¹ï¼ˆå³ï¼ŒNot Blankï¼‰ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆæ”¾è¡Œ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">hasText</span><span class="params">(String text, String message)</span></span><br><span class="line"><span class="comment">// è¦æ±‚å‚æ•°æ˜¯æŒ‡å®šç±»å‹çš„å®ä¾‹ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆæ”¾è¡Œ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isInstanceOf</span><span class="params">(Class type, Object obj, String message)</span></span><br><span class="line"><span class="comment">// è¦æ±‚å‚æ•° `subType` å¿…é¡»æ˜¯å‚æ•° superType çš„å­ç±»æˆ–å®ç°ç±»ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œä¸äºˆæ”¾è¡Œ</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">isAssignable</span><span class="params">(Class superType, Class subType, String message)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Servletæ¦‚è¿°ä¸å…¥é—¨</title>
      <link href="/2021/02/20/Servlet_1_Servlet%E6%A6%82%E8%BF%B0%E4%B8%8E%E5%85%A5%E9%97%A8/"/>
      <url>/2021/02/20/Servlet_1_Servlet%E6%A6%82%E8%BF%B0%E4%B8%8E%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>é€šè¿‡é˜…è¯»APIï¼Œæˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><p>ç¬¬ä¸€ï¼šServletæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨webæœåŠ¡ç«¯çš„javaå°ç¨‹åº</p><p>ç¬¬äºŒï¼šå®ƒå¯ä»¥ç”¨äºæ¥æ”¶å’Œå“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚</p><p>ç¬¬ä¸‰ï¼šè¦æƒ³å®ç°ServletåŠŸèƒ½ï¼Œå¯ä»¥å®ç°Servletæ¥å£ï¼Œç»§æ‰¿GenericServletæˆ–è€…HttpServlet</p><p>ç¬¬å››ï¼šæ¯æ¬¡è¯·æ±‚éƒ½ä¼šæ‰§è¡Œserviceæ–¹æ³•</p><p>ç¬¬äº”ï¼šServletè¿˜æ”¯æŒé…ç½®</p><span id="more"></span><p>å…·ä½“è¯·çœ‹ä¸‹å›¾ï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_1.png"></p><h2 id="1-Servletå…¥é—¨"><a href="#1-Servletå…¥é—¨" class="headerlink" title="1 Servletå…¥é—¨"></a>1 Servletå…¥é—¨</h2><h3 id="1-1-Servletç¼–ç æ­¥éª¤"><a href="#1-1-Servletç¼–ç æ­¥éª¤" class="headerlink" title="1.1 Servletç¼–ç æ­¥éª¤"></a>1.1 Servletç¼–ç æ­¥éª¤</h3><h4 id="1ï¼‰ç¼–ç æ­¥éª¤"><a href="#1ï¼‰ç¼–ç æ­¥éª¤" class="headerlink" title="1ï¼‰ç¼–ç æ­¥éª¤"></a>1ï¼‰ç¼–ç æ­¥éª¤</h4><p><strong>ç¬¬ä¸€æ­¥ï¼šå‰æœŸå‡†å¤‡-åˆ›å»ºJavaWebå·¥ç¨‹</strong></p><p><strong>ç¬¬äºŒæ­¥ï¼šç¼–å†™ä¸€ä¸ªæ™®é€šç±»ç»§æ‰¿GenericServletå¹¶é‡å†™serviceæ–¹æ³•</strong></p><p><strong>ç¬¬ä¸‰æ­¥ï¼šåœ¨web.xmlé…ç½®Servlet</strong></p><h4 id="2ï¼‰æµ‹è¯•"><a href="#2ï¼‰æµ‹è¯•" class="headerlink" title="2ï¼‰æµ‹è¯•"></a>2ï¼‰æµ‹è¯•</h4><p><strong>åœ¨Tomcatä¸­éƒ¨ç½²é¡¹ç›®</strong></p><p><strong>åœ¨æµè§ˆå™¨è®¿é—®Servlet</strong></p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_2.png"></p><h3 id="1-2-Servletæ‰§è¡Œè¿‡ç¨‹åˆ†æ"><a href="#1-2-Servletæ‰§è¡Œè¿‡ç¨‹åˆ†æ" class="headerlink" title="1.2 Servletæ‰§è¡Œè¿‡ç¨‹åˆ†æ"></a>1.2 Servletæ‰§è¡Œè¿‡ç¨‹åˆ†æ</h3><p>æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚é¦–å…ˆåˆ°è¾¾TomcatæœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨è§£æè¯·æ±‚URLï¼Œç„¶ååœ¨éƒ¨ç½²çš„åº”ç”¨åˆ—è¡¨ä¸­æ‰¾åˆ°æˆ‘ä»¬çš„åº”ç”¨ã€‚æ¥ä¸‹æ¥ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­æ‰¾åº”ç”¨é‡Œçš„web.xmlé…ç½®æ–‡ä»¶ï¼Œåœ¨web.xmlä¸­æ‰¾åˆ°FirstServletçš„é…ç½®ï¼Œæ‰¾åˆ°åæ‰§è¡Œserviceæ–¹æ³•ï¼Œæœ€åç”±FirstServletå“åº”å®¢æˆ·æµè§ˆå™¨ã€‚æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_3.jpg"></p><p>ä¸€å¥è¯æ€»ç»“æ‰§è¡Œè¿‡ç¨‹ï¼š</p><p>æµè§ˆå™¨â€”â€”&gt;TomcatæœåŠ¡å™¨â€”â€”&gt;æˆ‘ä»¬çš„åº”ç”¨â€”â€”&gt;åº”ç”¨ä¸­çš„web.xmlâ€”â€”&gt;FirstServletâ€”â€”&gt;å“åº”æµè§ˆå™¨</p><h3 id="1-3-Servletç±»è§†å›¾"><a href="#1-3-Servletç±»è§†å›¾" class="headerlink" title="1.3 Servletç±»è§†å›¾"></a>1.3 Servletç±»è§†å›¾</h3><p>åœ¨ã€ŠTomcatå’ŒHttpåè®®ã€‹è¿™å¤©è¯¾ç¨‹å’Œåˆšæ‰çš„å…¥é—¨æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬éƒ½å®šä¹‰äº†è‡ªå·±çš„Servletï¼Œå®ç°çš„æ–¹å¼éƒ½æ˜¯é€‰æ‹©ç»§æ‰¿GenericServletï¼Œåœ¨Servletçš„APIä»‹ç»ä¸­ï¼Œå®ƒæå‡ºäº†æˆ‘ä»¬é™¤äº†ç»§æ‰¿GenericServletå¤–è¿˜å¯ä»¥ç»§æ‰¿HttpServletï¼Œé€šè¿‡æŸ¥é˜…servletçš„ç±»è§†å›¾ï¼Œæˆ‘ä»¬çœ‹åˆ°GenericServletè¿˜æœ‰ä¸€ä¸ªå­ç±»HttpServletã€‚åŒæ—¶ï¼Œåœ¨serviceæ–¹æ³•ä¸­è¿˜æœ‰å‚æ•°ServletRequestå’ŒServletResponseï¼Œå®ƒä»¬çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_4.png"></p><h3 id="1-4-Servletç¼–å†™æ–¹å¼"><a href="#1-4-Servletç¼–å†™æ–¹å¼" class="headerlink" title="1.4 Servletç¼–å†™æ–¹å¼"></a>1.4 Servletç¼–å†™æ–¹å¼</h3><h4 id="1ï¼‰ç¼–å†™æ–¹å¼è¯´æ˜"><a href="#1ï¼‰ç¼–å†™æ–¹å¼è¯´æ˜" class="headerlink" title="1ï¼‰ç¼–å†™æ–¹å¼è¯´æ˜"></a>1ï¼‰ç¼–å†™æ–¹å¼è¯´æ˜</h4><p>æˆ‘ä»¬åœ¨å®ç°ServletåŠŸèƒ½æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><p>ç¬¬ä¸€ç§ï¼šå®ç°Servletæ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å¿…é¡»å…¨éƒ¨å®ç°ã€‚</p><p>â€‹              ä½¿ç”¨æ­¤ç§æ–¹å¼ï¼Œè¡¨ç¤ºæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•åœ¨éœ€æ±‚æ–¹é¢éƒ½æœ‰é‡å†™çš„å¿…è¦ã€‚æ­¤ç§æ–¹å¼æ”¯æŒæœ€å¤§ç¨‹åº¦çš„è‡ªå®šä¹‰ã€‚</p><p>ç¬¬äºŒç§ï¼šç»§æ‰¿GenericServletï¼Œserviceæ–¹æ³•å¿…é¡»é‡å†™ï¼Œå…¶ä»–æ–¹å¯æ ¹æ®éœ€æ±‚ï¼Œé€‰æ‹©æ€§é‡å†™ã€‚</p><p>â€‹              ä½¿ç”¨æ­¤ç§æ–¹å¼ï¼Œè¡¨ç¤ºåªåœ¨æ¥æ”¶å’Œå“åº”å®¢æˆ·ç«¯è¯·æ±‚è¿™æ–¹é¢æœ‰é‡å†™çš„éœ€æ±‚ï¼Œè€Œå…¶ä»–æ–¹æ³•å¯æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æ€§é‡å†™ï¼Œä½¿æˆ‘ä»¬çš„å¼€å‘Servletå˜å¾—ç®€å•ã€‚ä½†æ˜¯ï¼Œæ­¤ç§æ–¹å¼æ˜¯å’ŒHTTPåè®®æ— å…³çš„ã€‚</p><p>ç¬¬ä¸‰ç§ï¼šç»§æ‰¿HttpServletï¼Œå®ƒæ˜¯javax.servlet.httpåŒ…ä¸‹çš„ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ˜¯GenericServletçš„å­ç±»ã€‚<b><font color='red'>å¦‚æœæˆ‘ä»¬é€‰æ‹©ç»§æ‰¿HttpServletæ—¶ï¼Œåªéœ€è¦é‡å†™doGetå’ŒdoPostæ–¹æ³•ï¼Œä¸è¦è¦†ç›–serviceæ–¹æ³•ã€‚</font></b></p><p>â€‹                ä½¿ç”¨æ­¤ç§æ–¹å¼ï¼Œè¡¨ç¤ºæˆ‘ä»¬çš„è¯·æ±‚å’Œå“åº”éœ€è¦å’ŒHTTPåè®®ç›¸å…³ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡HTTPåè®®æ¥è®¿é—®çš„ã€‚é‚£ä¹ˆæ¯æ¬¡è¯·æ±‚å’Œå“åº”éƒ½ç¬¦åˆHTTPåè®®çš„è§„èŒƒã€‚è¯·æ±‚çš„æ–¹å¼å°±æ˜¯HTTPåè®®æ‰€æ”¯æŒçš„æ–¹å¼ï¼ˆç›®å‰æˆ‘ä»¬åªçŸ¥é“GETå’ŒPOSTï¼Œè€Œå®é™…HTTPåè®®æ”¯æŒ7ç§è¯·æ±‚æ–¹å¼ï¼ŒGET POST PUT DELETE TRACE OPTIONS HEAD )ã€‚</p><h4 id="2ï¼‰HttpServletçš„ä½¿ç”¨ç»†èŠ‚"><a href="#2ï¼‰HttpServletçš„ä½¿ç”¨ç»†èŠ‚" class="headerlink" title="2ï¼‰HttpServletçš„ä½¿ç”¨ç»†èŠ‚"></a>2ï¼‰HttpServletçš„ä½¿ç”¨ç»†èŠ‚</h4><p><strong>ç¬¬ä¸€æ­¥ï¼šåœ¨å…¥é—¨æ¡ˆä¾‹çš„å·¥ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªServletç»§æ‰¿HttpServlet</strong></p><p><font color='red'>æ³¨æ„ï¼šä¸è¦é‡å†™ä»»ä½•æ–¹æ³•</font>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_6.png"></p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_5.png"></p><p><strong>ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²é¡¹ç›®å¹¶æµ‹è¯•è®¿é—®</strong></p><p>å½“æˆ‘ä»¬åœ¨åœ°å€æ è¾“å…¥ServletDemo2çš„è®¿é—®URLæ—¶ï¼Œå‡ºç°äº†è®¿é—®é”™è¯¯ï¼ŒçŠ¶æ€ç æ˜¯405ã€‚æç¤ºä¿¡æ¯æ˜¯ï¼šæ–¹æ³•ä¸å…è®¸ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥ï¼šåˆ†æåŸå› </strong> </p><p>å¾—å‡ºHttpServletçš„ä½¿ç”¨ç»“è®ºï¼š</p><p>â€‹     <b><font color='red'>æˆ‘ä»¬ç»§æ‰¿äº†HttpServletï¼Œéœ€è¦é‡å†™é‡Œé¢çš„doGetå’ŒdoPostæ–¹æ³•æ¥æ¥æ”¶getæ–¹å¼å’Œpostæ–¹å¼çš„è¯·æ±‚ã€‚</font></b></p><p>ä¸ºäº†å®ç°ä»£ç çš„å¯é‡ç”¨æ€§ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨doGetæˆ–è€…doPostæ–¹æ³•ä¸­ä¸€ä¸ªé‡Œé¢æä¾›å…·ä½“åŠŸèƒ½å³å¯ï¼Œè€Œå¦å¤–çš„é‚£ä¸ªæ–¹æ³•åªéœ€è¦è°ƒç”¨æä¾›äº†åŠŸèƒ½çš„æ–¹æ³•ã€‚</p><h2 id="2-Servletä½¿ç”¨ç»†èŠ‚"><a href="#2-Servletä½¿ç”¨ç»†èŠ‚" class="headerlink" title="2 Servletä½¿ç”¨ç»†èŠ‚"></a>2 Servletä½¿ç”¨ç»†èŠ‚</h2><h3 id="2-1-Servletçš„ç”Ÿå‘½å‘¨æœŸ"><a href="#2-1-Servletçš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="2.1 Servletçš„ç”Ÿå‘½å‘¨æœŸ"></a>2.1 Servletçš„ç”Ÿå‘½å‘¨æœŸ</h3><p>å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå°±æ˜¯å¯¹è±¡ä»ç”Ÿåˆ°æ­»çš„è¿‡ç¨‹ï¼Œå³ï¼šå‡ºç”Ÿâ€”â€”æ´»ç€â€”â€”æ­»äº¡ã€‚ç”¨æ›´åå‘ äºå¼€å‘çš„å®˜æ–¹è¯´æ³•å°±æ˜¯å¯¹è±¡åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ã€‚</p><p>å‡ºç”Ÿï¼šè¯·æ±‚ç¬¬ä¸€æ¬¡åˆ°è¾¾Servletæ—¶ï¼Œå¯¹è±¡å°±åˆ›å»ºå‡ºæ¥ï¼Œå¹¶ä¸”åˆå§‹åŒ–æˆåŠŸã€‚åªå‡ºç”Ÿä¸€æ¬¡ï¼Œå°±æ”¾åˆ°å†…å­˜ä¸­ã€‚</p><p>æ´»ç€ï¼šæœåŠ¡å™¨æä¾›æœåŠ¡çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¯¥å¯¹è±¡ä¸€ç›´å­˜åœ¨ï¼Œæ¯æ¬¡åªæ˜¯æ‰§è¡Œserviceæ–¹æ³•ã€‚</p><p>æ­»äº¡ï¼šå½“æœåŠ¡åœæ­¢æ—¶ï¼Œæˆ–è€…æœåŠ¡å™¨å®•æœºæ—¶ï¼Œå¯¹è±¡æ¶ˆäº¡ã€‚</p><p>é€šè¿‡åˆ†æServletçš„ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬å‘ç°ï¼Œå®ƒçš„å®ä¾‹åŒ–å’Œåˆå§‹åŒ–åªä¼šåœ¨è¯·æ±‚ç¬¬ä¸€æ¬¡åˆ°è¾¾Servletæ—¶æ‰§è¡Œï¼Œè€Œé”€æ¯åªä¼šåœ¨TomcatæœåŠ¡å™¨åœæ­¢æ—¶æ‰§è¡Œï¼Œç”±æ­¤æˆ‘ä»¬å¾—å‡ºä¸€ä¸ªç»“è®ºï¼ŒServletå¯¹è±¡åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œé”€æ¯ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼ŒServletå¯¹è±¡åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å®ä¾‹åœ¨åº”ç”¨ä¸­æ˜¯å”¯ä¸€çš„å­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¯´å®ƒæ˜¯å•å®ä¾‹çš„ï¼Œå³è¿ç”¨äº†<font color='red'>å•ä¾‹æ¨¡å¼</font>ã€‚</p><h3 id="2-2-Servletçš„çº¿ç¨‹å®‰å…¨"><a href="#2-2-Servletçš„çº¿ç¨‹å®‰å…¨" class="headerlink" title="2.2 Servletçš„çº¿ç¨‹å®‰å…¨"></a>2.2 Servletçš„çº¿ç¨‹å®‰å…¨</h3><p>ç”±äºServletè¿ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œå³æ•´ä¸ªåº”ç”¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ†æè¿™ä¸ªå”¯ä¸€çš„å®ä¾‹ä¸­çš„ç±»æˆå‘˜æ˜¯å¦çº¿ç¨‹å®‰å…¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºServletçš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼š</span></span><br><span class="line"><span class="comment"> *    ç¤ºä¾‹éœ€æ±‚ï¼š</span></span><br><span class="line"><span class="comment"> *       æ¨¡æ‹Ÿç½‘ä¸Šçœ‹ä¹¦çš„ç¿»é¡µåŠŸèƒ½ã€‚</span></span><br><span class="line"><span class="comment"> *       ï¼ˆç±»ä¼¼çš„æœ‰æµè§ˆå•†å“çš„ç¿»é¡µï¼Œæµè§ˆè®ºå›å¸–å­çš„ç¿»é¡µï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Company</span> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æˆ‘ä»¬è®¨è®ºçš„æ˜¯ç±»æˆå‘˜çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥è¦å®šä¹‰ä¸€ä¸ªç±»æˆå‘˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//å®šä¹‰æµè§ˆä¹¦ç±çš„é¡µç ï¼Œéƒ½æ˜¯ä»ç¬¬ä¸€é¡µå¼€å§‹çš„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">currentPage</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çœŸæ­£ç¿»é¡µçœ‹ä¹¦çš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–å½“å‰è¦çœ‹çš„ä¹¦åï¼ˆæ­¤å¤„æˆ‘ä»¬ä»Šå¤©å…ˆæ¥ç”¨ä»¥ä¸‹ï¼Œæ˜å¤©æ¥ç€é‡è®²è§£è¯·æ±‚å’Œå“åº”å¯¹è±¡ï¼‰</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">bookName</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;bookName&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è¾“å‡ºä¹¦åå’Œå½“å‰é¡µç </span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ‚¨çœ‹çš„æ˜¯ï¼š&quot;</span>+bookName+<span class="string">&quot;ï¼Œå½“å‰é¡µç æ˜¯ï¼š&quot;</span>+currentPage);</span><br><span class="line">        <span class="comment">//3.æ‰§è¡Œç¿»é¡µ</span></span><br><span class="line">        currentPage++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿåœ¨ç½‘ä¸Šçœ‹ä¹¦çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬åœ¨Servletä¸­è®°å½•äº†å½“å‰è¦çœ‹çš„é¡µç ï¼Œç†æƒ³çŠ¶æ€ä¸‹ï¼Œç”¨æˆ·æ¯æ¬¡è¯·æ±‚éƒ½æ¥çœ‹è‡ªå·±è¯¥çœ‹çš„é¡µç ã€‚å¯åŠ¨æœåŠ¡ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_7.png"></p><p>é€šè¿‡ä¸Šé¢çš„æµ‹è¯•æˆ‘ä»¬å‘ç°ï¼Œåœ¨Servletä¸­å®šä¹‰äº†ç±»æˆå‘˜ä¹‹åï¼Œå¤šä¸ªæµè§ˆå™¨éƒ½ä¼šå…±äº«ç±»æˆå‘˜çš„æ•°æ®ã€‚å…¶å®æ¯ä¸€ä¸ªæµè§ˆå™¨ç«¯å‘é€è¯·æ±‚ï¼Œå°±ä»£è¡¨æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå¤šä¸ªæµè§ˆå™¨å°±æ˜¯å¤šä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥æµ‹è¯•çš„ç»“æœè¯´æ˜äº†å¤šä¸ªçº¿ç¨‹ä¼šå…±äº«Servletç±»æˆå‘˜ä¸­çš„æ•°æ®ï¼Œå…¶ä¸­ä»»ä½•ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æ•°æ®ï¼Œéƒ½ä¼šå½±å“å…¶ä»–çº¿ç¨‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºServletå®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>åˆ†æäº§ç”Ÿè¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œ<font color='red'>å…¶å®å°±æ˜¯å› ä¸ºServletæ˜¯å•ä¾‹ï¼Œå•ä¾‹å¯¹è±¡çš„ç±»æˆå‘˜åªä¼šéšç±»å®ä¾‹åŒ–æ—¶åˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åçš„æ“ä½œéƒ½æ˜¯æ”¹å˜ï¼Œè€Œä¸ä¼šé‡æ–°åˆå§‹åŒ–</font>ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯åœ¨Servletä¸­å®šä¹‰ç±»æˆå‘˜è¦æ…é‡ã€‚å¦‚æœç±»æˆå‘˜æ˜¯å…±ç”¨çš„ï¼Œå¹¶ä¸”åªä¼šåœ¨åˆå§‹åŒ–æ—¶èµ‹å€¼ï¼Œå…¶ä½™æ—¶é—´éƒ½æ˜¯è·å–çš„è¯ï¼Œé‚£ä¹ˆæ˜¯æ²¡é—®é¢˜ã€‚å¦‚æœç±»æˆå‘˜å¹¶éå…±ç”¨ï¼Œæˆ–è€…æ¯æ¬¡ä½¿ç”¨éƒ½æœ‰å¯èƒ½å¯¹å…¶èµ‹å€¼ï¼Œé‚£ä¹ˆå°±è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜äº†ï¼ŒæŠŠå®ƒå®šä¹‰åˆ°doGetæˆ–è€…doPostæ–¹æ³•é‡Œé¢å»å°±å¯ä»¥äº†ã€‚</p><h3 id="2-3-Servletçš„æ³¨æ„äº‹é¡¹"><a href="#2-3-Servletçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="2.3 Servletçš„æ³¨æ„äº‹é¡¹"></a>2.3 Servletçš„æ³¨æ„äº‹é¡¹</h3><h4 id="1ï¼‰æ˜ å°„Servletçš„ç»†èŠ‚"><a href="#1ï¼‰æ˜ å°„Servletçš„ç»†èŠ‚" class="headerlink" title="1ï¼‰æ˜ å°„Servletçš„ç»†èŠ‚"></a>1ï¼‰æ˜ å°„Servletçš„ç»†èŠ‚</h4><p>Servletæ”¯æŒä¸‰ç§æ˜ å°„æ–¹å¼ï¼Œä»¥è¾¾åˆ°çµæ´»é…ç½®çš„ç›®çš„ã€‚</p><p>é¦–å…ˆç¼–å†™ä¸€ä¸ªServletï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºServletçš„æ˜ å°„æ–¹å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Company</span> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * doGetæ–¹æ³•è¾“å‡ºä¸€å¥è¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ServletDemo5æ¥æ”¶åˆ°äº†è¯·æ±‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨doGetæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç¬¬ä¸€ç§ï¼šæŒ‡åé“å§“çš„æ–¹å¼</strong></p><p>â€‹               æ­¤ç§æ–¹å¼ï¼Œåªæœ‰å’Œæ˜ å°„é…ç½®ä¸€æ¨¡ä¸€æ ·æ—¶ï¼ŒServletæ‰ä¼šæ¥æ”¶å’Œå“åº”æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p><p>â€‹               ä¾‹å¦‚ï¼šæ˜ å°„ä¸ºï¼š&#x2F;servletDemo5</p><p>â€‹                           è®¿é—®URLï¼š<a href="http://localhost:8585/servlet_demo/servletDemo5">http://localhost:8585/servlet_demo/servletDemo5</a></p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_8.png"></p><p><strong>ç¬¬äºŒç§ï¼š&#x2F;å¼€å¤´+é€šé…ç¬¦çš„æ–¹å¼</strong></p><p>â€‹               æ­¤ç§æ–¹å¼ï¼Œåªè¦ç¬¦åˆç›®å½•ç»“æ„å³å¯ï¼Œä¸ç”¨è€ƒè™‘ç»“å°¾æ˜¯ä»€ä¹ˆã€‚</p><p>â€‹                ä¾‹å¦‚ï¼šæ˜ å°„ä¸ºï¼š&#x2F;servlet&#x2F;*</p><p>â€‹                            è®¿é—®URLï¼š<a href="http://localhost:8585/servlet/itheima">http://localhost:8585/servlet/itheima</a></p><p>â€‹                                               <a href="http://localhost:8585/servlet/itcast.do">http://localhost:8585/servlet/itcast.do</a></p><p>â€‹                            è¿™ä¸¤ä¸ªURLéƒ½å¯ä»¥ã€‚å› ä¸ºç”¨çš„*ï¼Œè¡¨ç¤º&#x2F;servlet&#x2F;åé¢çš„å†…å®¹æ˜¯ä»€ä¹ˆéƒ½å¯ä»¥ã€‚</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_9.png"></p><p><strong>ç¬¬ä¸‰ç§ï¼šé€šé…ç¬¦+å›ºå®šæ ¼å¼ç»“å°¾</strong></p><p>â€‹                æ­¤ç§æ–¹å¼ï¼Œåªè¦ç¬¦åˆå›ºå®šç»“å°¾æ ¼å¼å³å¯ï¼Œå…¶å‰é¢çš„è®¿é—®URIæ— é¡»å…³å¿ƒï¼ˆæ³¨æ„åè®®ï¼Œä¸»æœºå’Œç«¯å£å¿…é¡»æ­£ç¡®ï¼‰</p><p>â€‹                ä¾‹å¦‚ï¼šæ˜ å°„ä¸ºï¼š*.do</p><p>â€‹                            è®¿é—®URLï¼š<a href="http://localhost:8585/servlet/itcast.do">http://localhost:8585/servlet/itcast.do</a></p><p>â€‹                                                <a href="http://localhost:8585/itheima.do">http://localhost:8585/itheima.do</a></p><p>â€‹                            è¿™ä¸¤ä¸ªURLéƒ½å¯ä»¥æ–¹æ³•ã€‚å› ä¸ºéƒ½æ˜¯ä»¥.doä½œä¸ºç»“å°¾ï¼Œè€Œå‰é¢ç”¨*å·é€šé…ç¬¦é…ç½®çš„æ˜ å°„ï¼Œæ‰€æœ‰æ— é¡»å…³å¿ƒã€‚</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_10.png"></p><p>é€šè¿‡æµ‹è¯•æˆ‘ä»¬å‘ç°ï¼ŒServletæ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼Œä½†æ˜¯ç”±æ­¤ä¹Ÿå¼•å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå½“æœ‰ä¸¤ä¸ªåŠä»¥ä¸Šçš„Servletæ˜ å°„éƒ½ç¬¦åˆè¯·æ±‚URLæ—¶ï¼Œç”±è°æ¥å“åº”å‘¢ï¼Ÿæ³¨æ„ï¼šHTTPåè®®çš„ç‰¹å¾æ˜¯ä¸€è¯·æ±‚ä¸€å“åº”çš„è§„åˆ™ã€‚é‚£ä¹ˆæœ‰ä¸€ä¸ªè¯·æ±‚ï¼Œå¿…ç„¶æœ‰ä¸”åªæœ‰ä¸€ä¸ªå“åº”ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥æ˜ç¡®ä¸€ä¸‹ï¼Œå¤šç§æ˜ å°„è§„åˆ™çš„ä¼˜å…ˆçº§ã€‚</p><p>å…ˆè¯´ç»“è®ºï¼šæŒ‡åé“å§“çš„æ–¹å¼ä¼˜å…ˆçº§æœ€é«˜ï¼Œå¸¦æœ‰é€šé…ç¬¦çš„æ˜ å°„æ–¹å¼ï¼Œæœ‰&#x2F;çš„æ¯”æ²¡&#x2F;çš„ä¼˜å…ˆçº§é«˜</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å‰é¢è®²è§£çš„ä¸‰ç§æ˜ å°„æ–¹å¼çš„ä¼˜å…ˆçº§ä¸ºï¼šç¬¬ä¸€ç§&gt;ç¬¬äºŒç§&gt;ç¬¬ä¸‰ç§ã€‚</p><p>æ¼”ç¤ºä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®ƒå’ŒServletDemo5ç»„åˆæ¼”ç¤ºServletçš„è®¿é—®ä¼˜å…ˆçº§é—®é¢˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Company</span> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * doGetæ–¹æ³•è¾“å‡ºä¸€å¥è¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ServletDemo6æ¥æ”¶åˆ°äº†è¯·æ±‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨doGetæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ServletDemo6--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo6<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.itheima.web.servlet.ServletDemo6<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo6<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_11.png"></p><h4 id="2ï¼‰å¤šè·¯å¾„æ˜ å°„Servlet"><a href="#2ï¼‰å¤šè·¯å¾„æ˜ å°„Servlet" class="headerlink" title="2ï¼‰å¤šè·¯å¾„æ˜ å°„Servlet"></a>2ï¼‰å¤šè·¯å¾„æ˜ å°„Servlet</h4><p>ä¸Šä¸€å°èŠ‚æˆ‘ä»¬è®²è§£äº†Servletçš„å¤šç§æ˜ å°„æ–¹å¼ï¼Œè¿™ä¸€å°èŠ‚æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹ï¼Œä¸€ä¸ªServletçš„å¤šç§è·¯å¾„é…ç½®çš„æ”¯æŒã€‚</p><p>å®ƒå…¶å®å°±æ˜¯ç»™ä¸€ä¸ªServleté…ç½®å¤šä¸ªè®¿é—®æ˜ å°„ï¼Œä»è€Œå¯ä»¥æ ¹æ®ä¸åŒè¯·æ±‚URLå®ç°ä¸åŒçš„åŠŸèƒ½ã€‚</p><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªServletï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¼”ç¤ºServletçš„å¤šè·¯å¾„æ˜ å°„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Company</span> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo7</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ä¸åŒçš„è¯·æ±‚URLï¼Œåšä¸åŒçš„å¤„ç†è§„åˆ™</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–å½“å‰è¯·æ±‚çš„URI</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        uri = uri.substring(uri.lastIndexOf(<span class="string">&quot;/&quot;</span>),uri.length());</span><br><span class="line">        <span class="comment">//2.åˆ¤æ–­æ˜¯1å·è¯·æ±‚è¿˜æ˜¯2å·è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/servletDemo7&quot;</span>.equals(uri))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ServletDemo7æ‰§è¡Œ1å·è¯·æ±‚çš„ä¸šåŠ¡é€»è¾‘ï¼šå•†å“å•ä»·7æŠ˜æ˜¾ç¤º&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/demo7&quot;</span>.equals(uri))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ServletDemo7æ‰§è¡Œ2å·è¯·æ±‚çš„ä¸šåŠ¡é€»è¾‘ï¼šå•†å“å•ä»·8æŠ˜æ˜¾ç¤º&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ServletDemo7æ‰§è¡ŒåŸºæœ¬ä¸šåŠ¡é€»è¾‘ï¼šå•†å“å•ä»·åŸä»·æ˜¾ç¤º&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨doGetæ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> req</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> resp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> ServletException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåœ¨web.xmlé…ç½®Servletï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ServletDemo7--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo7<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.itheima.web.servlet.ServletDemo7<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ˜ å°„è·¯å¾„1--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo7<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo7<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ˜ å°„è·¯å¾„2--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo7<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletDemo7<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ˜ å°„è·¯å¾„3--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo7<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servlet/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åï¼Œå¯åŠ¨æœåŠ¡æµ‹è¯•è¿è¡Œç»“æœï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_12.png"></p><h4 id="3ï¼‰å¯åŠ¨æ—¶åˆ›å»ºServlet"><a href="#3ï¼‰å¯åŠ¨æ—¶åˆ›å»ºServlet" class="headerlink" title="3ï¼‰å¯åŠ¨æ—¶åˆ›å»ºServlet"></a>3ï¼‰å¯åŠ¨æ—¶åˆ›å»ºServlet</h4><p>æˆ‘ä»¬å‰é¢è®²è§£äº†Servletçš„ç”Ÿå‘½å‘¨æœŸï¼ŒServletçš„åˆ›å»ºé»˜è®¤æƒ…å†µä¸‹æ˜¯è¯·æ±‚ç¬¬ä¸€æ¬¡åˆ°è¾¾Servletæ—¶åˆ›å»ºçš„ã€‚ä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒServletæ˜¯å•ä¾‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åº”ç”¨ä¸­åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥åœ¨Tomcatå¯åŠ¨åŠ è½½åº”ç”¨çš„æ—¶å€™å°±åˆ›å»ºä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚é‚£ä¹ˆä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p><ul><li>ç¬¬ä¸€ç§ï¼šåº”ç”¨åŠ è½½æ—¶åˆ›å»ºServletï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå°±æŠŠéœ€è¦çš„å¯¹è±¡éƒ½åˆ›å»ºå®Œæˆäº†ï¼Œä»è€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å‡å°‘äº†åˆ›å»ºå¯¹è±¡çš„æ—¶é—´ï¼Œæé«˜äº†é¦–æ¬¡æ‰§è¡Œçš„æ•ˆç‡ã€‚å®ƒçš„å¼Šç«¯ä¹ŸåŒæ ·æ˜æ˜¾ï¼Œå› ä¸ºåœ¨åº”ç”¨åŠ è½½æ—¶å°±åˆ›å»ºäº†Servletå¯¹è±¡ï¼Œå› æ­¤ï¼Œå¯¼è‡´å†…å­˜ä¸­å……æ–¥ç€å¤§é‡ç”¨ä¸ä¸Šçš„Servletå¯¹è±¡ï¼Œé€ æˆäº†å†…å­˜çš„æµªè´¹ã€‚</li><li>ç¬¬äºŒç§ï¼šè¯·æ±‚ç¬¬ä¸€æ¬¡è®¿é—®æ˜¯åˆ›å»ºServletï¼Œå®ƒçš„ä¼˜åŠ¿å°±æ˜¯å‡å°‘äº†å¯¹æœåŠ¡å™¨å†…å­˜çš„æµªè´¹ï¼Œå› ä¸ºé‚£äº›ä¸€ç›´æ²¡æœ‰è¢«è®¿é—®è¿‡çš„Servletå¯¹è±¡éƒ½æ²¡æœ‰åˆ›å»ºï¼Œå› æ­¤ä¹Ÿæé«˜äº†æœåŠ¡å™¨çš„å¯åŠ¨æ—¶é—´ã€‚è€Œå®ƒçš„å¼Šç«¯å°±æ˜¯ï¼Œå¦‚æœæœ‰ä¸€äº›è¦åœ¨åº”ç”¨åŠ è½½æ—¶å°±åšçš„åˆå§‹åŒ–æ“ä½œï¼Œå®ƒéƒ½æ²¡æ³•å®Œæˆï¼Œä»è€Œè¦è€ƒè™‘å…¶ä»–æŠ€æœ¯å®ç°ã€‚</li></ul><p>é€šè¿‡ä¸Šé¢çš„æè¿°ï¼Œç›¸ä¿¡åŒå­¦ä»¬éƒ½èƒ½åˆ†æå¾—å‡ºä½•æ—¶é‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œä½•æ—¶é‡‡ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚å°±æ˜¯å½“éœ€è¦åœ¨åº”ç”¨åŠ è½½å°±è¦å®Œæˆä¸€äº›å·¥ä½œæ—¶ï¼Œå°±éœ€è¦é€‰æ‹©ç¬¬ä¸€ç§æ–¹å¼ã€‚å½“æœ‰å¾ˆå¤šServletçš„ä½¿ç”¨æ—¶æœºå¹¶ä¸ç¡®å®šæ˜¯ï¼Œå°±é€‰æ‹©ç¬¬äºŒç§æ–¹å¼ã€‚</p><p>åœ¨web.xmlä¸­æ˜¯æ”¯æŒå¯¹Servletçš„åˆ›å»ºæ—¶æœºè¿›è¡Œé…ç½®çš„ï¼Œé…ç½®çš„æ–¹å¼å¦‚ä¸‹ï¼šæˆ‘ä»¬å°±ä»¥ServletDemo3ä¸ºä¾‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ServletDemo3--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo3<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.itheima.web.servlet.ServletDemo3<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®Servletçš„åˆ›å»ºé¡ºåºï¼Œå½“é…ç½®æ­¤æ ‡ç­¾æ—¶ï¼ŒServletå°±ä¼šæ”¹ä¸ºåº”ç”¨åŠ è½½æ—¶åˆ›å»º</span></span><br><span class="line"><span class="comment">        é…ç½®é¡¹çš„å–å€¼åªèƒ½æ˜¯æ­£æ•´æ•°ï¼ˆåŒ…æ‹¬0ï¼‰ï¼Œæ•°å€¼è¶Šå°ï¼Œè¡¨æ˜åˆ›å»ºçš„ä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>servletDemo3<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/servletDemo3<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_13.png"></p><h4 id="4ï¼‰é»˜è®¤Servlet"><a href="#4ï¼‰é»˜è®¤Servlet" class="headerlink" title="4ï¼‰é»˜è®¤Servlet"></a>4ï¼‰é»˜è®¤Servlet</h4><p>é»˜è®¤Servletæ˜¯ç”±æœåŠ¡å™¨æä¾›çš„ä¸€ä¸ªServletï¼Œå®ƒé…ç½®åœ¨Tomcatçš„confç›®å½•ä¸‹çš„web.xmlä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_14.png"></p><p>å®ƒçš„æ˜ å°„è·¯å¾„æ˜¯<b><font color='red'><code>&lt;url-pattern&gt;/&lt;url-pattern&gt;</code></font></b>ï¼Œæˆ‘ä»¬åœ¨å‘é€è¯·æ±‚æ—¶ï¼Œé¦–å…ˆä¼šåœ¨æˆ‘ä»¬åº”ç”¨ä¸­çš„web.xmlä¸­æŸ¥æ‰¾æ˜ å°„é…ç½®ï¼Œæ‰¾åˆ°å°±æ‰§è¡Œï¼Œè¿™å—æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å½“æ‰¾ä¸åˆ°å¯¹åº”çš„Servletè·¯å¾„æ—¶ï¼Œå°±å»æ‰¾é»˜è®¤çš„Servletï¼Œç”±é»˜è®¤Servletå¤„ç†ã€‚æ‰€ä»¥ï¼Œä¸€åˆ‡éƒ½æ˜¯Servletã€‚</p><h3 id="3-Servletå…³ç³»æ€»å›¾"><a href="#3-Servletå…³ç³»æ€»å›¾" class="headerlink" title="3 Servletå…³ç³»æ€»å›¾"></a>3 Servletå…³ç³»æ€»å›¾</h3><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/servlet1_15.png"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPåè®®</title>
      <link href="/2021/02/19/HTTP_1_HTTP%E5%8D%8F%E8%AE%AE/"/>
      <url>/2021/02/19/HTTP_1_HTTP%E5%8D%8F%E8%AE%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="1-HTTPåè®®æ¦‚è¿°"><a href="#1-HTTPåè®®æ¦‚è¿°" class="headerlink" title="1 HTTPåè®®æ¦‚è¿°"></a>1 HTTPåè®®æ¦‚è¿°</h2><h3 id="1-1-HTTPåè®®æ¦‚å¿µ"><a href="#1-1-HTTPåè®®æ¦‚å¿µ" class="headerlink" title="1.1 HTTPåè®®æ¦‚å¿µ"></a>1.1 HTTPåè®®æ¦‚å¿µ</h3><p>HTTPçš„å…¨ç§°æ˜¯ï¼šHyper Text Transfer Protocolï¼Œæ„ä¸º è¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚å®ƒæŒ‡çš„æ˜¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´äº¤äº’å¿…é¡»éµå¾ªçš„ä¸€é—®ä¸€ç­”çš„è§„åˆ™ã€‚å½¢å®¹è¿™ä¸ªè§„åˆ™ï¼šé—®ç­”æœºåˆ¶ã€æ¡æ‰‹æœºåˆ¶ã€‚</p><p>å®ƒè§„èŒƒäº†è¯·æ±‚å’Œå“åº”å†…å®¹çš„ç±»å‹å’Œæ ¼å¼ã€‚</p><p>HTTPåè®®æ˜¯ç”±<code>W3C</code>ç»„ç»‡ç®¡ç†å’Œç»´æŠ¤çš„ã€‚</p><span id="more"></span><h3 id="1-2-HTTPåè®®ç‰ˆæœ¬"><a href="#1-2-HTTPåè®®ç‰ˆæœ¬" class="headerlink" title="1.2 HTTPåè®®ç‰ˆæœ¬"></a>1.2 HTTPåè®®ç‰ˆæœ¬</h3><p>ç›®å‰HTTPåè®®ä¸»è¦æ˜¯1.0ç‰ˆæœ¬å’Œ1.1ç‰ˆæœ¬ã€‚è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«ä¸»è¦æ˜¯ä¸¤ä¸ªæ–¹é¢ã€‚</p><p>ç¬¬ä¸€ï¼šHTTP1.1ç‰ˆæœ¬æ¯”1.0ç‰ˆæœ¬å¤šäº†ä¸€äº›æ¶ˆæ¯å¤´ã€‚</p><p>ç¬¬äºŒï¼šHTTP1.1ç‰ˆæœ¬å’Œ1.0ç‰ˆæœ¬çš„æ‰§è¡Œè¿‡ç¨‹ä¸ä¸€æ ·ã€‚æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p><table><thead><tr><th>HTTP1.0</th><th>HTTP1.1</th></tr></thead><tbody><tr><td>åˆ›å»ºè¿æ¥ï¼ˆTCP&#x2F;IPï¼‰</td><td>åˆ›å»ºè¿æ¥ï¼ˆTCP&#x2F;IPï¼‰</td></tr><tr><td>å‘é€è¯·æ±‚</td><td>å‘é€è¯·æ±‚1</td></tr><tr><td>å¾—åˆ°å“åº”</td><td>å¾—åˆ°å“åº”1</td></tr><tr><td>å…³é—­è¿æ¥</td><td>å‘é€è¯·æ±‚2</td></tr><tr><td>åˆ›å»ºè¿æ¥ï¼ˆTCP&#x2F;IPï¼‰</td><td>å¾—åˆ°å“åº”2</td></tr><tr><td>å‘é€è¯·æ±‚</td><td>â€¦â€¦.</td></tr><tr><td>å¾—åˆ°å“åº”</td><td>â€¦â€¦.</td></tr><tr><td>å…³é—­è¿æ¥</td><td>è¿æ¥è¶…æ—¶æˆ–æ‰‹åŠ¨å…³é—­è¿æ¥</td></tr></tbody></table><h3 id="1-3-HTTPåè®®ç›¸å…³è¯´æ˜"><a href="#1-3-HTTPåè®®ç›¸å…³è¯´æ˜" class="headerlink" title="1.3 HTTPåè®®ç›¸å…³è¯´æ˜"></a>1.3 HTTPåè®®ç›¸å…³è¯´æ˜</h3><p>HTTPåè®®æ¦‚å¿µæ˜¯å®¢æˆ·æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¸€ç§ä¸€é—®ä¸€ç­”çš„è§„åˆ™ï¼Œé‚£ä¹ˆå¿…é¡»è¦æœ‰é—®æœ‰ç­”ï¼Œè€Œä¸”è¦å…ˆé—®åç­”ã€‚<br>ä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨<code>&lt;script&gt;</code>,<code>&lt;link&gt;</code>å’Œ<code>&lt;img&gt;</code>æ ‡ç­¾ï¼Œæ²¡æœ‰æ‰‹åŠ¨å‘èµ·è¯·æ±‚ï¼Œä½†æ˜¯ä»ç„¶èƒ½ä»æœåŠ¡å™¨ç«¯æ‹¿åˆ°æ•°æ®ï¼ŒåŸå› å°±æ˜¯ï¼š<strong>åœ¨æµè§ˆå™¨é‡åˆ°<code>&lt;script&gt;</code>,<code>&lt;link&gt;</code>,<code>&lt;img&gt;</code>æ ‡ç­¾æ—¶ä¼šè‡ªåŠ¨å‘å‡ºè¯·æ±‚ã€‚</strong></p><h2 id="2-HTTPåè®®ç»„æˆ"><a href="#2-HTTPåè®®ç»„æˆ" class="headerlink" title="2 HTTPåè®®ç»„æˆ"></a>2 HTTPåè®®ç»„æˆ</h2><p>ç”±HTTPåè®®çš„æ¦‚å¿µå¯çŸ¥ï¼Œå®ƒåˆ†ä¸ºé—®å’Œç­”ä¸¤éƒ¨åˆ†ã€‚å…¶ä¸­é—®æŒ‡çš„å°±æ˜¯è¯·æ±‚éƒ¨åˆ†ï¼Œè€Œç­”æŒ‡çš„å°±æ˜¯å“åº”éƒ¨åˆ†ã€‚</p><h3 id="2-1è¯·æ±‚éƒ¨åˆ†"><a href="#2-1è¯·æ±‚éƒ¨åˆ†" class="headerlink" title="2.1è¯·æ±‚éƒ¨åˆ†"></a>2.1è¯·æ±‚éƒ¨åˆ†</h3><p>è¯·æ±‚è¡Œï¼š æ°¸è¿œä½äºè¯·æ±‚çš„ç¬¬ä¸€è¡Œ<br>è¯·æ±‚æ¶ˆæ¯å¤´ï¼š ä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œåˆ°ç¬¬ä¸€ä¸ªç©ºè¡Œç»“æŸ<br>è¯·æ±‚çš„æ­£æ–‡ï¼š ä»ç¬¬ä¸€ä¸ªç©ºè¡Œåå¼€å§‹ï¼Œåˆ°æ­£æ–‡çš„ç»“æŸ</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/HTTP1_1.jpg"></p><h3 id="2-2-å“åº”éƒ¨åˆ†"><a href="#2-2-å“åº”éƒ¨åˆ†" class="headerlink" title="2.2 å“åº”éƒ¨åˆ†"></a>2.2 å“åº”éƒ¨åˆ†</h3><p>å“åº”è¡Œï¼š æ°¸è¿œä½äºå“åº”çš„ç¬¬ä¸€è¡Œ<br>å“åº”æ¶ˆæ¯å¤´ï¼š ä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œåˆ°ç¬¬ä¸€ä¸ªç©ºè¡Œç»“æŸ<br>å“åº”çš„æ­£æ–‡ï¼š ä»ç¬¬ä¸€ä¸ªç©ºè¡Œåå¼€å§‹ï¼Œåˆ°æ­£æ–‡çš„ç»“æŸ</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/HTTP1_2.jpg"></p><h3 id="3-æ¶ˆæ¯å¤´çš„å…±æ€§åˆ†æ"><a href="#3-æ¶ˆæ¯å¤´çš„å…±æ€§åˆ†æ" class="headerlink" title="3 æ¶ˆæ¯å¤´çš„å…±æ€§åˆ†æ"></a>3 æ¶ˆæ¯å¤´çš„å…±æ€§åˆ†æ</h3><p>æ¶ˆæ¯å¤´åç§°é¦–å­—æ¯å¤§å†™ï¼Œå¤šä¸ªå•è¯æ¯ä¸ªå•è¯çš„é¦–å­—æ¯éƒ½å¤§å†™ã€‚<br>å¤šä¸ªå•è¯ç”¨<b><font color='red'>-</font></b>åˆ†éš”<br>åç§°å’Œå€¼ä¹‹é—´ç”¨<b><font color='red'>å†’å·åŠ ç©ºæ ¼</font></b>åˆ†éš”<br>å¤šä¸ªå€¼ä¹‹é—´ç”¨<b><font color='red'>é€—å·åŠ ç©ºæ ¼</font></b>åˆ†éš”<br>ä¸¤ä¸ªå¤´ä¹‹é—´ç”¨<b><font color='red'>å›è½¦</font></b>åˆ†éš”</p><h2 id="3-è¯·æ±‚éƒ¨åˆ†è¯¦è§£"><a href="#3-è¯·æ±‚éƒ¨åˆ†è¯¦è§£" class="headerlink" title="3 è¯·æ±‚éƒ¨åˆ†è¯¦è§£"></a>3 è¯·æ±‚éƒ¨åˆ†è¯¦è§£</h2><h3 id="3-1-è¯·æ±‚è¡Œè¯¦è§£"><a href="#3-1-è¯·æ±‚è¡Œè¯¦è§£" class="headerlink" title="3.1 è¯·æ±‚è¡Œè¯¦è§£"></a>3.1 è¯·æ±‚è¡Œè¯¦è§£</h3><p>è¯·æ±‚è¡Œï¼š<code>GET /myapp/2.html HTTP/1.1</code></p><table><thead><tr><th>å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>GET</td><td>è¯·æ±‚çš„æ–¹å¼ã€‚ï¼ˆè¿˜æœ‰POSTï¼‰</td></tr><tr><td>&#x2F;myapp&#x2F;2.html</td><td>è¯·æ±‚çš„èµ„æºã€‚</td></tr><tr><td>HTTP&#x2F;1.1</td><td>ä½¿ç”¨çš„åè®®ï¼ŒåŠåè®®çš„ç‰ˆæœ¬ã€‚</td></tr></tbody></table><h3 id="3-2-è¯·æ±‚æ¶ˆæ¯å¤´è¯¦è§£"><a href="#3-2-è¯·æ±‚æ¶ˆæ¯å¤´è¯¦è§£" class="headerlink" title="3.2 è¯·æ±‚æ¶ˆæ¯å¤´è¯¦è§£"></a>3.2 è¯·æ±‚æ¶ˆæ¯å¤´è¯¦è§£</h3><table><thead><tr><th>å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Accept</td><td>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·æµè§ˆå™¨æ‰€æ”¯æŒçš„MIMEç±»å‹ã€‚</td></tr><tr><td>Accept-Encoding</td><td>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·æµè§ˆå™¨æ‰€æ”¯æŒçš„å‹ç¼©ç¼–ç æ ¼å¼ã€‚æœ€å¸¸ç”¨çš„å°±æ˜¯gzipå‹ç¼©ã€‚</td></tr><tr><td>Accept-Language</td><td>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·æµè§ˆå™¨æ‰€æ”¯æŒçš„è¯­è¨€ã€‚ä¸€èˆ¬éƒ½æ˜¯zh_CNæˆ–en_USç­‰ã€‚</td></tr><tr><td>Referer</td><td>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå½“å‰è¯·æ±‚çš„æ¥æºã€‚<br/>åªæœ‰å½“å‰è¯·æ±‚æœ‰æ¥æºçš„æ—¶å€™ï¼Œæ‰æœ‰è¿™ä¸ªæ¶ˆæ¯å¤´ã€‚ä»åœ°å€æ è¾“å…¥çš„æ²¡æœ‰æ¥æºã€‚<br/>ä½œç”¨ï¼š1 æŠ•æ”¾å¹¿å‘Š  2 é˜²ç›—é“¾</td></tr><tr><td>Content-Type</td><td>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œè¯·æ±‚æ­£æ–‡çš„MIMEç±»å‹ã€‚</td></tr><tr><td>Content-Length</td><td>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œè¯·æ±‚æ­£æ–‡çš„é•¿åº¦ã€‚</td></tr><tr><td>User-Agent</td><td>æµè§ˆå™¨ç›¸å…³ä¿¡æ¯</td></tr><tr><td>Connection: Keep-Alive</td><td>è¿æ¥çš„çŠ¶æ€ï¼šä¿æŒè¿æ¥</td></tr><tr><td>If-Modified-Since</td><td>å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·æµè§ˆå™¨ç¼“å­˜æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</td></tr><tr><td>Cookieï¼ˆ********ï¼‰</td><td>ä¼šè¯ç®¡ç†ç›¸å…³ï¼Œéå¸¸çš„é‡è¦ã€‚</td></tr></tbody></table><h3 id="3-3-è¯·æ±‚æ­£æ–‡è¯¦è§£"><a href="#3-3-è¯·æ±‚æ­£æ–‡è¯¦è§£" class="headerlink" title="3.3 è¯·æ±‚æ­£æ–‡è¯¦è§£"></a>3.3 è¯·æ±‚æ­£æ–‡è¯¦è§£</h3><p>ç¬¬ä¸€ï¼šåªæœ‰postè¯·æ±‚æ–¹å¼ï¼Œæ‰æœ‰è¯·æ±‚çš„æ­£æ–‡ã€‚getæ–¹å¼çš„æ­£æ–‡æ˜¯åœ¨åœ°å€æ ä¸­çš„ã€‚<br>ç¬¬äºŒï¼šè¡¨å•çš„è¾“å…¥åŸŸæœ‰nameå±æ€§çš„æ‰ä¼šè¢«æäº¤ã€‚ä¸åˆ†getå’Œpostçš„è¯·æ±‚æ–¹å¼ã€‚<br>ç¬¬ä¸‰ï¼šè¡¨å•çš„enctypeå±æ€§å–å€¼å†³å®šäº†è¯·æ±‚æ­£æ–‡çš„ä½“ç°å½¢å¼ã€‚æ¦‚è¿°çš„å«ä¹‰æ˜¯ï¼šè¯·æ±‚æ­£æ–‡çš„MIMEç¼–ç ç±»å‹ã€‚</p><table><thead><tr><th>enctypeå–å€¼</th><th>è¯·æ±‚æ­£æ–‡ä½“ç°å½¢å¼</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>application&#x2F;x-www-form-urlencoded</td><td>key&#x3D;value&amp;key&#x3D;value</td><td>username&#x3D;test&amp;password&#x3D;1234</td></tr><tr><td>multipart&#x2F;form-data</td><td>æ­¤æ—¶å˜æˆäº†å¤šéƒ¨åˆ†è¡¨å•æ•°æ®ã€‚å¤šéƒ¨åˆ†æ˜¯é åˆ†éš”ç¬¦åˆ†éš”çš„ã€‚</td><td>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“7df23a16c0210<br/>Content-Disposition: form-data; name&#x3D;â€usernameâ€<br/><br/>test<br/>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“7df23a16c0210<br/>Content-Disposition: form-data; name&#x3D;â€passwordâ€<br/><br/>1234<br/>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“7df23a16c0210<br/>Content-Disposition: form-data; name&#x3D;â€headfileâ€; filename&#x3D;â€C:\Users\zhy\Desktop\è¯·æ±‚éƒ¨åˆ†.jpgâ€<br/>Content-Type: image&#x2F;pjpeg<br/>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“7df23a16c0210</td></tr></tbody></table><h2 id="4-å“åº”éƒ¨åˆ†è¯¦è§£"><a href="#4-å“åº”éƒ¨åˆ†è¯¦è§£" class="headerlink" title="4 å“åº”éƒ¨åˆ†è¯¦è§£"></a>4 å“åº”éƒ¨åˆ†è¯¦è§£</h2><h3 id="4-1-å“åº”è¡Œè¯¦è§£"><a href="#4-1-å“åº”è¡Œè¯¦è§£" class="headerlink" title="4.1 å“åº”è¡Œè¯¦è§£"></a>4.1 å“åº”è¡Œè¯¦è§£</h3><p>å“åº”è¡Œï¼š<code>HTTP/1.1 200 OK</code></p><table><thead><tr><th>å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>HTTP&#x2F;1.1</td><td>ä½¿ç”¨åè®®çš„ç‰ˆæœ¬ã€‚</td></tr><tr><td>200</td><td>å“åº”çŠ¶æ€ç </td></tr><tr><td>OK</td><td>çŠ¶æ€ç æè¿°</td></tr></tbody></table><p>å¸¸ç”¨çŠ¶æ€ç ä»‹ç»ï¼š</p><table><thead><tr><th>çŠ¶æ€ç </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>200</td><td>ä¸€åˆ‡éƒ½OK&gt;</td></tr><tr><td>302&#x2F;307</td><td>è¯·æ±‚é‡å®šå‘(å®¢æˆ·ç«¯è¡Œä¸ºï¼Œä¸¤æ¬¡è¯·æ±‚ï¼Œåœ°å€æ å‘ç”Ÿæ”¹å˜)</td></tr><tr><td>304</td><td>è¯·æ±‚èµ„æºæœªå‘ç”Ÿå˜åŒ–ï¼Œä½¿ç”¨ç¼“å­˜</td></tr><tr><td>404</td><td>è¯·æ±‚èµ„æºæœªæ‰¾åˆ°</td></tr><tr><td>500</td><td>æœåŠ¡å™¨é”™è¯¯</td></tr></tbody></table><h3 id="4-2-å“åº”æ¶ˆæ¯å¤´è¯¦è§£"><a href="#4-2-å“åº”æ¶ˆæ¯å¤´è¯¦è§£" class="headerlink" title="4.2 å“åº”æ¶ˆæ¯å¤´è¯¦è§£"></a>4.2 å“åº”æ¶ˆæ¯å¤´è¯¦è§£</h3><table><thead><tr><th>æ¶ˆæ¯å¤´</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Location</td><td>è¯·æ±‚é‡å®šå‘çš„åœ°å€ï¼Œå¸¸ä¸302,307é…åˆä½¿ç”¨ã€‚</td></tr><tr><td>Server</td><td>æœåŠ¡å™¨ç›¸å…³ä¿¡æ¯ã€‚</td></tr><tr><td>Content-Type</td><td>å‘ŠçŸ¥å®¢æˆ·æµè§ˆå™¨ï¼Œå“åº”æ­£æ–‡çš„MIMEç±»å‹ã€‚</td></tr><tr><td>Content-Length</td><td>å‘ŠçŸ¥å®¢æˆ·æµè§ˆå™¨ï¼Œå“åº”æ­£æ–‡çš„é•¿åº¦ã€‚</td></tr><tr><td>Content-Encoding</td><td>å‘ŠçŸ¥å®¢æˆ·æµè§ˆå™¨ï¼Œå“åº”æ­£æ–‡ä½¿ç”¨çš„å‹ç¼©ç¼–ç æ ¼å¼ã€‚å¸¸ç”¨çš„gzipå‹ç¼©ã€‚</td></tr><tr><td>Content-Language</td><td>å‘ŠçŸ¥å®¢æˆ·æµè§ˆå™¨ï¼Œå“åº”æ­£æ–‡çš„è¯­è¨€ã€‚zh_CNæˆ–en_USç­‰ç­‰ã€‚</td></tr><tr><td>Content-Disposition</td><td>å‘ŠçŸ¥å®¢æˆ·æµè§ˆå™¨ï¼Œä»¥ä¸‹è½½çš„æ–¹å¼æ‰“å¼€å“åº”æ­£æ–‡ã€‚</td></tr><tr><td>Refresh</td><td>å®šæ—¶åˆ·æ–°</td></tr><tr><td>Last-Modified</td><td>æœåŠ¡å™¨èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚</td></tr><tr><td>Set-Cookieï¼ˆ*******ï¼‰</td><td>ä¼šè¯ç®¡ç†ç›¸å…³ï¼Œéå¸¸çš„é‡è¦</td></tr><tr><td>Expires:-1</td><td>æœåŠ¡å™¨èµ„æºåˆ°å®¢æˆ·æµè§ˆå™¨åçš„ç¼“å­˜æ—¶é—´</td></tr><tr><td>Catch-Control: no-catch</td><td>ä¸è¦ç¼“å­˜ï¼Œ&#x2F;&#x2F;é’ˆå¯¹httpåè®®1.1ç‰ˆæœ¬</td></tr><tr><td>Pragma:no-catch</td><td>ä¸è¦ç¼“å­˜ï¼Œ&#x2F;&#x2F;é’ˆå¯¹httpåè®®1.0ç‰ˆæœ¬</td></tr></tbody></table><h3 id="4-3-å“åº”æ­£æ–‡è¯¦è§£"><a href="#4-3-å“åº”æ­£æ–‡è¯¦è§£" class="headerlink" title="4.3 å“åº”æ­£æ–‡è¯¦è§£"></a>4.3 å“åº”æ­£æ–‡è¯¦è§£</h3><p>å°±å’Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šå³é”®æŸ¥çœ‹æºæ–‡ä»¶çœ‹åˆ°çš„å†…å®¹æ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css.css&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;demo.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;1.jpg&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åŸºç¡€çŸ¥è¯† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹</title>
      <link href="/2021/02/18/TCP_1_%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/"/>
      <url>/2021/02/18/TCP_1_%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/</url>
      
        <content type="html"><![CDATA[<ul><li><strong>ä¸‰æ¬¡æ¡æ‰‹</strong></li></ul><p><img src="https://gitee.com/andornot888/andornot_images/raw/master//imgs/TCP1_1.png"></p><span id="more"></span><ul><li><strong>å››æ¬¡æŒ¥æ‰‹</strong></li></ul><p><img src="https://gitee.com/andornot888/andornot_images/raw/master//imgs/TCP1_2.png"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> TCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»å¯¹è·¯å¾„ä¸ç›¸å¯¹è·¯å¾„çš„åŒºåˆ«</title>
      <link href="/2021/01/21/basic_1_%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2021/01/21/basic_1_%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<h3 id="ç»å¯¹è·¯å¾„"><a href="#ç»å¯¹è·¯å¾„" class="headerlink" title="ç»å¯¹è·¯å¾„"></a>ç»å¯¹è·¯å¾„</h3><p>æ˜¯ä»ç›˜ç¬¦å¼€å§‹çš„è·¯å¾„ï¼Œå½¢å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\windows\system32\cmd.exe</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="ç›¸å¯¹è·¯å¾„"><a href="#ç›¸å¯¹è·¯å¾„" class="headerlink" title="ç›¸å¯¹è·¯å¾„"></a>ç›¸å¯¹è·¯å¾„</h3><p>æ˜¯ä»å½“å‰è·¯å¾„å¼€å§‹çš„è·¯å¾„ï¼Œå‡å¦‚å½“å‰è·¯å¾„ä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\windows</span><br></pre></td></tr></table></figure><p>è¦æè¿°ä¸Šè¿°è·¯å¾„ï¼Œåªéœ€è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">system32\cmd.exe</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šï¼Œä¸¥æ ¼çš„ç›¸å¯¹è·¯å¾„å†™æ³•åº”ä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\system32\cmd.exe</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ.è¡¨ç¤ºå½“å‰è·¯å¾„ï¼Œåœ¨é€šé“æƒ…å†µä¸‹å¯ä»¥çœç•¥ï¼Œåªæœ‰åœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹ä¸èƒ½çœç•¥ã€‚</p><p>å‡å¦‚å½“å‰è·¯å¾„ä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\program files</span><br></pre></td></tr></table></figure><p>è¦è°ƒç”¨ä¸Šè¿°å‘½ä»¤ï¼Œåˆ™éœ€è¦è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">..\windows\system32\cmd.exe</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ..ä¸ºçˆ¶ç›®å½•ã€‚</p><p>å½“å‰è·¯å¾„å¦‚æœä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c:\program files\common files</span><br></pre></td></tr></table></figure><p>åˆ™éœ€è¦è¾“å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">..\..\windows\system32\cmd.exe</span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ç§ä¸åŒ…å«ç›˜ç¬¦çš„ç‰¹æ®Šç»å¯¹è·¯å¾„ï¼Œå½¢å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\windows\system32\cmd.exe</span><br></pre></td></tr></table></figure><p>æ— è®ºå½“å‰è·¯å¾„æ˜¯ä»€ä¹ˆï¼Œä¼šè‡ªåŠ¨åœ°ä»å½“å‰ç›˜çš„æ ¹ç›®å½•å¼€å§‹æŸ¥æ‰¾æŒ‡å®šçš„ç¨‹åºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸºç¡€çŸ¥è¯† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XMLä¸HTMLçš„ä¸»è¦åŒºåˆ«</title>
      <link href="/2021/01/12/XML_1_XML%E4%B8%8EHTML%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8C%BA%E5%88%AB/"/>
      <url>/2021/01/12/XML_1_XML%E4%B8%8EHTML%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p>  XML æŒ‡å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆe<strong>X</strong>tensible <strong>M</strong>arkup <strong>L</strong>anguageï¼‰ã€‚</p><p>XML è¢«è®¾è®¡ç”¨æ¥ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ã€‚</p><span id="more"></span><p><strong>XMLä¸HTMLçš„ä¸»è¦åŒºåˆ«ï¼š</strong></p><ul><li>ä¸HTMLä¸åŒï¼Œ XMLæ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚ä¾‹å¦‚ï¼Œ<code>&lt;H1&gt;</code>å’Œ<code>&lt;h1&gt;</code>æ˜¯ä¸åŒçš„XMLæ ‡ç­¾ã€‚</li><li>åœ¨HTMLä¸­ï¼Œå¦‚æœä»ä¸Šä¸‹æ–‡å¯ä»¥åˆ†æ¸…å“ªé‡Œæ˜¯æ®µè½æˆ–åˆ—è¡¨é¡¹çš„ç»“å°¾ï¼Œé‚£ä¹ˆç»“æŸæ ‡ç­¾(å¦‚<code>&lt;/p&gt;</code>æˆ–<code>&lt;/li&gt;</code>)å°±å¯ä»¥çœç•¥ï¼Œè€Œåœ¨XMLä¸­ç»“æŸæ ‡ç­¾ç»å¯¹ä¸èƒ½çœç•¥ã€‚</li><li>åœ¨XMLä¸­ï¼Œåªæœ‰å•ä¸ªæ ‡ç­¾è€Œæ²¡æœ‰ç›¸å¯¹åº”çš„ç»“æŸæ ‡ç­¾çš„å…ƒç´ å¿…é¡»ä»¥<code>/</code>ç»“å°¾ï¼Œæ¯”å¦‚<code>&lt;img src=&quot;coffeecup.png&quot;/&gt;</code>ã€‚è¿™æ ·ï¼Œè§£æå™¨å°±çŸ¥é“ä¸éœ€è¦æŸ¥æ‰¾<code>&lt;/img&gt;</code>æ ‡ç­¾äº†ã€‚</li><li>åœ¨XMLä¸­,å±æ€§å€¼å¿…é¡»ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚åœ¨HTMLä¸­ï¼Œå¼•å·æ˜¯å¯æœ‰å¯æ— çš„ã€‚ä¾‹å¦‚ï¼Œ<code>&lt;applet code=&quot;MyApplet.class&quot; width=300 height=300&gt;</code>å¯¹HTMLæ¥è¯´æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯å¯¹XMLæ¥è¯´åˆ™æ˜¯ä¸åˆæ³•çš„ã€‚åœ¨XMLä¸­,å¿…é¡»ä½¿ç”¨å¼•å·ï¼Œæ¯”å¦‚ï¼Œ <code>width=&quot;300&quot;</code>ã€‚</li><li>åœ¨ HTML ä¸­ï¼Œå±æ€§åå¯ä»¥æ²¡æœ‰å€¼ã€‚ä¾‹å¦‚ <code>&lt;input type=&quot;radio&quot; name=&quot;language&quot; value=&quot;Java&quot; checked&gt;</code>ã€‚åœ¨XMLä¸­ï¼Œæ‰€æœ‰å±æ€§å¿…é¡»éƒ½æœ‰å±æ€§å€¼ï¼Œæ¯”å¦‚ï¼Œ<code>checked=&quot;true&quot;</code>æˆ–<code>checked=&quot;checked&quot;</code>ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
            <tag> XML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹¶å‘å·¥å…·ç±»</title>
      <link href="/2021/01/09/Java_25_%E5%B9%B6%E5%8F%91%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
      <url>/2021/01/09/Java_25_%E5%B9%B6%E5%8F%91%E5%B7%A5%E5%85%B7%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<p> å¹¶å‘å·¥å…·ç±»ï¼š</p><ul><li>Hashtableï¼šçº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯æ¯”HashMapæ•ˆç‡ä½ï¼›</li><li>ConcurrentHashMapï¼šçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡è¾ƒé«˜ï¼ˆåœ¨JDK7å’ŒJDK8ä¸­ï¼Œåº•å±‚åŸç†ä¸ä¸€æ ·ï¼‰ï¼›</li><li>CountDownLatchï¼šè®©æŸä¸€æ¡çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œï¼›</li><li>Semaphoreï¼šå¯ä»¥æ§åˆ¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚</li></ul><span id="more"></span><h3 id="1-Hashtable"><a href="#1-Hashtable" class="headerlink" title="1 Hashtable"></a>1 Hashtable</h3><p>â€‹    <strong>Hashtableå‡ºç°çš„åŸå›  :</strong> åœ¨é›†åˆç±»ä¸­HashMapæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„é›†åˆå¯¹è±¡ï¼Œä½†æ˜¯HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„(å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜)ã€‚ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashtableï¼Œä½†æ˜¯Hashtableçš„æ•ˆç‡ä½ä¸‹ã€‚</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mymap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHashtableDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        Hashtable&lt;String, String&gt; hm = <span class="keyword">new</span> <span class="title class_">Hashtable</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">25</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸ºäº†t1å’Œt2èƒ½æŠŠæ•°æ®å…¨éƒ¨æ·»åŠ å®Œæ¯•</span></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//0-0 1-1 ..... 50- 50</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">            System.out.println(hm.get(i + <span class="string">&quot;&quot;</span>));</span><br><span class="line">        &#125;<span class="comment">//0 1 2 3 .... 50</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-ConcurrentHashMap"><a href="#2-ConcurrentHashMap" class="headerlink" title="2 ConcurrentHashMap"></a>2 ConcurrentHashMap</h3><p>â€‹    <strong>ConcurrentHashMapå‡ºç°çš„åŸå›  :</strong> åœ¨é›†åˆç±»ä¸­HashMapæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„é›†åˆå¯¹è±¡ï¼Œä½†æ˜¯HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„(å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜)ã€‚ä¸ºäº†ä¿è¯æ•°æ®çš„å®‰å…¨æ€§æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashtableï¼Œä½†æ˜¯Hashtableçš„æ•ˆç‡ä½ä¸‹ã€‚</p><p>åŸºäºä»¥ä¸Šä¸¤ä¸ªåŸå› æˆ‘ä»¬å¯ä»¥ä½¿ç”¨JDK1.5ä»¥åæ‰€æä¾›çš„ConcurrentHashMapã€‚</p><p><strong>ä½“ç³»ç»“æ„ :</strong> </p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java25_1.png" alt="1591168965857"></p><p><strong>æ€»ç»“ :</strong> </p><p>â€‹    1 ï¼ŒHashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šæœ‰æ•°æ®å®‰å…¨é—®é¢˜</p><p>â€‹    2 ï¼ŒHashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ä¼šå°†æ•´å¼ è¡¨é”èµ·æ¥ï¼Œæ•ˆç‡ä½ä¸‹</p><p>â€‹    3ï¼ŒConcurrentHashMapä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚     åœ¨JDK7å’ŒJDK8ä¸­ï¼Œåº•å±‚åŸç†ä¸ä¸€æ ·ã€‚</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mymap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Hashtable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConcurrentHashMapDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        ConcurrentHashMap&lt;String, String&gt; hm = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">25</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">                hm.put(i + <span class="string">&quot;&quot;</span>, i + <span class="string">&quot;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;----------------------------&quot;</span>);</span><br><span class="line">        <span class="comment">//ä¸ºäº†t1å’Œt2èƒ½æŠŠæ•°æ®å…¨éƒ¨æ·»åŠ å®Œæ¯•</span></span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//0-0 1-1 ..... 50- 50</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">51</span>; i++) &#123;</span><br><span class="line">            System.out.println(hm.get(i + <span class="string">&quot;&quot;</span>));</span><br><span class="line">        &#125;<span class="comment">//0 1 2 3 .... 50</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-ConcurrentHashMap1-7åŸç†"><a href="#3-ConcurrentHashMap1-7åŸç†" class="headerlink" title="3 ConcurrentHashMap1.7åŸç†"></a>3 ConcurrentHashMap1.7åŸç†</h3><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java25_2.png" alt="1591169254280"></p><h3 id="4-ConcurrentHashMap1-8åŸç†"><a href="#4-ConcurrentHashMap1-8åŸç†" class="headerlink" title="4 ConcurrentHashMap1.8åŸç†"></a>4 ConcurrentHashMap1.8åŸç†</h3><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java25_3.png" alt="1591169338256"></p><p><strong>æ€»ç»“ :</strong> </p><p>â€‹    1ï¼Œå¦‚æœä½¿ç”¨ç©ºå‚æ„é€ åˆ›å»ºConcurrentHashMapå¯¹è±¡ï¼Œåˆ™ä»€ä¹ˆäº‹æƒ…éƒ½ä¸åšã€‚     åœ¨ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™åˆ›å»ºå“ˆå¸Œè¡¨</p><p>â€‹    2ï¼Œè®¡ç®—å½“å‰å…ƒç´ åº”å­˜å…¥çš„ç´¢å¼•ã€‚</p><p>â€‹    3ï¼Œå¦‚æœè¯¥ç´¢å¼•ä½ç½®ä¸ºnullï¼Œåˆ™åˆ©ç”¨casç®—æ³•ï¼Œå°†æœ¬ç»“ç‚¹æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚</p><p>â€‹    4ï¼Œå¦‚æœè¯¥ç´¢å¼•ä½ç½®ä¸ä¸ºnullï¼Œåˆ™åˆ©ç”¨volatileå…³é”®å­—è·å¾—å½“å‰ä½ç½®æœ€æ–°çš„ç»“ç‚¹åœ°å€ï¼ŒæŒ‚åœ¨ä»–ä¸‹é¢ï¼Œå˜æˆé“¾è¡¨ã€‚        </p><p>â€‹    5ï¼Œå½“é“¾è¡¨çš„é•¿åº¦å¤§äºç­‰äº8æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢æˆçº¢é»‘æ ‘6ï¼Œä»¥é“¾è¡¨æˆ–è€…çº¢é»‘æ ‘å¤´ç»“ç‚¹ä¸ºé”å¯¹è±¡ï¼Œé…åˆæ‚²è§‚é”ä¿è¯å¤šçº¿ç¨‹æ“ä½œé›†åˆæ—¶æ•°æ®çš„å®‰å…¨æ€§</p><h3 id="5-CountDownLatch"><a href="#5-CountDownLatch" class="headerlink" title="5 CountDownLatch"></a>5 CountDownLatch</h3><p><strong>CountDownLatchç±» :</strong>         </p><table><thead><tr><th>æ–¹æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>public CountDownLatch(int count)</td><td>å‚æ•°ä¼ é€’çº¿ç¨‹æ•°ï¼Œè¡¨ç¤ºç­‰å¾…çº¿ç¨‹æ•°é‡</td></tr><tr><td>public void await()</td><td>è®©çº¿ç¨‹ç­‰å¾…</td></tr><tr><td>public void countDown()</td><td>å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> è®©æŸä¸€æ¡çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œ</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChileThread1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChileThread1</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.åƒé¥ºå­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="string">&quot;ä¸ªé¥ºå­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.åƒå®Œè¯´ä¸€å£°</span></span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span></span><br><span class="line">        countDownLatch.countDown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChileThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChileThread2</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.åƒé¥ºå­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">15</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="string">&quot;ä¸ªé¥ºå­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.åƒå®Œè¯´ä¸€å£°</span></span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span></span><br><span class="line">        countDownLatch.countDown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChileThread3</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChileThread3</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.åƒé¥ºå­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">20</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;åœ¨åƒç¬¬&quot;</span> + i + <span class="string">&quot;ä¸ªé¥ºå­&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.åƒå®Œè¯´ä¸€å£°</span></span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡countDownæ–¹æ³•çš„æ—¶å€™ï¼Œå°±è®©è®¡æ•°å™¨-1</span></span><br><span class="line">        countDownLatch.countDown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MotherThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MotherThread</span><span class="params">(CountDownLatch countDownLatch)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.countDownLatch = countDownLatch;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.ç­‰å¾…</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//å½“è®¡æ•°å™¨å˜æˆ0çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å”¤é†’è¿™é‡Œç­‰å¾…çš„çº¿ç¨‹ã€‚</span></span><br><span class="line">            countDownLatch.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.æ”¶æ‹¾ç¢—ç­·</span></span><br><span class="line">        System.out.println(<span class="string">&quot;å¦ˆå¦ˆåœ¨æ”¶æ‹¾ç¢—ç­·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mycountdownlatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCountDownLatchDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºCountDownLatchçš„å¯¹è±¡ï¼Œéœ€è¦ä¼ é€’ç»™å››ä¸ªçº¿ç¨‹ã€‚</span></span><br><span class="line">        <span class="comment">//åœ¨åº•å±‚å°±å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ­¤æ—¶è®¡æ•°å™¨çš„å€¼å°±æ˜¯3</span></span><br><span class="line">        <span class="type">CountDownLatch</span> <span class="variable">countDownLatch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CountDownLatch</span>(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºå››ä¸ªçº¿ç¨‹å¯¹è±¡å¹¶å¼€å¯ä»–ä»¬ã€‚</span></span><br><span class="line">        <span class="type">MotherThread</span> <span class="variable">motherThread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MotherThread</span>(countDownLatch);</span><br><span class="line">        motherThread.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">ChileThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChileThread1</span>(countDownLatch);</span><br><span class="line">        t1.setName(<span class="string">&quot;å°æ˜&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ChileThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChileThread2</span>(countDownLatch);</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çº¢&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ChileThread3</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChileThread3</span>(countDownLatch);</span><br><span class="line">        t3.setName(<span class="string">&quot;å°åˆš&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ€»ç»“ :</strong> </p><p>â€‹    1. CountDownLatch(int count)ï¼šå‚æ•°å†™ç­‰å¾…çº¿ç¨‹çš„æ•°é‡ã€‚å¹¶å®šä¹‰äº†ä¸€ä¸ªè®¡æ•°å™¨ã€‚</p><p>â€‹    2. await()ï¼šè®©çº¿ç¨‹ç­‰å¾…ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œä¼šå”¤é†’ç­‰å¾…çš„çº¿ç¨‹</p><p>â€‹    3. countDown()ï¼š çº¿ç¨‹æ‰§è¡Œå®Œæ¯•æ—¶è°ƒç”¨ï¼Œä¼šå°†è®¡æ•°å™¨-1ã€‚</p><h3 id="6-Semaphore"><a href="#6-Semaphore" class="headerlink" title="6 Semaphore"></a>6 Semaphore</h3><p><strong>ä½¿ç”¨åœºæ™¯ :</strong> </p><p>â€‹    å¯ä»¥æ§åˆ¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚</p><p><strong>å®ç°æ­¥éª¤ :</strong> </p><p>â€‹    1ï¼Œéœ€è¦æœ‰äººç®¡ç†è¿™ä¸ªé€šé“</p><p>â€‹    2ï¼Œå½“æœ‰è½¦è¿›æ¥äº†ï¼Œå‘é€šè¡Œè®¸å¯è¯</p><p>â€‹    3ï¼Œå½“è½¦å‡ºå»äº†ï¼Œæ”¶å›é€šè¡Œè®¸å¯è¯</p><p>â€‹    4ï¼Œå¦‚æœé€šè¡Œè®¸å¯è¯å‘å®Œäº†ï¼Œé‚£ä¹ˆå…¶ä»–è½¦è¾†åªèƒ½ç­‰ç€</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mysemaphore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Semaphore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="comment">//1.è·å¾—ç®¡ç†å‘˜å¯¹è±¡ï¼Œ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Semaphore</span> <span class="variable">semaphore</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Semaphore</span>(<span class="number">2</span>);</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//2.è·å¾—é€šè¡Œè¯</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            semaphore.acquire();</span><br><span class="line">            <span class="comment">//3.å¼€å§‹è¡Œé©¶</span></span><br><span class="line">            System.out.println(<span class="string">&quot;è·å¾—äº†é€šè¡Œè¯å¼€å§‹è¡Œé©¶&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;å½’è¿˜é€šè¡Œè¯&quot;</span>);</span><br><span class="line">            <span class="comment">//4.å½’è¿˜é€šè¡Œè¯</span></span><br><span class="line">            semaphore.release();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.mysemaphore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySemaphoreDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">mr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(mr).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸå­æ€§ä¸AtomicåŒ…</title>
      <link href="/2021/01/08/Java_24_%E5%8E%9F%E5%AD%90%E6%80%A7%E4%B8%8EAtomic%E5%8C%85/"/>
      <url>/2021/01/08/Java_24_%E5%8E%9F%E5%AD%90%E6%80%A7%E4%B8%8EAtomic%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h3 id="1-é—®é¢˜"><a href="#1-é—®é¢˜" class="headerlink" title="1 é—®é¢˜"></a>1 é—®é¢˜</h3><p>å°è·¯åŒå­¦è™½ç„¶çŸ¥é“ç»“å©šåŸºé‡‘æ˜¯åä¸‡ï¼Œä½†æ˜¯å½“åŸºé‡‘çš„ä½™é¢å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå°è·¯åŒå­¦æ— æ³•çŸ¥é“æœ€æ–°çš„ä½™é¢ã€‚</p><span id="more"></span><p><strong>ä»£ç åˆ†æ :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        t1.setName(<span class="string">&quot;å°è·¯åŒå­¦&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çš®åŒå­¦&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Money</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span>  <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(Money.money == <span class="number">100000</span>)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Money.money = <span class="number">90000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-volatileè§£å†³"><a href="#2-volatileè§£å†³" class="headerlink" title="2 volatileè§£å†³"></a>2 volatileè§£å†³</h3><p><strong>ä»¥ä¸Šæ¡ˆä¾‹å‡ºç°çš„é—®é¢˜ :</strong></p><p>â€‹    å½“Açº¿ç¨‹ä¿®æ”¹äº†å…±äº«æ•°æ®æ—¶ï¼ŒBçº¿ç¨‹æ²¡æœ‰åŠæ—¶è·å–åˆ°æœ€æ–°çš„å€¼ï¼Œå¦‚æœè¿˜åœ¨ä½¿ç”¨åŸå…ˆçš„å€¼ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ </p><p>â€‹    1ï¼Œå †å†…å­˜æ˜¯å”¯ä¸€çš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„çº¿ç¨‹æ ˆã€‚</p><p>â€‹    2 ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹åœ¨ä½¿ç”¨å †é‡Œé¢å˜é‡çš„æ—¶å€™ï¼Œéƒ½ä¼šå…ˆæ‹·è´ä¸€ä»½åˆ°å˜é‡çš„å‰¯æœ¬ä¸­ã€‚</p><p>â€‹    3 ï¼Œåœ¨çº¿ç¨‹ä¸­ï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨æ˜¯ä»å˜é‡çš„å‰¯æœ¬ä¸­è·å–çš„ã€‚</p><p><strong>Volatileå…³é”®å­— :</strong> å¼ºåˆ¶çº¿ç¨‹æ¯æ¬¡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šçœ‹ä¸€ä¸‹å…±äº«åŒºåŸŸæœ€æ–°çš„å€¼</p><p><strong>ä»£ç å®ç° :</strong> <strong>ä½¿ç”¨volatileå…³é”®å­—è§£å†³</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        t1.setName(<span class="string">&quot;å°è·¯åŒå­¦&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çš®åŒå­¦&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Money</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span>  <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(Money.money == <span class="number">100000</span>)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Money.money = <span class="number">90000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-synchronizedè§£å†³"><a href="#3-synchronizedè§£å†³" class="headerlink" title="3 synchronizedè§£å†³"></a>3 synchronizedè§£å†³</h3><p><strong>synchronizedè§£å†³ :</strong> </p><p>â€‹    1 ï¼Œçº¿ç¨‹è·å¾—é”</p><p>â€‹    2 ï¼Œæ¸…ç©ºå˜é‡å‰¯æœ¬</p><p>â€‹    3 ï¼Œæ‹·è´å…±äº«å˜é‡æœ€æ–°çš„å€¼åˆ°å˜é‡å‰¯æœ¬ä¸­</p><p>â€‹    4 ï¼Œæ‰§è¡Œä»£ç </p><p>â€‹    5 ï¼Œå°†ä¿®æ”¹åå˜é‡å‰¯æœ¬ä¸­çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®</p><p>â€‹    6 ï¼Œé‡Šæ”¾é”</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        t1.setName(<span class="string">&quot;å°è·¯åŒå­¦&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line">        t2.setName(<span class="string">&quot;å°çš®åŒå­¦&quot;</span>);</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Money</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">100000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span>  <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Money.lock)&#123;</span><br><span class="line">                <span class="keyword">if</span>(Money.money != <span class="number">100000</span>)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;ç»“å©šåŸºé‡‘å·²ç»ä¸æ˜¯åä¸‡äº†&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.myvolatile2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (Money.lock) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Money.money = <span class="number">90000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-åŸå­æ€§"><a href="#4-åŸå­æ€§" class="headerlink" title="4 åŸå­æ€§"></a>4 åŸå­æ€§</h3><p><strong>æ¦‚è¿° :</strong> æ‰€è°“çš„åŸå­æ€§æ˜¯æŒ‡åœ¨ä¸€æ¬¡æ“ä½œæˆ–è€…å¤šæ¬¡æ“ä½œä¸­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œå…¨éƒ¨éƒ½å¾—åˆ°äº†æ‰§è¡Œå¹¶ä¸”ä¸ä¼šå—åˆ°ä»»ä½•å› ç´ çš„å¹²æ‰°è€Œä¸­æ–­ï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œéƒ½ä¸æ‰§è¡Œï¼Œå¤šä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸å¯ä»¥åˆ†å‰²çš„æ•´ä½“ã€‚</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.threadatom;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyAtomThread</span> <span class="variable">atom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAtomThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(atom).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAtomThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//é€å†°æ·‡æ·‹çš„æ•°é‡</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span></span><br><span class="line">            <span class="comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span></span><br><span class="line">            <span class="comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span></span><br><span class="line">            count++;</span><br><span class="line">            System.out.println(<span class="string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><blockquote><p>å·²ç»é€äº†1ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†5ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†7ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†8ä¸ªå†°æ·‡æ·‹</p><p>â€¦</p><p>å·²ç»é€äº†9997ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†9998ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†9999ä¸ªå†°æ·‡æ·‹</p></blockquote><p><strong>ä»£ç æ€»ç»“ :</strong> count++ ä¸æ˜¯ä¸€ä¸ªåŸå­æ€§æ“ä½œ, ä»–åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­,æœ‰å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­</p><h3 id="5-volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§"><a href="#5-volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§" class="headerlink" title="5 volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§"></a>5 volatileå…³é”®å­—ä¸èƒ½ä¿è¯åŸå­æ€§</h3><p>è§£å†³æ–¹æ¡ˆ : æˆ‘ä»¬å¯ä»¥ç»™count++æ“ä½œæ·»åŠ é”ï¼Œé‚£ä¹ˆcount++æ“ä½œå°±æ˜¯ä¸´ç•ŒåŒºä¸­çš„ä»£ç ï¼Œä¸´ç•ŒåŒºä¸­çš„ä»£ç ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼Œæ‰€ä»¥count++å°±å˜æˆäº†åŸå­æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.threadatom2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyAtomThread</span> <span class="variable">atom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAtomThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(atom).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAtomThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//é€å†°æ·‡æ·‹çš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span></span><br><span class="line">            <span class="comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span></span><br><span class="line">            <span class="comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span></span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">                count++;</span><br><span class="line">                System.out.println(<span class="string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœï¼š</strong></p><blockquote><p>å·²ç»é€äº†1ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†2ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†3ä¸ªå†°æ·‡æ·‹</p><p>â€¦</p><p>å·²ç»é€äº†9997ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†9998ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†9999ä¸ªå†°æ·‡æ·‹<br>å·²ç»é€äº†10000ä¸ªå†°æ·‡æ·‹</p></blockquote><h3 id="6-åŸå­æ€§-AtomicåŒ…"><a href="#6-åŸå­æ€§-AtomicåŒ…" class="headerlink" title="6 åŸå­æ€§_AtomicåŒ…"></a>6 åŸå­æ€§_AtomicåŒ…</h3><p>æ¦‚è¿°ï¼šjavaä»JDK1.5å¼€å§‹æä¾›äº†java.util.concurrent.atomicåŒ…(ç®€ç§°AtomicåŒ…)ï¼Œè¿™ä¸ªåŒ…ä¸­çš„åŸå­æ“ä½œç±»æä¾›äº†ä¸€ç§ç”¨æ³•ç®€å•ï¼Œæ€§èƒ½é«˜æ•ˆï¼Œçº¿ç¨‹å®‰å…¨åœ°æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ–¹å¼ã€‚å› ä¸ºå˜</p><p>é‡çš„ç±»å‹æœ‰å¾ˆå¤šç§ï¼Œæ‰€ä»¥åœ¨AtomicåŒ…é‡Œä¸€å…±æä¾›äº†13ä¸ªç±»ï¼Œå±äº4ç§ç±»å‹çš„åŸå­æ›´æ–°æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯åŸå­æ›´æ–°åŸºæœ¬ç±»å‹ã€åŸå­æ›´æ–°æ•°ç»„ã€åŸå­æ›´æ–°å¼•ç”¨å’ŒåŸå­æ›´æ–°å±æ€§(å­—æ®µ)ã€‚æœ¬æ¬¡æˆ‘ä»¬åªè®²è§£</p><p>ä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°åŸºæœ¬ç±»å‹ï¼Œä½¿ç”¨åŸå­çš„æ–¹å¼æ›´æ–°åŸºæœ¬ç±»å‹AtomicåŒ…æä¾›äº†ä»¥ä¸‹3ä¸ªç±»ï¼š</p><p>AtomicBooleanï¼š åŸå­æ›´æ–°å¸ƒå°”ç±»å‹</p><p>AtomicIntegerï¼š   åŸå­æ›´æ–°æ•´å‹</p><p>AtomicLongï¼š    åŸå­æ›´æ–°é•¿æ•´å‹</p><p>ä»¥ä¸Š3ä¸ªç±»æä¾›çš„æ–¹æ³•å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æœ¬èŠ‚ä»…ä»¥AtomicIntegerä¸ºä¾‹è¿›è¡Œè®²è§£ï¼ŒAtomicIntegerçš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">AtomicInteger</span><span class="params">()</span>ï¼š       åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å€¼ä¸º<span class="number">0</span>çš„åŸå­å‹Integer</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">AtomicInteger</span><span class="params">(<span class="type">int</span> initialValue)</span>ï¼š  åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šå€¼çš„åŸå­å‹Integer</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">get</span><span class="params">()</span>:    è·å–å€¼</span><br><span class="line"><span class="type">int</span> <span class="title function_">getAndIncrement</span><span class="params">()</span>:       ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ <span class="number">1</span>ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢å‰çš„å€¼ã€‚</span><br><span class="line"><span class="type">int</span> <span class="title function_">incrementAndGet</span><span class="params">()</span>:      ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ <span class="number">1</span>ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢åçš„å€¼ã€‚</span><br><span class="line"><span class="type">int</span> <span class="title function_">addAndGet</span><span class="params">(<span class="type">int</span> data)</span>: ä»¥åŸå­æ–¹å¼å°†è¾“å…¥çš„æ•°å€¼ä¸å®ä¾‹ä¸­çš„å€¼ï¼ˆAtomicIntegeré‡Œçš„valueï¼‰ç›¸åŠ ï¼Œå¹¶è¿”å›ç»“æœã€‚</span><br><span class="line"><span class="type">int</span> <span class="title function_">getAndSet</span><span class="params">(<span class="type">int</span> value)</span>:    ä»¥åŸå­æ–¹å¼è®¾ç½®ä¸ºnewValueçš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼ã€‚</span><br></pre></td></tr></table></figure><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.threadatom3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAtomIntergerDemo1</span> &#123;</span><br><span class="line"><span class="comment">//    public AtomicInteger()ï¼š               åˆå§‹åŒ–ä¸€ä¸ªé»˜è®¤å€¼ä¸º0çš„åŸå­å‹Integer</span></span><br><span class="line"><span class="comment">//    public AtomicInteger(int initialValue)ï¼š åˆå§‹åŒ–ä¸€ä¸ªæŒ‡å®šå€¼çš„åŸå­å‹Integer</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>();</span><br><span class="line">        System.out.println(ac);</span><br><span class="line"></span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">ac2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">10</span>);</span><br><span class="line">        System.out.println(ac2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.threadatom3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAtomIntergerDemo2</span> &#123;</span><br><span class="line"><span class="comment">//    int get():    è·å–å€¼</span></span><br><span class="line"><span class="comment">//    int getAndIncrement():     ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ 1ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢å‰çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">//    int incrementAndGet():     ä»¥åŸå­æ–¹å¼å°†å½“å‰å€¼åŠ 1ï¼Œæ³¨æ„ï¼Œè¿™é‡Œè¿”å›çš„æ˜¯è‡ªå¢åçš„å€¼ã€‚</span></span><br><span class="line"><span class="comment">//    int addAndGet(int data): ä»¥åŸå­æ–¹å¼å°†å‚æ•°ä¸å¯¹è±¡ä¸­çš„å€¼ç›¸åŠ ï¼Œå¹¶è¿”å›ç»“æœã€‚</span></span><br><span class="line"><span class="comment">//    int getAndSet(int value):  ä»¥åŸå­æ–¹å¼è®¾ç½®ä¸ºnewValueçš„å€¼ï¼Œå¹¶è¿”å›æ—§å€¼ã€‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        AtomicInteger ac1 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        System.out.println(ac1.get());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        AtomicInteger ac2 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        int andIncrement = ac2.getAndIncrement();</span></span><br><span class="line"><span class="comment">//        System.out.println(andIncrement);</span></span><br><span class="line"><span class="comment">//        System.out.println(ac2.get());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        AtomicInteger ac3 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        int i = ac3.incrementAndGet();</span></span><br><span class="line"><span class="comment">//        System.out.println(i);//è‡ªå¢åçš„å€¼</span></span><br><span class="line"><span class="comment">//        System.out.println(ac3.get());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        AtomicInteger ac4 = new AtomicInteger(10);</span></span><br><span class="line"><span class="comment">//        int i = ac4.addAndGet(20);</span></span><br><span class="line"><span class="comment">//        System.out.println(i);</span></span><br><span class="line"><span class="comment">//        System.out.println(ac4.get());</span></span><br><span class="line"></span><br><span class="line">        <span class="type">AtomicInteger</span> <span class="variable">ac5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">100</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">andSet</span> <span class="operator">=</span> ac5.getAndSet(<span class="number">20</span>);</span><br><span class="line">        System.out.println(andSet);</span><br><span class="line">        System.out.println(ac5.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-AtomicInteger-å†…å­˜è§£æ"><a href="#7-AtomicInteger-å†…å­˜è§£æ" class="headerlink" title="7 AtomicInteger-å†…å­˜è§£æ"></a>7 AtomicInteger-å†…å­˜è§£æ</h3><p><strong>AtomicIntegeråŸç† :</strong> è‡ªæ—‹é”  + CAS ç®—æ³•</p><p><strong>CASç®—æ³•ï¼š</strong></p><p>â€‹    æœ‰3ä¸ªæ“ä½œæ•°ï¼ˆå†…å­˜å€¼Vï¼Œ æ—§çš„é¢„æœŸå€¼Aï¼Œè¦ä¿®æ”¹çš„å€¼Bï¼‰</p><p>â€‹    å½“æ—§çš„é¢„æœŸå€¼A &#x3D;&#x3D; å†…å­˜å€¼   æ­¤æ—¶ä¿®æ”¹æˆåŠŸï¼Œå°†Væ”¹ä¸ºB                 </p><p>â€‹    å½“æ—§çš„é¢„æœŸå€¼Aï¼&#x3D;å†…å­˜å€¼   æ­¤æ—¶ä¿®æ”¹å¤±è´¥ï¼Œä¸åšä»»ä½•æ“ä½œ                 </p><p>â€‹    å¹¶é‡æ–°è·å–ç°åœ¨çš„æœ€æ–°å€¼ï¼ˆè¿™ä¸ªé‡æ–°è·å–çš„åŠ¨ä½œå°±æ˜¯è‡ªæ—‹ï¼‰</p><h3 id="8-AtomicInteger-æºç è§£æ"><a href="#8-AtomicInteger-æºç è§£æ" class="headerlink" title="8 AtomicInteger-æºç è§£æ"></a>8 AtomicInteger-æºç è§£æ</h3><p><strong>ä»£ç å®ç° :</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.threadatom4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyAtomThread</span> <span class="variable">atom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyAtomThread</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(atom).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jia.threadatom4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAtomThread</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="comment">//private volatile int count = 0; //é€å†°æ·‡æ·‹çš„æ•°é‡</span></span><br><span class="line">    <span class="comment">//private Object lock = new Object();</span></span><br><span class="line">    <span class="type">AtomicInteger</span> <span class="variable">ac</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//1,ä»å…±äº«æ•°æ®ä¸­è¯»å–æ•°æ®åˆ°æœ¬çº¿ç¨‹æ ˆä¸­.</span></span><br><span class="line">            <span class="comment">//2,ä¿®æ”¹æœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼</span></span><br><span class="line">            <span class="comment">//3,ä¼šæŠŠæœ¬çº¿ç¨‹æ ˆä¸­å˜é‡å‰¯æœ¬çš„å€¼èµ‹å€¼ç»™å…±äº«æ•°æ®.</span></span><br><span class="line">            <span class="comment">//synchronized (lock) &#123;</span></span><br><span class="line"><span class="comment">//                count++;</span></span><br><span class="line"><span class="comment">//                ac++;</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> ac.incrementAndGet();</span><br><span class="line">            System.out.println(<span class="string">&quot;å·²ç»é€äº†&quot;</span> + count + <span class="string">&quot;ä¸ªå†°æ·‡æ·‹&quot;</span>);</span><br><span class="line">           <span class="comment">// &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æºç è§£æ :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆè‡ªå¢ï¼Œç„¶åè·å–è‡ªå¢åçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">incrementAndGet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//+ 1 è‡ªå¢åçš„ç»“æœ</span></span><br><span class="line">        <span class="comment">//this å°±è¡¨ç¤ºå½“å‰çš„atomicIntegerï¼ˆå€¼ï¼‰</span></span><br><span class="line">        <span class="comment">//1    è‡ªå¢ä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">return</span> U.getAndAddInt(<span class="built_in">this</span>, VALUE, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">getAndAddInt</span><span class="params">(Object o, <span class="type">long</span> offset, <span class="type">int</span> delta)</span> &#123;</span><br><span class="line">        <span class="comment">//v æ—§å€¼</span></span><br><span class="line">        <span class="type">int</span> v;</span><br><span class="line">        <span class="comment">//è‡ªæ—‹çš„è¿‡ç¨‹</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="comment">//ä¸æ–­çš„è·å–æ—§å€¼</span></span><br><span class="line">            v = getIntVolatile(o, offset);</span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸ºfalseï¼Œé‚£ä¹ˆç»§ç»­è‡ªæ—‹</span></span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸ºtrueï¼Œé‚£ä¹ˆè‡ªæ—‹ç»“æŸ</span></span><br><span class="line">            <span class="comment">//o è¡¨ç¤ºçš„å°±æ˜¯å†…å­˜å€¼</span></span><br><span class="line">            <span class="comment">//v æ—§å€¼</span></span><br><span class="line">            <span class="comment">//v + delta ä¿®æ”¹åçš„å€¼</span></span><br><span class="line">        &#125; <span class="keyword">while</span> (!weakCompareAndSetInt(o, offset, v, v + delta));</span><br><span class="line">            <span class="comment">//ä½œç”¨ï¼šæ¯”è¾ƒå†…å­˜ä¸­çš„å€¼ï¼Œæ—§å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰å°±æŠŠä¿®æ”¹åçš„å€¼å†™åˆ°å†…å­˜ä¸­ï¼Œè¿”å›trueã€‚è¡¨ç¤ºä¿®æ”¹æˆåŠŸã€‚</span></span><br><span class="line">            <span class="comment">//                                 å¦‚æœä¸ç›¸ç­‰ï¼Œæ— æ³•æŠŠä¿®æ”¹åçš„å€¼å†™åˆ°å†…å­˜ä¸­ï¼Œè¿”å›falseã€‚è¡¨ç¤ºä¿®æ”¹å¤±è´¥ã€‚</span></span><br><span class="line">            <span class="comment">//å¦‚æœä¿®æ”¹å¤±è´¥ï¼Œé‚£ä¹ˆç»§ç»­è‡ªæ—‹ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-æ‚²è§‚é”å’Œä¹è§‚é”"><a href="#9-æ‚²è§‚é”å’Œä¹è§‚é”" class="headerlink" title="9 æ‚²è§‚é”å’Œä¹è§‚é”"></a>9 æ‚²è§‚é”å’Œä¹è§‚é”</h3><p><strong>synchronizedå’ŒCASçš„åŒºåˆ« :</strong> </p><p><strong>ç›¸åŒç‚¹ï¼š</strong>åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥ä¿è¯å…±äº«æ•°æ®çš„å®‰å…¨æ€§ã€‚</p><p><strong>ä¸åŒç‚¹ï¼š</strong>synchronizedæ€»æ˜¯ä»æœ€åçš„è§’åº¦å‡ºå‘ï¼Œè®¤ä¸ºæ¯æ¬¡è·å–æ•°æ®çš„æ—¶å€™ï¼Œåˆ«äººéƒ½æœ‰å¯èƒ½ä¿®æ”¹ã€‚æ‰€ä»¥åœ¨æ¯                       æ¬¡æ“ä½œå…±äº«æ•°æ®ä¹‹å‰ï¼Œéƒ½ä¼šä¸Šé”ã€‚ï¼ˆæ‚²è§‚é”ï¼‰</p><p>â€‹    casæ˜¯ä»ä¹è§‚çš„è§’åº¦å‡ºå‘ï¼Œå‡è®¾æ¯æ¬¡è·å–æ•°æ®åˆ«äººéƒ½ä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚åªä¸è¿‡åœ¨ä¿®æ”¹å…±äº«æ•°æ®çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œåˆ«äººæœ‰æ²¡æœ‰ä¿®æ”¹è¿‡è¿™ä¸ªæ•°æ®ã€‚</p><p>â€‹    å¦‚æœåˆ«äººä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆæˆ‘å†æ¬¡è·å–ç°åœ¨æœ€æ–°çš„å€¼ã€‚            </p><p>â€‹     å¦‚æœåˆ«äººæ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œé‚£ä¹ˆæˆ‘ç°åœ¨ç›´æ¥ä¿®æ”¹å…±äº«æ•°æ®çš„å€¼.(ä¹è§‚é”ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹æ± </title>
      <link href="/2021/01/05/Java_23_%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
      <url>/2021/01/05/Java_23_%E7%BA%BF%E7%A8%8B%E6%B1%A0/</url>
      
        <content type="html"><![CDATA[<p>çº¿ç¨‹æ± å­˜åœ¨çš„æ„ä¹‰ï¼š</p><p>â€‹        ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„æˆæœ¬æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°ä¸æ“ä½œç³»ç»Ÿäº¤äº’ï¼Œå½“ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¤§é‡ç”Ÿå­˜æœŸå¾ˆçŸ­æš‚çš„çº¿ç¨‹æ—¶ï¼Œé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹ç³»ç»Ÿçš„èµ„æºæ¶ˆè€—æœ‰å¯èƒ½å¤§äºä¸šåŠ¡å¤„ç†æ˜¯å¯¹ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œè¿™æ ·å°±æœ‰ç‚¹â€èˆæœ¬é€æœ«â€äº†ã€‚é’ˆå¯¹è¿™ä¸€ç§æƒ…å†µï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨çº¿ç¨‹æ± ã€‚çº¿ç¨‹æ± åœ¨å¯åŠ¨çš„æ—¶ï¼Œä¼šåˆ›å»ºå¤§é‡ç©ºé—²çº¿ç¨‹ï¼Œå½“æˆ‘ä»¬å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡çš„æ—¶ï¼Œçº¿ç¨‹æ± å°±ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä»¥åï¼Œçº¿ç¨‹å¹¶ä¸ä¼šæ­»äº¡ï¼Œè€Œæ˜¯å†æ¬¡è¿”å›åˆ°çº¿ç¨‹æ± ä¸­ç§°ä¸ºç©ºé—²çŠ¶æ€ã€‚ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„æ‰§è¡Œã€‚</p><span id="more"></span><p><strong>çº¿ç¨‹æ± çš„è®¾è®¡æ€è·¯ :</strong></p><ol><li>å‡†å¤‡ä¸€ä¸ªä»»åŠ¡å®¹å™¨</li><li>ä¸€æ¬¡æ€§å¯åŠ¨å¤šä¸ª(2ä¸ª)æ¶ˆè´¹è€…çº¿ç¨‹</li><li>åˆšå¼€å§‹ä»»åŠ¡å®¹å™¨æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥çº¿ç¨‹éƒ½åœ¨wait</li><li>ç›´åˆ°ä¸€ä¸ªå¤–éƒ¨çº¿ç¨‹å‘è¿™ä¸ªä»»åŠ¡å®¹å™¨ä¸­æ‰”äº†ä¸€ä¸ªâ€ä»»åŠ¡â€ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’</li><li>è¿™ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹å–å‡ºâ€ä»»åŠ¡â€ï¼Œå¹¶ä¸”æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åï¼Œç»§ç»­ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡çš„åˆ°æ¥</li></ol><h3 id="çº¿ç¨‹æ± Executorsé»˜è®¤çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± Executorsé»˜è®¤çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± Executorsé»˜è®¤çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± Executorsé»˜è®¤çº¿ç¨‹æ± </h3><p>æ¦‚è¿° : JDKå¯¹çº¿ç¨‹æ± ä¹Ÿè¿›è¡Œäº†ç›¸å…³çš„å®ç°ï¼Œåœ¨çœŸå®ä¼ä¸šå¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå¾ˆå°‘å»è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œè€Œæ˜¯ä½¿ç”¨JDKä¸­è‡ªå¸¦çš„çº¿ç¨‹æ± ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Executorsä¸­æ‰€æä¾›çš„<strong>é™æ€</strong>æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± </p><p>â€‹    static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± <br>â€‹    static newFixedThreadPool(int nThreads)        åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mythreadpool;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//static ExecutorService newCachedThreadPool()   åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± </span></span><br><span class="line"><span class="comment">//static newFixedThreadPool(int nThreads)    åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadPoolDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1,åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çº¿ç¨‹æ± å¯¹è±¡.æ± å­ä¸­é»˜è®¤æ˜¯ç©ºçš„.é»˜è®¤æœ€å¤šå¯ä»¥å®¹çº³intç±»å‹çš„æœ€å¤§å€¼.</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line">        <span class="comment">//Executors --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//ExecutorService --- å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ§åˆ¶çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Thread.sleep(2000);</span></span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="çº¿ç¨‹æ± Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± Executorsåˆ›å»ºæŒ‡å®šä¸Šé™çš„çº¿ç¨‹æ± </h3><p><strong>ä½¿ç”¨Executorsä¸­æ‰€æä¾›çš„é™æ€æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± </strong></p><p>â€‹    static ExecutorService newFixedThreadPool(int nThreads) : åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mythreadpool;</span><br><span class="line"></span><br><span class="line"><span class="comment">//static ExecutorService newFixedThreadPool(int nThreads)</span></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæŒ‡å®šæœ€å¤šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadPoolDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//å‚æ•°ä¸æ˜¯åˆå§‹å€¼è€Œæ˜¯æœ€å¤§å€¼</span></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executorService</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> (ThreadPoolExecutor) executorService;</span><br><span class="line">        System.out.println(pool.getPoolSize());<span class="comment">//0</span></span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        executorService.submit(()-&gt;&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(pool.getPoolSize());<span class="comment">//2</span></span><br><span class="line"><span class="comment">//        executorService.shutdown();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="çº¿ç¨‹æ± ThreadPoolExecutor"><a href="#çº¿ç¨‹æ± ThreadPoolExecutor" class="headerlink" title="çº¿ç¨‹æ± ThreadPoolExecutor"></a>çº¿ç¨‹æ± ThreadPoolExecutor</h3><p><strong>åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡ :</strong> </p><p>ThreadPoolExecutor threadPoolExecutor &#x3D; new ThreadPoolExecutor(æ ¸å¿ƒçº¿ç¨‹æ•°é‡,æœ€å¤§çº¿ç¨‹æ•°é‡,ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä»»åŠ¡é˜Ÿåˆ—,åˆ›å»ºçº¿ç¨‹å·¥å‚,ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥);</p><p><strong>ä»£ç å®ç° :</strong> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mythreadpool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ArrayBlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ThreadPoolExecutor;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadPoolDemo3</span> &#123;</span><br><span class="line"><span class="comment">//    å‚æ•°ä¸€ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡</span></span><br><span class="line"><span class="comment">//    å‚æ•°äºŒï¼šæœ€å¤§çº¿ç¨‹æ•°</span></span><br><span class="line"><span class="comment">//    å‚æ•°ä¸‰ï¼šç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´</span></span><br><span class="line"><span class="comment">//    å‚æ•°å››ï¼šæ—¶é—´å•ä½</span></span><br><span class="line"><span class="comment">//    å‚æ•°äº”ï¼šä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">//    å‚æ•°å…­ï¼šåˆ›å»ºçº¿ç¨‹å·¥å‚</span></span><br><span class="line"><span class="comment">//    å‚æ•°ä¸ƒï¼šä»»åŠ¡çš„æ‹’ç»ç­–ç•¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">2</span>,<span class="number">5</span>,<span class="number">2</span>,TimeUnit.SECONDS,<span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">10</span>), Executors.defaultThreadFactory(),<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy());</span><br><span class="line">        pool.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>());</span><br><span class="line">        pool.submit(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>());</span><br><span class="line"></span><br><span class="line">        pool.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="çº¿ç¨‹æ± å‚æ•°è¯¦è§£"><a href="#çº¿ç¨‹æ± å‚æ•°è¯¦è§£" class="headerlink" title="çº¿ç¨‹æ± å‚æ•°è¯¦è§£"></a>çº¿ç¨‹æ± å‚æ•°è¯¦è§£</h3><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java23_1.png" alt="1591165506516"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(<span class="type">int</span> corePoolSize,</span></span><br><span class="line"><span class="params">                              <span class="type">int</span> maximumPoolSize,</span></span><br><span class="line"><span class="params">                              <span class="type">long</span> keepAliveTime,</span></span><br><span class="line"><span class="params">                              TimeUnit unit,</span></span><br><span class="line"><span class="params">                              BlockingQueue&lt;Runnable&gt; workQueue,</span></span><br><span class="line"><span class="params">                              ThreadFactory threadFactory,</span></span><br><span class="line"><span class="params">                              RejectedExecutionHandler handler)</span></span><br><span class="line">    </span><br><span class="line">corePoolSizeï¼š   æ ¸å¿ƒçº¿ç¨‹çš„æœ€å¤§å€¼ï¼Œä¸èƒ½å°äº<span class="number">0</span></span><br><span class="line">maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸èƒ½å°äºç­‰äº<span class="number">0</span>ï¼ŒmaximumPoolSize &gt;= corePoolSize</span><br><span class="line">keepAliveTimeï¼š  ç©ºé—²çº¿ç¨‹æœ€å¤§å­˜æ´»æ—¶é—´,ä¸èƒ½å°äº<span class="number">0</span></span><br><span class="line">unitï¼š           æ—¶é—´å•ä½</span><br><span class="line">workQueueï¼š      ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸èƒ½ä¸º<span class="literal">null</span></span><br><span class="line">threadFactoryï¼š  åˆ›å»ºçº¿ç¨‹å·¥å‚,ä¸èƒ½ä¸º<span class="literal">null</span>      </span><br><span class="line">handlerï¼š        ä»»åŠ¡çš„æ‹’ç»ç­–ç•¥,ä¸èƒ½ä¸º<span class="literal">null</span>  </span><br></pre></td></tr></table></figure><ul><li><strong>corePoolSizeï¼š</strong> çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œè¯´ç™½äº†å°±æ˜¯ï¼Œå³ä¾¿æ˜¯çº¿ç¨‹æ± é‡Œæ²¡æœ‰ä»»ä½•ä»»åŠ¡ï¼Œä¹Ÿä¼šæœ‰corePoolSizeä¸ªçº¿ç¨‹åœ¨å€™ç€ç­‰ä»»åŠ¡ã€‚</li><li><strong>maximumPoolSizeï¼š</strong> æœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸ç®¡ä½ æäº¤å¤šå°‘ä»»åŠ¡ï¼Œçº¿ç¨‹æ± é‡Œæœ€å¤šå·¥ä½œçº¿ç¨‹æ•°å°±æ˜¯maximumPoolSizeã€‚</li><li><strong>keepAliveTimeï¼š</strong> çº¿ç¨‹çš„å­˜æ´»æ—¶é—´ã€‚å½“çº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹æ•°å¤§äºcorePoolSizeæ—¶ï¼Œå¦‚æœç­‰äº†keepAliveTimeæ—¶é•¿è¿˜æ²¡æœ‰ä»»åŠ¡å¯æ‰§è¡Œï¼Œåˆ™çº¿ç¨‹é€€å‡ºã€‚</li><li><strong>unitï¼š</strong> è¿™ä¸ªç”¨æ¥æŒ‡å®škeepAliveTimeçš„å•ä½ï¼Œæ¯”å¦‚ç§’:TimeUnit.SECONDSã€‚</li><li><strong>workQueueï¼š</strong> ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Œæäº¤çš„ä»»åŠ¡å°†ä¼šè¢«æ”¾åˆ°è¿™ä¸ªé˜Ÿåˆ—é‡Œã€‚</li><li><strong>threadFactoryï¼š</strong> çº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç»™çº¿ç¨‹èµ·åå­—ï¼Œé»˜è®¤å·¥å‚çš„çº¿ç¨‹åå­—ï¼špool-1-thread-3ã€‚</li><li><strong>handlerï¼š</strong> æ‹’ç»ç­–ç•¥ï¼Œå½“çº¿ç¨‹æ± é‡Œçº¿ç¨‹è¢«è€—å°½ï¼Œä¸”é˜Ÿåˆ—ä¹Ÿæ»¡äº†çš„æ—¶å€™ä¼šè°ƒç”¨ã€‚</li></ul><h3 id="çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹"><a href="#çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹" class="headerlink" title="çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹"></a>çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹</h3><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java23_2.png"></p><p>ä»»åŠ¡è¢«æäº¤åˆ°çº¿ç¨‹æ± ï¼Œä¼šå…ˆåˆ¤æ–­å½“å‰çº¿ç¨‹æ•°é‡æ˜¯å¦å°äºcorePoolSizeï¼Œå¦‚æœå°äºåˆ™åˆ›å»ºçº¿ç¨‹æ¥æ‰§è¡Œæäº¤çš„ä»»åŠ¡ï¼Œå¦åˆ™å°†ä»»åŠ¡æ”¾å…¥workQueueé˜Ÿåˆ—ï¼Œå¦‚æœworkQueueæ»¡äº†ï¼Œåˆ™åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°é‡æ˜¯å¦å°äºmaximumPoolSize,å¦‚æœå°äºåˆ™åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¦åˆ™å°±ä¼šè°ƒç”¨handlerï¼Œä»¥è¡¨ç¤ºçº¿ç¨‹æ± æ‹’ç»æ¥æ”¶ä»»åŠ¡ã€‚</p><p>è¿™é‡Œä»¥jdk1.8.0_111çš„æºä»£ç ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹å…·ä½“å®ç°ã€‚</p><h4 id="1ã€å…ˆçœ‹ä¸€ä¸‹çº¿ç¨‹æ± çš„executoræ–¹æ³•"><a href="#1ã€å…ˆçœ‹ä¸€ä¸‹çº¿ç¨‹æ± çš„executoræ–¹æ³•" class="headerlink" title="1ã€å…ˆçœ‹ä¸€ä¸‹çº¿ç¨‹æ± çš„executoræ–¹æ³•"></a>1ã€å…ˆçœ‹ä¸€ä¸‹çº¿ç¨‹æ± çš„executoræ–¹æ³•</h4><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java23_3.jpeg" alt="å›¾ç‰‡"></p><ul><li>åˆ¤æ–­å½“å‰æ´»è·ƒçº¿ç¨‹æ•°æ˜¯å¦å°äºcorePoolSize,å¦‚æœå°äºï¼Œåˆ™è°ƒç”¨addWorkeråˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡</li><li>å¦‚æœä¸å°äºcorePoolSizeï¼Œåˆ™å°†ä»»åŠ¡æ·»åŠ åˆ°workQueueé˜Ÿåˆ—ã€‚</li><li>å¦‚æœæ”¾å…¥workQueueå¤±è´¥ï¼Œåˆ™åˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœè¿™æ—¶åˆ›å»ºçº¿ç¨‹å¤±è´¥(å½“å‰çº¿ç¨‹æ•°ä¸å°äºmaximumPoolSizeæ—¶)ï¼Œå°±ä¼šè°ƒç”¨reject(å†…éƒ¨è°ƒç”¨handler)æ‹’ç»æ¥å—ä»»åŠ¡ã€‚</li></ul><h4 id="2ã€å†çœ‹ä¸‹addWorkerçš„æ–¹æ³•å®ç°"><a href="#2ã€å†çœ‹ä¸‹addWorkerçš„æ–¹æ³•å®ç°" class="headerlink" title="2ã€å†çœ‹ä¸‹addWorkerçš„æ–¹æ³•å®ç°"></a>2ã€å†çœ‹ä¸‹addWorkerçš„æ–¹æ³•å®ç°</h4><p>è¿™å—ä»£ç æ˜¯åœ¨åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹æ—¶ï¼Œå³coreç­‰äºfalseã€‚åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºç­‰äºmaximumPoolSizeï¼Œå¦‚æœå¤§äºç­‰äºåˆ™è¿”å›falseï¼Œå³ä¸Šè¾¹è¯´åˆ°çš„â‘¢ä¸­åˆ›å»ºçº¿ç¨‹å¤±è´¥çš„æƒ…å†µã€‚</p><p>addWorkeræ–¹æ³•çš„ä¸‹åŠéƒ¨åˆ†ï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java23_4.jpeg" alt="å›¾ç‰‡"></p><ul><li>åˆ›å»ºWorkerå¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿä¼šå®ä¾‹åŒ–ä¸€ä¸ªThreadå¯¹è±¡ã€‚</li><li>å¯åŠ¨å¯åŠ¨è¿™ä¸ªçº¿ç¨‹</li></ul><h4 id="3ã€å†åˆ°Workeré‡Œçœ‹çœ‹å…¶å®ç°"><a href="#3ã€å†åˆ°Workeré‡Œçœ‹çœ‹å…¶å®ç°" class="headerlink" title="3ã€å†åˆ°Workeré‡Œçœ‹çœ‹å…¶å®ç°"></a>3ã€å†åˆ°Workeré‡Œçœ‹çœ‹å…¶å®ç°</h4><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java23_5.png" alt="å›¾ç‰‡"></p><p>å¯ä»¥çœ‹åˆ°åœ¨åˆ›å»ºWorkeræ—¶ä¼šè°ƒç”¨threadFactoryæ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚ä¸Šè¾¹çš„â‘¡ä¸­å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å°±ä¼šè§¦å‘Workerçš„runæ–¹æ³•è¢«çº¿ç¨‹è°ƒç”¨ã€‚</p><h4 id="4ã€æ¥ä¸‹æ¥å’±ä»¬çœ‹çœ‹runWorkeræ–¹æ³•çš„é€»è¾‘"><a href="#4ã€æ¥ä¸‹æ¥å’±ä»¬çœ‹çœ‹runWorkeræ–¹æ³•çš„é€»è¾‘" class="headerlink" title="4ã€æ¥ä¸‹æ¥å’±ä»¬çœ‹çœ‹runWorkeræ–¹æ³•çš„é€»è¾‘"></a>4ã€æ¥ä¸‹æ¥å’±ä»¬çœ‹çœ‹runWorkeræ–¹æ³•çš„é€»è¾‘</h4><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java23_6.jpg" alt="å›¾ç‰‡"></p><p>çº¿ç¨‹è°ƒç”¨runWokerï¼Œä¼šwhileå¾ªç¯è°ƒç”¨getTaskæ–¹æ³•ä»workerQueueé‡Œè¯»å–ä»»åŠ¡ï¼Œç„¶åæ‰§è¡Œä»»åŠ¡ã€‚åªè¦getTaskæ–¹æ³•ä¸è¿”å›null,æ­¤çº¿ç¨‹å°±ä¸ä¼šé€€å‡ºã€‚</p><h4 id="5ã€æœ€ååœ¨çœ‹çœ‹getTaskæ–¹æ³•å®ç°"><a href="#5ã€æœ€ååœ¨çœ‹çœ‹getTaskæ–¹æ³•å®ç°" class="headerlink" title="5ã€æœ€ååœ¨çœ‹çœ‹getTaskæ–¹æ³•å®ç°"></a>5ã€æœ€ååœ¨çœ‹çœ‹getTaskæ–¹æ³•å®ç°</h4><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java23_7.jpg" alt="å›¾ç‰‡"></p><ul><li>å’±ä»¬å…ˆä¸ç®¡allowCoreThreadTimeOutï¼Œè¿™ä¸ªå˜é‡é»˜è®¤å€¼æ˜¯falseã€‚wc&gt;corePoolSizeåˆ™æ˜¯åˆ¤æ–­å½“å‰çº¿ç¨‹æ•°æ˜¯å¦å¤§äºcorePoolSizeã€‚</li><li>å¦‚æœå½“å‰çº¿ç¨‹æ•°å¤§äºcorePoolSizeï¼Œåˆ™ä¼šè°ƒç”¨workQueueçš„pollæ–¹æ³•è·å–ä»»åŠ¡ï¼Œè¶…æ—¶æ—¶é—´æ˜¯keepAliveTimeã€‚å¦‚æœè¶…è¿‡keepAliveTimeæ—¶é•¿ï¼Œpollè¿”å›äº†nullï¼Œä¸Šè¾¹æåˆ°çš„whileå¾ªåºå°±ä¼šé€€å‡ºï¼Œçº¿ç¨‹ä¹Ÿå°±æ‰§è¡Œå®Œäº†ã€‚</li></ul><p>å¦‚æœå½“å‰çº¿ç¨‹æ•°å°äºcorePoolSizeï¼Œåˆ™ä¼šè°ƒç”¨workQueueçš„takeæ–¹æ³•é˜»å¡åœ¨å½“å‰</p><h3 id="éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥"><a href="#éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥" class="headerlink" title="éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥"></a>éé»˜è®¤ä»»åŠ¡æ‹’ç»ç­–ç•¥</h3><p>RejectedExecutionHandleræ˜¯jdkæä¾›çš„ä¸€ä¸ªä»»åŠ¡æ‹’ç»ç­–ç•¥æ¥å£ï¼Œå®ƒä¸‹é¢å­˜åœ¨4ä¸ªå­ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ThreadPoolExecutor.AbortPolicy:     ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚æ˜¯é»˜è®¤çš„ç­–ç•¥ã€‚</span><br><span class="line">ThreadPoolExecutor.DiscardPolicyï¼š    ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ è¿™æ˜¯ä¸æ¨èçš„åšæ³•ã€‚</span><br><span class="line">ThreadPoolExecutor.DiscardOldestPolicyï¼š    æŠ›å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ ç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ å…¥é˜Ÿåˆ—ä¸­ã€‚</span><br><span class="line">ThreadPoolExecutor.CallerRunsPolicy:        è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šæ˜ç¡®çº¿ç¨‹æ± å¯¹å¤šå¯æ‰§è¡Œçš„ä»»åŠ¡æ•° &#x3D; é˜Ÿåˆ—å®¹é‡ + æœ€å¤§çº¿ç¨‹æ•°</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º1</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.AbortPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">threadPoolExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy()) ;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡ï¼Œè€Œè¯¥çº¿ç¨‹æ± æœ€å¤šå¯ä»¥å¤„ç†4ä¸ªä»»åŠ¡ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨AbortPolicyè¿™ä¸ªä»»åŠ¡å¤„ç†ç­–ç•¥çš„æ—¶å€™ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°æŠ¥é”™ï¼Œä»…ä»…æ‰§è¡Œäº†4ä¸ªä»»åŠ¡ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡è¢«ä¸¢å¼ƒäº†</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º2</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.DiscardPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ThreadPoolExecutor</span> <span class="variable">threadPoolExecutor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardPolicy()) ;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡ï¼Œè€Œè¯¥çº¿ç¨‹æ± æœ€å¤šå¯ä»¥å¤„ç†4ä¸ªä»»åŠ¡ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨DiscardPolicyè¿™ä¸ªä»»åŠ¡å¤„ç†ç­–ç•¥çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¸ä¼šæŠ¥é”™</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°æ²¡æœ‰æŠ¥é”™ï¼Œä»…ä»…æ‰§è¡Œäº†4ä¸ªä»»åŠ¡ï¼Œæœ‰ä¸€ä¸ªä»»åŠ¡è¢«ä¸¢å¼ƒäº†</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º3</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.DiscardOldestPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ThreadPoolExecutor threadPoolExecutor;</span><br><span class="line">        threadPoolExecutor = <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.DiscardOldestPolicy());</span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            <span class="comment">// å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ¥æŒ‡å®šæŒ‡å®šå½“å‰æ‰§è¡Œçš„ä»»åŠ¡;è¿™ä¸ªå˜é‡éœ€è¦è¢«finalä¿®é¥°</span></span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> x ;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span> + y);</span><br><span class="line">            &#125;);     </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">2</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">0</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">3</span></span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡<span class="number">4</span></span><br></pre></td></tr></table></figure><p>ç”±äºä»»åŠ¡1åœ¨çº¿ç¨‹æ± ä¸­ç­‰å¾…æ—¶é—´æœ€é•¿ï¼Œå› æ­¤ä»»åŠ¡1è¢«ä¸¢å¼ƒã€‚</p><p><strong>æ¡ˆä¾‹æ¼”ç¤º4</strong>ï¼šæ¼”ç¤ºThreadPoolExecutor.CallerRunsPolicyä»»åŠ¡å¤„ç†ç­–ç•¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadPoolExecutorDemo04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º1 ï¼Œ æœ€å¤§çº¿ç¨‹æ± æ•°é‡ä¸º3, ä»»åŠ¡å®¹å™¨çš„å®¹é‡ä¸º1 ,ç©ºé—²çº¿ç¨‹çš„æœ€å¤§å­˜åœ¨æ—¶é—´ä¸º20s</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ThreadPoolExecutor threadPoolExecutor;</span><br><span class="line">        threadPoolExecutor = <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span> , <span class="number">3</span> , <span class="number">20</span> , TimeUnit.SECONDS ,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>) , Executors.defaultThreadFactory() , <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æäº¤5ä¸ªä»»åŠ¡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span> ; x &lt; <span class="number">5</span> ; x++) &#123;</span><br><span class="line">            threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡&quot;</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ§åˆ¶å°è¾“å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">3</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">2</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">pool-<span class="number">1</span>-thread-<span class="number">1</span>----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br><span class="line">main----&gt;&gt; æ‰§è¡Œäº†ä»»åŠ¡</span><br></pre></td></tr></table></figure><p>é€šè¿‡æ§åˆ¶å°çš„è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¬¡ç­–ç•¥æ²¡æœ‰é€šè¿‡çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ä»»åŠ¡çš„run()æ–¹æ³•ç»•è¿‡çº¿ç¨‹æ± ç›´æ¥æ‰§è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹çŠ¶æ€</title>
      <link href="/2021/01/02/Java_22_%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81/"/>
      <url>/2021/01/02/Java_22_%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81/</url>
      
        <content type="html"><![CDATA[<p>å½“çº¿ç¨‹è¢«åˆ›å»ºå¹¶å¯åŠ¨ä»¥åï¼Œå®ƒæ—¢ä¸æ˜¯ä¸€å¯åŠ¨å°±è¿›å…¥äº†æ‰§è¡ŒçŠ¶æ€ï¼Œä¹Ÿä¸æ˜¯ä¸€ç›´å¤„äºæ‰§è¡ŒçŠ¶æ€ã€‚çº¿ç¨‹å¯¹è±¡åœ¨ä¸åŒçš„æ—¶æœŸæœ‰ä¸åŒçš„çŠ¶æ€ã€‚é‚£ä¹ˆJavaä¸­çš„çº¿ç¨‹å­˜åœ¨å“ªå‡ ç§çŠ¶æ€å‘¢ï¼Ÿ</p><span id="more"></span><p>Javaä¸­çš„çº¿ç¨‹çŠ¶æ€è¢«å®šä¹‰åœ¨äº†java.lang.Thread.Stateæšä¸¾ç±»ä¸­ï¼ŒStateæšä¸¾ç±»çš„æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">State</span> &#123;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">/* æ–°å»º */</span></span><br><span class="line">        NEW , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* å¯è¿è¡ŒçŠ¶æ€ */</span></span><br><span class="line">        RUNNABLE , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* é˜»å¡çŠ¶æ€ */</span></span><br><span class="line">        BLOCKED , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æ— é™ç­‰å¾…çŠ¶æ€ */</span></span><br><span class="line">        WAITING , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* è®¡æ—¶ç­‰å¾… */</span></span><br><span class="line">        TIMED_WAITING , </span><br><span class="line"></span><br><span class="line">        <span class="comment">/* ç»ˆæ­¢ */</span></span><br><span class="line">        TERMINATED;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–å½“å‰çº¿ç¨‹çš„çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">public</span> State <span class="title function_">getState</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> jdk.internal.misc.VM.toThreadState(threadStatus);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æºç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Javaä¸­çš„çº¿ç¨‹å­˜åœ¨6ç§çŠ¶æ€ï¼Œæ¯ç§çº¿ç¨‹çŠ¶æ€çš„å«ä¹‰å¦‚ä¸‹</p><table><thead><tr><th>çº¿ç¨‹çŠ¶æ€</th><th>å…·ä½“å«ä¹‰</th></tr></thead><tbody><tr><td>NEW</td><td>ä¸€ä¸ªå°šæœªå¯åŠ¨çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºåˆå§‹çŠ¶æ€ã€å¼€å§‹çŠ¶æ€ã€‚çº¿ç¨‹åˆšè¢«åˆ›å»ºï¼Œä½†æ˜¯å¹¶æœªå¯åŠ¨ã€‚è¿˜æ²¡è°ƒç”¨startæ–¹æ³•ã€‚MyThread t &#x3D; new MyThread()åªæœ‰çº¿ç¨‹å¯¹è±¡ï¼Œæ²¡æœ‰çº¿ç¨‹ç‰¹å¾ã€‚</td></tr><tr><td>RUNNABLE</td><td>å½“æˆ‘ä»¬è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„startæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹å¯¹è±¡è¿›å…¥äº†RUNNABLEçŠ¶æ€ã€‚é‚£ä¹ˆæ­¤æ—¶æ‰æ˜¯çœŸæ­£çš„åœ¨JVMè¿›ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œ<strong>çº¿ç¨‹ä¸€ç»å¯åŠ¨å¹¶ä¸æ˜¯ç«‹å³å¾—åˆ°æ‰§è¡Œï¼Œçº¿ç¨‹çš„è¿è¡Œä¸å¦è¦å¬ä»¤ä¸CPUçš„è°ƒåº¦</strong>ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ä¸ª<strong>ä¸­é—´çŠ¶æ€</strong>ç§°ä¹‹ä¸ºå¯æ‰§è¡ŒçŠ¶æ€(RUNNABLE)ä¹Ÿå°±æ˜¯è¯´<strong>å®ƒå…·å¤‡æ‰§è¡Œçš„èµ„æ ¼ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰çœŸæ­£çš„æ‰§è¡Œèµ·æ¥è€Œæ˜¯åœ¨ç­‰å¾…CPUè°ƒåº¦</strong>ã€‚</td></tr><tr><td>BLOCKED</td><td>å½“ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å–ä¸€ä¸ªå¯¹è±¡é”ï¼Œè€Œè¯¥å¯¹è±¡é”è¢«å…¶ä»–çš„çº¿ç¨‹æŒæœ‰ï¼Œåˆ™è¯¥çº¿ç¨‹è¿›å…¥BlockedçŠ¶æ€ï¼›å½“è¯¥çº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œè¯¥çº¿ç¨‹å°†å˜æˆRunnableçŠ¶æ€ã€‚</td></tr><tr><td>WAITING</td><td>ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹ç­‰å¾…çš„åŸå› æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯è°ƒç”¨Object.wait()ã€join()æ–¹æ³•ã€‚å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œæ­£åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼šå› ä¸ºwait()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å»è°ƒç”¨notify()æˆ–notifyAll()ï¼›ä¸€ä¸ªå› ä¸ºjoin()è€Œç­‰å¾…çš„çº¿ç¨‹æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ç»“æŸã€‚</td></tr><tr><td>TIMED_WAITING</td><td>ä¸€ä¸ªåœ¨é™å®šæ—¶é—´å†…ç­‰å¾…çš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºé™æ—¶ç­‰å¾…çŠ¶æ€ã€‚é€ æˆçº¿ç¨‹é™æ—¶ç­‰å¾…çŠ¶æ€çš„åŸå› æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼šThread.sleep(long)ï¼ŒObject.wait(long)ã€join(long)ã€‚</td></tr><tr><td>TERMINATED</td><td>ä¸€ä¸ªå®Œå…¨è¿è¡Œå®Œæˆçš„çº¿ç¨‹çš„çŠ¶æ€ã€‚ä¹Ÿç§°ä¹‹ä¸ºç»ˆæ­¢çŠ¶æ€ã€ç»“æŸçŠ¶æ€</td></tr></tbody></table><p>å„ä¸ªçŠ¶æ€çš„è½¬æ¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java22_1.png" alt="1591163781941"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜»å¡é˜Ÿåˆ—</title>
      <link href="/2020/12/29/Java_21_%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/"/>
      <url>/2020/12/29/Java_21_%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h3 id="é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨"><a href="#é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨" class="headerlink" title="é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨"></a>é˜»å¡é˜Ÿåˆ—åŸºæœ¬ä½¿ç”¨</h3><ul><li><p>é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java21_1.png" alt="06_é˜»å¡é˜Ÿåˆ—ç»§æ‰¿ç»“æ„"></p></li></ul><span id="more"></span><ul><li><p>å¸¸è§BlockingQueue:</p><p>ArrayBlockingQueue: åº•å±‚æ˜¯æ•°ç»„,æœ‰ç•Œ</p><p>LinkedBlockingQueue: åº•å±‚æ˜¯é“¾è¡¨,æ— ç•Œ.ä½†ä¸æ˜¯çœŸæ­£çš„æ— ç•Œ,æœ€å¤§ä¸ºintçš„æœ€å¤§å€¼</p></li><li><p>BlockingQueueçš„æ ¸å¿ƒæ–¹æ³•:</p><p>put(anObject): å°†å‚æ•°æ”¾å…¥é˜Ÿåˆ—,å¦‚æœæ”¾ä¸è¿›å»ä¼šé˜»å¡</p><p>take(): å–å‡ºç¬¬ä¸€ä¸ªæ•°æ®,å–ä¸åˆ°ä¼šé˜»å¡</p></li><li><p>ä»£ç ç¤ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºé˜»å¡é˜Ÿåˆ—çš„å¯¹è±¡,å®¹é‡ä¸º 1</span></span><br><span class="line">        ArrayBlockingQueue&lt;String&gt; arrayBlockingQueue = <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å­˜å‚¨å…ƒç´ </span></span><br><span class="line">        arrayBlockingQueue.put(<span class="string">&quot;æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å–å…ƒç´ </span></span><br><span class="line">        System.out.println(arrayBlockingQueue.take());</span><br><span class="line">        System.out.println(arrayBlockingQueue.take()); <span class="comment">// å–ä¸åˆ°ä¼šé˜»å¡</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç¨‹åºç»“æŸäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶"><a href="#é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶" class="headerlink" title="é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶"></a>é˜»å¡é˜Ÿåˆ—å®ç°ç­‰å¾…å”¤é†’æœºåˆ¶</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li><p>ç”Ÿäº§è€…ç±»(Cooker)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.æ„é€ æ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>2.åœ¨runæ–¹æ³•ä¸­å¾ªç¯å‘é˜»å¡é˜Ÿåˆ—ä¸­æ·»åŠ åŒ…å­</p><p>3.æ‰“å°æ·»åŠ ç»“æœ</p></li><li><p>æ¶ˆè´¹è€…ç±»(Foodie)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.æ„é€ æ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>2.åœ¨runæ–¹æ³•ä¸­å¾ªç¯è·å–é˜»å¡é˜Ÿåˆ—ä¸­çš„åŒ…å­</p><p>3.æ‰“å°è·å–ç»“æœ</p></li><li><p>æµ‹è¯•ç±»(Demo)ï¼šé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­çš„ä»£ç æ­¥éª¤å¦‚ä¸‹</p><p>åˆ›å»ºé˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>åˆ›å»ºç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ å…¥é˜»å¡é˜Ÿåˆ—å¯¹è±¡</p><p>åˆ†åˆ«å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cooker</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ArrayBlockingQueue&lt;String&gt; bd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cooker</span><span class="params">(ArrayBlockingQueue&lt;String&gt; bd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bd = bd;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bd.put(<span class="string">&quot;æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;å¨å¸ˆæ”¾å…¥ä¸€ä¸ªæ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foodie</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> ArrayBlockingQueue&lt;String&gt; bd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Foodie</span><span class="params">(ArrayBlockingQueue&lt;String&gt; bd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bd = bd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¥—è·¯:</span></span><br><span class="line">        <span class="comment">//1. while(true)æ­»å¾ªç¯</span></span><br><span class="line">        <span class="comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span></span><br><span class="line">        <span class="comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span></span><br><span class="line">        <span class="comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">take</span> <span class="operator">=</span> bd.take();</span><br><span class="line">                System.out.println(<span class="string">&quot;åƒè´§å°†&quot;</span> + take + <span class="string">&quot;æ‹¿å‡ºæ¥åƒäº†&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayBlockingQueue&lt;String&gt; bd = <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Foodie</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Foodie</span>(bd);</span><br><span class="line">        <span class="type">Cooker</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cooker</span>(bd);</span><br><span class="line"></span><br><span class="line">        f.start();</span><br><span class="line">        c.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¡ˆä¾‹</title>
      <link href="/2020/12/28/Java_20_%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%E6%A1%88%E4%BE%8B/"/>
      <url>/2020/12/28/Java_20_%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°"><a href="#ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°" class="headerlink" title="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°"></a>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ¦‚è¿°</h3><ul><li><p>æ¦‚è¿°</p><p>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼æ˜¯ä¸€ä¸ªååˆ†ç»å…¸çš„å¤šçº¿ç¨‹åä½œçš„æ¨¡å¼ï¼Œå¼„æ‡‚ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜èƒ½å¤Ÿè®©æˆ‘ä»¬å¯¹å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç†è§£æ›´åŠ æ·±åˆ»ã€‚</p><p>æ‰€è°“ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œå®é™…ä¸Šä¸»è¦æ˜¯åŒ…å«äº†ä¸¤ç±»çº¿ç¨‹ï¼š</p><p>â€‹    ä¸€ç±»æ˜¯ç”Ÿäº§è€…çº¿ç¨‹ç”¨äºç”Ÿäº§æ•°æ®</p><p>â€‹    ä¸€ç±»æ˜¯æ¶ˆè´¹è€…çº¿ç¨‹ç”¨äºæ¶ˆè´¹æ•°æ®</p><p>ä¸ºäº†è§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…³ç³»ï¼Œé€šå¸¸ä¼šé‡‡ç”¨å…±äº«çš„æ•°æ®åŒºåŸŸï¼Œå°±åƒæ˜¯ä¸€ä¸ªä»“åº“</p><p>ç”Ÿäº§è€…ç”Ÿäº§æ•°æ®ä¹‹åç›´æ¥æ”¾ç½®åœ¨å…±äº«æ•°æ®åŒºä¸­ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒæ¶ˆè´¹è€…çš„è¡Œä¸º</p><p>æ¶ˆè´¹è€…åªéœ€è¦ä»å…±äº«æ•°æ®åŒºä¸­å»è·å–æ•°æ®ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒç”Ÿäº§è€…çš„è¡Œä¸º</p></li></ul><span id="more"></span><ul><li><p>Objectç±»çš„ç­‰å¾…å’Œå”¤é†’æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void wait()</td><td>å¯¼è‡´å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥å¯¹è±¡çš„ notify()æ–¹æ³•æˆ– notifyAll()æ–¹æ³•</td></tr><tr><td>void notify()</td><td>å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„å•ä¸ªçº¿ç¨‹</td></tr><tr><td>void notifyAll()</td><td>å”¤é†’æ­£åœ¨ç­‰å¾…å¯¹è±¡ç›‘è§†å™¨çš„æ‰€æœ‰çº¿ç¨‹</td></tr></tbody></table></li></ul><h3 id="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹"><a href="#ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹" class="headerlink" title="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹"></a>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><ul><li><p>æ¡Œå­ç±»(Desk)ï¼šå®šä¹‰è¡¨ç¤ºåŒ…å­æ•°é‡çš„å˜é‡,å®šä¹‰é”å¯¹è±¡å˜é‡,å®šä¹‰æ ‡è®°æ¡Œå­ä¸Šæœ‰æ— åŒ…å­çš„å˜é‡</p></li><li><p>ç”Ÿäº§è€…ç±»(Cooker)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.åˆ¤æ–­æ˜¯å¦æœ‰åŒ…å­,å†³å®šå½“å‰çº¿ç¨‹æ˜¯å¦æ‰§è¡Œ</p><p>2.å¦‚æœæœ‰åŒ…å­,å°±è¿›å…¥ç­‰å¾…çŠ¶æ€,å¦‚æœæ²¡æœ‰åŒ…å­,ç»§ç»­æ‰§è¡Œ,ç”Ÿäº§åŒ…å­</p><p>3.ç”Ÿäº§åŒ…å­ä¹‹å,æ›´æ–°æ¡Œå­ä¸ŠåŒ…å­çŠ¶æ€,å”¤é†’æ¶ˆè´¹è€…æ¶ˆè´¹åŒ…å­</p></li><li><p>æ¶ˆè´¹è€…ç±»(Foodie)ï¼šå®ç°Runnableæ¥å£ï¼Œé‡å†™run()æ–¹æ³•ï¼Œè®¾ç½®çº¿ç¨‹ä»»åŠ¡</p><p>1.åˆ¤æ–­æ˜¯å¦æœ‰åŒ…å­,å†³å®šå½“å‰çº¿ç¨‹æ˜¯å¦æ‰§è¡Œ</p><p>2.å¦‚æœæ²¡æœ‰åŒ…å­,å°±è¿›å…¥ç­‰å¾…çŠ¶æ€,å¦‚æœæœ‰åŒ…å­,å°±æ¶ˆè´¹åŒ…å­</p><p>3.æ¶ˆè´¹åŒ…å­å,æ›´æ–°æ¡Œå­ä¸ŠåŒ…å­çŠ¶æ€,å”¤é†’ç”Ÿäº§è€…ç”Ÿäº§åŒ…å­</p></li><li><p>æµ‹è¯•ç±»(Demo)ï¼šé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œmainæ–¹æ³•ä¸­çš„ä»£ç æ­¥éª¤å¦‚ä¸‹</p><p>åˆ›å»ºç”Ÿäº§è€…çº¿ç¨‹å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡</p><p>åˆ†åˆ«å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</p></li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Desk</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªæ ‡è®°</span></span><br><span class="line">    <span class="comment">//true å°±è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸åƒè´§æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//false å°±è¡¨ç¤ºæ¡Œå­ä¸Šæ²¡æœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸å¨å¸ˆæ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‰å ¡åŒ…çš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é”å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cooker</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"><span class="comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Desk.lock)&#123;</span><br><span class="line">                <span class="keyword">if</span>(Desk.count == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!Desk.flag)&#123;</span><br><span class="line">                        <span class="comment">//ç”Ÿäº§</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;å¨å¸ˆæ­£åœ¨ç”Ÿäº§æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        Desk.flag = <span class="literal">true</span>;</span><br><span class="line">                        Desk.lock.notifyAll();</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Desk.lock.wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foodie</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¥—è·¯:</span></span><br><span class="line">            <span class="comment">//1. while(true)æ­»å¾ªç¯</span></span><br><span class="line">            <span class="comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span></span><br><span class="line">            <span class="comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span></span><br><span class="line">            <span class="comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Desk.lock)&#123;</span><br><span class="line">                <span class="keyword">if</span>(Desk.count == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(Desk.flag)&#123;</span><br><span class="line">                        <span class="comment">//æœ‰</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;åƒè´§åœ¨åƒæ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        Desk.flag = <span class="literal">false</span>;</span><br><span class="line">                        Desk.lock.notifyAll();</span><br><span class="line">                        Desk.count--;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">//æ²¡æœ‰å°±ç­‰å¾…</span></span><br><span class="line">                        <span class="comment">//ä½¿ç”¨ä»€ä¹ˆå¯¹è±¡å½“åšé”,é‚£ä¹ˆå°±å¿…é¡»ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•.</span></span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Desk.lock.wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*æ¶ˆè´¹è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">        å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚*/</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Foodie</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Foodie</span>();</span><br><span class="line">        <span class="type">Cooker</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cooker</span>();</span><br><span class="line"></span><br><span class="line">        f.start();</span><br><span class="line">        c.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–"><a href="#ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–" class="headerlink" title="ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–"></a>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¡ˆä¾‹ä¼˜åŒ–</h3><ul><li><p>éœ€æ±‚</p><ul><li>å°†Deskç±»ä¸­çš„å˜é‡,é‡‡ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼å°è£…èµ·æ¥</li><li>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç±»ä¸­æ„é€ æ–¹æ³•æ¥æ”¶Deskç±»å¯¹è±¡,ä¹‹ååœ¨runæ–¹æ³•ä¸­è¿›è¡Œä½¿ç”¨</li><li>åˆ›å»ºç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çº¿ç¨‹å¯¹è±¡,æ„é€ æ–¹æ³•ä¸­ä¼ å…¥Deskç±»å¯¹è±¡</li><li>å¼€å¯ä¸¤ä¸ªçº¿ç¨‹</li></ul></li><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Desk</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªæ ‡è®°</span></span><br><span class="line">    <span class="comment">//true å°±è¡¨ç¤ºæ¡Œå­ä¸Šæœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸åƒè´§æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//false å°±è¡¨ç¤ºæ¡Œå­ä¸Šæ²¡æœ‰æ±‰å ¡åŒ…çš„,æ­¤æ—¶å…è®¸å¨å¸ˆæ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">//public static boolean flag = false;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ±‰å ¡åŒ…çš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="comment">//public static int count = 10;</span></span><br><span class="line">    <span class="comment">//ä»¥åæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ç§å¿…é¡»æœ‰é»˜è®¤å€¼çš„å˜é‡</span></span><br><span class="line">   <span class="comment">// private int count = 10;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é”å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//public static final Object lock = new Object();</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Desk</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="literal">false</span>,<span class="number">10</span>); <span class="comment">// åœ¨ç©ºå‚å†…éƒ¨è°ƒç”¨å¸¦å‚,å¯¹æˆå‘˜å˜é‡è¿›è¡Œèµ‹å€¼,ä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨æˆå‘˜å˜é‡äº†</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Desk</span><span class="params">(<span class="type">boolean</span> flag, <span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFlag</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlag</span><span class="params">(<span class="type">boolean</span> flag)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCount</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getLock</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lock;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Desk&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;flag=&quot;</span> + flag +</span><br><span class="line">                <span class="string">&quot;, count=&quot;</span> + count +</span><br><span class="line">                <span class="string">&quot;, lock=&quot;</span> + lock +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cooker</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Desk desk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cooker</span><span class="params">(Desk desk)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desk = desk;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">//            1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">//    å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">//            2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">//            3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (desk.getLock())&#123;</span><br><span class="line">                <span class="keyword">if</span>(desk.getCount() == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//System.out.println(&quot;éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†&quot;);</span></span><br><span class="line">                    <span class="keyword">if</span>(!desk.isFlag())&#123;</span><br><span class="line">                        <span class="comment">//ç”Ÿäº§</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;å¨å¸ˆæ­£åœ¨ç”Ÿäº§æ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        desk.setFlag(<span class="literal">true</span>);</span><br><span class="line">                        desk.getLock().notifyAll();</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            desk.getLock().wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foodie</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Desk desk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Foodie</span><span class="params">(Desk desk)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.desk = desk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">//        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">//        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">//        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">//                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">//        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¥—è·¯:</span></span><br><span class="line">            <span class="comment">//1. while(true)æ­»å¾ªç¯</span></span><br><span class="line">            <span class="comment">//2. synchronized é”,é”å¯¹è±¡è¦å”¯ä¸€</span></span><br><span class="line">            <span class="comment">//3. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. ç»“æŸ</span></span><br><span class="line">            <span class="comment">//4. åˆ¤æ–­,å…±äº«æ•°æ®æ˜¯å¦ç»“æŸ. æ²¡æœ‰ç»“æŸ</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (desk.getLock())&#123;</span><br><span class="line">                <span class="keyword">if</span>(desk.getCount() == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//System.out.println(&quot;éªŒè¯ä¸€ä¸‹æ˜¯å¦æ‰§è¡Œäº†&quot;);</span></span><br><span class="line">                    <span class="keyword">if</span>(desk.isFlag())&#123;</span><br><span class="line">                        <span class="comment">//æœ‰</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;åƒè´§åœ¨åƒæ±‰å ¡åŒ…&quot;</span>);</span><br><span class="line">                        desk.setFlag(<span class="literal">false</span>);</span><br><span class="line">                        desk.getLock().notifyAll();</span><br><span class="line">                        desk.setCount(desk.getCount() - <span class="number">1</span>);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">//æ²¡æœ‰å°±ç­‰å¾…</span></span><br><span class="line">                        <span class="comment">//ä½¿ç”¨ä»€ä¹ˆå¯¹è±¡å½“åšé”,é‚£ä¹ˆå°±å¿…é¡»ç”¨è¿™ä¸ªå¯¹è±¡å»è°ƒç”¨ç­‰å¾…å’Œå”¤é†’çš„æ–¹æ³•.</span></span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            desk.getLock().wait();</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*æ¶ˆè´¹è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼Œå¦‚æœæ²¡æœ‰å°±ç­‰å¾…ã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå¦‚æœæœ‰å°±å¼€åƒ</span></span><br><span class="line"><span class="comment">        4ï¼Œåƒå®Œä¹‹åï¼Œæ¡Œå­ä¸Šçš„æ±‰å ¡åŒ…å°±æ²¡æœ‰äº†</span></span><br><span class="line"><span class="comment">                å«é†’ç­‰å¾…çš„ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§</span></span><br><span class="line"><span class="comment">        æ±‰å ¡åŒ…çš„æ€»æ•°é‡å‡ä¸€*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ç”Ÿäº§è€…æ­¥éª¤ï¼š</span></span><br><span class="line"><span class="comment">        1ï¼Œåˆ¤æ–­æ¡Œå­ä¸Šæ˜¯å¦æœ‰æ±‰å ¡åŒ…</span></span><br><span class="line"><span class="comment">        å¦‚æœæœ‰å°±ç­‰å¾…ï¼Œå¦‚æœæ²¡æœ‰æ‰ç”Ÿäº§ã€‚</span></span><br><span class="line"><span class="comment">        2ï¼ŒæŠŠæ±‰å ¡åŒ…æ”¾åœ¨æ¡Œå­ä¸Šã€‚</span></span><br><span class="line"><span class="comment">        3ï¼Œå«é†’ç­‰å¾…çš„æ¶ˆè´¹è€…å¼€åƒã€‚*/</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Desk</span> <span class="variable">desk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Desk</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Foodie</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Foodie</span>(desk);</span><br><span class="line">        <span class="type">Cooker</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cooker</span>(desk);</span><br><span class="line"></span><br><span class="line">        f.start();</span><br><span class="line">        c.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­»é”</title>
      <link href="/2020/12/27/Java_19_%E6%AD%BB%E9%94%81/"/>
      <url>/2020/12/27/Java_19_%E6%AD%BB%E9%94%81/</url>
      
        <content type="html"><![CDATA[<ul><li><p>æ¦‚è¿°</p><p>çº¿ç¨‹æ­»é”æ˜¯æŒ‡ç”±äºä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹äº’ç›¸æŒæœ‰å¯¹æ–¹æ‰€éœ€è¦çš„èµ„æºï¼Œå¯¼è‡´è¿™äº›çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œæ— æ³•å‰å¾€æ‰§è¡Œ</p></li><li><p>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šäº§ç”Ÿæ­»é”</p><ol><li><p>èµ„æºæœ‰é™</p></li><li><p>åŒæ­¥åµŒå¥—</p></li></ol></li></ul><span id="more"></span><ul><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">objA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">objB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (objA)&#123;</span><br><span class="line">                    <span class="comment">//çº¿ç¨‹ä¸€</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (objB)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;å°åº·åŒå­¦æ­£åœ¨èµ°è·¯&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (objB)&#123;</span><br><span class="line">                    <span class="comment">//çº¿ç¨‹äºŒ</span></span><br><span class="line">                    <span class="keyword">synchronized</span> (objA)&#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;å°è–‡åŒå­¦æ­£åœ¨èµ°è·¯&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹åŒæ­¥</title>
      <link href="/2020/12/23/Java_18_%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/"/>
      <url>/2020/12/23/Java_18_%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="å–ç¥¨æ¡ˆä¾‹"><a href="#å–ç¥¨æ¡ˆä¾‹" class="headerlink" title="å–ç¥¨æ¡ˆä¾‹"></a>å–ç¥¨æ¡ˆä¾‹</h3><ul><li><p>æ¡ˆä¾‹éœ€æ±‚</p><p>æŸç”µå½±é™¢ç›®å‰æ­£åœ¨ä¸Šæ˜ å›½äº§å¤§ç‰‡ï¼Œå…±æœ‰100å¼ ç¥¨ï¼Œè€Œå®ƒæœ‰3ä¸ªçª—å£å–ç¥¨ï¼Œè¯·è®¾è®¡ä¸€ä¸ªç¨‹åºæ¨¡æ‹Ÿè¯¥ç”µå½±é™¢å–ç¥¨</p></li><li><p>å®ç°æ­¥éª¤</p><ul><li><p>å®šä¹‰ä¸€ä¸ªç±»SellTicketå®ç°Runnableæ¥å£ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼šprivate int tickets &#x3D; 100;</p></li><li><p>åœ¨SellTicketç±»ä¸­é‡å†™run()æ–¹æ³•å®ç°å–ç¥¨ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</p></li><li><p>åˆ¤æ–­ç¥¨æ•°å¤§äº0ï¼Œå°±å–ç¥¨ï¼Œå¹¶å‘ŠçŸ¥æ˜¯å“ªä¸ªçª—å£å–çš„</p></li><li><p>å–äº†ç¥¨ä¹‹åï¼Œæ€»ç¥¨æ•°è¦å‡1</p></li><li><p>ç¥¨å–æ²¡äº†ï¼Œçº¿ç¨‹åœæ­¢</p></li><li><p>å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç±»SellTicketDemoï¼Œé‡Œé¢æœ‰mainæ–¹æ³•ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</p></li><li><p>åˆ›å»ºSellTicketç±»çš„å¯¹è±¡</p></li><li><p>åˆ›å»ºä¸‰ä¸ªThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠSellTicketå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„çª—å£åç§°</p></li><li><p>å¯åŠ¨çº¿ç¨‹</p></li></ul></li></ul><span id="more"></span><ul><li><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="comment">//åœ¨SellTicketç±»ä¸­é‡å†™run()æ–¹æ³•å®ç°å–ç¥¨ï¼Œä»£ç æ­¥éª¤å¦‚ä¸‹</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(ticket &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="comment">//å–å®Œäº†</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    ticket--;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticket + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicketDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºSellTicketç±»çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">SellTicket</span> <span class="variable">st</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸‰ä¸ªThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠSellTicketå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ç»™å‡ºå¯¹åº”çš„çª—å£åç§°</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st,<span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st,<span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st,<span class="string">&quot;çª—å£3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜"><a href="#å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜" class="headerlink" title="å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜"></a>å–ç¥¨æ¡ˆä¾‹çš„é—®é¢˜</h3><ul><li><p>å–ç¥¨å‡ºç°äº†é—®é¢˜</p><ul><li><p>ç›¸åŒçš„ç¥¨å‡ºç°äº†å¤šæ¬¡</p></li><li><p>å‡ºç°äº†è´Ÿæ•°çš„ç¥¨</p></li></ul></li><li><p>é—®é¢˜äº§ç”ŸåŸå› </p><p>çº¿ç¨‹æ‰§è¡Œçš„éšæœºæ€§å¯¼è‡´çš„,å¯èƒ½åœ¨å–ç¥¨è¿‡ç¨‹ä¸­ä¸¢å¤±cpuçš„æ‰§è¡Œæƒ,å¯¼è‡´å‡ºç°é—®é¢˜</p></li></ul><h3 id="åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜"><a href="#åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜" class="headerlink" title="åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜"></a>åŒæ­¥ä»£ç å—è§£å†³æ•°æ®å®‰å…¨é—®é¢˜</h3><ul><li><p>å®‰å…¨é—®é¢˜å‡ºç°çš„æ¡ä»¶</p><ul><li><p>æ˜¯å¤šçº¿ç¨‹ç¯å¢ƒ</p></li><li><p>æœ‰å…±äº«æ•°æ®</p></li><li><p>æœ‰å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®</p></li></ul></li><li><p>å¦‚ä½•è§£å†³å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜å‘¢?</p><ul><li>åŸºæœ¬æ€æƒ³ï¼šè®©ç¨‹åºæ²¡æœ‰å®‰å…¨é—®é¢˜çš„ç¯å¢ƒ</li></ul></li><li><p>æ€ä¹ˆå®ç°å‘¢?</p><ul><li><p>æŠŠå¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ç»™é”èµ·æ¥ï¼Œè®©ä»»æ„æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå³å¯</p></li><li><p>Javaæä¾›äº†åŒæ­¥ä»£ç å—çš„æ–¹å¼æ¥è§£å†³</p></li></ul></li><li><p>åŒæ­¥ä»£ç å—æ ¼å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(ä»»æ„å¯¹è±¡) &#123; </span><br><span class="line">å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®çš„ä»£ç  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>synchronized(ä»»æ„å¯¹è±¡)ï¼šå°±ç›¸å½“äºç»™ä»£ç åŠ é”äº†ï¼Œä»»æ„å¯¹è±¡å°±å¯ä»¥çœ‹æˆæ˜¯ä¸€æŠŠé”</p></li><li><p>åŒæ­¥çš„å¥½å¤„å’Œå¼Šç«¯  </p><ul><li><p>å¥½å¤„ï¼šè§£å†³äº†å¤šçº¿ç¨‹çš„æ•°æ®å®‰å…¨é—®é¢˜</p></li><li><p>å¼Šç«¯ï¼šå½“çº¿ç¨‹å¾ˆå¤šæ—¶ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå»åˆ¤æ–­åŒæ­¥ä¸Šçš„é”ï¼Œè¿™æ˜¯å¾ˆè€—è´¹èµ„æºçš„ï¼Œæ— å½¢ä¸­ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡</p></li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">tickets</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (obj) &#123; <span class="comment">// å¯¹å¯èƒ½æœ‰å®‰å…¨é—®é¢˜çš„ä»£ç åŠ é”,å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”</span></span><br><span class="line">                <span class="comment">//t1è¿›æ¥åï¼Œå°±ä¼šæŠŠè¿™æ®µä»£ç ç»™é”èµ·æ¥</span></span><br><span class="line">                <span class="keyword">if</span> (tickets &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                        <span class="comment">//t1ä¼‘æ¯100æ¯«ç§’</span></span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//çª—å£1æ­£åœ¨å‡ºå”®ç¬¬100å¼ ç¥¨</span></span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;æ­£åœ¨å‡ºå”®ç¬¬&quot;</span> + tickets + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                    tickets--; <span class="comment">//tickets = 99;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//t1å‡ºæ¥äº†ï¼Œè¿™æ®µä»£ç çš„é”å°±è¢«é‡Šæ”¾äº†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SellTicketDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SellTicket</span> <span class="variable">st</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SellTicket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st, <span class="string">&quot;çª—å£1&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st, <span class="string">&quot;çª—å£2&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(st, <span class="string">&quot;çª—å£3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜"><a href="#åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜" class="headerlink" title="åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜"></a>åŒæ­¥æ–¹æ³•è§£å†³æ•°æ®å®‰å…¨é—®é¢˜</h3><ul><li><p>åŒæ­¥æ–¹æ³•çš„æ ¼å¼</p><p>åŒæ­¥æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°æ–¹æ³•ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) &#123; </span><br><span class="line">æ–¹æ³•ä½“ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?</p><p>â€‹    this</p></li><li><p>é™æ€åŒæ­¥æ–¹æ³•</p><p>åŒæ­¥é™æ€æ–¹æ³•ï¼šå°±æ˜¯æŠŠsynchronizedå…³é”®å­—åŠ åˆ°é™æ€æ–¹æ³•ä¸Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä¿®é¥°ç¬¦ <span class="keyword">static</span> <span class="keyword">synchronized</span> è¿”å›å€¼ç±»å‹ æ–¹æ³•å(æ–¹æ³•å‚æ•°) &#123; </span><br><span class="line">æ–¹æ³•ä½“ï¼›</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ­¥é™æ€æ–¹æ³•çš„é”å¯¹è±¡æ˜¯ä»€ä¹ˆå‘¢?</p><p>â€‹    ç±»å.class</p></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">ticketCount</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;çª—å£ä¸€&quot;</span>.equals(Thread.currentThread().getName()))&#123;</span><br><span class="line">                <span class="comment">//åŒæ­¥æ–¹æ³•</span></span><br><span class="line">                <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> synchronizedMthod();</span><br><span class="line">                <span class="keyword">if</span>(result)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;çª—å£äºŒ&quot;</span>.equals(Thread.currentThread().getName()))&#123;</span><br><span class="line">                <span class="comment">//åŒæ­¥ä»£ç å—</span></span><br><span class="line">                <span class="keyword">synchronized</span> (MyRunnable.class)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(ticketCount == <span class="number">0</span>)&#123;</span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                            e.printStackTrace();</span><br><span class="line">                        &#125;</span><br><span class="line">                        ticketCount--;</span><br><span class="line">                        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticketCount + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="type">boolean</span> <span class="title function_">synchronizedMthod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(ticketCount == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            ticketCount--;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticketCount + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">          <span class="type">MyRunnable</span> <span class="variable">mr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"><span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr);</span><br><span class="line">      <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(mr);</span><br><span class="line"></span><br><span class="line">      t1.setName(<span class="string">&quot;çª—å£ä¸€&quot;</span>);</span><br><span class="line">      t2.setName(<span class="string">&quot;çª—å£äºŒ&quot;</span>);</span><br><span class="line"></span><br><span class="line">      t1.start();</span><br><span class="line">      t2.start();</span><br><span class="line">  &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="Locké”"><a href="#Locké”" class="headerlink" title="Locké”"></a>Locké”</h3><p>è™½ç„¶æˆ‘ä»¬å¯ä»¥ç†è§£åŒæ­¥ä»£ç å—å’ŒåŒæ­¥æ–¹æ³•çš„é”å¯¹è±¡é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥çœ‹åˆ°åœ¨å“ªé‡ŒåŠ ä¸Šäº†é”ï¼Œåœ¨å“ªé‡Œé‡Šæ”¾äº†é”ï¼Œä¸ºäº†æ›´æ¸…æ™°çš„è¡¨è¾¾å¦‚ä½•åŠ é”å’Œé‡Šæ”¾é”ï¼ŒJDK5ä»¥åæä¾›äº†ä¸€ä¸ªæ–°çš„é”å¯¹è±¡Lock</p><p>Lockæ˜¯æ¥å£ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–ï¼Œè¿™é‡Œé‡‡ç”¨å®ƒçš„å®ç°ç±»ReentrantLockæ¥å®ä¾‹åŒ–</p><ul><li><p>ReentrantLockæ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ReentrantLock()</td><td>åˆ›å»ºä¸€ä¸ªReentrantLockçš„å®ä¾‹</td></tr></tbody></table></li><li><p>åŠ é”è§£é”æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void lock()</td><td>è·å¾—é”</td></tr><tr><td>void unlock()</td><td>é‡Šæ”¾é”</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="comment">//ç¥¨çš„æ•°é‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">//synchronized (obj)&#123;//å¤šä¸ªçº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€æŠŠé”.</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                lock.lock();</span><br><span class="line">                <span class="keyword">if</span> (ticket &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="comment">//å–å®Œäº†</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                    ticket--;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;åœ¨å–ç¥¨,è¿˜å‰©ä¸‹&quot;</span> + ticket + <span class="string">&quot;å¼ ç¥¨&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">ticket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ticket);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ticket);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ticket);</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">&quot;çª—å£ä¸€&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;çª—å£äºŒ&quot;</span>);</span><br><span class="line">        t3.setName(<span class="string">&quot;çª—å£ä¸‰&quot;</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ˆæŠ¤çº¿ç¨‹</title>
      <link href="/2020/12/22/Java_17_%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B/"/>
      <url>/2020/12/22/Java_17_%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<ul><li><p>ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void setDaemon(boolean on)</td><td>å°†æ­¤çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œå½“è¿è¡Œçš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJavaè™šæ‹Ÿæœºå°†é€€å‡º</td></tr></tbody></table></li></ul><span id="more"></span><ul><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread1</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread1</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread1</span>();</span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">&quot;å¥³ç¥&quot;</span>);</span><br><span class="line">        t2.setName(<span class="string">&quot;å¤‡èƒ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŠŠç¬¬äºŒä¸ªçº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//å½“æ™®é€šçº¿ç¨‹æ‰§è¡Œå®Œä¹‹å,é‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹ä¹Ÿæ²¡æœ‰ç»§ç»­è¿è¡Œä¸‹å»çš„å¿…è¦äº†.</span></span><br><span class="line">        t2.setDaemon(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿ç¨‹ä¼˜å…ˆçº§</title>
      <link href="/2020/12/21/Java_16_%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7/"/>
      <url>/2020/12/21/Java_16_%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<ul><li><p>çº¿ç¨‹è°ƒåº¦</p><ul><li><p>ä¸¤ç§è°ƒåº¦æ–¹å¼</p><ul><li>åˆ†æ—¶è°ƒåº¦æ¨¡å‹ï¼šæ‰€æœ‰çº¿ç¨‹è½®æµä½¿ç”¨ CPU çš„ä½¿ç”¨æƒï¼Œå¹³å‡åˆ†é…æ¯ä¸ªçº¿ç¨‹å ç”¨ CPU çš„æ—¶é—´ç‰‡</li><li>æŠ¢å å¼è°ƒåº¦æ¨¡å‹ï¼šä¼˜å…ˆè®©ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä½¿ç”¨ CPUï¼Œå¦‚æœçº¿ç¨‹çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œé‚£ä¹ˆä¼šéšæœºé€‰æ‹©ä¸€ä¸ªï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹è·å–çš„ CPU æ—¶é—´ç‰‡ç›¸å¯¹å¤šä¸€äº›</li></ul></li><li><p>Javaä½¿ç”¨çš„æ˜¯æŠ¢å å¼è°ƒåº¦æ¨¡å‹</p></li><li><p>éšæœºæ€§</p><p>å‡å¦‚è®¡ç®—æœºåªæœ‰ä¸€ä¸ª CPUï¼Œé‚£ä¹ˆ CPU åœ¨æŸä¸€ä¸ªæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œçº¿ç¨‹åªæœ‰å¾—åˆ°CPUæ—¶é—´ç‰‡ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æƒï¼Œæ‰å¯ä»¥æ‰§è¡ŒæŒ‡ä»¤ã€‚æ‰€ä»¥è¯´å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œæ˜¯æœ‰éšæœºæ€§ï¼Œå› ä¸ºè°æŠ¢åˆ°CPUçš„ä½¿ç”¨æƒæ˜¯ä¸ä¸€å®šçš„</p></li></ul></li></ul><span id="more"></span><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java16_1.png" alt="05_å¤šçº¿ç¨‹ç¤ºä¾‹å›¾"></p><ul><li><p>ä¼˜å…ˆçº§ç›¸å…³æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>final int getPriority()</td><td>è¿”å›æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§</td></tr><tr><td>final void setPriority(int newPriority)</td><td>æ›´æ”¹æ­¤çº¿ç¨‹çš„ä¼˜å…ˆçº§çº¿ç¨‹é»˜è®¤ä¼˜å…ˆçº§æ˜¯5ï¼›çº¿ç¨‹ä¼˜å…ˆçº§çš„èŒƒå›´æ˜¯ï¼š1-10</td></tr></tbody></table></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;çº¿ç¨‹æ‰§è¡Œå®Œæ¯•äº†&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//ä¼˜å…ˆçº§: 1 - 10 é»˜è®¤å€¼:5</span></span><br><span class="line">        <span class="type">MyCallable</span> <span class="variable">mc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCallable</span>();</span><br><span class="line"></span><br><span class="line">        FutureTask&lt;String&gt; ft = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft);</span><br><span class="line">        t1.setName(<span class="string">&quot;é£æœº&quot;</span>);</span><br><span class="line">        t1.setPriority(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//System.out.println(t1.getPriority());//5</span></span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">MyCallable</span> <span class="variable">mc2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCallable</span>();</span><br><span class="line"></span><br><span class="line">        FutureTask&lt;String&gt; ft2 = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc2);</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft2);</span><br><span class="line">        t2.setName(<span class="string">&quot;å¦å…‹&quot;</span>);</span><br><span class="line">        t2.setPriority(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//System.out.println(t2.getPriority());//5</span></span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ç°å¤šçº¿ç¨‹çš„ä¸‰ç§æ–¹å¼</title>
      <link href="/2020/12/20/Java_15_%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
      <url>/2020/12/20/Java_15_%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p> å®ç°å¤šçº¿ç¨‹æœ‰ä»¥ä¸‹ä¸‰ç§å½¢å¼ï¼š</p><ul><li>ç»§æ‰¿Threadç±»</li><li>å®ç°Runnableæ¥å£</li><li>å®ç°Callableæ¥å£</li></ul><span id="more"></span><h3 id="å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»"><a href="#å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»" class="headerlink" title="å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»"></a>å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void run()</td><td>åœ¨çº¿ç¨‹å¼€å¯åï¼Œæ­¤æ–¹æ³•å°†è¢«è°ƒç”¨æ‰§è¡Œ</td></tr><tr><td>void start()</td><td>ä½¿æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒJavaè™šæ‹Ÿæœºä¼šè°ƒç”¨runæ–¹æ³•()</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyThreadç»§æ‰¿Threadç±»</li><li>åœ¨MyThreadç±»ä¸­é‡å†™run()æ–¹æ³•</li><li>åˆ›å»ºMyThreadç±»çš„å¯¹è±¡</li><li>å¯åŠ¨çº¿ç¨‹</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        my1.run();</span></span><br><span class="line"><span class="comment">//        my2.run();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//void start() å¯¼è‡´æ­¤çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºè°ƒç”¨æ­¤çº¿ç¨‹çš„runæ–¹æ³•</span></span><br><span class="line">        my1.start();</span><br><span class="line">        my2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä¸¤ä¸ªå°é—®é¢˜</p><ul><li><p>ä¸ºä»€ä¹ˆè¦é‡å†™run()æ–¹æ³•ï¼Ÿ</p><p>å› ä¸ºrun()æ˜¯ç”¨æ¥å°è£…è¢«çº¿ç¨‹æ‰§è¡Œçš„ä»£ç </p></li><li><p>run()æ–¹æ³•å’Œstart()æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ</p><p>run()ï¼šå°è£…çº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œç›´æ¥è°ƒç”¨ï¼Œç›¸å½“äºæ™®é€šæ–¹æ³•çš„è°ƒç”¨</p><p><strong>start()ï¼šå¯åŠ¨çº¿ç¨‹ï¼›ç„¶åç”±JVMè°ƒç”¨æ­¤çº¿ç¨‹çš„run()æ–¹æ³•</strong></p><ul><li><blockquote><p>Causes this thread to begin execution; the Java Virtual Machine calls the <code>run</code> method of this thread.</p></blockquote><p>start()å¯åŠ¨çº¿ç¨‹ï¼ŒJavaè™šæ‹Ÿæœºè°ƒç”¨è¿™ä¸ªçº¿ç¨‹çš„runæ–¹æ³•ã€‚</p></li><li><blockquote><p>The result is that two threads are running concurrently: the current thread (which returns from the call to the <code>start</code> method) and the other thread (which executes its <code>run</code> method).</p></blockquote><p>ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œ:å½“å‰çº¿ç¨‹(å®ƒä»å¯¹startæ–¹æ³•çš„è°ƒç”¨ä¸­è¿”å›)å’Œå¦ä¸€ä¸ªçº¿ç¨‹(å®ƒæ‰§è¡Œå®ƒçš„runæ–¹æ³•)</p></li><li><blockquote><p>It is never legal to start a thread more than once.</p><p>In particular, a thread may not be restarted once it has completed execution.</p></blockquote><p>å¤šæ¬¡å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯ä¸åˆæ³•çš„ã€‚</p><p>çº¿ç¨‹å®Œæˆæ‰§è¡Œåï¼Œä¸èƒ½é‡æ–°å¯åŠ¨ï¼Œå¦åˆ™ä¼šæŠ¥å¼‚å¸¸IllegalThreadStateException</p></li><li><blockquote><p>@exception  IllegalThreadStateException  if the thread was already started.</p></blockquote></li></ul></li></ul></li></ul><h3 id="å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£"><a href="#å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£" class="headerlink" title="å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£"></a>å®ç°å¤šçº¿ç¨‹æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£</h3><ul><li><p>Threadæ„é€ æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Thread(Runnable target)</td><td>åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡</td></tr><tr><td>Thread(Runnable target, String name)</td><td>åˆ†é…ä¸€ä¸ªæ–°çš„Threadå¯¹è±¡</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyRunnableå®ç°Runnableæ¥å£</li><li>åœ¨MyRunnableç±»ä¸­é‡å†™run()æ–¹æ³•</li><li>åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡</li><li>åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>å¯åŠ¨çº¿ç¨‹</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRunnableDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºMyRunnableç±»çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠMyRunnableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</span></span><br><span class="line">        <span class="comment">//Thread(Runnable target)</span></span><br><span class="line"><span class="comment">//        Thread t1 = new Thread(my);</span></span><br><span class="line"><span class="comment">//        Thread t2 = new Thread(my);</span></span><br><span class="line">        <span class="comment">//Thread(Runnable target, String name)</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(my,<span class="string">&quot;å¦å…‹&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(my,<span class="string">&quot;é£æœº&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰-å®ç°Callableæ¥å£"><a href="#å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰-å®ç°Callableæ¥å£" class="headerlink" title="å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰: å®ç°Callableæ¥å£"></a>å®ç°å¤šçº¿ç¨‹æ–¹å¼ä¸‰: å®ç°Callableæ¥å£</h3><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>V call()</td><td>è®¡ç®—ç»“æœï¼Œå¦‚æœæ— æ³•è®¡ç®—ç»“æœï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</td></tr><tr><td>FutureTask(Callable&lt;V&gt; callable)</td><td>åˆ›å»ºä¸€ä¸ª FutureTaskï¼Œä¸€æ—¦è¿è¡Œå°±æ‰§è¡Œç»™å®šçš„ Callable</td></tr><tr><td>V get()</td><td>å¦‚æœ‰å¿…è¦ï¼Œç­‰å¾…è®¡ç®—å®Œæˆï¼Œç„¶åè·å–å…¶ç»“æœ</td></tr></tbody></table></li><li><p>å®ç°æ­¥éª¤</p><ul><li>å®šä¹‰ä¸€ä¸ªç±»MyCallableå®ç°Callableæ¥å£</li><li>åœ¨MyCallableç±»ä¸­é‡å†™call()æ–¹æ³•</li><li>åˆ›å»ºMyCallableç±»çš„å¯¹è±¡</li><li>åˆ›å»ºFutureçš„å®ç°ç±»FutureTaskå¯¹è±¡ï¼ŒæŠŠMyCallableå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>åˆ›å»ºThreadç±»çš„å¯¹è±¡ï¼ŒæŠŠFutureTaskå¯¹è±¡ä½œä¸ºæ„é€ æ–¹æ³•çš„å‚æ•°</li><li>å¯åŠ¨çº¿ç¨‹</li><li>å†è°ƒç”¨getæ–¹æ³•ï¼Œå°±å¯ä»¥è·å–çº¿ç¨‹ç»“æŸä¹‹åçš„ç»“æœã€‚</li></ul></li><li><p>æŸ¥çœ‹æºç </p><ul><li>FutureTaskå®ç°äº†Runnableæ¥å£å’ŒFutureæ¥å£</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCallable</span> <span class="keyword">implements</span> <span class="title class_">Callable</span>&lt;String&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;è·Ÿå¥³å­©è¡¨ç™½&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è¿”å›å€¼å°±è¡¨ç¤ºçº¿ç¨‹è¿è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç­”åº”&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">//çº¿ç¨‹å¼€å¯ä¹‹åéœ€è¦æ‰§è¡Œé‡Œé¢çš„callæ–¹æ³•</span></span><br><span class="line">        <span class="type">MyCallable</span> <span class="variable">mc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCallable</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Thread t1 = new Thread(mc);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¯ä»¥è·å–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åçš„ç»“æœ.ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™Threadå¯¹è±¡</span></span><br><span class="line">        FutureTask&lt;String&gt; ft = <span class="keyword">new</span> <span class="title class_">FutureTask</span>&lt;&gt;(mc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(ft);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//String s = ft.get();</span></span><br><span class="line">        <span class="comment">//å¼€å¯çº¿ç¨‹</span></span><br><span class="line">        t1.start();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> ft.get();</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”"><a href="#ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”" class="headerlink" title="ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”"></a>ä¸‰ç§å®ç°æ–¹å¼çš„å¯¹æ¯”</h3><ul><li>å®ç°Runnableã€Callableæ¥å£<ul><li>å¥½å¤„: æ‰©å±•æ€§å¼ºï¼Œå®ç°è¯¥æ¥å£çš„åŒæ—¶è¿˜å¯ä»¥ç»§æ‰¿å…¶ä»–çš„ç±»</li><li>ç¼ºç‚¹: ç¼–ç¨‹ç›¸å¯¹å¤æ‚ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</li></ul></li><li>ç»§æ‰¿Threadç±»<ul><li>å¥½å¤„: ç¼–ç¨‹æ¯”è¾ƒç®€å•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Threadç±»ä¸­çš„æ–¹æ³•</li><li>ç¼ºç‚¹: å¯ä»¥æ‰©å±•æ€§è¾ƒå·®ï¼Œä¸èƒ½å†ç»§æ‰¿å…¶ä»–çš„ç±»</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTMLå¸¸ç”¨è½¬ä¹‰å­—ç¬¦</title>
      <link href="/2020/12/19/HTML_2_CommonEscape/"/>
      <url>/2020/12/19/HTML_2_CommonEscape/</url>
      
        <content type="html"><![CDATA[<p>å®ä½“åç§°æ˜“ç†è§£ï¼Œä½†ä¸ä¸€å®šæ”¯æŒæ‰€æœ‰æµè§ˆå™¨ï¼›</p><p>å®ä½“(Entity)ç¼–å·ï¼Œå„ç§æµè§ˆå™¨éƒ½èƒ½å¤„ç†ã€‚</p><span id="more"></span><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/HTML2_1.png" alt="image-20211217224643782"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰“å¼€æ–°æ ‡ç­¾é¡µ</title>
      <link href="/2020/12/17/HTML_1_OpenNewTab/"/>
      <url>/2020/12/17/HTML_1_OpenNewTab/</url>
      
        <content type="html"><![CDATA[<p>æ‰“å¼€æ–°æ ‡ç­¾é¡µéœ€é…ç½®&lt;a&gt;æ ‡ç­¾targetå±æ€§ä¸º<code>_blank</code>ã€‚</p><ul><li>_parentï¼šåœ¨çˆ¶çª—å£ä¸­æ‰“å¼€é“¾æ¥ã€‚</li><li>_selfï¼šé»˜è®¤ï¼Œå½“å‰é¡µé¢è·³è½¬ã€‚</li><li>_topï¼šåœ¨å½“å‰çª—ä½“æ‰“å¼€é“¾æ¥ï¼Œå¹¶æ›¿æ¢å½“å‰çš„æ•´ä¸ªçª—ä½“(æ¡†æ¶é¡µ)ã€‚</li><li>_blankï¼šæ–°çª—å£æ‰“å¼€ã€‚</li></ul><span id="more"></span><p>æ‰“å¼€æ–°æ ‡ç­¾é¡µï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.xxx.com/&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>è®¿é—®xxx!<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å»é™¤æ–‡ä»¶åçš„æ‰©å±•å</title>
      <link href="/2020/12/16/Java_13_%E5%8E%BB%E9%99%A4%E6%96%87%E4%BB%B6%E5%90%8D%E7%9A%84%E6%89%A9%E5%B1%95%E5%90%8D/"/>
      <url>/2020/12/16/Java_13_%E5%8E%BB%E9%99%A4%E6%96%87%E4%BB%B6%E5%90%8D%E7%9A%84%E6%89%A9%E5%B1%95%E5%90%8D/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æœ€åä¸€ä¸ªç‚¹ï¼Œå»é™¤æ–‡ä»¶åçš„æ‰©å±•åã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">removeExtension</span><span class="params">(String fname)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">pos</span> <span class="operator">=</span> fname.lastIndexOf(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (pos &gt; -<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> fname.substring(<span class="number">0</span>, pos);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> fname;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p>ä¾‹å¦‚â€demo1.txtâ€ â†’ â€œdemo1â€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       System.out.println(removeExtension(<span class="string">&quot;demo1.txt&quot;</span>));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ç›¸å…³æ–‡ç« ï¼š<a href="https://daijing.online/2022/02/16/Java_14_String%E7%B1%BBlastIndexOf()%E6%96%B9%E6%B3%95/">Stringç±»lastIndexOf()æ–¹æ³• | ä¸æˆ–éâ€™s Blog (daijing.online)</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stringç±»lastIndexOf() æ–¹æ³•</title>
      <link href="/2020/12/16/Java_14_String%E7%B1%BBlastIndexOf()%E6%96%B9%E6%B3%95/"/>
      <url>/2020/12/16/Java_14_String%E7%B1%BBlastIndexOf()%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>lastIndexOf() æ–¹æ³•æœ‰ä»¥ä¸‹å››ç§å½¢å¼ï¼š</p><ul><li><strong>public int lastIndexOf(int ch):</strong> è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚</li><li><strong>public int lastIndexOf(int ch, int fromIndex):</strong> è¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¤„å¼€å§‹è¿›è¡Œåå‘æœç´¢ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚</li><li><strong>public int lastIndexOf(String str):</strong> è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€å³è¾¹å‡ºç°å¤„çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚</li><li><strong>public int lastIndexOf(String str, int fromIndex):</strong> è¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹åå‘æœç´¢ï¼Œå¦‚æœæ­¤å­—ç¬¦ä¸²ä¸­æ²¡æœ‰è¿™æ ·çš„å­—ç¬¦ï¼Œåˆ™è¿”å› -1ã€‚</li></ul><span id="more"></span><p><strong>å‚æ•°</strong></p><ul><li><strong>ch</strong> â€“ å­—ç¬¦ã€‚</li><li><strong>fromIndex</strong> â€“ å¼€å§‹æœç´¢çš„ç´¢å¼•ä½ç½®ã€‚</li><li><strong>str</strong> â€“ è¦æœç´¢çš„å­å­—ç¬¦ä¸²ã€‚</li></ul><p><strong>è¿”å›å€¼</strong></p><p>æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•å€¼ã€‚</p><p><strong>å®ä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">Str</span> <span class="operator">=</span> <span class="string">&quot;www.daijjing.online&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">SubStr1</span> <span class="operator">=</span> <span class="string">&quot;daijjing&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">SubStr2</span> <span class="operator">=</span> <span class="string">&quot;online&quot;</span>;</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">&quot;æŸ¥æ‰¾å­—ç¬¦ i æœ€åå‡ºç°çš„ä½ç½® :&quot;</span> );</span><br><span class="line">        System.out.println(Str.lastIndexOf( <span class="string">&#x27;i&#x27;</span> ));</span><br><span class="line">        System.out.print(<span class="string">&quot;ä»ç¬¬14ä¸ªä½ç½®æŸ¥æ‰¾å­—ç¬¦ i æœ€åå‡ºç°çš„ä½ç½® :&quot;</span> );</span><br><span class="line">        System.out.println(Str.lastIndexOf( <span class="string">&#x27;i&#x27;</span>, <span class="number">14</span> ));</span><br><span class="line">        System.out.print(<span class="string">&quot;å­å­—ç¬¦ä¸² SubStr1 æœ€åå‡ºç°çš„ä½ç½®:&quot;</span> );</span><br><span class="line">        System.out.println( Str.lastIndexOf( SubStr1 ));</span><br><span class="line">        System.out.print(<span class="string">&quot;ä»ç¬¬åäº”ä¸ªä½ç½®å¼€å§‹æœç´¢å­å­—ç¬¦ä¸² SubStr1æœ€åå‡ºç°çš„ä½ç½® :&quot;</span> );</span><br><span class="line">        System.out.println( Str.lastIndexOf( SubStr1, <span class="number">15</span> ));</span><br><span class="line">        System.out.print(<span class="string">&quot;å­å­—ç¬¦ä¸² SubStr2 æœ€åå‡ºç°çš„ä½ç½® :&quot;</span> );</span><br><span class="line">        System.out.println(Str.lastIndexOf( SubStr2 ));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºæ‰§è¡Œç»“æœä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ‰¾å­—ç¬¦ i æœ€åå‡ºç°çš„ä½ç½® :16</span><br><span class="line">ä»ç¬¬14ä¸ªä½ç½®æŸ¥æ‰¾å­—ç¬¦ i æœ€åå‡ºç°çš„ä½ç½® :9</span><br><span class="line">å­å­—ç¬¦ä¸² SubStr1 æœ€åå‡ºç°çš„ä½ç½®:4</span><br><span class="line">ä»ç¬¬åäº”ä¸ªä½ç½®å¼€å§‹æœç´¢å­å­—ç¬¦ä¸² SubStr1æœ€åå‡ºç°çš„ä½ç½® :4</span><br><span class="line">å­å­—ç¬¦ä¸² SubStr2 æœ€åå‡ºç°çš„ä½ç½® :13</span><br></pre></td></tr></table></figure><p><strong>String ç±»ä¸­çš„indexof(int ch)æ–¹æ³•çš„å½¢å‚åˆ—è¡¨ä¸ºä»€ä¹ˆé‡‡ç”¨intå‹è€Œä¸é‡‡ç”¨charå‹?</strong></p><p>æ¶‰åŠåˆ°äº†å¢è¡¥å­—ç¬¦ï¼Œå› ä¸ºcharå‹åªæœ‰65536ä¸ªå­—ç¬¦ï¼Œä¸èƒ½è¡¨ç¤ºå®Œæ‰€æœ‰çš„å­—ç¬¦è¿˜æœ‰ä¸€äº›è¯¸å¦‚â€ç«æ˜Ÿæ–‡â€çš„æœªçŸ¥å­—ç¬¦ï¼Œå› æ­¤ç”¨charå‹æ¥è¡¨ç¤ºæ˜¯å®Œå…¨ä¸å¤Ÿçš„,è€Œintç±»å‹çš„èŒƒå›´æ˜¯- 2 ^ 31 ~2 ^ 31 - 1,è¶³å¤Ÿç”¨æ¥è¡¨ç¤ºå·²çŸ¥å’ŒæœªçŸ¥çš„å­—ç¬¦ï¼Œå¹¶ä¸”intè·Ÿcharæµ·æ¶‰åŠåˆ°éšå¼å­—ç¬¦è½¬æ¢ï¼Œè¿™æ ·ç”¨intä½œä¸ºå½¢å‚ä¸ä»…æ²¡æœ‰å¤šè´¹åŠŸå¤«è¿˜æ‰©å¤§äº†indexofçš„æ¶µç›–èŒƒå›´ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Indexof_Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String s=<span class="string">&quot;hello.wor.ld&quot;</span>;</span><br><span class="line">        <span class="comment">//åŸºæœ¬å­—ç¬¦ä¸å¢è¡¥å­—ç¬¦</span></span><br><span class="line">        <span class="comment">//Character.MIN_SUPPLEMENTARY_CODE_POINT   æœ€å°çš„å¢è¡¥å­—ç¬¦</span></span><br><span class="line">        System.out.println(   s.indexOf(<span class="number">46</span>)  );  <span class="comment">//indexOf  è¿”å›ç±»å‹ä½  int   ??ä¸ºä»€ä¹ˆç”¨int ä¸ç”¨char æ¶‰åŠå¢è¡¥å­—ç¬¦</span></span><br><span class="line">        System.out.println(   s.indexOf(<span class="string">&#x27;.&#x27;</span>) );   <span class="comment">//éšå¼å­—ç¬¦è½¬æ¢</span></span><br><span class="line"></span><br><span class="line">        System.out.println(  s.lastIndexOf(<span class="string">&#x27;.&#x27;</span>) ); <span class="comment">//ä»åå¾€å‰æŸ¥æ‰¾  è¿”å›çš„ç´¢å¼•è¿˜æ˜¯ä»0å¼€å§‹</span></span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå°„</title>
      <link href="/2020/12/06/Java_12_%E5%8F%8D%E5%B0%84/"/>
      <url>/2020/12/06/Java_12_%E5%8F%8D%E5%B0%84/</url>
      
        <content type="html"><![CDATA[<h3 id="1-åå°„çš„æ¦‚è¿°"><a href="#1-åå°„çš„æ¦‚è¿°" class="headerlink" title="1.åå°„çš„æ¦‚è¿°"></a>1.åå°„çš„æ¦‚è¿°</h3><ul><li><p>åå°„æœºåˆ¶</p><p>æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›<br>å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„å±æ€§å’Œæ–¹æ³•ï¼›<br>è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºJavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p></li></ul><span id="more"></span><h3 id="2-è·å–Classç±»å¯¹è±¡çš„ä¸‰ç§æ–¹å¼"><a href="#2-è·å–Classç±»å¯¹è±¡çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="2.è·å–Classç±»å¯¹è±¡çš„ä¸‰ç§æ–¹å¼"></a>2.è·å–Classç±»å¯¹è±¡çš„ä¸‰ç§æ–¹å¼</h3><ul><li><p>ä¸‰ç§æ–¹å¼åˆ†ç±»</p><ul><li><p>ç±»å.classå±æ€§</p></li><li><p>å¯¹è±¡å.getClass()æ–¹æ³•</p></li><li><p>Class.forName(å…¨ç±»å)æ–¹æ³•</p></li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java12_1.png" alt="08_è·å–Classå¯¹è±¡çš„ä¸‰ç§æ–¹å¼"></p></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å­¦ç”Ÿåœ¨å­¦ä¹ &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//1.Classç±»ä¸­çš„é™æ€æ–¹æ³•forName(&quot;å…¨ç±»å&quot;)</span></span><br><span class="line">            <span class="comment">//å…¨ç±»å:åŒ…å + ç±»å</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect2.Student&quot;</span>);</span><br><span class="line">        System.out.println(clazz);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.é€šè¿‡classå±æ€§æ¥è·å–</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz2</span> <span class="operator">=</span> Student.class;</span><br><span class="line">        System.out.println(clazz2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.åˆ©ç”¨å¯¹è±¡çš„getClassæ–¹æ³•æ¥è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//getClassæ–¹æ³•æ˜¯å®šä¹‰åœ¨Objectç±»ä¸­.</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz3</span> <span class="operator">=</span> s.getClass();</span><br><span class="line">        System.out.println(clazz3);</span><br><span class="line"></span><br><span class="line">        System.out.println(clazz == clazz2);</span><br><span class="line">        System.out.println(clazz2 == clazz3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-åå°„è·å–æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨"><a href="#3-åå°„è·å–æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨" class="headerlink" title="3.åå°„è·å–æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨"></a>3.åå°„è·å–æ„é€ æ–¹æ³•å¹¶ä½¿ç”¨</h3><h4 id="3-1Classç±»è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•"><a href="#3-1Classç±»è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="3.1Classç±»è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•"></a>3.1Classç±»è·å–æ„é€ æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•</h4><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Constructor&lt;?&gt;[] getConstructors()</td><td>è¿”å›æ‰€æœ‰å…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„</td></tr><tr><td>Constructor&lt;?&gt;[] getDeclaredConstructors()</td><td>è¿”å›æ‰€æœ‰æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„</td></tr><tr><td>Constructor<T> getConstructor(Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›å•ä¸ªå…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡</td></tr><tr><td>Constructor<T> getDeclaredConstructor(Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›å•ä¸ªæ„é€ æ–¹æ³•å¯¹è±¡</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§æœ‰çš„æœ‰å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;nameçš„å€¼ä¸º:&quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;private...Student...æœ‰å‚æ„é€ æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¬å…±çš„æ— å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;public...Student...æ— å‚æ„é€ æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¬å…±çš„æœ‰å‚æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;nameçš„å€¼ä¸º:&quot;</span> + name + <span class="string">&quot;ageçš„å€¼ä¸º:&quot;</span> + age);</span><br><span class="line">        System.out.println(<span class="string">&quot;public...Student...æœ‰å‚æ„é€ æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//method1();</span></span><br><span class="line">        <span class="comment">//method2();</span></span><br><span class="line">        <span class="comment">//method3();</span></span><br><span class="line">        <span class="comment">//method4();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//        Constructor&lt;T&gt; getDeclaredConstructor(Class&lt;?&gt;... parameterTypes)ï¼š</span></span><br><span class="line"><span class="comment">//                                      è¿”å›å•ä¸ªæ„é€ æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//1.è·å–Classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class);</span><br><span class="line">        System.out.println(constructor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//        Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)ï¼š</span></span><br><span class="line"><span class="comment">//                                      è¿”å›å•ä¸ªå…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//1.è·å–Classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line">        <span class="comment">//å°æ‹¬å·ä¸­,ä¸€å®šè¦è·Ÿæ„é€ æ–¹æ³•çš„å½¢å‚ä¿æŒä¸€è‡´.</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor1</span> <span class="operator">=</span> clazz.getConstructor();</span><br><span class="line">        System.out.println(constructor1);</span><br><span class="line"></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor2</span> <span class="operator">=</span> clazz.getConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">        System.out.println(constructor2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å› ä¸ºStudentç±»ä¸­,æ²¡æœ‰åªæœ‰ä¸€ä¸ªintçš„æ„é€ ,æ‰€ä»¥è¿™é‡Œä¼šæŠ¥é”™.</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor3</span> <span class="operator">=</span> clazz.getConstructor(<span class="type">int</span>.class);</span><br><span class="line">        System.out.println(constructor3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//        Constructor&lt;?&gt;[] getDeclaredConstructors()ï¼š</span></span><br><span class="line"><span class="comment">//                                      è¿”å›æ‰€æœ‰æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„</span></span><br><span class="line">        <span class="comment">//1.è·å–Classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Constructor[] constructors = clazz.getDeclaredConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor constructor : constructors) &#123;</span><br><span class="line">            System.out.println(constructor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//        Constructor&lt;?&gt;[] getConstructors()ï¼š</span></span><br><span class="line"><span class="comment">//                                      è¿”å›æ‰€æœ‰å…¬å…±æ„é€ æ–¹æ³•å¯¹è±¡çš„æ•°ç»„</span></span><br><span class="line">        <span class="comment">//1.è·å–Classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line">        Constructor[] constructors = clazz.getConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor constructor : constructors) &#123;</span><br><span class="line">            System.out.println(constructor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-2Constructorç±»ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•"><a href="#3-2Constructorç±»ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="3.2Constructorç±»ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•"></a>3.2Constructorç±»ç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</h4><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>T newInstance(Objectâ€¦initargs)</td><td>æ ¹æ®æŒ‡å®šçš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</td></tr><tr><td>setAccessible(boolean flag)</td><td>è®¾ç½®ä¸ºtrue,è¡¨ç¤ºå–æ¶ˆè®¿é—®æ£€æŸ¥</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Studentç±»åŒä¸Šä¸€ä¸ªç¤ºä¾‹,è¿™é‡Œå°±ä¸åœ¨é‡å¤æä¾›äº†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException &#123;</span><br><span class="line">        <span class="comment">//T newInstance(Object... initargs)ï¼šæ ¹æ®æŒ‡å®šçš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//method1();</span></span><br><span class="line">        <span class="comment">//method2();</span></span><br><span class="line">        <span class="comment">//method3();</span></span><br><span class="line">        <span class="comment">//method4();</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException &#123;</span><br><span class="line">        <span class="comment">//è·å–ä¸€ä¸ªç§æœ‰çš„æ„é€ æ–¹æ³•å¹¶åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–ä¸€ä¸ªç§æœ‰åŒ–çš„æ„é€ æ–¹æ³•.</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> clazz.getDeclaredConstructor(String.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¢«privateä¿®é¥°çš„æˆå‘˜,ä¸èƒ½ç›´æ¥ä½¿ç”¨çš„</span></span><br><span class="line">        <span class="comment">//å¦‚æœç”¨åå°„å¼ºè¡Œè·å–å¹¶ä½¿ç”¨,éœ€è¦ä¸´æ—¶å–æ¶ˆè®¿é—®æ£€æŸ¥</span></span><br><span class="line">        constructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.ç›´æ¥åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) constructor.newInstance(<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">//ç®€å†™æ ¼å¼</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åœ¨Classç±»ä¸­,æœ‰ä¸€ä¸ªnewInstanceæ–¹æ³•,å¯ä»¥åˆ©ç”¨ç©ºå‚ç›´æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) clazz.newInstance();<span class="comment">//è¿™ä¸ªæ–¹æ³•ç°åœ¨å·²ç»è¿‡æ—¶äº†,äº†è§£ä¸€ä¸‹</span></span><br><span class="line"></span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–æ„é€ æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> clazz.getConstructor();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.åˆ©ç”¨ç©ºå‚æ¥åˆ›å»ºStudentçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) constructor.newInstance();</span><br><span class="line"></span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, InstantiationException, IllegalAccessException, InvocationTargetException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect3.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–æ„é€ æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> clazz.getConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.åˆ©ç”¨newInstanceåˆ›å»ºStudentçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) constructor.newInstance(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">23</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-3å°ç»“"><a href="#3-3å°ç»“" class="headerlink" title="3.3å°ç»“"></a>3.3å°ç»“</h4><ul><li><p>è·å–classå¯¹è±¡</p><p>ä¸‰ç§æ–¹å¼: Class.forName(â€œå…¨ç±»åâ€), ç±»å.class, å¯¹è±¡å.getClass()</p></li><li><p>è·å–é‡Œé¢çš„æ„é€ æ–¹æ³•å¯¹è±¡</p><p>getConstructor (Class<?>... parameterTypes)getDeclaredConstructor (Class<?>â€¦ parameterTypes)</p></li><li><p>å¦‚æœæ˜¯publicçš„ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡</p><p>newInstance(Objectâ€¦ initargs)</p></li><li><p>å¦‚æœæ˜¯épublicçš„ï¼Œéœ€è¦ä¸´æ—¶å–æ¶ˆæ£€æŸ¥ï¼Œç„¶åå†åˆ›å»ºå¯¹è±¡</p><p>setAccessible(boolean)  æš´åŠ›åå°„</p></li></ul><h3 id="4-åå°„è·å–æˆå‘˜å˜é‡å¹¶ä½¿ç”¨"><a href="#4-åå°„è·å–æˆå‘˜å˜é‡å¹¶ä½¿ç”¨" class="headerlink" title="4.åå°„è·å–æˆå‘˜å˜é‡å¹¶ä½¿ç”¨"></a>4.åå°„è·å–æˆå‘˜å˜é‡å¹¶ä½¿ç”¨</h3><h4 id="4-1Classç±»è·å–æˆå‘˜å˜é‡å¯¹è±¡çš„æ–¹æ³•"><a href="#4-1Classç±»è·å–æˆå‘˜å˜é‡å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="4.1Classç±»è·å–æˆå‘˜å˜é‡å¯¹è±¡çš„æ–¹æ³•"></a>4.1Classç±»è·å–æˆå‘˜å˜é‡å¯¹è±¡çš„æ–¹æ³•</h4><ul><li><p>æ–¹æ³•åˆ†ç±»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Field[] getFields()</td><td>è¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„</td></tr><tr><td>Field[] getDeclaredFields()</td><td>è¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„</td></tr><tr><td>Field getField(String name)</td><td>è¿”å›å•ä¸ªå…¬å…±æˆå‘˜å˜é‡å¯¹è±¡</td></tr><tr><td>Field getDeclaredField(String name)</td><td>è¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, gender=&#x27;&quot;</span> + gender + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, money=&quot;</span> + money +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException &#123;</span><br><span class="line">       <span class="comment">// method1();</span></span><br><span class="line">        <span class="comment">//method2();</span></span><br><span class="line">        <span class="comment">//method3();</span></span><br><span class="line">        <span class="comment">//method4();</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException &#123;</span><br><span class="line">        <span class="comment">//        Field getDeclaredField(String name)ï¼šè¿”å›å•ä¸ªæˆå‘˜å˜é‡å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect4.Student&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//2.è·å–moneyæˆå‘˜å˜é‡</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;money&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//3.æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">        System.out.println(field);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException &#123;</span><br><span class="line">        <span class="comment">//        Field getField(String name)ï¼šè¿”å›å•ä¸ªå…¬å…±æˆå‘˜å˜é‡å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//æƒ³è¦è·å–çš„æˆå‘˜å˜é‡å¿…é¡»æ˜¯çœŸå®å­˜åœ¨çš„</span></span><br><span class="line">        <span class="comment">//ä¸”å¿…é¡»æ˜¯publicä¿®é¥°çš„.</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect4.Student&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//2.è·å–nameè¿™ä¸ªæˆå‘˜å˜é‡</span></span><br><span class="line">        <span class="comment">//Field field = clazz.getField(&quot;name&quot;);</span></span><br><span class="line">        <span class="comment">//Field field = clazz.getField(&quot;name1&quot;);</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getField(<span class="string">&quot;money&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//3.æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">        System.out.println(field);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//        Field[] getDeclaredFields()ï¼šè¿”å›æ‰€æœ‰æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect4.Student&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//2.è·å–æ‰€æœ‰çš„Fieldå¯¹è±¡</span></span><br><span class="line">        Field[] fields = clazz.getDeclaredFields();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//3.éå†</span></span><br><span class="line">        <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">            System.out.println(field);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//        Field[] getFields()ï¼šè¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜å˜é‡å¯¹è±¡çš„æ•°ç»„</span></span><br><span class="line">  </span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect4.Student&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//2.è·å–Fieldå¯¹è±¡.</span></span><br><span class="line">        Field[] fields = clazz.getFields();</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//3.éå†</span></span><br><span class="line">        <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">            System.out.println(field);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="4-2Fieldç±»ç”¨äºç»™æˆå‘˜å˜é‡èµ‹å€¼çš„æ–¹æ³•"><a href="#4-2Fieldç±»ç”¨äºç»™æˆå‘˜å˜é‡èµ‹å€¼çš„æ–¹æ³•" class="headerlink" title="4.2Fieldç±»ç”¨äºç»™æˆå‘˜å˜é‡èµ‹å€¼çš„æ–¹æ³•"></a>4.2Fieldç±»ç”¨äºç»™æˆå‘˜å˜é‡èµ‹å€¼çš„æ–¹æ³•</h4><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>void set(Object obj, Object value)</td><td>èµ‹å€¼</td></tr><tr><td>Object get(Object obj)</td><td>è·å–å€¼</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Studentç±»åŒä¸Šä¸€ä¸ªç¤ºä¾‹,è¿™é‡Œå°±ä¸åœ¨é‡å¤æä¾›äº†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException, IllegalAccessException, InstantiationException &#123;</span><br><span class="line"><span class="comment">//        Object get(Object obj) è¿”å›ç”±è¯¥ Fieldè¡¨ç¤ºçš„å­—æ®µåœ¨æŒ‡å®šå¯¹è±¡ä¸Šçš„å€¼ã€‚</span></span><br><span class="line">        <span class="comment">//method1();</span></span><br><span class="line">        <span class="comment">//method2();</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException, InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect4.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–æˆå‘˜å˜é‡Fieldçš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;money&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.å–æ¶ˆä¸€ä¸‹è®¿é—®æ£€æŸ¥</span></span><br><span class="line">        field.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.è°ƒç”¨getæ–¹æ³•æ¥è·å–å€¼</span></span><br><span class="line">        <span class="comment">//4.1åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) clazz.newInstance();</span><br><span class="line">        <span class="comment">//4.2è·å–æŒ‡å®šå¯¹è±¡çš„moneyçš„å€¼</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> field.get(student);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchFieldException, InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">//        void set(Object obj, Object value)ï¼šç»™objå¯¹è±¡çš„æˆå‘˜å˜é‡èµ‹å€¼ä¸ºvalue</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect4.Student&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è·å–nameè¿™ä¸ªFieldå¯¹è±¡</span></span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.åˆ©ç”¨setæ–¹æ³•è¿›è¡Œèµ‹å€¼.</span></span><br><span class="line">        <span class="comment">//3.1å…ˆåˆ›å»ºä¸€ä¸ªStudentå¯¹è±¡</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) clazz.newInstance();</span><br><span class="line">        <span class="comment">//3.2æœ‰äº†å¯¹è±¡æ‰å¯ä»¥ç»™æŒ‡å®šå¯¹è±¡è¿›è¡Œèµ‹å€¼</span></span><br><span class="line">        field.set(student,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(student);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-åå°„è·å–æˆå‘˜æ–¹æ³•å¹¶ä½¿ç”¨"><a href="#5-åå°„è·å–æˆå‘˜æ–¹æ³•å¹¶ä½¿ç”¨" class="headerlink" title="5.åå°„è·å–æˆå‘˜æ–¹æ³•å¹¶ä½¿ç”¨"></a>5.åå°„è·å–æˆå‘˜æ–¹æ³•å¹¶ä½¿ç”¨</h3><h4 id="5-1Classç±»è·å–æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•"><a href="#5-1Classç±»è·å–æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="5.1Classç±»è·å–æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•"></a>5.1Classç±»è·å–æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ–¹æ³•</h4><ul><li><p>æ–¹æ³•åˆ†ç±»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Method[] getMethods()</td><td>è¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„</td></tr><tr><td>Method[] getDeclaredMethods()</td><td>è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬ç»§æ‰¿çš„</td></tr><tr><td>Method getMethod(String name, Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›å•ä¸ªå…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡</td></tr><tr><td>Method getDeclaredMethod(String name, Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§æœ‰çš„ï¼Œæ— å‚æ— è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç§æœ‰çš„showæ–¹æ³•ï¼Œæ— å‚æ— è¿”å›å€¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¬å…±çš„ï¼Œæ— å‚æ— è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">function1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;function1æ–¹æ³•ï¼Œæ— å‚æ— è¿”å›å€¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¬å…±çš„ï¼Œæœ‰å‚æ— è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">function2</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;function2æ–¹æ³•ï¼Œæœ‰å‚æ— è¿”å›å€¼,å‚æ•°ä¸º&quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¬å…±çš„ï¼Œæ— å‚æœ‰è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">function3</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;function3æ–¹æ³•ï¼Œæ— å‚æœ‰è¿”å›å€¼&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å…¬å…±çš„ï¼Œæœ‰å‚æœ‰è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">function4</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;function4æ–¹æ³•ï¼Œæœ‰å‚æœ‰è¿”å›å€¼,å‚æ•°ä¸º&quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;aaa&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//method1();</span></span><br><span class="line">        <span class="comment">//method2();</span></span><br><span class="line">        <span class="comment">//method3();</span></span><br><span class="line">        <span class="comment">//method4();</span></span><br><span class="line">        <span class="comment">//method5();</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method5</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//        Method getDeclaredMethod(String name, Class&lt;?&gt;... parameterTypes)ï¼š</span></span><br><span class="line"><span class="comment">//                                è¿”å›å•ä¸ªæˆå‘˜æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect5.Student&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–ä¸€ä¸ªæˆå‘˜æ–¹æ³•show</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getDeclaredMethod(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="comment">//3.æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">        System.out.println(method);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method4</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect5.Student&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–ä¸€ä¸ªæœ‰å½¢å‚çš„æ–¹æ³•function2</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;function2&quot;</span>, String.class);</span><br><span class="line">        <span class="comment">//3.æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">        System.out.println(method);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method3</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException &#123;</span><br><span class="line">        <span class="comment">//        Method getMethod(String name, Class&lt;?&gt;... parameterTypes) ï¼š</span></span><br><span class="line"><span class="comment">//                                è¿”å›å•ä¸ªå…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect5.Student&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–æˆå‘˜æ–¹æ³•function1</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method1</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;function1&quot;</span>);</span><br><span class="line">        <span class="comment">//3.æ‰“å°ä¸€ä¸‹</span></span><br><span class="line">        System.out.println(method1);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method2</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//        Method[] getDeclaredMethods()ï¼š</span></span><br><span class="line"><span class="comment">//                                è¿”å›æ‰€æœ‰æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬ç»§æ‰¿çš„</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect5.Student&quot;</span>);</span><br><span class="line">  </span><br><span class="line">        <span class="comment">//2.è·å–Methodå¯¹è±¡</span></span><br><span class="line">        Method[] methods = clazz.getDeclaredMethods();</span><br><span class="line">        <span class="comment">//3.éå†ä¸€ä¸‹æ•°ç»„</span></span><br><span class="line">        <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method1</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//        Method[] getMethods()ï¼šè¿”å›æ‰€æœ‰å…¬å…±æˆå‘˜æ–¹æ³•å¯¹è±¡çš„æ•°ç»„ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„</span></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect5.Student&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–æˆå‘˜æ–¹æ³•å¯¹è±¡</span></span><br><span class="line">        Method[] methods = clazz.getMethods();</span><br><span class="line">        <span class="comment">//3.éå†</span></span><br><span class="line">        <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="5-2Methodç±»ç”¨äºæ‰§è¡Œæ–¹æ³•çš„æ–¹æ³•"><a href="#5-2Methodç±»ç”¨äºæ‰§è¡Œæ–¹æ³•çš„æ–¹æ³•" class="headerlink" title="5.2Methodç±»ç”¨äºæ‰§è¡Œæ–¹æ³•çš„æ–¹æ³•"></a>5.2Methodç±»ç”¨äºæ‰§è¡Œæ–¹æ³•çš„æ–¹æ³•</h4><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Object invoke(Object obj, Objectâ€¦ args)</td><td>è¿è¡Œæ–¹æ³•</td></tr></tbody></table><p>å‚æ•°ä¸€: ç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•</p><p>å‚æ•°äºŒ: è°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°(å¦‚æœæ²¡æœ‰å°±ä¸å†™)</p><p>è¿”å›å€¼: æ–¹æ³•çš„è¿”å›å€¼(å¦‚æœæ²¡æœ‰å°±ä¸å†™)</p></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InstantiationException, InvocationTargetException &#123;</span><br><span class="line"><span class="comment">//        Object invoke(Object obj, Object... args)ï¼šè¿è¡Œæ–¹æ³•</span></span><br><span class="line"><span class="comment">//        å‚æ•°ä¸€ï¼šç”¨objå¯¹è±¡è°ƒç”¨è¯¥æ–¹æ³•</span></span><br><span class="line"><span class="comment">//        å‚æ•°äºŒï¼šè°ƒç”¨æ–¹æ³•çš„ä¼ é€’çš„å‚æ•°ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰</span></span><br><span class="line"><span class="comment">//        è¿”å›å€¼ï¼šæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæ²¡æœ‰å°±ä¸å†™ï¼‰</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.è·å–classå¯¹è±¡</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;com.jia.myreflect5.Student&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–é‡Œé¢çš„Methodå¯¹è±¡  function4</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;function4&quot;</span>, String.class);</span><br><span class="line">        <span class="comment">//3.è¿è¡Œfunction4æ–¹æ³•å°±å¯ä»¥äº†</span></span><br><span class="line">        <span class="comment">//3.1åˆ›å»ºä¸€ä¸ªStudentå¯¹è±¡,å½“åšæ–¹æ³•çš„è°ƒç”¨è€…</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) clazz.newInstance();</span><br><span class="line">        <span class="comment">//3.2è¿è¡Œæ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(student, <span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="comment">//4.æ‰“å°ä¸€ä¸‹è¿”å›å€¼</span></span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç±»åŠ è½½å™¨</title>
      <link href="/2020/12/05/Java_11_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/"/>
      <url>/2020/12/05/Java_11_%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="ç±»åŠ è½½å™¨çš„ä½œç”¨"><a href="#ç±»åŠ è½½å™¨çš„ä½œç”¨" class="headerlink" title="ç±»åŠ è½½å™¨çš„ä½œç”¨"></a>ç±»åŠ è½½å™¨çš„ä½œç”¨</h3><p>è´Ÿè´£å°†.classæ–‡ä»¶ï¼ˆå­˜å‚¨çš„ç‰©ç†æ–‡ä»¶ï¼‰åŠ è½½åœ¨åˆ°å†…å­˜ä¸­</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java11_1.png" alt="01_ç±»åŠ è½½å™¨"></p><span id="more"></span><h3 id="ç±»åŠ è½½çš„è¿‡ç¨‹"><a href="#ç±»åŠ è½½çš„è¿‡ç¨‹" class="headerlink" title="ç±»åŠ è½½çš„è¿‡ç¨‹"></a>ç±»åŠ è½½çš„è¿‡ç¨‹</h3><ul><li><p>ç±»åŠ è½½æ—¶æœº</p><ul><li>åˆ›å»ºç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰</li><li>è°ƒç”¨ç±»çš„ç±»æ–¹æ³•</li><li>è®¿é—®ç±»æˆ–è€…æ¥å£çš„ç±»å˜é‡ï¼Œæˆ–è€…ä¸ºè¯¥ç±»å˜é‡èµ‹å€¼</li><li>ä½¿ç”¨åå°„æ–¹å¼æ¥å¼ºåˆ¶åˆ›å»ºæŸä¸ªç±»æˆ–æ¥å£å¯¹åº”çš„java.lang.Classå¯¹è±¡</li><li>åˆå§‹åŒ–æŸä¸ªç±»çš„å­ç±»</li><li>ç›´æ¥ä½¿ç”¨java.exeå‘½ä»¤æ¥è¿è¡ŒæŸä¸ªä¸»ç±»</li></ul></li><li><p>ç±»åŠ è½½è¿‡ç¨‹</p><ol><li><p>åŠ è½½</p><ul><li>é€šè¿‡åŒ…å + ç±»åï¼Œè·å–è¿™ä¸ªç±»ï¼Œå‡†å¤‡ç”¨æµè¿›è¡Œä¼ è¾“</li><li>åœ¨è¿™ä¸ªç±»åŠ è½½åˆ°å†…å­˜ä¸­</li><li>åŠ è½½å®Œæ¯•åˆ›å»ºä¸€ä¸ªclasså¯¹è±¡</li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java11_2.png" alt="02_ç±»åŠ è½½è¿‡ç¨‹åŠ è½½"></p></li><li><p>é“¾æ¥</p><ul><li><p>éªŒè¯</p><p>ç¡®ä¿Classæ–‡ä»¶å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«å®‰å…¨</p><p>(æ–‡ä»¶ä¸­çš„ä¿¡æ¯æ˜¯å¦ç¬¦åˆè™šæ‹Ÿæœºè§„èŒƒæœ‰æ²¡æœ‰å®‰å…¨éšæ‚£)</p></li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java11_3.png" alt="03_ç±»åŠ è½½è¿‡ç¨‹éªŒè¯"></p><ul><li><p>å‡†å¤‡</p><p>è´Ÿè´£ä¸ºç±»çš„ç±»å˜é‡ï¼ˆè¢«staticä¿®é¥°çš„å˜é‡ï¼‰åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤åˆå§‹åŒ–å€¼</p><p>(åˆå§‹åŒ–é™æ€å˜é‡)</p></li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java11_4.png" alt="04_ç±»åŠ è½½è¿‡ç¨‹å‡†å¤‡"></p><ul><li><p>è§£æ</p><p>å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®æµä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨</p><p>(æœ¬ç±»ä¸­å¦‚æœç”¨åˆ°äº†å…¶ä»–ç±»ï¼Œæ­¤æ—¶å°±éœ€è¦æ‰¾åˆ°å¯¹åº”çš„ç±»)</p></li></ul><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java11_5.png" alt="05_ç±»åŠ è½½è¿‡ç¨‹è§£æ"></p></li><li><p>åˆå§‹åŒ–</p><p>æ ¹æ®ç¨‹åºå‘˜é€šè¿‡ç¨‹åºåˆ¶å®šçš„ä¸»è§‚è®¡åˆ’å»åˆå§‹åŒ–ç±»å˜é‡å’Œå…¶ä»–èµ„æº</p><p>(é™æ€å˜é‡èµ‹å€¼ä»¥åŠåˆå§‹åŒ–å…¶ä»–èµ„æº)</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java11_6.png" alt="06_ç±»åŠ è½½è¿‡ç¨‹åˆå§‹åŒ–"></p></li></ol></li><li><p>å°ç»“</p><ul><li>å½“ä¸€ä¸ªç±»è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šåŠ è½½åˆ°å†…å­˜</li><li>ç±»åŠ è½½çš„è¿‡ç¨‹: åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–</li></ul></li></ul><h3 id="ç±»åŠ è½½çš„åˆ†ç±»"><a href="#ç±»åŠ è½½çš„åˆ†ç±»" class="headerlink" title="ç±»åŠ è½½çš„åˆ†ç±»"></a>ç±»åŠ è½½çš„åˆ†ç±»</h3><ul><li><p>åˆ†ç±»</p><ul><li>Bootstrap class loaderï¼šè™šæ‹Ÿæœºçš„å†…ç½®ç±»åŠ è½½å™¨ï¼Œé€šå¸¸è¡¨ç¤ºä¸ºnull ï¼Œå¹¶ä¸”æ²¡æœ‰çˆ¶null</li><li>Platform class loaderï¼šå¹³å°ç±»åŠ è½½å™¨,è´Ÿè´£åŠ è½½JDKä¸­ä¸€äº›ç‰¹æ®Šçš„æ¨¡å—</li><li>System class loaderï¼šç³»ç»Ÿç±»åŠ è½½å™¨,è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„ä¸Šæ‰€æŒ‡å®šçš„ç±»åº“</li></ul></li><li><p>ç±»åŠ è½½å™¨çš„ç»§æ‰¿å…³ç³»</p><ul><li>Systemçš„çˆ¶åŠ è½½å™¨ä¸ºPlatform</li><li>Platformçš„çˆ¶åŠ è½½å™¨ä¸ºBootstrap</li></ul></li><li><p>ä»£ç æ¼”ç¤º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoaderDemo1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">systemClassLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–ç³»ç»Ÿç±»åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨ --- å¹³å°ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader1</span> <span class="operator">=</span> systemClassLoader.getParent();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å¹³å°ç±»åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨ --- å¯åŠ¨ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader2</span> <span class="operator">=</span> classLoader1.getParent();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ç³»ç»Ÿç±»åŠ è½½å™¨&quot;</span> + systemClassLoader);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¹³å°ç±»åŠ è½½å™¨&quot;</span> + classLoader1);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¯åŠ¨ç±»åŠ è½½å™¨&quot;</span> + classLoader2);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="åŒäº²å§”æ´¾æ¨¡å‹"><a href="#åŒäº²å§”æ´¾æ¨¡å‹" class="headerlink" title="åŒäº²å§”æ´¾æ¨¡å‹"></a>åŒäº²å§”æ´¾æ¨¡å‹</h3><ul><li><p>ä»‹ç»</p><p>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨å»æ‰§è¡Œï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨è¿˜å­˜åœ¨å…¶çˆ¶ç±»åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’ï¼Œè¯·æ±‚æœ€ç»ˆå°†åˆ°è¾¾é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆç±»åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼Œå€˜è‹¥çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®Œæˆæ­¤åŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å¼</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java11_7.png" alt="07_åŒäº²å§”æ´¾æ¨¡å‹"></p></li></ul><ul><li>å¯åŠ¨ç±»åŠ è½½å™¨ï¼šå®ƒä¸æ˜¯ä¸€ä¸ªJavaç±»ï¼Œæ˜¯C++å†™çš„ã€‚ä¸»è¦è´Ÿè´£JDKçš„æ ¸å¿ƒç±»åº“ï¼Œæ¯”å¦‚rt.jar,resource.jarç­‰ç±»åº“ã€‚å¯åŠ¨ç±»åŠ è½½å™¨å®Œå…¨æ˜¯JVMè‡ªå·±æ§åˆ¶çš„ï¼Œå¼€å‘äººå‘˜æ˜¯æ— æ³•è®¿é—®çš„ã€‚</li><li>æ‰©å±•ç±»åŠ è½½å™¨ï¼šæ˜¯ä¸€ä¸ªç»§æ‰¿ClassLoaderç±»çš„Javaç±»ï¼Œè´Ÿè´£åŠ è½½{JAVA_HOME}&#x2F;jre&#x2F;lib&#x2F;ext&#x2F;ç›®å½•ä¸‹çš„æ‰€æœ‰jaråŒ…</li><li>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼šæ˜¯ä¸€ä¸ªç»§æ‰¿ClassLoaderç±»çš„Javaç±»ï¼Œè´Ÿè½½åŠ è½½classpathç›®å½•ä¸‹çš„æ‰€æœ‰jarå’Œclassæ–‡ä»¶ï¼ŒåŸºæœ¬ä¸Šä½ å†™çš„ç±»æ–‡ä»¶ï¼Œéƒ½æ˜¯è¢«åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</li></ul><h4 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>ã€€â‘ <strong>é˜²æ­¢é‡å¤åŠ è½½åŒä¸€ä¸ª.classã€‚</strong>é€šè¿‡å§”æ‰˜å»è¯¢é—®ä¸Šçº§æ˜¯å¦å·²ç»åŠ è½½è¿‡è¯¥.classï¼Œå¦‚æœåŠ è½½è¿‡äº†ï¼Œåˆ™ä¸éœ€è¦é‡æ–°åŠ è½½ã€‚ä¿è¯äº†æ•°æ®å®‰å…¨ã€‚</p><p>ã€€â‘¡<strong>é˜²æ­¢æ ¸å¿ƒ.classè¢«ç¯¡æ”¹ã€‚</strong>é€šè¿‡å§”æ‰˜çš„æ–¹å¼ï¼Œä¿è¯æ ¸å¿ƒ.classä¸è¢«ç¯¡æ”¹ï¼Œå³ä½¿è¢«ç¯¡æ”¹ä¹Ÿä¸ä¼šè¢«åŠ è½½ï¼Œå³ä½¿è¢«åŠ è½½ä¹Ÿä¸ä¼šæ˜¯åŒä¸€ä¸ªclasså¯¹è±¡ï¼Œå› ä¸ºä¸åŒçš„åŠ è½½å™¨åŠ è½½åŒä¸€ä¸ª.classä¹Ÿä¸æ˜¯åŒä¸€ä¸ªClasså¯¹è±¡ã€‚è¿™æ ·åˆ™ä¿è¯äº†Classçš„æ‰§è¡Œå®‰å…¨ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šjavaæ ¸å¿ƒapiä¸­å®šä¹‰ç±»å‹ä¸ä¼šè¢«éšæ„æ›¿æ¢ï¼Œå‡è®¾é€šè¿‡ç½‘ç»œä¼ é€’ä¸€ä¸ªåä¸ºjava.lang.Integerçš„ç±»ï¼Œé€šè¿‡åŒäº²å§”æ‰˜æ¨¡å¼ä¼ é€’åˆ°å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œè€Œå¯åŠ¨ç±»åŠ è½½å™¨åœ¨æ ¸å¿ƒJava APIå‘ç°è¿™ä¸ªåå­—çš„ç±»ï¼Œå‘ç°è¯¥ç±»å·²è¢«åŠ è½½ï¼Œå¹¶ä¸ä¼šé‡æ–°åŠ è½½ç½‘ç»œä¼ é€’çš„è¿‡æ¥ java.lang.Integerï¼Œè€Œç›´æ¥è¿”å›å·²åŠ è½½è¿‡çš„Integer.classï¼Œè¿™æ ·ä¾¿å¯ä»¥é˜²æ­¢æ ¸å¿ƒAPIåº“è¢«éšæ„ç¯¡æ”¹ã€‚</p><p>###ClassLoader ä¸­çš„ä¸¤ä¸ªæ–¹æ³•</p><ul><li><p>æ–¹æ³•ä»‹ç»</p><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>public static ClassLoader getSystemClassLoader()</td><td>è·å–ç³»ç»Ÿç±»åŠ è½½å™¨</td></tr><tr><td>public InputStream getResourceAsStream(String name)</td><td>åŠ è½½æŸä¸€ä¸ªèµ„æºæ–‡ä»¶</td></tr></tbody></table></li><li><p>ç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoaderDemo2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//static ClassLoader getSystemClassLoader() è·å–ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="comment">//InputStream getResourceAsStream(String name)  åŠ è½½æŸä¸€ä¸ªèµ„æºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–ç³»ç»Ÿç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">systemClassLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ©ç”¨åŠ è½½å™¨å»åŠ è½½ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶</span></span><br><span class="line">        <span class="comment">//å‚æ•°ï¼šæ–‡ä»¶çš„è·¯å¾„ï¼ˆæ”¾åœ¨srcçš„æ ¹ç›®å½•ä¸‹ï¼Œé»˜è®¤å»é‚£é‡ŒåŠ è½½ï¼‰</span></span><br><span class="line">        <span class="comment">//è¿”å›å€¼ï¼šå­—èŠ‚æµã€‚</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> systemClassLoader.getResourceAsStream(<span class="string">&quot;prop.properties&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.load(is);</span><br><span class="line"></span><br><span class="line">        System.out.println(prop);</span><br><span class="line"></span><br><span class="line">        is.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå‘½ä»¤å¤§å…¨</title>
      <link href="/2020/11/28/Linux_1_Linux%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/"/>
      <url>/2020/11/28/Linux_1_Linux%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åŸºæœ¬å‘½ä»¤"><a href="#ä¸€ã€åŸºæœ¬å‘½ä»¤" class="headerlink" title="ä¸€ã€åŸºæœ¬å‘½ä»¤"></a>ä¸€ã€åŸºæœ¬å‘½ä»¤</h2><h3 id="1-1-å…³æœºå’Œé‡å¯"><a href="#1-1-å…³æœºå’Œé‡å¯" class="headerlink" title="1.1 å…³æœºå’Œé‡å¯"></a>1.1 å…³æœºå’Œé‡å¯</h3><p>å…³æœº</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shutdown -h now     ç«‹åˆ»å…³æœº</span><br><span class="line">shutdown -h 5       5åˆ†é’Ÿåå…³æœº</span><br><span class="line">poweroff            ç«‹åˆ»å…³æœº</span><br></pre></td></tr></table></figure><p>é‡å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shutdown -r now        ç«‹åˆ»é‡å¯</span><br><span class="line">shutdown -r 5        5åˆ†é’Ÿåé‡å¯</span><br><span class="line">reboot                ç«‹åˆ»é‡å¯</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="1-2-å¸®åŠ©å‘½ä»¤"><a href="#1-2-å¸®åŠ©å‘½ä»¤" class="headerlink" title="1.2 å¸®åŠ©å‘½ä»¤"></a>1.2 å¸®åŠ©å‘½ä»¤</h3><p>â€“helpå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutdown --<span class="built_in">help</span>ï¼š</span><br><span class="line">ifconfig  --<span class="built_in">help</span>ï¼šæŸ¥çœ‹ç½‘å¡ä¿¡æ¯</span><br></pre></td></tr></table></figure><p>manå‘½ä»¤ï¼ˆå‘½ä»¤è¯´æ˜ä¹¦ï¼‰ </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man shutdown</span><br></pre></td></tr></table></figure><p>  æ³¨æ„ï¼šman shutdownæ‰“å¼€å‘½ä»¤è¯´æ˜ä¹¦ä¹‹åï¼Œä½¿ç”¨æŒ‰é”®qé€€å‡º</p><h2 id="äºŒã€ç›®å½•æ“ä½œå‘½ä»¤"><a href="#äºŒã€ç›®å½•æ“ä½œå‘½ä»¤" class="headerlink" title="äºŒã€ç›®å½•æ“ä½œå‘½ä»¤"></a>äºŒã€ç›®å½•æ“ä½œå‘½ä»¤</h2><h3 id="2-1-ç›®å½•åˆ‡æ¢-cd"><a href="#2-1-ç›®å½•åˆ‡æ¢-cd" class="headerlink" title="2.1 ç›®å½•åˆ‡æ¢ cd"></a>2.1 ç›®å½•åˆ‡æ¢ cd</h3><p>å‘½ä»¤ï¼šcd ç›®å½•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /        åˆ‡æ¢åˆ°æ ¹ç›®å½•</span><br><span class="line"><span class="built_in">cd</span> /usr        åˆ‡æ¢åˆ°æ ¹ç›®å½•ä¸‹çš„usrç›®å½•</span><br><span class="line"><span class="built_in">cd</span> ../        åˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½• æˆ–è€…  <span class="built_in">cd</span> ..</span><br><span class="line"><span class="built_in">cd</span> ~        åˆ‡æ¢åˆ°homeç›®å½•</span><br><span class="line"><span class="built_in">cd</span> -        åˆ‡æ¢åˆ°ä¸Šæ¬¡è®¿é—®çš„ç›®å½•</span><br></pre></td></tr></table></figure><h3 id="2-2-ç›®å½•æŸ¥çœ‹-ls-al"><a href="#2-2-ç›®å½•æŸ¥çœ‹-ls-al" class="headerlink" title="2.2 ç›®å½•æŸ¥çœ‹ ls [-al]"></a>2.2 ç›®å½•æŸ¥çœ‹ ls [-al]</h3><p>å‘½ä»¤ï¼šls [-al]</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span>                æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶</span><br><span class="line"><span class="built_in">ls</span> -a            æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ï¼ˆåŒ…æ‹¬éšè—çš„æ–‡ä»¶ï¼‰</span><br><span class="line"><span class="built_in">ls</span> -l æˆ– ll       åˆ—è¡¨æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶ï¼ˆåˆ—è¡¨æŸ¥çœ‹ï¼Œæ˜¾ç¤ºæ›´å¤šä¿¡æ¯ï¼‰</span><br><span class="line"><span class="built_in">ls</span> /dir            æŸ¥çœ‹æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶   å¦‚ï¼š<span class="built_in">ls</span> /usr</span><br></pre></td></tr></table></figure><h3 id="2-3-ç›®å½•æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘"><a href="#2-3-ç›®å½•æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘" class="headerlink" title="2.3 ç›®å½•æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘"></a>2.3 ç›®å½•æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘</h3><h4 id="2-3-1-åˆ›å»ºç›®å½•ã€å¢ã€‘-mkdir"><a href="#2-3-1-åˆ›å»ºç›®å½•ã€å¢ã€‘-mkdir" class="headerlink" title="2.3.1 åˆ›å»ºç›®å½•ã€å¢ã€‘ mkdir"></a>2.3.1 åˆ›å»ºç›®å½•ã€å¢ã€‘ mkdir</h4><p>å‘½ä»¤ï¼šmkdir ç›®å½•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span>    aaa            åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºaaaçš„ç›®å½•</span><br><span class="line"><span class="built_in">mkdir</span>    /usr/aaa    åœ¨æŒ‡å®šç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºaaaçš„ç›®å½•</span><br></pre></td></tr></table></figure><h4 id="2-3-2-åˆ é™¤ç›®å½•æˆ–æ–‡ä»¶ã€åˆ ã€‘rm"><a href="#2-3-2-åˆ é™¤ç›®å½•æˆ–æ–‡ä»¶ã€åˆ ã€‘rm" class="headerlink" title="2.3.2 åˆ é™¤ç›®å½•æˆ–æ–‡ä»¶ã€åˆ ã€‘rm"></a>2.3.2 åˆ é™¤ç›®å½•æˆ–æ–‡ä»¶ã€åˆ ã€‘rm</h4><p>å‘½ä»¤ï¼šrm [-rf] ç›®å½•</p><p>åˆ é™¤æ–‡ä»¶ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> æ–‡ä»¶        åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶</span><br><span class="line"><span class="built_in">rm</span> -f æ–‡ä»¶    åˆ é™¤å½“å‰ç›®å½•çš„çš„æ–‡ä»¶ï¼ˆä¸è¯¢é—®ï¼‰</span><br></pre></td></tr></table></figure><p>åˆ é™¤ç›®å½•ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -r aaa    é€’å½’åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„aaaç›®å½•</span><br><span class="line"><span class="built_in">rm</span> -rf aaa    é€’å½’åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„aaaç›®å½•ï¼ˆä¸è¯¢é—®ï¼‰</span><br></pre></td></tr></table></figure><p>å…¨éƒ¨åˆ é™¤ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf *    å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶å…¨éƒ¨åˆ é™¤</span><br><span class="line"><span class="built_in">rm</span> -rf /*    ã€è‡ªæ€å‘½ä»¤ï¼æ…ç”¨ï¼æ…ç”¨ï¼æ…ç”¨ï¼ã€‘å°†æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å…¨éƒ¨åˆ é™¤</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šrmä¸ä»…å¯ä»¥åˆ é™¤ç›®å½•ï¼Œä¹Ÿå¯ä»¥åˆ é™¤å…¶ä»–æ–‡ä»¶æˆ–å‹ç¼©åŒ…ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶çš„è®°å¿†ï¼Œæ— è®ºåˆ é™¤ä»»ä½•ç›®å½•æˆ–æ–‡ä»¶ï¼Œéƒ½ç›´æ¥ä½¿ç”¨ rm -rf ç›®å½•&#x2F;æ–‡ä»¶&#x2F;å‹ç¼©åŒ…</p><h4 id="2-3-3-ç›®å½•ä¿®æ”¹ã€æ”¹ã€‘mv-å’Œ-cp"><a href="#2-3-3-ç›®å½•ä¿®æ”¹ã€æ”¹ã€‘mv-å’Œ-cp" class="headerlink" title="2.3.3 ç›®å½•ä¿®æ”¹ã€æ”¹ã€‘mv å’Œ cp"></a>2.3.3 ç›®å½•ä¿®æ”¹ã€æ”¹ã€‘mv å’Œ cp</h4><p>ä¸€ã€é‡å‘½åç›®å½•<br>    å‘½ä»¤ï¼šmv å½“å‰ç›®å½•  æ–°ç›®å½•<br>    ä¾‹å¦‚ï¼šmv aaa bbb    å°†ç›®å½•aaaæ”¹ä¸ºbbb<br>    æ³¨æ„ï¼šmvçš„è¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé‡å‘½åè€Œä¸”ä¹Ÿå¯ä»¥å¯¹å„ç§æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰è¿›è¡Œ    é‡å‘½åçš„æ“ä½œ</p><p>äºŒã€å‰ªåˆ‡ç›®å½•<br>    å‘½ä»¤ï¼šmv ç›®å½•åç§° ç›®å½•çš„æ–°ä½ç½®<br>    ç¤ºä¾‹ï¼šå°†&#x2F;usr&#x2F;tmpç›®å½•ä¸‹çš„aaaç›®å½•å‰ªåˆ‡åˆ° &#x2F;usrç›®å½•ä¸‹é¢     mv &#x2F;usr&#x2F;tmp&#x2F;aaa &#x2F;usr<br>    æ³¨æ„ï¼šmvè¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œå‰ªåˆ‡æ“ä½œï¼Œå¯¹æ–‡ä»¶å’Œå‹ç¼©åŒ…ç­‰éƒ½å¯æ‰§è¡Œå‰ªåˆ‡æ“ä½œ</p><p>ä¸‰ã€æ‹·è´ç›®å½•<br>    å‘½ä»¤ï¼šcp -r ç›®å½•åç§° ç›®å½•æ‹·è´çš„ç›®æ ‡ä½ç½®   -rä»£è¡¨é€’å½’<br>    ç¤ºä¾‹ï¼šå°†&#x2F;usr&#x2F;tmpç›®å½•ä¸‹çš„aaaç›®å½•å¤åˆ¶åˆ° &#x2F;usrç›®å½•ä¸‹é¢     cp &#x2F;usr&#x2F;tmp&#x2F;aaa  &#x2F;usr<br>    æ³¨æ„ï¼šcpå‘½ä»¤ä¸ä»…å¯ä»¥æ‹·è´ç›®å½•è¿˜å¯ä»¥æ‹·è´æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰ï¼Œæ‹·è´æ–‡ä»¶å’Œå‹ç¼©åŒ…æ—¶ä¸    ç”¨å†™-ré€’å½’</p><h4 id="2-3-4-æœç´¢ç›®å½•ã€æŸ¥ã€‘find"><a href="#2-3-4-æœç´¢ç›®å½•ã€æŸ¥ã€‘find" class="headerlink" title="2.3.4 æœç´¢ç›®å½•ã€æŸ¥ã€‘find"></a>2.3.4 æœç´¢ç›®å½•ã€æŸ¥ã€‘find</h4><p>å‘½ä»¤ï¼šfind ç›®å½• å‚æ•° æ–‡ä»¶åç§°<br>ç¤ºä¾‹ï¼šfind &#x2F;usr&#x2F;tmp -name â€˜a*â€™    æŸ¥æ‰¾&#x2F;usr&#x2F;tmpç›®å½•ä¸‹çš„æ‰€æœ‰ä»¥aå¼€å¤´çš„ç›®å½•æˆ–æ–‡ä»¶</p><h2 id="ä¸‰ã€æ–‡ä»¶æ“ä½œå‘½ä»¤"><a href="#ä¸‰ã€æ–‡ä»¶æ“ä½œå‘½ä»¤" class="headerlink" title="ä¸‰ã€æ–‡ä»¶æ“ä½œå‘½ä»¤"></a>ä¸‰ã€æ–‡ä»¶æ“ä½œå‘½ä»¤</h2><h3 id="3-1-æ–‡ä»¶æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘"><a href="#3-1-æ–‡ä»¶æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘" class="headerlink" title="3.1 æ–‡ä»¶æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘"></a>3.1 æ–‡ä»¶æ“ä½œã€å¢ï¼Œåˆ ï¼Œæ”¹ï¼ŒæŸ¥ã€‘</h3><h4 id="3-1-1-æ–°å»ºæ–‡ä»¶ã€å¢ã€‘touch"><a href="#3-1-1-æ–°å»ºæ–‡ä»¶ã€å¢ã€‘touch" class="headerlink" title="3.1.1 æ–°å»ºæ–‡ä»¶ã€å¢ã€‘touch"></a>3.1.1 æ–°å»ºæ–‡ä»¶ã€å¢ã€‘touch</h4><p>å‘½ä»¤ï¼štouch æ–‡ä»¶å<br>ç¤ºä¾‹ï¼šåœ¨å½“å‰ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸ºaa.txtçš„æ–‡ä»¶        touch  aa.txt</p><h4 id="3-1-2-åˆ é™¤æ–‡ä»¶-ã€åˆ ã€‘-rm"><a href="#3-1-2-åˆ é™¤æ–‡ä»¶-ã€åˆ ã€‘-rm" class="headerlink" title="3.1.2 åˆ é™¤æ–‡ä»¶ ã€åˆ ã€‘ rm"></a>3.1.2 åˆ é™¤æ–‡ä»¶ ã€åˆ ã€‘ rm</h4><p>å‘½ä»¤ï¼šrm -rf æ–‡ä»¶å</p><h4 id="3-1-3-ä¿®æ”¹æ–‡ä»¶ã€æ”¹ã€‘-viæˆ–vim"><a href="#3-1-3-ä¿®æ”¹æ–‡ä»¶ã€æ”¹ã€‘-viæˆ–vim" class="headerlink" title="3.1.3 ä¿®æ”¹æ–‡ä»¶ã€æ”¹ã€‘ viæˆ–vim"></a>3.1.3 ä¿®æ”¹æ–‡ä»¶ã€æ”¹ã€‘ viæˆ–vim</h4><p>ã€viç¼–è¾‘å™¨çš„3ç§æ¨¡å¼ã€‘<br>    åŸºæœ¬ä¸Šviå¯ä»¥åˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤æ¨¡å¼ï¼ˆcommand modeï¼‰ã€æ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰å’Œåº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ï¼Œå„æ¨¡å¼çš„åŠŸèƒ½åŒºåˆ†å¦‚ä¸‹ï¼š</p><ol><li><p><strong>å‘½ä»¤è¡Œæ¨¡å¼command modeï¼‰</strong><br>   æ§åˆ¶å±å¹•å…‰æ ‡çš„ç§»åŠ¨ï¼Œå­—ç¬¦ã€å­—æˆ–è¡Œçš„åˆ é™¤ï¼ŒæŸ¥æ‰¾ï¼Œç§»åŠ¨å¤åˆ¶æŸåŒºæ®µåŠè¿›å…¥Insert modeä¸‹ï¼Œæˆ–è€…åˆ° last line modeã€‚<br>   å‘½ä»¤è¡Œæ¨¡å¼ä¸‹çš„å¸¸ç”¨å‘½ä»¤ï¼š<br>   ã€1ã€‘æ§åˆ¶å…‰æ ‡ç§»åŠ¨ï¼šâ†‘ï¼Œâ†“ï¼Œj<br>   ã€2ã€‘åˆ é™¤å½“å‰è¡Œï¼šdd<br>   ã€3ã€‘æŸ¥æ‰¾ï¼š&#x2F;å­—ç¬¦<br>   ã€4ã€‘è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ši o a<br>   ã€5ã€‘è¿›å…¥åº•è¡Œæ¨¡å¼ï¼š:</p></li><li><p><strong>ç¼–è¾‘æ¨¡å¼ï¼ˆInsert modeï¼‰</strong><br>   åªæœ‰åœ¨Insert modeä¸‹ï¼Œæ‰å¯ä»¥åšæ–‡å­—è¾“å…¥ï¼ŒæŒ‰ã€ŒESCã€é”®å¯å›åˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚<br>   ç¼–è¾‘æ¨¡å¼ä¸‹å¸¸ç”¨å‘½ä»¤ï¼š<br>   ã€1ã€‘ESC é€€å‡ºç¼–è¾‘æ¨¡å¼åˆ°å‘½ä»¤è¡Œæ¨¡å¼ï¼›</p></li><li><p><strong>åº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰</strong><br>  å°†æ–‡ä»¶ä¿å­˜æˆ–é€€å‡ºviï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç¼–è¾‘ç¯å¢ƒï¼Œå¦‚å¯»æ‰¾å­—ç¬¦ä¸²ã€åˆ—å‡ºè¡Œå·â€¦â€¦ç­‰ã€‚<br>  åº•è¡Œæ¨¡å¼ä¸‹å¸¸ç”¨å‘½ä»¤ï¼š<br>  ã€1ã€‘é€€å‡ºç¼–è¾‘ï¼š   :q<br>  ã€2ã€‘å¼ºåˆ¶é€€å‡ºï¼š   :q!<br>  ã€3ã€‘ä¿å­˜å¹¶é€€å‡ºï¼š  :wq</p></li></ol><p><strong>æ‰“å¼€æ–‡ä»¶</strong></p><p>å‘½ä»¤ï¼švi æ–‡ä»¶å<br>ç¤ºä¾‹ï¼šæ‰“å¼€å½“å‰ç›®å½•ä¸‹çš„aa.txtæ–‡ä»¶     vi aa.txt æˆ–è€… vim aa.txt</p><p>æ³¨æ„ï¼šä½¿ç”¨viç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶åï¼Œå¹¶ä¸èƒ½ç¼–è¾‘ï¼Œå› ä¸ºæ­¤æ—¶å¤„äºå‘½ä»¤æ¨¡å¼ï¼Œç‚¹å‡»é”®ç›˜i&#x2F;a&#x2F;oè¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚</p><p><strong>ç¼–è¾‘æ–‡ä»¶</strong></p><p>ä½¿ç”¨viç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶åç‚¹å‡»æŒ‰é”®ï¼ši ï¼Œaæˆ–è€…oå³å¯è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚</p><p>i:åœ¨å…‰æ ‡æ‰€åœ¨å­—ç¬¦å‰å¼€å§‹æ’å…¥<br>a:åœ¨å…‰æ ‡æ‰€åœ¨å­—ç¬¦åå¼€å§‹æ’å…¥<br>o:åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹é¢å¦èµ·ä¸€æ–°è¡Œæ’å…¥</p><p><strong>ä¿å­˜æˆ–è€…å–æ¶ˆç¼–è¾‘</strong></p><p>ä¿å­˜æ–‡ä»¶ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šESC  è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼<br>ç¬¬äºŒæ­¥ï¼š:     è¿›å…¥åº•è¡Œæ¨¡å¼<br>ç¬¬ä¸‰æ­¥ï¼šwq     ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘</p><p>å–æ¶ˆç¼–è¾‘ï¼š</p><p>ç¬¬ä¸€æ­¥ï¼šESC  è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼<br>ç¬¬äºŒæ­¥ï¼š:     è¿›å…¥åº•è¡Œæ¨¡å¼<br>ç¬¬ä¸‰æ­¥ï¼šq!     æ’¤é”€æœ¬æ¬¡ä¿®æ”¹å¹¶é€€å‡ºç¼–è¾‘</p><h4 id="3-1-4-æ–‡ä»¶çš„æŸ¥çœ‹ã€æŸ¥ã€‘"><a href="#3-1-4-æ–‡ä»¶çš„æŸ¥çœ‹ã€æŸ¥ã€‘" class="headerlink" title="3.1.4 æ–‡ä»¶çš„æŸ¥çœ‹ã€æŸ¥ã€‘"></a>3.1.4 æ–‡ä»¶çš„æŸ¥çœ‹ã€æŸ¥ã€‘</h4><p>æ–‡ä»¶çš„æŸ¥çœ‹å‘½ä»¤ï¼šcat&#x2F;more&#x2F;less&#x2F;tail</p><p>catï¼šçœ‹æœ€åä¸€å±</p><p>ç¤ºä¾‹ï¼šä½¿ç”¨catæŸ¥çœ‹&#x2F;etc&#x2F;sudo.confæ–‡ä»¶ï¼Œåªèƒ½æ˜¾ç¤ºæœ€åä¸€å±å†…å®¹<br>cat sudo.conf</p><p>moreï¼šç™¾åˆ†æ¯”æ˜¾ç¤º</p><p>ç¤ºä¾‹ï¼šä½¿ç”¨moreæŸ¥çœ‹&#x2F;etc&#x2F;sudo.confæ–‡ä»¶ï¼Œå¯ä»¥æ˜¾ç¤ºç™¾åˆ†æ¯”ï¼Œå›è½¦å¯ä»¥å‘ä¸‹ä¸€è¡Œï¼Œç©ºæ ¼å¯ä»¥å‘ä¸‹ä¸€é¡µï¼Œqå¯ä»¥é€€å‡ºæŸ¥çœ‹<br>more sudo.conf</p><p>lessï¼šç¿»é¡µæŸ¥çœ‹</p><p>ç¤ºä¾‹ï¼šä½¿ç”¨lessæŸ¥çœ‹&#x2F;etc&#x2F;sudo.confæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é”®ç›˜ä¸Šçš„PgUpå’ŒPgDnå‘ä¸Š    å’Œå‘ä¸‹ç¿»é¡µï¼Œqç»“æŸæŸ¥çœ‹<br>less sudo.conf</p><p>tailï¼šæŒ‡å®šè¡Œæ•°æˆ–è€…åŠ¨æ€æŸ¥çœ‹</p><p>ç¤ºä¾‹ï¼šä½¿ç”¨tail -10 æŸ¥çœ‹&#x2F;etc&#x2F;sudo.confæ–‡ä»¶çš„å10è¡Œï¼ŒCtrl+Cç»“æŸ<br>tail -10 sudo.conf</p><h3 id="3-2-æƒé™ä¿®æ”¹"><a href="#3-2-æƒé™ä¿®æ”¹" class="headerlink" title="3.2 æƒé™ä¿®æ”¹"></a>3.2 æƒé™ä¿®æ”¹</h3><p>rwxï¼šrä»£è¡¨å¯è¯»ï¼Œwä»£è¡¨å¯å†™ï¼Œxä»£è¡¨è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚æœrwxä»»æ„ä½ç½®å˜ä¸º-åˆ™ä»£è¡¨ä¸å¯è¯»æˆ–ä¸å¯å†™æˆ–ä¸å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p><p>ç¤ºä¾‹ï¼šç»™aaa.txtæ–‡ä»¶æƒé™æ”¹ä¸ºå¯æ‰§è¡Œæ–‡ä»¶æƒé™ï¼Œaaa.txtæ–‡ä»¶çš„æƒé™æ˜¯-rwâ€”â€”-</p><p>ç¬¬ä¸€ä½ï¼š-å°±ä»£è¡¨æ˜¯æ–‡ä»¶ï¼Œdä»£è¡¨æ˜¯æ–‡ä»¶å¤¹<br>ç¬¬ä¸€æ®µï¼ˆ3ä½ï¼‰ï¼šä»£è¡¨æ‹¥æœ‰è€…çš„æƒé™<br>ç¬¬äºŒæ®µï¼ˆ3ä½ï¼‰ï¼šä»£è¡¨æ‹¥æœ‰è€…æ‰€åœ¨çš„ç»„ï¼Œç»„å‘˜çš„æƒé™<br>ç¬¬ä¸‰æ®µï¼ˆæœ€å3ä½ï¼‰ï¼šä»£è¡¨çš„æ˜¯å…¶ä»–ç”¨æˆ·çš„æƒé™</p><p>   421  421  421</p><ul><li>rw-   â€”     â€”</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ï¼š<span class="built_in">chmod</span> +x aaa.txt</span><br><span class="line">æˆ–è€…é‡‡ç”¨8421æ³•</span><br><span class="line">å‘½ä»¤ï¼š<span class="built_in">chmod</span> 100 aaa.txt</span><br></pre></td></tr></table></figure><h2 id="å››ã€å‹ç¼©æ–‡ä»¶æ“ä½œ"><a href="#å››ã€å‹ç¼©æ–‡ä»¶æ“ä½œ" class="headerlink" title="å››ã€å‹ç¼©æ–‡ä»¶æ“ä½œ"></a>å››ã€å‹ç¼©æ–‡ä»¶æ“ä½œ</h2><h3 id="4-1-æ‰“åŒ…å’Œå‹ç¼©"><a href="#4-1-æ‰“åŒ…å’Œå‹ç¼©" class="headerlink" title="4.1 æ‰“åŒ…å’Œå‹ç¼©"></a>4.1 æ‰“åŒ…å’Œå‹ç¼©</h3><p>Windowsçš„å‹ç¼©æ–‡ä»¶çš„æ‰©å±•å  .zip&#x2F;.rar<br>linuxä¸­çš„æ‰“åŒ…æ–‡ä»¶ï¼šaa.tar<br>linuxä¸­çš„å‹ç¼©æ–‡ä»¶ï¼šbb.gz<br>linuxä¸­æ‰“åŒ…å¹¶å‹ç¼©çš„æ–‡ä»¶ï¼š.tar.gz</p><p>Linuxä¸­çš„æ‰“åŒ…æ–‡ä»¶ä¸€èˆ¬æ˜¯ä»¥.tarç»“å°¾çš„ï¼Œå‹ç¼©çš„å‘½ä»¤ä¸€èˆ¬æ˜¯ä»¥.gzç»“å°¾çš„ã€‚<br>è€Œä¸€èˆ¬æƒ…å†µä¸‹æ‰“åŒ…å’Œå‹ç¼©æ˜¯ä¸€èµ·è¿›è¡Œçš„ï¼Œæ‰“åŒ…å¹¶å‹ç¼©åçš„æ–‡ä»¶çš„åç¼€åä¸€èˆ¬.tar.gzã€‚</p><p>å‘½ä»¤ï¼štar -zcvf æ‰“åŒ…å‹ç¼©åçš„æ–‡ä»¶å è¦æ‰“åŒ…çš„æ–‡ä»¶<br>å…¶ä¸­ï¼šzï¼šè°ƒç”¨gzipå‹ç¼©å‘½ä»¤è¿›è¡Œå‹ç¼©<br>  cï¼šæ‰“åŒ…æ–‡ä»¶<br>  vï¼šæ˜¾ç¤ºè¿è¡Œè¿‡ç¨‹<br>  fï¼šæŒ‡å®šæ–‡ä»¶å</p><p>ç¤ºä¾‹ï¼šæ‰“åŒ…å¹¶å‹ç¼©&#x2F;usr&#x2F;tmp ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ å‹ç¼©åçš„å‹ç¼©åŒ…æŒ‡å®šåç§°ä¸ºxxx.tar<br>tar -zcvf ab.tar aa.txt bb.txt<br>æˆ–ï¼štar -zcvf ab.tar  *</p><h3 id="4-2-è§£å‹"><a href="#4-2-è§£å‹" class="headerlink" title="4.2 è§£å‹"></a>4.2 è§£å‹</h3><p>å‘½ä»¤ï¼štar [-zxvf] å‹ç¼©æ–‡ä»¶<br>å…¶ä¸­ï¼šxï¼šä»£è¡¨è§£å‹<br>ç¤ºä¾‹ï¼šå°†&#x2F;usr&#x2F;tmp ä¸‹çš„ab.tarè§£å‹åˆ°å½“å‰ç›®å½•ä¸‹</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Linux1_1.png" alt="img"></p><p>ç¤ºä¾‹ï¼šå°†&#x2F;usr&#x2F;tmp ä¸‹çš„ab.tarè§£å‹åˆ°æ ¹ç›®å½•&#x2F;usrä¸‹<br>tar -xvf ab.tar -C &#x2F;usrâ€”â€”Cä»£è¡¨æŒ‡å®šè§£å‹çš„ä½ç½®</p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/Linux1_3.png" alt="img" style="zoom:80%;" /><h2 id="äº”ã€æŸ¥æ‰¾å‘½ä»¤"><a href="#äº”ã€æŸ¥æ‰¾å‘½ä»¤" class="headerlink" title="äº”ã€æŸ¥æ‰¾å‘½ä»¤"></a>äº”ã€æŸ¥æ‰¾å‘½ä»¤</h2><h3 id="5-1-grep"><a href="#5-1-grep" class="headerlink" title="5.1 grep"></a>5.1 grep</h3><p>grepå‘½ä»¤æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·</p><p>ä½¿ç”¨å®ä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep sshd  æŸ¥æ‰¾æŒ‡å®šsshæœåŠ¡è¿›ç¨‹ </span><br><span class="line">ps -ef | grep sshd | grep -v grep æŸ¥æ‰¾æŒ‡å®šæœåŠ¡è¿›ç¨‹ï¼Œæ’é™¤gerpèº« </span><br><span class="line">ps -ef | grep sshd -c æŸ¥æ‰¾æŒ‡å®šè¿›ç¨‹ä¸ªæ•° </span><br></pre></td></tr></table></figure><h3 id="5-2-find"><a href="#5-2-find" class="headerlink" title="5.2 find"></a>5.2 find</h3><p>findå‘½ä»¤åœ¨ç›®å½•ç»“æ„ä¸­æœç´¢æ–‡ä»¶ï¼Œå¹¶å¯¹æœç´¢ç»“æœæ‰§è¡ŒæŒ‡å®šçš„æ“ä½œã€‚ </p><p>find é»˜è®¤æœç´¢å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ï¼Œå¹¶ä¸”ä¸è¿‡æ»¤ä»»ä½•ç»“æœï¼ˆä¹Ÿå°±æ˜¯è¿”å›æ‰€æœ‰æ–‡ä»¶ï¼‰ï¼Œå°†å®ƒä»¬å…¨éƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p><p>ä½¿ç”¨å®ä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;*.log&quot;</span> -<span class="built_in">ls</span>  åœ¨å½“å‰ç›®å½•æŸ¥æ‰¾ä»¥.<span class="built_in">log</span>ç»“å°¾çš„æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚ </span><br><span class="line">find /root/ -perm 600   æŸ¥æ‰¾/root/ç›®å½•ä¸‹æƒé™ä¸º600çš„æ–‡ä»¶ </span><br><span class="line">find . -<span class="built_in">type</span> f -name <span class="string">&quot;*.log&quot;</span>  æŸ¥æ‰¾å½“ç›®å½•ï¼Œä»¥.<span class="built_in">log</span>ç»“å°¾çš„æ™®é€šæ–‡ä»¶ </span><br><span class="line">find . -<span class="built_in">type</span> d | <span class="built_in">sort</span>   æŸ¥æ‰¾å½“å‰æ‰€æœ‰ç›®å½•å¹¶æ’åº </span><br><span class="line">find . -size +100M  æŸ¥æ‰¾å½“å‰ç›®å½•å¤§äº100Mçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="5-3-locate"><a href="#5-3-locate" class="headerlink" title="5.3 locate"></a>5.3 locate</h3><p>locate è®©ä½¿ç”¨è€…å¯ä»¥å¾ˆå¿«é€Ÿçš„æœå¯»æŸä¸ªè·¯å¾„ã€‚é»˜è®¤æ¯å¤©è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡ï¼Œæ‰€ä»¥ä½¿ç”¨locate å‘½ä»¤æŸ¥ä¸åˆ°æœ€æ–°å˜åŠ¨è¿‡çš„æ–‡ä»¶ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨ä½¿ç”¨locateä¹‹å‰ï¼Œå…ˆä½¿ç”¨updatedbå‘½ä»¤ï¼Œæ‰‹åŠ¨æ›´æ–°æ•°æ®åº“ã€‚å¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰æŸ¥è¯¢çš„æ•°æ®ï¼Œåˆ™ä¼šæŠ¥å‡ºlocate: can not stat () &#96;&#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.dbâ€™: No such file or directoryè¯¥é”™è¯¯ï¼updatedbå³å¯ï¼</p><p>yum -y install mlocate å¦‚æœæ˜¯ç²¾ç®€ç‰ˆCentOSç³»ç»Ÿéœ€è¦å®‰è£…locateå‘½ä»¤</p><p>ä½¿ç”¨å®ä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">updatedb</span><br><span class="line">locate /etc/sh æœç´¢etcç›®å½•ä¸‹æ‰€æœ‰ä»¥shå¼€å¤´çš„æ–‡ä»¶ </span><br><span class="line">locate <span class="built_in">pwd</span> æŸ¥æ‰¾å’Œ<span class="built_in">pwd</span>ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="5-4-whereis"><a href="#5-4-whereis" class="headerlink" title="5.4 whereis"></a>5.4 whereis</h3><p>whereiså‘½ä»¤æ˜¯å®šä½å¯æ‰§è¡Œæ–‡ä»¶ã€æºä»£ç æ–‡ä»¶ã€å¸®åŠ©æ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä½ç½®ã€‚è¿™äº›æ–‡ä»¶çš„å±æ€§åº”å±äºåŸå§‹ä»£ç ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–æ˜¯å¸®åŠ©æ–‡ä»¶ã€‚</p><p>ä½¿ç”¨å®ä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis <span class="built_in">ls</span>    å°†å’Œ<span class="built_in">ls</span>æ–‡ä»¶ç›¸å…³çš„æ–‡ä»¶éƒ½æŸ¥æ‰¾å‡ºæ¥</span><br></pre></td></tr></table></figure><h3 id="5-5-which"><a href="#5-5-which" class="headerlink" title="5.5 which"></a>5.5 which</h3><p>whichå‘½ä»¤çš„ä½œç”¨æ˜¯åœ¨PATHå˜é‡æŒ‡å®šçš„è·¯å¾„ä¸­ï¼Œæœç´¢æŸä¸ªç³»ç»Ÿå‘½ä»¤çš„ä½ç½®ï¼Œå¹¶ä¸”è¿”å›ç¬¬ä¸€ä¸ªæœç´¢ç»“æœã€‚</p><p>ä½¿ç”¨å®ä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">pwd</span>  æŸ¥æ‰¾<span class="built_in">pwd</span>å‘½ä»¤æ‰€åœ¨è·¯å¾„ </span><br><span class="line"><span class="built_in">which</span> java  æŸ¥æ‰¾pathä¸­javaçš„è·¯å¾„ </span><br></pre></td></tr></table></figure><h2 id="å…­ã€suã€sudo"><a href="#å…­ã€suã€sudo" class="headerlink" title="å…­ã€suã€sudo"></a>å…­ã€suã€sudo</h2><h3 id="6-1-su"><a href="#6-1-su" class="headerlink" title="6.1 su"></a>6.1 su</h3><p>suç”¨äºç”¨æˆ·ä¹‹é—´çš„åˆ‡æ¢ã€‚ä½†æ˜¯åˆ‡æ¢å‰çš„ç”¨æˆ·ä¾ç„¶ä¿æŒç™»å½•çŠ¶æ€ã€‚å¦‚æœæ˜¯root å‘æ™®é€šæˆ–è™šæ‹Ÿç”¨æˆ·åˆ‡æ¢ä¸éœ€è¦å¯†ç ï¼Œåä¹‹æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°å…¶å®ƒä»»ä½•ç”¨æˆ·éƒ½éœ€è¦å¯†ç éªŒè¯ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su <span class="built_in">test</span>:åˆ‡æ¢åˆ°<span class="built_in">test</span>ç”¨æˆ·ï¼Œä½†æ˜¯è·¯å¾„è¿˜æ˜¯/rootç›®å½•</span><br><span class="line">su - <span class="built_in">test</span> : åˆ‡æ¢åˆ°<span class="built_in">test</span>ç”¨æˆ·ï¼Œè·¯å¾„å˜æˆäº†/home/test</span><br><span class="line">su : åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œä½†æ˜¯è·¯å¾„è¿˜æ˜¯åŸæ¥çš„è·¯å¾„</span><br><span class="line">su - : åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œå¹¶ä¸”è·¯å¾„æ˜¯/root</span><br></pre></td></tr></table></figure><p>suä¸è¶³ï¼šå¦‚æœæŸä¸ªç”¨æˆ·éœ€è¦ä½¿ç”¨rootæƒé™ã€åˆ™å¿…é¡»è¦æŠŠrootå¯†ç å‘Šè¯‰æ­¤ç”¨æˆ·ã€‚</p><p>é€€å‡ºè¿”å›ä¹‹å‰çš„ç”¨æˆ·ï¼šexit</p><h3 id="6-2-sudo"><a href="#6-2-sudo" class="headerlink" title="6.2 sudo"></a>6.2 sudo</h3><p>sudoæ˜¯ä¸ºæ‰€æœ‰æƒ³ä½¿ç”¨rootæƒé™çš„æ™®é€šç”¨æˆ·è®¾è®¡çš„ã€‚å¯ä»¥è®©æ™®é€šç”¨æˆ·å…·æœ‰ä¸´æ—¶ä½¿ç”¨rootæƒé™çš„æƒåˆ©ã€‚åªéœ€è¾“å…¥è‡ªå·±è´¦æˆ·çš„å¯†ç å³å¯ã€‚</p><p>è¿›å…¥sudoé…ç½®æ–‡ä»¶å‘½ä»¤ï¼š</p><p>vi &#x2F;etc&#x2F;sudoeræˆ–è€…visudo</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ¡ˆä¾‹ï¼š</span><br><span class="line">å…è®¸hadoopç”¨æˆ·ä»¥rootèº«ä»½æ‰§è¡Œå„ç§åº”ç”¨å‘½ä»¤ï¼Œéœ€è¦è¾“å…¥hadoopç”¨æˆ·çš„å¯†ç ã€‚</span><br><span class="line">hadoop  ALL=(ALL)   ALL </span><br><span class="line"></span><br><span class="line">æ¡ˆä¾‹ï¼š</span><br><span class="line">åªå…è®¸hadoopç”¨æˆ·ä»¥rootèº«ä»½æ‰§è¡Œ<span class="built_in">ls</span> ã€<span class="built_in">cat</span>å‘½ä»¤ï¼Œå¹¶ä¸”æ‰§è¡Œæ—¶å€™å…è¾“å…¥å¯†ç ã€‚ </span><br><span class="line">é…ç½®æ–‡ä»¶ä¸­ï¼š </span><br><span class="line">hadoop  ALL=NOPASSWD:  /bin/ls, /bin/cat </span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€ç³»ç»ŸæœåŠ¡"><a href="#ä¸ƒã€ç³»ç»ŸæœåŠ¡" class="headerlink" title="ä¸ƒã€ç³»ç»ŸæœåŠ¡"></a>ä¸ƒã€ç³»ç»ŸæœåŠ¡</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">service iptables status  --æŸ¥çœ‹iptablesæœåŠ¡çš„çŠ¶æ€</span><br><span class="line">service iptables start  --å¼€å¯iptablesæœåŠ¡</span><br><span class="line">service iptables stop  --åœæ­¢iptablesæœåŠ¡</span><br><span class="line">service iptables restart  --é‡å¯iptablesæœåŠ¡</span><br><span class="line"></span><br><span class="line">chkconfig iptables off  --å…³é—­iptablesæœåŠ¡çš„å¼€æœºè‡ªå¯åŠ¨</span><br><span class="line">chkconfig iptables on  --å¼€å¯iptablesæœåŠ¡çš„å¼€æœºè‡ªå¯åŠ¨</span><br></pre></td></tr></table></figure><h2 id="å…«ã€ç½‘ç»œç®¡ç†"><a href="#å…«ã€ç½‘ç»œç®¡ç†" class="headerlink" title="å…«ã€ç½‘ç»œç®¡ç†"></a>å…«ã€ç½‘ç»œç®¡ç†</h2><h3 id="8-1-ä¸»æœºåé…ç½®"><a href="#8-1-ä¸»æœºåé…ç½®" class="headerlink" title="8.1 ä¸»æœºåé…ç½®"></a>8.1 ä¸»æœºåé…ç½®</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]<span class="comment"># vi /etc/sysconfig/network</span></span><br><span class="line">NETWORKING=<span class="built_in">yes</span></span><br><span class="line">HOSTNAME=node1</span><br></pre></td></tr></table></figure><h3 id="8-2-IP-åœ°å€é…ç½®"><a href="#8-2-IP-åœ°å€é…ç½®" class="headerlink" title="8.2 IP åœ°å€é…ç½®"></a>8.2 IP åœ°å€é…ç½®</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]<span class="comment"># vi /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br></pre></td></tr></table></figure><h3 id="8-3-åŸŸåæ˜ å°„"><a href="#8-3-åŸŸåæ˜ å°„" class="headerlink" title="8.3 åŸŸåæ˜ å°„"></a>8.3 åŸŸåæ˜ å°„</h3><p>&#x2F;etc&#x2F;hostsæ–‡ä»¶ç”¨äºåœ¨é€šè¿‡ä¸»æœºåè¿›è¡Œè®¿é—®æ—¶åšipåœ°å€è§£æä¹‹ç”¨ã€‚æ‰€ä»¥ï¼Œä½ æƒ³è®¿é—®ä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¸»æœºåï¼Œå°±éœ€è¦æŠŠè¿™ä¸ªä¸»æœºåå’Œå®ƒå¯¹åº”çš„ipåœ°å€ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]<span class="comment"># vi /etc/hosts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">####åœ¨æœ€ååŠ ä¸Š</span></span><br><span class="line"></span><br><span class="line">192.168.52.201  node1</span><br><span class="line">192.168.52.202  node2</span><br><span class="line">192.168.52.203  node3</span><br></pre></td></tr></table></figure><h2 id="ä¹ã€å®šæ—¶ä»»åŠ¡æŒ‡ä»¤crontab-é…ç½®"><a href="#ä¹ã€å®šæ—¶ä»»åŠ¡æŒ‡ä»¤crontab-é…ç½®" class="headerlink" title="ä¹ã€å®šæ—¶ä»»åŠ¡æŒ‡ä»¤crontab é…ç½®"></a>ä¹ã€å®šæ—¶ä»»åŠ¡æŒ‡ä»¤crontab é…ç½®</h2><p>crontabæ˜¯Unixå’ŒLinuxç”¨äºè®¾ç½®å®šæ—¶ä»»åŠ¡çš„æŒ‡ä»¤ã€‚é€šè¿‡crontabå‘½ä»¤ï¼Œå¯ä»¥åœ¨å›ºå®šé—´éš”æ—¶é—´,æ‰§è¡ŒæŒ‡å®šçš„ç³»ç»ŸæŒ‡ä»¤æˆ–shellè„šæœ¬ã€‚æ—¶é—´é—´éš”çš„å•ä½å¯ä»¥æ˜¯åˆ†é’Ÿã€å°æ—¶ã€æ—¥ã€æœˆã€å‘¨åŠä»¥ä¸Šçš„ä»»æ„ç»„åˆã€‚</p><p>crontabå®‰è£…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install crontabs</span><br></pre></td></tr></table></figure><p>æœåŠ¡æ“ä½œè¯´æ˜ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service crond start   <span class="comment">## å¯åŠ¨æœåŠ¡ </span></span><br><span class="line">service crond stop    <span class="comment">## å…³é—­æœåŠ¡ </span></span><br><span class="line">service crond restart <span class="comment">## é‡å¯æœåŠ¡</span></span><br></pre></td></tr></table></figure><h3 id="9-1-å‘½ä»¤æ ¼å¼"><a href="#9-1-å‘½ä»¤æ ¼å¼" class="headerlink" title="9.1 å‘½ä»¤æ ¼å¼"></a>9.1 å‘½ä»¤æ ¼å¼</h3><p>crontab [-u user] file</p><p>crontab [-u user] [ -e | -l | -r ]</p><p>å‚æ•°è¯´æ˜ï¼š</p><p>-u userï¼šç”¨æ¥è®¾å®šæŸä¸ªç”¨æˆ·çš„crontabæœåŠ¡  </p><p>fileï¼šfileæ˜¯å‘½ä»¤æ–‡ä»¶çš„åå­—,è¡¨ç¤ºå°†fileåšä¸ºcrontabçš„ä»»åŠ¡åˆ—è¡¨æ–‡ä»¶</p><p>å¹¶è½½å…¥crontabã€‚</p><p>-eï¼šç¼–è¾‘æŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚å¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºç¼–è¾‘å½“å‰</p><p>ç”¨æˆ·çš„crontabæ–‡ä»¶ã€‚</p><p>-lï¼šæ˜¾ç¤ºæŸä¸ªç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚å¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™è¡¨ç¤ºæ˜¾ç¤ºå½“å‰</p><p>ç”¨æˆ·çš„crontabæ–‡ä»¶å†…å®¹ã€‚</p><p>-rï¼šåˆ é™¤å®šæ—¶ä»»åŠ¡é…ç½®ï¼Œä»&#x2F;var&#x2F;spool&#x2F;cronç›®å½•ä¸­åˆ é™¤æŸä¸ªç”¨æˆ·çš„crontab</p><p>æ–‡ä»¶ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œåˆ™é»˜è®¤åˆ é™¤å½“å‰ç”¨æˆ·çš„crontabæ–‡ä»¶ã€‚</p><p>å‘½ä»¤ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab file [-u user] <span class="comment">## ç”¨æŒ‡å®šçš„æ–‡ä»¶æ›¿ä»£ç›®å‰çš„crontab</span></span><br><span class="line">crontab -l [-u user]  <span class="comment">## åˆ—å‡ºç”¨æˆ·ç›®å‰çš„crontab</span></span><br><span class="line">crontab -e [-u user]  <span class="comment">## ç¼–è¾‘ç”¨æˆ·ç›®å‰çš„crontab</span></span><br></pre></td></tr></table></figure><h3 id="9-2-é…ç½®è¯´æ˜ã€å®ä¾‹"><a href="#9-2-é…ç½®è¯´æ˜ã€å®ä¾‹" class="headerlink" title="9.2 é…ç½®è¯´æ˜ã€å®ä¾‹"></a>9.2 é…ç½®è¯´æ˜ã€å®ä¾‹</h3><p>å‘½ä»¤ï¼š*   *    *   *   *   command  </p><p>è§£é‡Šï¼šåˆ†  æ—¶  æ—¥  æœˆ  å‘¨  å‘½ä»¤</p><p>ç¬¬1åˆ—è¡¨ç¤ºåˆ†é’Ÿ1ï½59 æ¯åˆ†é’Ÿç”¨*æˆ–è€… *&#x2F;1è¡¨ç¤º    </p><p>ç¬¬2åˆ—è¡¨ç¤ºå°æ—¶0ï½23ï¼ˆ0è¡¨ç¤º0ç‚¹ï¼‰</p><p>ç¬¬3åˆ—è¡¨ç¤ºæ—¥æœŸ1ï½31  </p><p>ç¬¬4åˆ—è¡¨ç¤ºæœˆä»½1ï½12  </p><p>ç¬¬5åˆ—æ ‡è¯†å·æ˜ŸæœŸ0ï½6ï¼ˆ0è¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰  </p><p>ç¬¬6åˆ—è¦è¿è¡Œçš„å‘½ä»¤</p><p>é…ç½®å®ä¾‹ï¼š</p> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">å…ˆæ‰“å¼€å®šæ—¶ä»»åŠ¡æ‰€åœ¨çš„æ–‡ä»¶ï¼š</span><br><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line">æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡<span class="built_in">date</span>å‘½ä»¤ </span><br><span class="line">*/1 * * * * <span class="built_in">date</span> &gt;&gt; /root/date.txt</span><br><span class="line"></span><br><span class="line">æ¯æ™šçš„21:30é‡å¯apacheã€‚ </span><br><span class="line">30 21 * * * service httpd restart</span><br><span class="line"></span><br><span class="line">æ¯æœˆ1ã€10ã€22æ—¥çš„4 : 45é‡å¯apacheã€‚  </span><br><span class="line">45 4 1,10,22 * * service httpd restart</span><br><span class="line"></span><br><span class="line">æ¯å‘¨å…­ã€å‘¨æ—¥çš„1 : 10é‡å¯apacheã€‚ </span><br><span class="line">10 1 * * 6,0 service httpd restart</span><br><span class="line"></span><br><span class="line">æ¯å¤©18 : 00è‡³23 : 00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯apacheã€‚</span><br><span class="line">0,30   18-23    *   *   *   service httpd restart</span><br><span class="line">æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯apache</span><br><span class="line"></span><br><span class="line">* 23-7/1    *   *   *   service httpd restart</span><br></pre></td></tr></table></figure><h2 id="åã€å…¶ä»–å‘½ä»¤"><a href="#åã€å…¶ä»–å‘½ä»¤" class="headerlink" title="åã€å…¶ä»–å‘½ä»¤"></a>åã€å…¶ä»–å‘½ä»¤</h2><h3 id="10-1-æŸ¥çœ‹å½“å‰ç›®å½•ï¼špwd"><a href="#10-1-æŸ¥çœ‹å½“å‰ç›®å½•ï¼špwd" class="headerlink" title="10.1 æŸ¥çœ‹å½“å‰ç›®å½•ï¼špwd"></a>10.1 æŸ¥çœ‹å½“å‰ç›®å½•ï¼špwd</h3><p>å‘½ä»¤ï¼špwd     æŸ¥çœ‹å½“å‰ç›®å½•è·¯å¾„</p><h3 id="10-2-æŸ¥çœ‹è¿›ç¨‹ï¼šps-ef"><a href="#10-2-æŸ¥çœ‹è¿›ç¨‹ï¼šps-ef" class="headerlink" title="10.2 æŸ¥çœ‹è¿›ç¨‹ï¼šps -ef"></a>10.2 æŸ¥çœ‹è¿›ç¨‹ï¼šps -ef</h3><p>å‘½ä»¤ï¼šps -ef    æŸ¥çœ‹æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</p><h3 id="10-3-ç»“æŸè¿›ç¨‹ï¼škill"><a href="#10-3-ç»“æŸè¿›ç¨‹ï¼škill" class="headerlink" title="10.3 ç»“æŸè¿›ç¨‹ï¼škill"></a>10.3 ç»“æŸè¿›ç¨‹ï¼škill</h3><p>å‘½ä»¤ï¼škill pid æˆ–è€… kill -9 pid(å¼ºåˆ¶æ€æ­»è¿›ç¨‹)           pid:è¿›ç¨‹å·</p><h3 id="10-4-ç½‘ç»œé€šä¿¡å‘½ä»¤ï¼š"><a href="#10-4-ç½‘ç»œé€šä¿¡å‘½ä»¤ï¼š" class="headerlink" title="10.4 ç½‘ç»œé€šä¿¡å‘½ä»¤ï¼š"></a>10.4 ç½‘ç»œé€šä¿¡å‘½ä»¤ï¼š</h3><p>ifconfigï¼šæŸ¥çœ‹ç½‘å¡ä¿¡æ¯</p><p>å‘½ä»¤ï¼šifconfig æˆ– ifconfig | more</p><p>pingï¼šæŸ¥çœ‹ä¸æŸå°æœºå™¨çš„è¿æ¥æƒ…å†µ</p><p>å‘½ä»¤ï¼šping ip</p><p>netstat -anï¼šæŸ¥çœ‹å½“å‰ç³»ç»Ÿç«¯å£</p><p>å‘½ä»¤ï¼šnetstat -an</p><p>æœç´¢æŒ‡å®šç«¯å£<br>å‘½ä»¤ï¼šnetstat -an | grep 8080</p><h3 id="10-5-é…ç½®ç½‘ç»œ"><a href="#10-5-é…ç½®ç½‘ç»œ" class="headerlink" title="10.5 é…ç½®ç½‘ç»œ"></a>10.5 é…ç½®ç½‘ç»œ</h3><p>å‘½ä»¤ï¼šsetup</p><h3 id="10-6-é‡å¯ç½‘ç»œ"><a href="#10-6-é‡å¯ç½‘ç»œ" class="headerlink" title="10.6 é‡å¯ç½‘ç»œ"></a>10.6 é‡å¯ç½‘ç»œ</h3><p>å‘½ä»¤ï¼šservice network restart</p><h3 id="10-7-åˆ‡æ¢ç”¨æˆ·"><a href="#10-7-åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="10.7 åˆ‡æ¢ç”¨æˆ·"></a>10.7 åˆ‡æ¢ç”¨æˆ·</h3><p>å‘½ä»¤ï¼šsu - ç”¨æˆ·å</p><h3 id="10-8-å…³é—­é˜²ç«å¢™"><a href="#10-8-å…³é—­é˜²ç«å¢™" class="headerlink" title="10.8 å…³é—­é˜²ç«å¢™"></a>10.8 å…³é—­é˜²ç«å¢™</h3><p>å‘½ä»¤ï¼šchkconfig iptables off</p><p>æˆ–è€…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -L;</span><br><span class="line">iptables -F;</span><br><span class="line">service iptables stop</span><br></pre></td></tr></table></figure><h3 id="10-9-ä¿®æ”¹æ–‡ä»¶æƒé™"><a href="#10-9-ä¿®æ”¹æ–‡ä»¶æƒé™" class="headerlink" title="10.9 ä¿®æ”¹æ–‡ä»¶æƒé™"></a>10.9 ä¿®æ”¹æ–‡ä»¶æƒé™</h3><p>å‘½ä»¤ï¼šchmod 777</p><h3 id="10-10-æ¸…å±"><a href="#10-10-æ¸…å±" class="headerlink" title="10.10 æ¸…å±"></a>10.10 æ¸…å±</h3><p>å‘½ä»¤ï¼šctrl + l</p><h3 id="10-11-viæ¨¡å¼ä¸‹å¿«æ·é”®"><a href="#10-11-viæ¨¡å¼ä¸‹å¿«æ·é”®" class="headerlink" title="10.11 viæ¨¡å¼ä¸‹å¿«æ·é”®"></a>10.11 viæ¨¡å¼ä¸‹å¿«æ·é”®</h3><p>escå:</p><p>ä¿å­˜å¹¶é€€å‡ºå¿«æ·é”®ï¼šshift+z+z</p><p>å…‰æ ‡è·³åˆ°æœ€åä¸€è¡Œå¿«æ·é”®ï¼šshift+g</p><p>åˆ é™¤ä¸€è¡Œï¼šdd</p><p>å¤åˆ¶ä¸€è¡Œå†…å®¹ï¼šy+y</p><p>ç²˜è´´å¤åˆ¶çš„å†…å®¹ï¼šp</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMapå¾ªç¯éå†</title>
      <link href="/2020/11/18/Java_10_HashMap%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86/"/>
      <url>/2020/11/18/Java_10_HashMap%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86/</url>
      
        <content type="html"><![CDATA[<p>HashMap éå†ä»å¤§çš„æ–¹å‘æ¥è¯´ï¼Œå¯åˆ†ä¸ºä»¥ä¸‹ 4 ç±»ï¼š</p><ol><li>è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ–¹å¼éå†ï¼›</li><li>For Each æ–¹å¼éå†ï¼›</li><li>Lambda è¡¨è¾¾å¼éå†ï¼ˆJDK 1.8+ï¼‰;</li><li>Streams API éå†ï¼ˆJDK 1.8+ï¼‰ã€‚</li></ol><span id="more"></span><p>ä½†æ¯ç§ç±»å‹ä¸‹åˆæœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œå› æ­¤å…·ä½“çš„éå†æ–¹å¼åˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ 7 ç§ï¼š</p><ol><li>ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰EntrySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</li><li>ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰KeySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</li><li>ä½¿ç”¨ For Each EntrySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</li><li>ä½¿ç”¨ For Each KeySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›</li><li>ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„æ–¹å¼è¿›è¡Œéå†ï¼›</li><li>ä½¿ç”¨ Streams API å•çº¿ç¨‹çš„æ–¹å¼è¿›è¡Œéå†ï¼›</li><li>ä½¿ç”¨ Streams API å¤šçº¿ç¨‹çš„æ–¹å¼è¿›è¡Œéå†ã€‚</li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹æ¯ç§éå†æ–¹å¼çš„å…·ä½“å®ç°ä»£ç ã€‚</p><h3 id="1-è¿­ä»£å™¨-EntrySet"><a href="#1-è¿­ä»£å™¨-EntrySet" class="headerlink" title="1.è¿­ä»£å™¨ EntrySet"></a>1.è¿­ä»£å™¨ EntrySet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span><br><span class="line">        Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Spring Framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">4</span>, <span class="string">&quot;MyBatis framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">5</span>, <span class="string">&quot;ä¸æˆ–é&quot;</span>);</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        Iterator&lt;Map.Entry&lt;Integer, String&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Map.Entry&lt;Integer, String&gt; entry = iterator.next();</span><br><span class="line">            System.out.println(entry.getKey());</span><br><span class="line">            System.out.println(entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><blockquote><p>1</p><p>Java</p><p>2</p><p>JDK</p><p>3</p><p>Spring Framework</p><p>4</p><p>MyBatis framework</p><p>5</p><p>ä¸æˆ–é</p></blockquote><h3 id="2-è¿­ä»£å™¨-KeySet"><a href="#2-è¿­ä»£å™¨-KeySet" class="headerlink" title="2.è¿­ä»£å™¨ KeySet"></a>2.è¿­ä»£å™¨ KeySet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span><br><span class="line">        Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Spring Framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">4</span>, <span class="string">&quot;MyBatis framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">5</span>, <span class="string">&quot;ä¸æˆ–é&quot;</span>);</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        Iterator&lt;Integer&gt; iterator = map.keySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">key</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            System.out.println(key);</span><br><span class="line">            System.out.println(map.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><blockquote><p>1</p><p>Java</p><p>2</p><p>JDK</p><p>3</p><p>Spring Framework</p><p>4</p><p>MyBatis framework</p><p>5</p><p>ä¸æˆ–é</p></blockquote><h3 id="3-ForEach-EntrySet"><a href="#3-ForEach-EntrySet" class="headerlink" title="3.ForEach EntrySet"></a>3.ForEach EntrySet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span><br><span class="line">        Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Spring Framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">4</span>, <span class="string">&quot;MyBatis framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">5</span>, <span class="string">&quot;ä¸æˆ–é&quot;</span>);</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, String&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey());</span><br><span class="line">            System.out.println(entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><blockquote><p>1</p><p>Java</p><p>2</p><p>JDK</p><p>3</p><p>Spring Framework</p><p>4</p><p>MyBatis framework</p><p>5</p><p>ä¸æˆ–é</p></blockquote><h3 id="4-ForEach-KeySet"><a href="#4-ForEach-KeySet" class="headerlink" title="4.ForEach KeySet"></a>4.ForEach KeySet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span><br><span class="line">        Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Spring Framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">4</span>, <span class="string">&quot;MyBatis framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">5</span>, <span class="string">&quot;ä¸æˆ–é&quot;</span>);</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        <span class="keyword">for</span> (Integer key : map.keySet()) &#123;</span><br><span class="line">            System.out.println(key);</span><br><span class="line">            System.out.println(map.get(key));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><blockquote><p>1</p><p>Java</p><p>2</p><p>JDK</p><p>3</p><p>Spring Framework</p><p>4</p><p>MyBatis framework</p><p>5</p><p>ä¸æˆ–é</p></blockquote><h3 id="5-Lambda"><a href="#5-Lambda" class="headerlink" title="5.Lambda"></a>5.Lambda</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span><br><span class="line">        Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Spring Framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">4</span>, <span class="string">&quot;MyBatis framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">5</span>, <span class="string">&quot;ä¸æˆ–é&quot;</span>);</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        map.forEach((key, value) -&gt; &#123;</span><br><span class="line">            System.out.println(key);</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><blockquote><p>1</p><p>Java</p><p>2</p><p>JDK</p><p>3</p><p>Spring Framework</p><p>4</p><p>MyBatis framework</p><p>5</p><p>ä¸æˆ–é</p></blockquote><h3 id="6-Streams-API-å•çº¿ç¨‹"><a href="#6-Streams-API-å•çº¿ç¨‹" class="headerlink" title="6.Streams API å•çº¿ç¨‹"></a>6.Streams API å•çº¿ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span><br><span class="line">        Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Spring Framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">4</span>, <span class="string">&quot;MyBatis framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">5</span>, <span class="string">&quot;ä¸æˆ–é&quot;</span>);</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        map.entrySet().stream().forEach((entry) -&gt; &#123;</span><br><span class="line">            System.out.println(entry.getKey());</span><br><span class="line">            System.out.println(entry.getValue());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><blockquote><p>1</p><p>Java</p><p>2</p><p>JDK</p><p>3</p><p>Spring Framework</p><p>4</p><p>MyBatis framework</p><p>5</p><p>ä¸æˆ–é</p></blockquote><h3 id="7-Streams-API-å¤šçº¿ç¨‹"><a href="#7-Streams-API-å¤šçº¿ç¨‹" class="headerlink" title="7.Streams API å¤šçº¿ç¨‹"></a>7.Streams API å¤šçº¿ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºå¹¶èµ‹å€¼ HashMap</span></span><br><span class="line">        Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        map.put(<span class="number">1</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        map.put(<span class="number">2</span>, <span class="string">&quot;JDK&quot;</span>);</span><br><span class="line">        map.put(<span class="number">3</span>, <span class="string">&quot;Spring Framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">4</span>, <span class="string">&quot;MyBatis framework&quot;</span>);</span><br><span class="line">        map.put(<span class="number">5</span>, <span class="string">&quot;ä¸æˆ–é&quot;</span>);</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        map.entrySet().parallelStream().forEach((entry) -&gt; &#123;</span><br><span class="line">            System.out.println(entry.getKey());</span><br><span class="line">            System.out.println(entry.getValue());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœä¸ºï¼š</p><blockquote><p>4</p><p>MyBatis framework</p><p>5</p><p>ä¸æˆ–é</p><p>1</p><p>Java</p><p>2</p><p>JDK</p><p>3</p><p>Spring Framework</p></blockquote><h3 id="æ€§èƒ½æµ‹è¯•"><a href="#æ€§èƒ½æµ‹è¯•" class="headerlink" title="æ€§èƒ½æµ‹è¯•"></a>æ€§èƒ½æµ‹è¯•</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ Oracle å®˜æ–¹æä¾›çš„æ€§èƒ½æµ‹è¯•å·¥å…· JMHï¼ˆJava Microbenchmark Harnessï¼ŒJAVA å¾®åŸºå‡†æµ‹è¯•å¥—ä»¶ï¼‰æ¥æµ‹è¯•ä¸€ä¸‹è¿™ 7 ç§å¾ªç¯çš„æ€§èƒ½ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè¦å¼•å…¥ JMH æ¡†æ¶ï¼Œåœ¨ <code>pom.xml</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.openjdk.jmh/jmh-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.openjdk.jmh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jmh-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.openjdk.jmh/jmh-generator-annprocess --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.openjdk.jmh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jmh-generator-annprocess<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åç¼–å†™æµ‹è¯•ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@BenchmarkMode(Mode.AverageTime)</span> <span class="comment">// æµ‹è¯•å®Œæˆæ—¶é—´</span></span><br><span class="line"><span class="meta">@OutputTimeUnit(TimeUnit.NANOSECONDS)</span></span><br><span class="line"><span class="meta">@Warmup(iterations = 2, time = 1, timeUnit = TimeUnit.SECONDS)</span> <span class="comment">// é¢„çƒ­ 2 è½®ï¼Œæ¯æ¬¡ 1s</span></span><br><span class="line"><span class="meta">@Measurement(iterations = 5, time = 1, timeUnit = TimeUnit.SECONDS)</span> <span class="comment">// æµ‹è¯• 5 è½®ï¼Œæ¯æ¬¡ 1s</span></span><br><span class="line"><span class="meta">@Fork(1)</span> <span class="comment">// fork 1 ä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="meta">@State(Scope.Thread)</span> <span class="comment">// æ¯ä¸ªæµ‹è¯•çº¿ç¨‹ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapCycleTest</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>() &#123;&#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            put(i, <span class="string">&quot;val:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> RunnerException &#123;</span><br><span class="line">        <span class="comment">// å¯åŠ¨åŸºå‡†æµ‹è¯•</span></span><br><span class="line">        <span class="type">Options</span> <span class="variable">opt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OptionsBuilder</span>()</span><br><span class="line">                .include(HashMapCycle.class.getSimpleName()) <span class="comment">// è¦å¯¼å…¥çš„æµ‹è¯•ç±»</span></span><br><span class="line">                .output(<span class="string">&quot;/Users/admin/Desktop/jmh-map.log&quot;</span>) <span class="comment">// è¾“å‡ºæµ‹è¯•ç»“æœçš„æ–‡ä»¶</span></span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Runner</span>(opt).run(); <span class="comment">// æ‰§è¡Œæµ‹è¯•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">entrySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        Iterator&lt;Map.Entry&lt;Integer, String&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Map.Entry&lt;Integer, String&gt; entry = iterator.next();</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">v</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">forEachEntrySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;Integer, String&gt; entry : map.entrySet()) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">v</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        Iterator&lt;Integer&gt; iterator = map.keySet().iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            <span class="type">String</span> <span class="variable">v</span> <span class="operator">=</span> map.get(k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">forEachKeySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        <span class="keyword">for</span> (Integer key : map.keySet()) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> key;</span><br><span class="line">            <span class="type">String</span> <span class="variable">v</span> <span class="operator">=</span> map.get(k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">lambda</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// éå†</span></span><br><span class="line">        map.forEach((key, value) -&gt; &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> key;</span><br><span class="line">            <span class="type">String</span> <span class="variable">v</span> <span class="operator">=</span> value;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Benchmark</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">streamApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å•çº¿ç¨‹éå†</span></span><br><span class="line">        map.entrySet().stream().forEach((entry) -&gt; &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">v</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parallelStreamApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å¤šçº¿ç¨‹éå†</span></span><br><span class="line">        map.entrySet().parallelStream().forEach((entry) -&gt; &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">String</span> <span class="variable">v</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰è¢«æ·»åŠ äº† <code>@Benchmark</code> æ³¨è§£çš„æ–¹æ³•éƒ½ä¼šè¢«æµ‹è¯•ï¼Œå› ä¸º parallelStream ä¸ºå¤šçº¿ç¨‹ç‰ˆæœ¬æ€§èƒ½ä¸€å®šæ˜¯æœ€å¥½çš„ï¼Œæ‰€ä»¥å°±ä¸å‚ä¸æµ‹è¯•äº†ï¼Œå…¶ä»– 6 ä¸ªæ–¹æ³•çš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/hashmap1.webp" alt="å›¾ç‰‡"></p><p>å…¶ä¸­ Units ä¸º ns&#x2F;op æ„æ€æ˜¯æ‰§è¡Œå®Œæˆæ—¶é—´ï¼ˆå•ä½ä¸ºçº³ç§’ï¼‰ï¼Œè€Œ Score åˆ—ä¸ºå¹³å‡æ‰§è¡Œæ—¶é—´ï¼Œ <code>Â±</code> ç¬¦å·è¡¨ç¤ºè¯¯å·®ã€‚ä»ä»¥ä¸Šç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ª <code>entrySet</code> çš„æ€§èƒ½ç›¸è¿‘ï¼Œå¹¶ä¸”æ‰§è¡Œé€Ÿåº¦æœ€å¿«ï¼Œæ¥ä¸‹æ¥æ˜¯ <code>stream</code> ï¼Œç„¶åæ˜¯ä¸¤ä¸ª <code>keySet</code>ï¼Œæ€§èƒ½æœ€å·®çš„æ˜¯ <code>KeySet</code> ã€‚</p><blockquote><p>æ³¨ï¼šä»¥ä¸Šç»“æœåŸºäºæµ‹è¯•ç¯å¢ƒï¼šJDK 1.8 &#x2F; Mac mini (2018) &#x2F; Idea 2020.1</p></blockquote><h4 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h4><p><strong>ä»ä»¥ä¸Šç»“æœå¯ä»¥çœ‹å‡º <code>entrySet</code> çš„æ€§èƒ½æ¯” <code>keySet</code> çš„æ€§èƒ½é«˜å‡ºäº†ä¸€å€ä¹‹å¤šï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨ <code>entrySet</code> æ¥å®ç° Map é›†åˆçš„éå†</strong>ã€‚</p><h3 id="å­—èŠ‚ç åˆ†æ"><a href="#å­—èŠ‚ç åˆ†æ" class="headerlink" title="å­—èŠ‚ç åˆ†æ"></a>å­—èŠ‚ç åˆ†æ</h3><p>è¦ç†è§£ä»¥ä¸Šçš„æµ‹è¯•ç»“æœï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰éå†ä»£ç é€šè¿‡ <code>javac</code> ç¼–è¯‘æˆå­—èŠ‚ç æ¥çœ‹å…·ä½“çš„åŸå› ã€‚</p><p>ç¼–è¯‘åï¼Œæˆ‘ä»¬ä½¿ç”¨ Idea æ‰“å¼€å­—èŠ‚ç ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by Fernflower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Map.Entry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapTest</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> Map&lt;Integer, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>() &#123;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">var1</span> <span class="operator">=</span> <span class="number">0</span>; var1 &lt; <span class="number">2</span>; ++var1) &#123;</span><br><span class="line">                <span class="built_in">this</span>.put(var1, <span class="string">&quot;val:&quot;</span> + var1);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HashMapTest</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] var0)</span> &#123;</span><br><span class="line">        entrySet();</span><br><span class="line">        keySet();</span><br><span class="line">        forEachEntrySet();</span><br><span class="line">        forEachKeySet();</span><br><span class="line">        lambda();</span><br><span class="line">        streamApi();</span><br><span class="line">        parallelStreamApi();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">entrySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.entrySet().iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">            <span class="type">Entry</span> <span class="variable">var1</span> <span class="operator">=</span> (Entry)var0.next();</span><br><span class="line">            System.out.println(var1.getKey());</span><br><span class="line">            System.out.println((String)var1.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">keySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.keySet().iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">var1</span> <span class="operator">=</span> (Integer)var0.next();</span><br><span class="line">            System.out.println(var1);</span><br><span class="line">            System.out.println((String)map.get(var1));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">forEachEntrySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.entrySet().iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">            <span class="type">Entry</span> <span class="variable">var1</span> <span class="operator">=</span> (Entry)var0.next();</span><br><span class="line">            System.out.println(var1.getKey());</span><br><span class="line">            System.out.println((String)var1.getValue());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">forEachKeySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.keySet().iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">var1</span> <span class="operator">=</span> (Integer)var0.next();</span><br><span class="line">            System.out.println(var1);</span><br><span class="line">            System.out.println((String)map.get(var1));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">lambda</span><span class="params">()</span> &#123;</span><br><span class="line">        map.forEach((var0, var1) -&gt; &#123;</span><br><span class="line">            System.out.println(var0);</span><br><span class="line">            System.out.println(var1);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">streamApi</span><span class="params">()</span> &#123;</span><br><span class="line">        map.entrySet().stream().forEach((var0) -&gt; &#123;</span><br><span class="line">            System.out.println(var0.getKey());</span><br><span class="line">            System.out.println((String)var0.getValue());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">parallelStreamApi</span><span class="params">()</span> &#123;</span><br><span class="line">        map.entrySet().parallelStream().forEach((var0) -&gt; &#123;</span><br><span class="line">            System.out.println(var0.getKey());</span><br><span class="line">            System.out.println((String)var0.getValue());</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œé™¤äº† Lambda å’Œ Streams API ä¹‹å¤–ï¼Œé€šè¿‡è¿­ä»£å™¨å¾ªç¯å’Œ <code>for</code> å¾ªç¯çš„éå†çš„ <code>EntrySet</code> æœ€ç»ˆç”Ÿæˆçš„ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œä»–ä»¬éƒ½æ˜¯åœ¨å¾ªç¯ä¸­åˆ›å»ºäº†ä¸€ä¸ªéå†å¯¹è±¡ <code>Entry</code> ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">entrySet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.entrySet().iterator();</span><br><span class="line">    <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">        <span class="type">Entry</span> <span class="variable">var1</span> <span class="operator">=</span> (Entry)var0.next();</span><br><span class="line">        System.out.println(var1.getKey());</span><br><span class="line">        System.out.println((String)var1.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">forEachEntrySet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.entrySet().iterator();</span><br><span class="line">    <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">        <span class="type">Entry</span> <span class="variable">var1</span> <span class="operator">=</span> (Entry)var0.next();</span><br><span class="line">        System.out.println(var1.getKey());</span><br><span class="line">        System.out.println((String)var1.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œ <code>KeySet</code> çš„ä»£ç ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">keySet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.keySet().iterator();</span><br><span class="line">    <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">var1</span> <span class="operator">=</span> (Integer)var0.next();</span><br><span class="line">        System.out.println(var1);</span><br><span class="line">        System.out.println((String)map.get(var1));</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">forEachKeySet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">var0</span> <span class="operator">=</span> map.keySet().iterator();</span><br><span class="line">    <span class="keyword">while</span>(var0.hasNext()) &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">var1</span> <span class="operator">=</span> (Integer)var0.next();</span><br><span class="line">        System.out.println(var1);</span><br><span class="line">        System.out.println((String)map.get(var1));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨è¿­ä»£å™¨æˆ–æ˜¯ <code>for</code> å¾ªç¯ <code>EntrySet</code> æ—¶ï¼Œä»–ä»¬çš„æ€§èƒ½éƒ½æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºä»–ä»¬æœ€ç»ˆç”Ÿæˆçš„å­—èŠ‚ç åŸºæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼›åŒç† <code>KeySet</code> çš„ä¸¤ç§éå†æ–¹å¼ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚</p><h3 id="æ€§èƒ½åˆ†æ"><a href="#æ€§èƒ½åˆ†æ" class="headerlink" title="æ€§èƒ½åˆ†æ"></a>æ€§èƒ½åˆ†æ</h3><p><code>EntrySet</code> ä¹‹æ‰€ä»¥æ¯” <code>KeySet</code> çš„æ€§èƒ½é«˜æ˜¯å› ä¸ºï¼Œ<code>KeySet</code> åœ¨å¾ªç¯æ—¶ä½¿ç”¨äº† <code>map.get(key)</code>ï¼Œè€Œ <code>map.get(key)</code> ç›¸å½“äºåˆéå†äº†ä¸€é Map é›†åˆå»æŸ¥è¯¢ <code>key</code> æ‰€å¯¹åº”çš„å€¼ã€‚ä¸ºä»€ä¹ˆè¦ç”¨â€œåˆâ€è¿™ä¸ªè¯ï¼Ÿé‚£æ˜¯å› ä¸º<strong>åœ¨ä½¿ç”¨è¿­ä»£å™¨æˆ–è€… for å¾ªç¯æ—¶ï¼Œå…¶å®å·²ç»éå†äº†ä¸€é Map é›†åˆäº†ï¼Œå› æ­¤å†ä½¿ç”¨ <code>map.get(key)</code> æŸ¥è¯¢æ—¶ï¼Œç›¸å½“äºéå†äº†ä¸¤é</strong>ã€‚</p><p>è€Œ <code>EntrySet</code> åªéå†äº†ä¸€é Map é›†åˆï¼Œä¹‹åé€šè¿‡ä»£ç â€œEntry&lt;Integer, String&gt; entry &#x3D; iterator.next()â€æŠŠå¯¹è±¡çš„ <code>key</code> å’Œ <code>value</code> å€¼éƒ½æ”¾å…¥åˆ°äº† <code>Entry</code> å¯¹è±¡ä¸­ï¼Œå› æ­¤å†è·å– <code>key</code> å’Œ <code>value</code> å€¼æ—¶å°±æ— éœ€å†éå† Map é›†åˆï¼Œåªéœ€è¦ä» <code>Entry</code> å¯¹è±¡ä¸­å–å€¼å°±å¯ä»¥äº†ã€‚</p><p>æ‰€ä»¥ï¼Œ**<code>EntrySet</code> çš„æ€§èƒ½æ¯” <code>KeySet</code> çš„æ€§èƒ½é«˜å‡ºäº†ä¸€å€ï¼Œå› ä¸º <code>KeySet</code> ç›¸å½“äºå¾ªç¯äº†ä¸¤é Map é›†åˆï¼Œè€Œ <code>EntrySet</code> åªå¾ªç¯äº†ä¸€é**ã€‚</p><h3 id="å®‰å…¨æ€§æµ‹è¯•"><a href="#å®‰å…¨æ€§æµ‹è¯•" class="headerlink" title="å®‰å…¨æ€§æµ‹è¯•"></a>å®‰å…¨æ€§æµ‹è¯•</h3><p>ä»ä¸Šé¢çš„æ€§èƒ½æµ‹è¯•ç»“æœå’ŒåŸç†åˆ†æï¼Œæˆ‘æƒ³å¤§å®¶åº”è¯¥é€‰ç”¨é‚£ç§éå†æ–¹å¼ï¼Œå·²ç»å¿ƒä¸­æœ‰æ•°çš„ï¼Œè€Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»ã€Œå®‰å…¨ã€çš„è§’åº¦å…¥æ‰‹ï¼Œæ¥åˆ†æé‚£ç§éå†æ–¹å¼æ›´å®‰å…¨ã€‚</p><p>æˆ‘ä»¬æŠŠä»¥ä¸Šéå†åˆ’åˆ†ä¸ºå››ç±»è¿›è¡Œæµ‹è¯•ï¼šè¿­ä»£å™¨æ–¹å¼ã€For å¾ªç¯æ–¹å¼ã€Lambda æ–¹å¼å’Œ Stream æ–¹å¼ï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹ã€‚</p><h4 id="1-è¿­ä»£å™¨æ–¹å¼"><a href="#1-è¿­ä»£å™¨æ–¹å¼" class="headerlink" title="1.è¿­ä»£å™¨æ–¹å¼"></a>1.è¿­ä»£å™¨æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Map.Entry&lt;Integer, String&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">    Map.Entry&lt;Integer, String&gt; entry = iterator.next();</span><br><span class="line">    <span class="keyword">if</span> (entry.getKey() == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤</span></span><br><span class="line">        System.out.println(<span class="string">&quot;del:&quot;</span> + entry.getKey());</span><br><span class="line">        iterator.remove();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;show:&quot;</span> + entry.getKey());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœï¼š</p><blockquote><p>show:0</p><p>del:1</p><p>show:2</p></blockquote><p>æµ‹è¯•ç»“æœï¼š<strong>è¿­ä»£å™¨ä¸­å¾ªç¯åˆ é™¤æ•°æ®å®‰å…¨</strong>ã€‚</p><h4 id="2-For-å¾ªç¯æ–¹å¼"><a href="#2-For-å¾ªç¯æ–¹å¼" class="headerlink" title="2.For å¾ªç¯æ–¹å¼"></a>2.For å¾ªç¯æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Map.Entry&lt;Integer, String&gt; entry : map.entrySet()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (entry.getKey() == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤</span></span><br><span class="line">        System.out.println(<span class="string">&quot;del:&quot;</span> + entry.getKey());</span><br><span class="line">        map.remove(entry.getKey());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;show:&quot;</span> + entry.getKey());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/hashmap2.png" alt="å›¾ç‰‡"></p><p>æµ‹è¯•ç»“æœï¼š<strong>For å¾ªç¯ä¸­åˆ é™¤æ•°æ®éå®‰å…¨</strong>ã€‚</p><h4 id="3-Lambda-æ–¹å¼"><a href="#3-Lambda-æ–¹å¼" class="headerlink" title="3.Lambda æ–¹å¼"></a>3.Lambda æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map.forEach((key, value) -&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="number">1</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;del:&quot;</span> + key);</span><br><span class="line">        map.remove(key);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;show:&quot;</span> + key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/hashmap3.png" alt="å›¾ç‰‡">æµ‹è¯•ç»“æœï¼š<strong>Lambda å¾ªç¯ä¸­åˆ é™¤æ•°æ®éå®‰å…¨</strong>ã€‚</p><p><strong>Lambda åˆ é™¤çš„æ­£ç¡®æ–¹å¼</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® map ä¸­çš„ key å»åˆ¤æ–­åˆ é™¤</span></span><br><span class="line">map.keySet().removeIf(key -&gt; key == <span class="number">1</span>);</span><br><span class="line">map.forEach((key, value) -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;show:&quot;</span> + key);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœï¼š</p><blockquote><p>show:0</p><p>show:2</p></blockquote><p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå¯ä»¥å…ˆä½¿ç”¨ <code>Lambda</code> çš„ <code>removeIf</code> åˆ é™¤å¤šä½™çš„æ•°æ®ï¼Œå†è¿›è¡Œå¾ªç¯æ˜¯ä¸€ç§æ­£ç¡®æ“ä½œé›†åˆçš„æ–¹å¼ã€‚</p><h4 id="4-Stream-æ–¹å¼"><a href="#4-Stream-æ–¹å¼" class="headerlink" title="4.Stream æ–¹å¼"></a>4.Stream æ–¹å¼</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map.entrySet().stream().forEach((entry) -&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (entry.getKey() == <span class="number">1</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;del:&quot;</span> + entry.getKey());</span><br><span class="line">        map.remove(entry.getKey());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;show:&quot;</span> + entry.getKey());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœï¼š</p><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/hashmap4.png" alt="å›¾ç‰‡"></p><p>æµ‹è¯•ç»“æœï¼š<strong>Stream å¾ªç¯ä¸­åˆ é™¤æ•°æ®éå®‰å…¨</strong>ã€‚</p><p><strong>Stream å¾ªç¯çš„æ­£ç¡®æ–¹å¼</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">map.entrySet().stream().filter(m -&gt; <span class="number">1</span> != m.getKey()).forEach((entry) -&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (entry.getKey() == <span class="number">1</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;del:&quot;</span> + entry.getKey());</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;show:&quot;</span> + entry.getKey());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¨‹åºçš„æ‰§è¡Œç»“æœï¼š</p><blockquote><p>show:0</p><p>show:2</p></blockquote><p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œå¯ä»¥ä½¿ç”¨ <code>Stream</code> ä¸­çš„ <code>filter</code> è¿‡æ»¤æ‰æ— ç”¨çš„æ•°æ®ï¼Œå†è¿›è¡Œéå†ä¹Ÿæ˜¯ä¸€ç§å®‰å…¨çš„æ“ä½œé›†åˆçš„æ–¹å¼ã€‚</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>æˆ‘ä»¬ä¸èƒ½åœ¨éå†ä¸­ä½¿ç”¨é›†åˆ <code>map.remove()</code> æ¥åˆ é™¤æ•°æ®ï¼Œè¿™æ˜¯éå®‰å…¨çš„æ“ä½œæ–¹å¼ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨çš„ <code>iterator.remove()</code> çš„æ–¹æ³•æ¥åˆ é™¤æ•°æ®ï¼Œè¿™æ˜¯å®‰å…¨çš„åˆ é™¤é›†åˆçš„æ–¹å¼ã€‚åŒæ ·çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Lambda ä¸­çš„ <code>removeIf</code> æ¥æå‰åˆ é™¤æ•°æ®ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨ Stream ä¸­çš„ <code>filter</code> è¿‡æ»¤æ‰è¦åˆ é™¤çš„æ•°æ®è¿›è¡Œå¾ªç¯ï¼Œè¿™æ ·éƒ½æ˜¯å®‰å…¨çš„ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>for</code> å¾ªç¯å‰åˆ é™¤æ•°æ®åœ¨éå†ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>æœ¬æ–‡æˆ‘ä»¬è®²äº† HashMap 4 ç§éå†æ–¹å¼ï¼šè¿­ä»£å™¨ã€forã€lambdaã€streamï¼Œä»¥åŠå…·ä½“çš„ 7 ç§éå†æ–¹æ³•ï¼Œç»¼åˆæ€§èƒ½å’Œå®‰å…¨æ€§æ¥çœ‹ï¼Œ<strong>æˆ‘ä»¬åº”è¯¥å°½é‡ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ¥éå† <code>EntrySet</code> çš„éå†æ–¹å¼æ¥æ“ä½œ Map é›†åˆ</strong>ï¼Œè¿™æ ·å°±ä¼šæ—¢å®‰å…¨åˆé«˜æ•ˆäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¢å¼ºforå’Œé›†åˆçš„å››ç§éå†æ–¹å¼ä¼˜ç¼ºç‚¹</title>
      <link href="/2020/11/16/Java_5_%E5%A2%9E%E5%BC%BAfor%E5%92%8C%E9%9B%86%E5%90%88%E7%9A%84%E5%9B%9B%E7%A7%8D%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9/"/>
      <url>/2020/11/16/Java_5_%E5%A2%9E%E5%BC%BAfor%E5%92%8C%E9%9B%86%E5%90%88%E7%9A%84%E5%9B%9B%E7%A7%8D%E9%81%8D%E5%8E%86%E6%96%B9%E5%BC%8F%E4%BC%98%E7%BC%BA%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<p>å¢å¼ºforçš„å‡ºç°æ˜¯æ›¿ä»£è¿­ä»£å™¨çš„ï¼Œæ‰€ä»¥åœ¨éå†é›†åˆæˆ–è€…éå†æ•°ç»„å°±å¯ä»¥ä½¿ç”¨å¢å¼ºforå»å®Œæˆã€‚</p><p>å››ç§éå†æ–¹æ³•ï¼šè¿­ä»£å™¨ã€æ™®é€šforå¾ªç¯ã€å¢å¼ºforå¾ªç¯ã€(éé‡ç‚¹)listiterator(iteratorçš„å­æ¥å£)ä¸¤è€…ç›¸ç±»ä¼¼ã€‚</p><span id="more"></span><p>å¢å¼ºforå¾ªç¯çš„æ ¼å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(æ•°æ®å¤§ç±»å‹  å˜é‡å : æ•°ç»„æˆ–è€…é›†åˆå¯¹è±¡å)&#123;</span><br><span class="line">  è¾“å‡ºå˜é‡</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>  å¢å¼ºforå¾ªç¯çš„å¼Šç«¯ï¼š</p><ul><li><p>å¦‚æœé›†åˆçš„å¯¹è±¡æ˜¯nullï¼Œå¦‚æœå†æ¬¡å¯¹é›†åˆæ“ä½œï¼Œå°±ä¼šå‡ºç°å¼‚å¸¸ï¼›</p></li><li><p>å¯¹é›†åˆè¿›è¡Œåˆ¤æ–­ï¼Œéç©ºåˆ¤æ–­è§£å†³</p></li></ul><p>(è¿˜ä»¥ä¸€ç§Vectorè‡ªå¸¦çš„elements()æ–¹æ³•,ç±»ä¼¼äºè¿­ä»£å™¨çš„éå†æ–¹æ³•)</p><p>å¦‚æœé›†åˆä¸ºnull,æŠ›å‡º:java.lang.NullPointerException</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForExercise</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">ArrayList&lt;String&gt; array = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="comment">//array=null;</span></span><br><span class="line">array.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">array.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">array.add(<span class="string">&quot;worlid&quot;</span>);</span><br><span class="line"><span class="comment">// è¿­ä»£å™¨éå†</span></span><br><span class="line"><span class="comment">//ä¼˜ç‚¹:è‡ªå¸¦é€‰æ‹©åˆ¤æ–­è¯­å¥hasNext()æ–¹æ³•,ä¸ä¼šå‡ºç°éå†æ•°é‡å‡ºç°é”™è¯¯,ä¹¦å†™å¤æ‚</span></span><br><span class="line"><span class="comment">//    å¯ä»¥å¯¹é›†åˆè¿›è¡Œåˆ é™¤æ“ä½œ</span></span><br><span class="line"><span class="comment">//ç¼ºç‚¹:è¯¥æ–¹æ³•åªèƒ½éå†é›†åˆ,æ¯”è¾ƒå±€é™,ä¸”éœ€è¦å»ºç«‹å¯¹è±¡,å ç”¨ç©ºé—´å¤§</span></span><br><span class="line">Iterator&lt;String&gt; it = array.iterator();</span><br><span class="line"><span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> it.next();</span><br><span class="line">System.out.println(s);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;----------------&quot;</span>);</span><br><span class="line"><span class="comment">//æ™®é€šforå¾ªç¯</span></span><br><span class="line"><span class="comment">//ä¼˜ç‚¹:æœ‰åˆ¤æ–­æ•°ç»„é•¿åº¦çš„æ§åˆ¶è¯­å¥,å¹¶ä¸”å¯ä»¥é€‰æ‹©éå†é•¿åº¦,</span></span><br><span class="line"><span class="comment">//    forå¾ªç¯ä½¿ç”¨èŒƒå›´å¹¿,ä¸”ä½¿ç”¨ç®€å•</span></span><br><span class="line"><span class="comment">//ç¼ºç‚¹:forå¾ªç¯æ›´å¤šé€‚ç”¨äºå¾ªç¯æ¡ä»¶,ä¸èƒ½å¯¹é›†åˆæœ¬èº«è¿›è¡Œæ“ä½œ,å¯¹äºé›†åˆéå†ç¨æ˜¾ä¸è¶³</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> x=<span class="number">0</span>;x&lt;array.size();x++) &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> array.get(x);</span><br><span class="line">System.out.println(s1);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line"><span class="comment">//å¢å¼ºforå¾ªç¯</span></span><br><span class="line"><span class="comment">//ä¼˜ç‚¹:ä»£ç ç®€å•æ˜“è¯»,ä¹¦å†™æ–¹ä¾¿</span></span><br><span class="line"><span class="comment">//ç¼ºç‚¹:ä¸èƒ½å¯¹é›†åˆæœ¬èº«è¿›è¡Œæ“ä½œ</span></span><br><span class="line"><span class="keyword">for</span>(String b:array) &#123;</span><br><span class="line">System.out.println(b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èº«ä»½è¯å·¥å…·ç±»</title>
      <link href="/2020/11/01/Java_4_IDCardUtil/"/>
      <url>/2020/11/01/Java_4_IDCardUtil/</url>
      
        <content type="html"><![CDATA[<p>æ ¡éªŒèº«ä»½è¯å·ï¼›</p><p>æ ¹æ®èº«ä»½è¯å·è·å–å¹´é¾„ã€å‡ºç”Ÿæ—¥æœŸã€æ€§åˆ«ã€‚</p><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IDCardUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 15ä½èº«ä»½è¯å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">FIFTEEN_ID_CARD</span> <span class="operator">=</span> <span class="number">15</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 18ä½èº«ä»½è¯å·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">EIGHTEEN_ID_CARD</span> <span class="operator">=</span> <span class="number">18</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SimpleDateFormat</span> <span class="variable">format</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®èº«ä»½è¯å·è·å–æ€§åˆ«</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> IDCard</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getSex</span><span class="params">(String IDCard)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(IDCard)) &#123;</span><br><span class="line">            <span class="comment">// 15ä½èº«ä»½è¯å·</span></span><br><span class="line">            <span class="keyword">if</span> (IDCard.length() == FIFTEEN_ID_CARD) &#123;</span><br><span class="line">                <span class="keyword">if</span> (Integer.parseInt(IDCard.substring(<span class="number">14</span>, <span class="number">15</span>)) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    sex = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    sex = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 18ä½èº«ä»½è¯å·</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (IDCard.length() == EIGHTEEN_ID_CARD) &#123;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­æ€§åˆ«</span></span><br><span class="line">                <span class="keyword">if</span> (Integer.parseInt(IDCard.substring(<span class="number">16</span>).substring(<span class="number">0</span>, <span class="number">1</span>)) % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                    sex = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    sex = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®èº«ä»½è¯å·è·å–å¹´é¾„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> IDCard</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">getAge</span><span class="params">(String IDCard)</span> &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(IDCard) &amp;&amp; isValid(IDCard)) &#123;</span><br><span class="line">            <span class="comment">// 15ä½èº«ä»½è¯å·</span></span><br><span class="line">            <span class="keyword">if</span> (IDCard.length() == FIFTEEN_ID_CARD) &#123;</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„å¹´ä»½(15ä½èº«ä»½è¯ä¸º1980å¹´å‰çš„)</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">uyear</span> <span class="operator">=</span> <span class="string">&quot;19&quot;</span> + IDCard.substring(<span class="number">6</span>, <span class="number">8</span>);</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„æœˆä»½</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">uyue</span> <span class="operator">=</span> IDCard.substring(<span class="number">8</span>, <span class="number">10</span>);</span><br><span class="line">                <span class="comment">// å½“å‰å¹´ä»½</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">fyear</span> <span class="operator">=</span> format.format(date).substring(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">                <span class="comment">// å½“å‰æœˆä»½</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">fyue</span> <span class="operator">=</span> format.format(date).substring(<span class="number">5</span>, <span class="number">7</span>);</span><br><span class="line">                <span class="keyword">if</span> (Integer.parseInt(uyue) &lt;= Integer.parseInt(fyue)) &#123;</span><br><span class="line">                    age = Integer.parseInt(fyear) - Integer.parseInt(uyear) + <span class="number">1</span>;</span><br><span class="line">                    <span class="comment">// å½“å‰ç”¨æˆ·è¿˜æ²¡è¿‡ç”Ÿ</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    age = Integer.parseInt(fyear) - Integer.parseInt(uyear);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 18ä½èº«ä»½è¯å·</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (IDCard.length() == EIGHTEEN_ID_CARD) &#123;</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„å¹´ä»½</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">year</span> <span class="operator">=</span> IDCard.substring(<span class="number">6</span>).substring(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„æœˆä»½</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">yue</span> <span class="operator">=</span> IDCard.substring(<span class="number">10</span>).substring(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">                <span class="comment">// å½“å‰å¹´ä»½</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">fyear</span> <span class="operator">=</span> format.format(date).substring(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">                <span class="comment">// å½“å‰æœˆä»½</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">fyue</span> <span class="operator">=</span> format.format(date).substring(<span class="number">5</span>, <span class="number">7</span>);</span><br><span class="line">                <span class="comment">// å½“å‰æœˆä»½å¤§äºç”¨æˆ·å‡ºèº«çš„æœˆä»½è¡¨ç¤ºå·²è¿‡ç”Ÿæ—¥</span></span><br><span class="line">                <span class="keyword">if</span> (Integer.parseInt(yue) &lt;= Integer.parseInt(fyue)) &#123;</span><br><span class="line">                    age = Integer.parseInt(fyear) - Integer.parseInt(year) + <span class="number">1</span>;</span><br><span class="line">                    <span class="comment">// å½“å‰ç”¨æˆ·è¿˜æ²¡è¿‡ç”Ÿæ—¥</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    age = Integer.parseInt(fyear) - Integer.parseInt(year);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å‡ºç”Ÿæ—¥æœŸ yyyyå¹´MMæœˆddæ—¥</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> IDCard</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getBirthday</span><span class="params">(String IDCard)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">birthday</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">year</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">month</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">day</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotBlank(IDCard)) &#123;</span><br><span class="line">            <span class="comment">// 15ä½èº«ä»½è¯å·</span></span><br><span class="line">            <span class="keyword">if</span> (IDCard.length() == FIFTEEN_ID_CARD) &#123;</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„å¹´ä»½(15ä½èº«ä»½è¯ä¸º1980å¹´å‰çš„)</span></span><br><span class="line">                year = <span class="string">&quot;19&quot;</span> + IDCard.substring(<span class="number">6</span>, <span class="number">8</span>);</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„æœˆä»½</span></span><br><span class="line">                month = IDCard.substring(<span class="number">8</span>, <span class="number">10</span>);</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„æ—¥æœŸ</span></span><br><span class="line">                day = IDCard.substring(<span class="number">10</span>, <span class="number">12</span>);</span><br><span class="line">                <span class="comment">// 18ä½èº«ä»½è¯å·</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (IDCard.length() == EIGHTEEN_ID_CARD) &#123;</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„å¹´ä»½</span></span><br><span class="line">                year = IDCard.substring(<span class="number">6</span>).substring(<span class="number">0</span>, <span class="number">4</span>);</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„æœˆä»½</span></span><br><span class="line">                month = IDCard.substring(<span class="number">10</span>).substring(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">                <span class="comment">// èº«ä»½è¯ä¸Šçš„æ—¥æœŸ</span></span><br><span class="line">                day = IDCard.substring(<span class="number">12</span>).substring(<span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            birthday = year + <span class="string">&quot;-&quot;</span> + month + <span class="string">&quot;-&quot;</span> + day;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * èº«ä»½è¯éªŒè¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     *            å·ç å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">validResult</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">Pattern</span> <span class="variable">idNumPattern</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(^[1-9]\\d&#123;5&#125;(18|19|([23]\\d))\\d&#123;2&#125;((0[1-9])|(10|11|12))(([0-2][1-9])&quot;</span> +</span><br><span class="line">                <span class="string">&quot;|10|20|30|31)\\d&#123;3&#125;[0-9Xx]$)|(^[1-9]\\d&#123;5&#125;\\d&#123;2&#125;((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d&#123;2&#125;$)&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¼å¼éªŒè¯</span></span><br><span class="line">        <span class="keyword">if</span> (!idNumPattern.matcher(id).matches())&#123;</span><br><span class="line">            validResult = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ ¡éªŒé•¿åº¦åªèƒ½ä¸º15æˆ–18</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> id.length();</span><br><span class="line">        <span class="keyword">if</span> (len != FIFTEEN_ID_CARD &amp;&amp; len != EIGHTEEN_ID_CARD) &#123;</span><br><span class="line">            validResult = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> validResult;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠ½å¥–ï¼ˆç”Ÿæˆä¸é‡å¤éšæœºæ•°ï¼‰</title>
      <link href="/2020/10/28/Java_3_core_array_lottery/"/>
      <url>/2020/10/28/Java_3_core_array_lottery/</url>
      
        <content type="html"><![CDATA[<p>â€‹    æ¥è‡ªã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ã€‹æ•°ç»„ç« èŠ‚çš„æ¡ˆä¾‹ï¼Œæ ¹æ®å¼€å¥–çš„æ•°é‡å’Œå¼€å¥–çš„æœ€å¤§å€¼è¾“å‡ºä¸é‡å¤éšæœºæ•°ï¼Œå³å¼€å¥–ç»“æœã€‚</p><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Lottery</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¼€å¥–çš„æ•°é‡ï¼š&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¼€å¥–çš„æœ€å¤§å€¼ï¼š&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> in.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¡«å……æ•°ç»„ï¼š1ï¼Œ2ï¼Œ3ï¼Œ...ï¼Œn</span></span><br><span class="line">        <span class="type">int</span>[] numbers = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numbers.length; i++) &#123;</span><br><span class="line">            numbers[i] = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[k];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; result.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> (<span class="type">int</span>) (Math.random() * n);<span class="comment">//ç”Ÿæˆä¸€ä¸ª0~ï¼ˆn-1ï¼‰ä¹‹é—´çš„éšæœºç´¢å¼•</span></span><br><span class="line">            result[i] = numbers[r];</span><br><span class="line">            numbers[r] = numbers[n - <span class="number">1</span>];<span class="comment">//å°†numbersæ•°ç»„çš„æœ€åä¸€ä¸ªå€¼èµ‹ç»™ä¸Šä¸€æ­¥ç”Ÿæˆçš„â€œéšæœºæ•°â€æ‰€åœ¨çš„ç´¢å¼•ä½ç½®ï¼Œé¿å…ç”Ÿæˆé‡å¤ç»“æœ</span></span><br><span class="line">            n--;</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(result);</span><br><span class="line">        System.out.println(<span class="string">&quot;å¼€å¥–ç»“æœä¸ºï¼š&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> r : result) &#123;</span><br><span class="line">            System.out.println(r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·å–æ—¶é—´å·®</title>
      <link href="/2020/10/24/Java_2_getTimeDeffer/"/>
      <url>/2020/10/24/Java_2_getTimeDeffer/</url>
      
        <content type="html"><![CDATA[<p>  æ ¹æ®ä¸¤ä¸ªå­—ç¬¦ä¸²ç±»å‹æ—¶é—´è·å–æ—¶åˆ†ç§’æ—¶é—´å·®ã€‚</p><span id="more"></span><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è·å–æ—¶é—´å·®</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> time1 time2 éœ€è¦è®¡ç®—çš„æ—¶é—´</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getTimeDeffer</span><span class="params">(String time1, String time2)</span> &#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> (time1 != <span class="literal">null</span> &amp;&amp; time2 != <span class="literal">null</span> &amp;&amp; time1.length() != <span class="number">0</span> &amp;&amp; time2.length() != <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               <span class="type">long</span> <span class="variable">dt1</span> <span class="operator">=</span> sdf.parse(time1).getTime();</span><br><span class="line">               <span class="type">long</span> <span class="variable">dt2</span> <span class="operator">=</span> sdf.parse(time2).getTime();</span><br><span class="line">               <span class="type">long</span> <span class="variable">dc</span> <span class="operator">=</span> Math.abs(dt2 - dt1);</span><br><span class="line">               <span class="type">long</span> <span class="variable">seconds</span> <span class="operator">=</span> dc / <span class="number">1000</span>;</span><br><span class="line">               <span class="type">long</span> <span class="variable">date</span> <span class="operator">=</span> seconds / (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>);     <span class="comment">//ç›¸å·®çš„å¤©æ•°</span></span><br><span class="line">               <span class="type">long</span> <span class="variable">hour</span> <span class="operator">=</span> (seconds - date * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>) / (<span class="number">60</span> * <span class="number">60</span>);<span class="comment">//ç›¸å·®çš„å°æ—¶æ•°</span></span><br><span class="line">               <span class="type">long</span> <span class="variable">minut</span> <span class="operator">=</span> (seconds - date * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> - hour * <span class="number">60</span> * <span class="number">60</span>) / (<span class="number">60</span>);<span class="comment">//ç›¸å·®çš„åˆ†é’Ÿæ•°</span></span><br><span class="line">               <span class="type">long</span> <span class="variable">second</span> <span class="operator">=</span> (seconds - date * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> - hour * <span class="number">60</span> * <span class="number">60</span> - minut * <span class="number">60</span>);<span class="comment">//ç›¸å·®çš„ç§’æ•°</span></span><br><span class="line">               <span class="keyword">return</span> (date == <span class="number">0</span> ? <span class="string">&quot;&quot;</span> : (date + <span class="string">&quot;å¤©&quot;</span>)) + (hour == <span class="number">0</span> ? <span class="string">&quot;&quot;</span> : (hour + <span class="string">&quot;å°æ—¶&quot;</span>)) + (minut == <span class="number">0</span> ? <span class="string">&quot;&quot;</span> : (minut + <span class="string">&quot;åˆ†&quot;</span>)) + (second == <span class="number">0</span> ? <span class="string">&quot;&quot;</span> : (second + <span class="string">&quot;ç§’&quot;</span>));</span><br><span class="line">           &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> result;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stringã€StringBufferå’ŒStringBuilderçš„åŒºåˆ«</title>
      <link href="/2020/10/20/Java_1_String-StringBuffer-StringBuilder/"/>
      <url>/2020/10/20/Java_1_String-StringBuffer-StringBuilder/</url>
      
        <content type="html"><![CDATA[<p>stringã€stringbufferå’Œstringbuilderçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿstringä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„ï¼Ÿ</p><span id="more"></span><h2 id="Answerï¼š"><a href="#Answerï¼š" class="headerlink" title="Answerï¼š"></a>Answerï¼š</h2><ul><li><p><code>String</code> ç±»ä¸­ä½¿ç”¨ final å…³é”®å­—ä¿®é¥°å­—ç¬¦æ•°ç»„æ¥ä¿å­˜å­—ç¬¦ä¸²ï¼Œ<code>private final char value[]</code>ï¼Œæ‰€ä»¥<code>String</code> å¯¹è±¡æ˜¯ä¸å¯å˜çš„ã€‚</p><blockquote><p>è¡¥å……ï¼šåœ¨ Java 9 ä¹‹åï¼ŒString ã€<code>StringBuilder</code> ä¸ <code>StringBuffer</code> çš„å®ç°æ”¹ç”¨ byte æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸² <code>private final byte[] value</code></p></blockquote><p>è€Œ <code>StringBuilder</code> ä¸ <code>StringBuffer</code> éƒ½ç»§æ‰¿è‡ª <code>AbstractStringBuilder</code> ç±»ï¼Œåœ¨ <code>AbstractStringBuilder</code> ä¸­ä¹Ÿæ˜¯ä½¿ç”¨å­—ç¬¦æ•°ç»„ä¿å­˜å­—ç¬¦ä¸²<code>char[]value</code> ä½†æ˜¯æ²¡æœ‰ç”¨ <code>final</code> å…³é”®å­—ä¿®é¥°ï¼Œæ‰€ä»¥è¿™ä¸¤ç§å¯¹è±¡éƒ½æ˜¯å¯å˜çš„ã€‚</p></li><li><p><code>StringBuffer</code> å¯¹æ–¹æ³•åŠ äº†åŒæ­¥é”æˆ–è€…å¯¹è°ƒç”¨çš„æ–¹æ³•åŠ äº†åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚<code>StringBuilder</code> å¹¶æ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡ŒåŠ åŒæ­¥é”ï¼Œæ‰€ä»¥æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p></li><li><p>æ¯æ¬¡å¯¹ <code>String</code> ç±»å‹è¿›è¡Œæ”¹å˜çš„æ—¶å€™ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ <code>String</code> å¯¹è±¡ï¼Œç„¶åå°†æŒ‡é’ˆæŒ‡å‘æ–°çš„ <code>String</code> å¯¹è±¡ã€‚<code>StringBuffer</code> æ¯æ¬¡éƒ½ä¼šå¯¹ <code>StringBuffer</code> å¯¹è±¡æœ¬èº«è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯ç”Ÿæˆæ–°çš„å¯¹è±¡å¹¶æ”¹å˜å¯¹è±¡å¼•ç”¨ã€‚ç›¸åŒæƒ…å†µä¸‹ä½¿ç”¨ <code>StringBuilder</code> ç›¸æ¯”ä½¿ç”¨ <code>StringBuffer</code> ä»…èƒ½è·å¾— 10%~15% å·¦å³çš„æ€§èƒ½æå‡ï¼Œä½†å´è¦å†’å¤šçº¿ç¨‹ä¸å®‰å…¨çš„é£é™©ã€‚</p></li><li><p>æ“ä½œå°‘é‡çš„æ•°æ®: é€‚ç”¨ <code>String</code></p></li><li><p>å•çº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ®: é€‚ç”¨ <code>StringBuilder</code></p></li><li><p>å¤šçº¿ç¨‹æ“ä½œå­—ç¬¦ä¸²ç¼“å†²åŒºä¸‹æ“ä½œå¤§é‡æ•°æ®: é€‚ç”¨ <code>StringBuffer</code></p></li></ul><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="1-Stringå¯¹è±¡çš„ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š"><a href="#1-Stringå¯¹è±¡çš„ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š" class="headerlink" title="1.Stringå¯¹è±¡çš„ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š"></a>1.Stringå¯¹è±¡çš„ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š</h3><blockquote><p>ä»æ¦‚å¿µä¸Šè®²ï¼ŒJavaå­—ç¬¦ä¸²å°±æ˜¯Unicodeå­—ç¬¦åºåˆ—ã€‚ä¾‹å¦‚ï¼Œä¸²â€Java\u2122â€ ç”±5ä¸ªUnicodeå­—ç¬¦Jã€ aã€ vã€ aå’ŒTMã€‚Javaæ²¡æœ‰å†…ç½®çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œè€Œæ˜¯åœ¨æ ‡å‡†Javaç±»åº“ä¸­æä¾›äº†ä¸€ä¸ªé¢„å®šä¹‰ç±»ï¼Œå¾ˆè‡ªç„¶åœ°å«åšStringã€‚æ¯ä¸ªç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²éƒ½æ˜¯Strinqç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;abcd&quot;</span>;</span><br><span class="line">     <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;abcd&quot;</span>);</span><br><span class="line">     System.out.println(str1==str2);<span class="comment">//false</span></span><br></pre></td></tr></table></figure><p><img src="https://andornotblog.oss-cn-beijing.aliyuncs.com/imgs/java1_1.png" alt="image-20210827170942332"></p><p>è¿™ä¸¤ç§ä¸åŒçš„åˆ›å»ºæ–¹æ³•æ˜¯æœ‰å·®åˆ«çš„ï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯åœ¨å¸¸é‡æ± ä¸­æ‹¿å¯¹è±¡ï¼Œç¬¬äºŒç§æ–¹å¼æ˜¯ç›´æ¥åœ¨å †å†…å­˜ç©ºé—´åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><p><strong>String ç±»å‹çš„å¸¸é‡æ± æ¯”è¾ƒç‰¹æ®Šã€‚å®ƒçš„ä¸»è¦ä½¿ç”¨æ–¹æ³•æœ‰ä¸¤ç§ï¼š</strong></p><ul><li>ç›´æ¥ä½¿ç”¨åŒå¼•å·å£°æ˜å‡ºæ¥çš„ String å¯¹è±¡ä¼šç›´æ¥å­˜å‚¨åœ¨å¸¸é‡æ± ä¸­ã€‚</li><li>å¦‚æœä¸æ˜¯ç”¨åŒå¼•å·å£°æ˜çš„ String å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ String æä¾›çš„ intern æ–¹æ³•ã€‚String.intern() æ˜¯ä¸€ä¸ª Native æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼šå¦‚æœè¿è¡Œæ—¶å¸¸é‡æ± ä¸­å·²ç»åŒ…å«ä¸€ä¸ªç­‰äºæ­¤ String å¯¹è±¡å†…å®¹çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å¸¸é‡æ± ä¸­è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­åˆ›å»ºä¸æ­¤ String å†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›å¸¸é‡æ± ä¸­åˆ›å»ºçš„å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</li></ul><p>String.intern()æ–¹æ³•ä¸»è¦é€‚ç”¨äºç¨‹åºä¸­éœ€è¦ä¿å­˜æœ‰é™ä¸ªä¼šè¢«åå¤ä½¿ç”¨çš„å€¼çš„åœºæ™¯ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å†…å­˜æ¶ˆè€—ï¼ŒåŒæ—¶åœ¨è¿›è¡Œæ¯”è¾ƒæ“ä½œæ—¶å‡å°‘æ—¶è€—ï¼Œæé«˜ç¨‹åºæ€§èƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;è®¡ç®—æœº&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> s1.intern();</span><br><span class="line"><span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;è®¡ç®—æœº&quot;</span>;</span><br><span class="line">System.out.println(s2);<span class="comment">//è®¡ç®—æœº</span></span><br><span class="line">System.out.println(s1 == s2);<span class="comment">//falseï¼Œå› ä¸ºä¸€ä¸ªæ˜¯å †å†…å­˜ä¸­çš„Stringå¯¹è±¡ä¸€ä¸ªæ˜¯å¸¸é‡æ± ä¸­çš„Stringå¯¹è±¡ï¼Œ</span></span><br><span class="line">System.out.println(s3 == s2);<span class="comment">//trueï¼Œå› ä¸ºä¸¤ä¸ªéƒ½æ˜¯å¸¸é‡æ± ä¸­çš„Stringå¯¹è±¡</span></span><br></pre></td></tr></table></figure><h3 id="2-String-å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#2-String-å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="2.String å­—ç¬¦ä¸²æ‹¼æ¥"></a>2.String å­—ç¬¦ä¸²æ‹¼æ¥</h3><p>å¦‚æœä¸€ä¸ªStringç±»å‹å’Œä¸€ä¸ªéStringç±»å‹è¿›è¡Œæ‹¼æ¥ï¼ŒStringç±»å‹åœ¨å‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">ans</span> <span class="operator">=</span> s + num;</span><br></pre></td></tr></table></figure><p>é¢è¯•é¢˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;str&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;ing&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="string">&quot;str&quot;</span> + <span class="string">&quot;ing&quot;</span>;<span class="comment">//å¸¸é‡æ± ä¸­çš„å¯¹è±¡</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str4</span> <span class="operator">=</span> str1 + str2; <span class="comment">//åœ¨å †ä¸Šåˆ›å»ºçš„æ–°çš„å¯¹è±¡  </span></span><br><span class="line"><span class="type">String</span> <span class="variable">str5</span> <span class="operator">=</span> <span class="string">&quot;string&quot;</span>;<span class="comment">//å¸¸é‡æ± ä¸­çš„å¯¹è±¡</span></span><br><span class="line">System.out.println(str3 == str4);<span class="comment">//false</span></span><br><span class="line">System.out.println(str3 == str5);<span class="comment">//true</span></span><br><span class="line">System.out.println(str4 == str5);<span class="comment">//false</span></span><br></pre></td></tr></table></figure><h3 id="3-ç©ºå€¼ä¸Nullä¸²"><a href="#3-ç©ºå€¼ä¸Nullä¸²" class="headerlink" title="3.ç©ºå€¼ä¸Nullä¸²"></a>3.ç©ºå€¼ä¸Nullä¸²</h3><p>æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦ä¸²æ—¢ä¸æ˜¯<code>null</code>ï¼Œä¹Ÿä¸ä¸ºç©ºä¸²ï¼Œè¿™ç§æƒ…å†µä½¿ç”¨ä»¥ä¸‹æ¡ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(str != <span class="literal">null</span> &amp;&amp; str.length() != <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>é¦–å…ˆè¦æ£€æŸ¥strä¸ä¸ºnullã€‚</p><h3 id="4-String-API"><a href="#4-String-API" class="headerlink" title="4.String API"></a>4.String API</h3><ul><li><p><strong>int compareTo (String other)</strong></p><p>æŒ‰ç…§å­—å…¸é¡ºåº,å¦‚æœå­—ç¬¦ä¸²ä½äºotherä¹‹å‰,è¿”å›ä¸€ä¸ªè´Ÿæ•°;å¦‚æœå­—ç¬¦ä¸²ä½äºotherä¹‹å,è¿”å›ä¸€ä¸ªæ­£æ•°;å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰,è¿”å›0ã€‚</p></li><li><p><strong>boolean startsWith (String prefix)</strong></p></li><li><p><strong>boolean endsWith (String suffix)</strong></p><p>å¦‚æœå­—ç¬¦ä¸²ä»¥suffixå¼€å¤´æˆ–ç»“å°¾,åˆ™è¿”å›trueã€‚</p></li><li><p><strong>int indexOf (String str)</strong></p><p><strong>int indexof (String str, int fromlndex)</strong></p><p><strong>int indexOf (int cp)</strong></p><p><strong>int indexof (int cp, int fromlndex)</strong></p><p>è¿”å›ä¸å­—ç¬¦ä¸²stræˆ–ä»£ç ç‚¹cpåŒ¹é…çš„ç¬¬ä¸€ä¸ªå­ä¸²çš„å¼€å§‹ä½ç½®ã€‚è¿™ä¸ªä½ç½®ä»ç´¢å¼•0æˆ–fromlndexå¼€å§‹è®¡ç®—ã€‚å¦‚æœåœ¨åŸå§‹ä¸²ä¸­ä¸å­˜åœ¨str,è¿”å›-1 </p></li><li><p><strong>String trim ()</strong></p><p>è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²å°†åˆ é™¤äº†åŸå§‹å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼ã€‚</p></li><li><p><strong>String join (CharSequence delimiter,CharSequenceâ€¦elements) 8</strong></p><p>è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²,ç”¨ç»™å®šçš„å®šç•Œç¬¦è¿æ¥æ‰€æœ‰å…ƒç´ ã€‚</p></li></ul><h2 id="StringBuilder-å’ŒStringBuffer"><a href="#StringBuilder-å’ŒStringBuffer" class="headerlink" title="StringBuilder å’ŒStringBuffer"></a>StringBuilder å’ŒStringBuffer</h2><h3 id="1-æ„å»ºå­—ç¬¦ä¸²æ„å»ºå™¨"><a href="#1-æ„å»ºå­—ç¬¦ä¸²æ„å»ºå™¨" class="headerlink" title="1.æ„å»ºå­—ç¬¦ä¸²æ„å»ºå™¨"></a>1.æ„å»ºå­—ç¬¦ä¸²æ„å»ºå™¨</h3><p>æœ‰äº›æ—¶å€™,éœ€è¦ç”±è¾ƒçŸ­çš„å­—ç¬¦ä¸²æ„å»ºå­—ç¬¦ä¸²,ä¾‹å¦‚,æŒ‰é”®æˆ–æ¥è‡ªæ–‡ä»¶ä¸­çš„å•è¯ã€‚é‡‡ç”¨å­—ç¬¦ä¸²è¿æ¥çš„æ–¹å¼è¾¾åˆ°æ­¤ç›®çš„æ•ˆç‡æ¯”è¾ƒä½ã€‚æ¯æ¬¡è¿æ¥å­—ç¬¦ä¸²,éƒ½ä¼šæ„å»ºä¸€ä¸ªæ–°çš„Stringå¯¹è±¡,æ—¢è€—æ—¶,åˆæµªè´¹ç©ºé—´ã€‚</p><p>ä½¿ç”¨StringBuilderç±»å°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜çš„å‘ç”Ÿ,å¦‚æœéœ€è¦ç”¨è®¸å¤šå°æ®µçš„å­—ç¬¦ä¸²æ„å»ºä¸€ä¸ªå­—ç¬¦ä¸²,é‚£ä¹ˆåº”è¯¥æŒ‰ç…§ä¸‹åˆ—æ­¥éª¤è¿›è¡Œã€‚</p><p>é¦–å…ˆ,æ„å»ºä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²æ„å»ºå™¨:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br></pre></td></tr></table></figure><p>å½“æ¯æ¬¡éœ€è¦æ·»åŠ ä¸€éƒ¨åˆ†å†…å®¹æ—¶,å°±è°ƒç”¨appendæ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">builder. append (ch); <span class="comment">// appends a single character </span></span><br><span class="line"></span><br><span class="line">builder. append(str); <span class="comment">// appends a string</span></span><br></pre></td></tr></table></figure><p>åœ¨éœ€è¦æ„å»ºå­—ç¬¦ä¸²æ—¶å°±è°ƒç”¨toStringæ–¹æ³•,å°†å¯ä»¥å¾—åˆ°ä¸€ä¸ªStringå¯¹è±¡,å…¶ä¸­åŒ…å«äº†æ„å»ºå™¨ä¸­çš„å­—ç¬¦åºåˆ—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">completedString</span> <span class="operator">=</span> builder. toString();</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨é‡Š:åœ¨JDK5.0ä¸­å¼•å…¥StringBuilderç±»ã€‚è¿™ä¸ªç±»çš„å‰èº«æ˜¯StringBuffer,å…¶æ•ˆç‡ç¨æœ‰äº›ä½,ä½†å…è®¸é‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œæ·»åŠ æˆ–åˆ é™¤å­—ç¬¦çš„æ“ä½œã€‚å¦‚æœæ‰€æœ‰å­—ç¬¦ä¸²åœ¨ä¸€ä¸ªå•çº¿ç¨‹ä¸­ç¼–è¾‘(é€šå¸¸éƒ½æ˜¯è¿™æ ·) ,åˆ™åº”è¯¥ç”¨StringBuilderæ›¿ä»£å®ƒã€‚<strong>è¿™ä¸¤ä¸ªç±»çš„APIæ˜¯ç›¸åŒçš„ã€‚</strong> </p></blockquote><h3 id="2-å¸¸ç”¨API"><a href="#2-å¸¸ç”¨API" class="headerlink" title="2.å¸¸ç”¨API"></a>2.å¸¸ç”¨API</h3><ul><li><p><strong>StringBuilder append (String str)</strong></p><p>è¿½åŠ ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›this</p></li><li><p><strong>StringBuilder append (char c)</strong></p><p>è¿½åŠ ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›this</p></li><li><p><strong>StringBuilder appendCodePoint (int cp)</strong></p><p>è¿½åŠ ä¸€ä¸ªä»£ç ç‚¹,å¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæˆ–ä¸¤ä¸ªä»£ç å•å…ƒå¹¶è¿”å›this</p></li><li><p><strong>void setCharAt (inti, char c)</strong></p><p>å°†ç¬¬iä¸ªä»£ç å•å…ƒè®¾ç½®ä¸ºc</p></li><li><p><strong>StringBuilder insert (int offset, String str)</strong></p><p>åœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›this</p></li><li><p><strong>StringBuilder insert (int offset, Char c)</strong></p><p>åœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›this</p></li><li><p><strong>StringBuilder delete (int startindex, int endindex)</strong></p><p>åˆ é™¤åç§»é‡ä»startIndexåˆ°-endindex-1çš„ä»£ç å•å…ƒå¹¶è¿”å›this.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XXX</title>
      <link href="/2020/08/19/1XX_1_XXXX%20-%20%E5%89%AF%E6%9C%AC/"/>
      <url>/2020/08/19/1XX_1_XXXX%20-%20%E5%89%AF%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<iframe src="//player.bilibili.com/player.html?aid=215415683&bvid=BV1Ca411W7v9&cid=758386589&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><span id="more"></span><p><img src="D:\Blog\source_posts\1XX_1_XXXX.assets\java11_2.png"></p>]]></content>
      
      
      <categories>
          
          <category> XX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XXX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XXX</title>
      <link href="/2020/08/19/1XX_1_XXXX/"/>
      <url>/2020/08/19/1XX_1_XXXX/</url>
      
        <content type="html"><![CDATA[<p><font color='red'>å†’å·åŠ ç©ºæ ¼</font></p><p>HTTPçš„å…¨ç§°æ˜¯ï¼šHyper Text Transfer Protocolï¼Œæ„ä¸º è¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚å®ƒæŒ‡çš„æ˜¯æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´äº¤äº’å¿…é¡»éµå¾ªçš„ä¸€é—®ä¸€ç­”çš„è§„åˆ™ã€‚å½¢å®¹è¿™ä¸ªè§„åˆ™ï¼šé—®ç­”æœºåˆ¶ã€æ¡æ‰‹æœºåˆ¶ã€‚</p><p>å®ƒè§„èŒƒäº†è¯·æ±‚å’Œå“åº”å†…å®¹çš„ç±»å‹å’Œæ ¼å¼ã€‚</p><p>HTTPåè®®æ˜¯ç”±<code>W3C</code>ç»„ç»‡ç®¡ç†å’Œç»´æŠ¤çš„ã€‚</p><span id="more"></span><p><img src="D:\Blog\source_posts\1XX_1_XXXX.assets\java11_2.png"></p><iframe src="//player.bilibili.com/player.html?aid=215415683&bvid=BV1Ca411W7v9&cid=758386589&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>]]></content>
      
      
      <categories>
          
          <category> XX </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XXX </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
